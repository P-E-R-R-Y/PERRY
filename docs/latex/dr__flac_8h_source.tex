\doxysection{dr\+\_\+flac.\+h}
\hypertarget{dr__flac_8h_source}{}\label{dr__flac_8h_source}\index{/Users/perrychouteau/Documents/GitHub/PERRY/project/build/\_deps/raylib-\/src/src/external/dr\_flac.h@{/Users/perrychouteau/Documents/GitHub/PERRY/project/build/\_deps/raylib-\/src/src/external/dr\_flac.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{FLAC\ audio\ decoder.\ Choice\ of\ public\ domain\ or\ MIT-\/0.\ See\ license\ statements\ at\ the\ end\ of\ this\ file.}}
\DoxyCodeLine{00003\ \textcolor{comment}{dr\_flac\ -\/\ v0.12.42\ -\/\ 2023-\/11-\/02}}
\DoxyCodeLine{00004\ \textcolor{comment}{}}
\DoxyCodeLine{00005\ \textcolor{comment}{David\ Reid\ -\/\ mackron@gmail.com}}
\DoxyCodeLine{00006\ \textcolor{comment}{}}
\DoxyCodeLine{00007\ \textcolor{comment}{GitHub:\ https://github.com/mackron/dr\_libs}}
\DoxyCodeLine{00008\ \textcolor{comment}{*/}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{comment}{/*}}
\DoxyCodeLine{00011\ \textcolor{comment}{RELEASE\ NOTES\ -\/\ v0.12.0}}
\DoxyCodeLine{00012\ \textcolor{comment}{=======================}}
\DoxyCodeLine{00013\ \textcolor{comment}{Version\ 0.12.0\ has\ breaking\ API\ changes\ including\ changes\ to\ the\ existing\ API\ and\ the\ removal\ of\ deprecated\ APIs.}}
\DoxyCodeLine{00014\ \textcolor{comment}{}}
\DoxyCodeLine{00015\ \textcolor{comment}{}}
\DoxyCodeLine{00016\ \textcolor{comment}{Improved\ Client-\/Defined\ Memory\ Allocation}}
\DoxyCodeLine{00017\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00018\ \textcolor{comment}{The\ main\ change\ with\ this\ release\ is\ the\ addition\ of\ a\ more\ flexible\ way\ of\ implementing\ custom\ memory\ allocation\ routines.\ The}}
\DoxyCodeLine{00019\ \textcolor{comment}{existing\ system\ of\ DRFLAC\_MALLOC,\ DRFLAC\_REALLOC\ and\ DRFLAC\_FREE\ are\ still\ in\ place\ and\ will\ be\ used\ by\ default\ when\ no\ custom}}
\DoxyCodeLine{00020\ \textcolor{comment}{allocation\ callbacks\ are\ specified.}}
\DoxyCodeLine{00021\ \textcolor{comment}{}}
\DoxyCodeLine{00022\ \textcolor{comment}{To\ use\ the\ new\ system,\ you\ pass\ in\ a\ pointer\ to\ a\ drflac\_allocation\_callbacks\ object\ to\ drflac\_open()\ and\ family,\ like\ this:}}
\DoxyCodeLine{00023\ \textcolor{comment}{}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ \ \ \ void*\ my\_malloc(size\_t\ sz,\ void*\ pUserData)}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ \ \ \ \{}}
\DoxyCodeLine{00026\ \textcolor{comment}{\ \ \ \ \ \ \ \ return\ malloc(sz);}}
\DoxyCodeLine{00027\ \textcolor{comment}{\ \ \ \ \}}}
\DoxyCodeLine{00028\ \textcolor{comment}{\ \ \ \ void*\ my\_realloc(void*\ p,\ size\_t\ sz,\ void*\ pUserData)}}
\DoxyCodeLine{00029\ \textcolor{comment}{\ \ \ \ \{}}
\DoxyCodeLine{00030\ \textcolor{comment}{\ \ \ \ \ \ \ \ return\ realloc(p,\ sz);}}
\DoxyCodeLine{00031\ \textcolor{comment}{\ \ \ \ \}}}
\DoxyCodeLine{00032\ \textcolor{comment}{\ \ \ \ void\ my\_free(void*\ p,\ void*\ pUserData)}}
\DoxyCodeLine{00033\ \textcolor{comment}{\ \ \ \ \{}}
\DoxyCodeLine{00034\ \textcolor{comment}{\ \ \ \ \ \ \ \ free(p);}}
\DoxyCodeLine{00035\ \textcolor{comment}{\ \ \ \ \}}}
\DoxyCodeLine{00036\ \textcolor{comment}{}}
\DoxyCodeLine{00037\ \textcolor{comment}{\ \ \ \ ...}}
\DoxyCodeLine{00038\ \textcolor{comment}{}}
\DoxyCodeLine{00039\ \textcolor{comment}{\ \ \ \ drflac\_allocation\_callbacks\ allocationCallbacks;}}
\DoxyCodeLine{00040\ \textcolor{comment}{\ \ \ \ allocationCallbacks.pUserData\ =\ \&myData;}}
\DoxyCodeLine{00041\ \textcolor{comment}{\ \ \ \ allocationCallbacks.onMalloc\ \ =\ my\_malloc;}}
\DoxyCodeLine{00042\ \textcolor{comment}{\ \ \ \ allocationCallbacks.onRealloc\ =\ my\_realloc;}}
\DoxyCodeLine{00043\ \textcolor{comment}{\ \ \ \ allocationCallbacks.onFree\ \ \ \ =\ my\_free;}}
\DoxyCodeLine{00044\ \textcolor{comment}{\ \ \ \ drflac*\ pFlac\ =\ drflac\_open\_file("{}my\_file.flac"{},\ \&allocationCallbacks);}}
\DoxyCodeLine{00045\ \textcolor{comment}{}}
\DoxyCodeLine{00046\ \textcolor{comment}{The\ advantage\ of\ this\ new\ system\ is\ that\ it\ allows\ you\ to\ specify\ user\ data\ which\ will\ be\ passed\ in\ to\ the\ allocation\ routines.}}
\DoxyCodeLine{00047\ \textcolor{comment}{}}
\DoxyCodeLine{00048\ \textcolor{comment}{Passing\ in\ null\ for\ the\ allocation\ callbacks\ object\ will\ cause\ dr\_flac\ to\ use\ defaults\ which\ is\ the\ same\ as\ DRFLAC\_MALLOC,}}
\DoxyCodeLine{00049\ \textcolor{comment}{DRFLAC\_REALLOC\ and\ DRFLAC\_FREE\ and\ the\ equivalent\ of\ how\ it\ worked\ in\ previous\ versions.}}
\DoxyCodeLine{00050\ \textcolor{comment}{}}
\DoxyCodeLine{00051\ \textcolor{comment}{Every\ API\ that\ opens\ a\ drflac\ object\ now\ takes\ this\ extra\ parameter.\ These\ include\ the\ following:}}
\DoxyCodeLine{00052\ \textcolor{comment}{}}
\DoxyCodeLine{00053\ \textcolor{comment}{\ \ \ \ drflac\_open()}}
\DoxyCodeLine{00054\ \textcolor{comment}{\ \ \ \ drflac\_open\_relaxed()}}
\DoxyCodeLine{00055\ \textcolor{comment}{\ \ \ \ drflac\_open\_with\_metadata()}}
\DoxyCodeLine{00056\ \textcolor{comment}{\ \ \ \ drflac\_open\_with\_metadata\_relaxed()}}
\DoxyCodeLine{00057\ \textcolor{comment}{\ \ \ \ drflac\_open\_file()}}
\DoxyCodeLine{00058\ \textcolor{comment}{\ \ \ \ drflac\_open\_file\_with\_metadata()}}
\DoxyCodeLine{00059\ \textcolor{comment}{\ \ \ \ drflac\_open\_memory()}}
\DoxyCodeLine{00060\ \textcolor{comment}{\ \ \ \ drflac\_open\_memory\_with\_metadata()}}
\DoxyCodeLine{00061\ \textcolor{comment}{\ \ \ \ drflac\_open\_and\_read\_pcm\_frames\_s32()}}
\DoxyCodeLine{00062\ \textcolor{comment}{\ \ \ \ drflac\_open\_and\_read\_pcm\_frames\_s16()}}
\DoxyCodeLine{00063\ \textcolor{comment}{\ \ \ \ drflac\_open\_and\_read\_pcm\_frames\_f32()}}
\DoxyCodeLine{00064\ \textcolor{comment}{\ \ \ \ drflac\_open\_file\_and\_read\_pcm\_frames\_s32()}}
\DoxyCodeLine{00065\ \textcolor{comment}{\ \ \ \ drflac\_open\_file\_and\_read\_pcm\_frames\_s16()}}
\DoxyCodeLine{00066\ \textcolor{comment}{\ \ \ \ drflac\_open\_file\_and\_read\_pcm\_frames\_f32()}}
\DoxyCodeLine{00067\ \textcolor{comment}{\ \ \ \ drflac\_open\_memory\_and\_read\_pcm\_frames\_s32()}}
\DoxyCodeLine{00068\ \textcolor{comment}{\ \ \ \ drflac\_open\_memory\_and\_read\_pcm\_frames\_s16()}}
\DoxyCodeLine{00069\ \textcolor{comment}{\ \ \ \ drflac\_open\_memory\_and\_read\_pcm\_frames\_f32()}}
\DoxyCodeLine{00070\ \textcolor{comment}{}}
\DoxyCodeLine{00071\ \textcolor{comment}{}}
\DoxyCodeLine{00072\ \textcolor{comment}{}}
\DoxyCodeLine{00073\ \textcolor{comment}{Optimizations}}
\DoxyCodeLine{00074\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00075\ \textcolor{comment}{Seeking\ performance\ has\ been\ greatly\ improved.\ A\ new\ binary\ search\ based\ seeking\ algorithm\ has\ been\ introduced\ which\ significantly}}
\DoxyCodeLine{00076\ \textcolor{comment}{improves\ performance\ over\ the\ brute\ force\ method\ which\ was\ used\ when\ no\ seek\ table\ was\ present.\ Seek\ table\ based\ seeking\ also\ takes}}
\DoxyCodeLine{00077\ \textcolor{comment}{advantage\ of\ the\ new\ binary\ search\ seeking\ system\ to\ further\ improve\ performance\ there\ as\ well.\ Note\ that\ this\ depends\ on\ CRC\ which}}
\DoxyCodeLine{00078\ \textcolor{comment}{means\ it\ will\ be\ disabled\ when\ DR\_FLAC\_NO\_CRC\ is\ used.}}
\DoxyCodeLine{00079\ \textcolor{comment}{}}
\DoxyCodeLine{00080\ \textcolor{comment}{The\ SSE4.1\ pipeline\ has\ been\ cleaned\ up\ and\ optimized.\ You\ should\ see\ some\ improvements\ with\ decoding\ speed\ of\ 24-\/bit\ files\ in}}
\DoxyCodeLine{00081\ \textcolor{comment}{particular.\ 16-\/bit\ streams\ should\ also\ see\ some\ improvement.}}
\DoxyCodeLine{00082\ \textcolor{comment}{}}
\DoxyCodeLine{00083\ \textcolor{comment}{drflac\_read\_pcm\_frames\_s16()\ has\ been\ optimized.\ Previously\ this\ sat\ on\ top\ of\ drflac\_read\_pcm\_frames\_s32()\ and\ performed\ it's\ s32}}
\DoxyCodeLine{00084\ \textcolor{comment}{to\ s16\ conversion\ in\ a\ second\ pass.\ This\ is\ now\ all\ done\ in\ a\ single\ pass.\ This\ includes\ SSE2\ and\ ARM\ NEON\ optimized\ paths.}}
\DoxyCodeLine{00085\ \textcolor{comment}{}}
\DoxyCodeLine{00086\ \textcolor{comment}{A\ minor\ optimization\ has\ been\ implemented\ for\ drflac\_read\_pcm\_frames\_s32().\ This\ will\ now\ use\ an\ SSE2\ optimized\ pipeline\ for\ stereo}}
\DoxyCodeLine{00087\ \textcolor{comment}{channel\ reconstruction\ which\ is\ the\ last\ part\ of\ the\ decoding\ process.}}
\DoxyCodeLine{00088\ \textcolor{comment}{}}
\DoxyCodeLine{00089\ \textcolor{comment}{The\ ARM\ build\ has\ seen\ a\ few\ improvements.\ The\ CLZ\ (count\ leading\ zeroes)\ and\ REV\ (byte\ swap)\ instructions\ are\ now\ used\ when}}
\DoxyCodeLine{00090\ \textcolor{comment}{compiling\ with\ GCC\ and\ Clang\ which\ is\ achieved\ using\ inline\ assembly.\ The\ CLZ\ instruction\ requires\ ARM\ architecture\ version\ 5\ at}}
\DoxyCodeLine{00091\ \textcolor{comment}{compile\ time\ and\ the\ REV\ instruction\ requires\ ARM\ architecture\ version\ 6.}}
\DoxyCodeLine{00092\ \textcolor{comment}{}}
\DoxyCodeLine{00093\ \textcolor{comment}{An\ ARM\ NEON\ optimized\ pipeline\ has\ been\ implemented.\ To\ enable\ this\ you'll\ need\ to\ add\ -\/mfpu=neon\ to\ the\ command\ line\ when\ compiling.}}
\DoxyCodeLine{00094\ \textcolor{comment}{}}
\DoxyCodeLine{00095\ \textcolor{comment}{}}
\DoxyCodeLine{00096\ \textcolor{comment}{Removed\ APIs}}
\DoxyCodeLine{00097\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00098\ \textcolor{comment}{The\ following\ APIs\ were\ deprecated\ in\ version\ 0.11.0\ and\ have\ been\ completely\ removed\ in\ version\ 0.12.0:}}
\DoxyCodeLine{00099\ \textcolor{comment}{}}
\DoxyCodeLine{00100\ \textcolor{comment}{\ \ \ \ drflac\_read\_s32()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/>\ drflac\_read\_pcm\_frames\_s32()}}
\DoxyCodeLine{00101\ \textcolor{comment}{\ \ \ \ drflac\_read\_s16()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/>\ drflac\_read\_pcm\_frames\_s16()}}
\DoxyCodeLine{00102\ \textcolor{comment}{\ \ \ \ drflac\_read\_f32()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/>\ drflac\_read\_pcm\_frames\_f32()}}
\DoxyCodeLine{00103\ \textcolor{comment}{\ \ \ \ drflac\_seek\_to\_sample()\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>\ drflac\_seek\_to\_pcm\_frame()}}
\DoxyCodeLine{00104\ \textcolor{comment}{\ \ \ \ drflac\_open\_and\_decode\_s32()\ \ \ \ \ \ \ \ -\/>\ drflac\_open\_and\_read\_pcm\_frames\_s32()}}
\DoxyCodeLine{00105\ \textcolor{comment}{\ \ \ \ drflac\_open\_and\_decode\_s16()\ \ \ \ \ \ \ \ -\/>\ drflac\_open\_and\_read\_pcm\_frames\_s16()}}
\DoxyCodeLine{00106\ \textcolor{comment}{\ \ \ \ drflac\_open\_and\_decode\_f32()\ \ \ \ \ \ \ \ -\/>\ drflac\_open\_and\_read\_pcm\_frames\_f32()}}
\DoxyCodeLine{00107\ \textcolor{comment}{\ \ \ \ drflac\_open\_and\_decode\_file\_s32()\ \ \ -\/>\ drflac\_open\_file\_and\_read\_pcm\_frames\_s32()}}
\DoxyCodeLine{00108\ \textcolor{comment}{\ \ \ \ drflac\_open\_and\_decode\_file\_s16()\ \ \ -\/>\ drflac\_open\_file\_and\_read\_pcm\_frames\_s16()}}
\DoxyCodeLine{00109\ \textcolor{comment}{\ \ \ \ drflac\_open\_and\_decode\_file\_f32()\ \ \ -\/>\ drflac\_open\_file\_and\_read\_pcm\_frames\_f32()}}
\DoxyCodeLine{00110\ \textcolor{comment}{\ \ \ \ drflac\_open\_and\_decode\_memory\_s32()\ -\/>\ drflac\_open\_memory\_and\_read\_pcm\_frames\_s32()}}
\DoxyCodeLine{00111\ \textcolor{comment}{\ \ \ \ drflac\_open\_and\_decode\_memory\_s16()\ -\/>\ drflac\_open\_memory\_and\_read\_pcm\_frames\_s16()}}
\DoxyCodeLine{00112\ \textcolor{comment}{\ \ \ \ drflac\_open\_and\_decode\_memory\_f32()\ -\/>\ drflac\_open\_memroy\_and\_read\_pcm\_frames\_f32()}}
\DoxyCodeLine{00113\ \textcolor{comment}{}}
\DoxyCodeLine{00114\ \textcolor{comment}{Prior\ versions\ of\ dr\_flac\ operated\ on\ a\ per-\/sample\ basis\ whereas\ now\ it\ operates\ on\ PCM\ frames.\ The\ removed\ APIs\ all\ relate}}
\DoxyCodeLine{00115\ \textcolor{comment}{to\ the\ old\ per-\/sample\ APIs.\ You\ now\ need\ to\ use\ the\ "{}pcm\_frame"{}\ versions.}}
\DoxyCodeLine{00116\ \textcolor{comment}{*/}}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \textcolor{comment}{/*}}
\DoxyCodeLine{00120\ \textcolor{comment}{Introduction}}
\DoxyCodeLine{00121\ \textcolor{comment}{============}}
\DoxyCodeLine{00122\ \textcolor{comment}{dr\_flac\ is\ a\ single\ file\ library.\ To\ use\ it,\ do\ something\ like\ the\ following\ in\ one\ .c\ file.}}
\DoxyCodeLine{00123\ \textcolor{comment}{}}
\DoxyCodeLine{00124\ \textcolor{comment}{\ \ \ \ \`{}\`{}\`{}c}}
\DoxyCodeLine{00125\ \textcolor{comment}{\ \ \ \ \#define\ DR\_FLAC\_IMPLEMENTATION}}
\DoxyCodeLine{00126\ \textcolor{comment}{\ \ \ \ \#include\ "{}dr\_flac.h"{}}}
\DoxyCodeLine{00127\ \textcolor{comment}{\ \ \ \ \`{}\`{}\`{}}}
\DoxyCodeLine{00128\ \textcolor{comment}{}}
\DoxyCodeLine{00129\ \textcolor{comment}{You\ can\ then\ \#include\ this\ file\ in\ other\ parts\ of\ the\ program\ as\ you\ would\ with\ any\ other\ header\ file.\ To\ decode\ audio\ data,\ do\ something\ like\ the\ following:}}
\DoxyCodeLine{00130\ \textcolor{comment}{}}
\DoxyCodeLine{00131\ \textcolor{comment}{\ \ \ \ \`{}\`{}\`{}c}}
\DoxyCodeLine{00132\ \textcolor{comment}{\ \ \ \ drflac*\ pFlac\ =\ drflac\_open\_file("{}MySong.flac"{},\ NULL);}}
\DoxyCodeLine{00133\ \textcolor{comment}{\ \ \ \ if\ (pFlac\ ==\ NULL)\ \{}}
\DoxyCodeLine{00134\ \textcolor{comment}{\ \ \ \ \ \ \ \ //\ Failed\ to\ open\ FLAC\ file}}
\DoxyCodeLine{00135\ \textcolor{comment}{\ \ \ \ \}}}
\DoxyCodeLine{00136\ \textcolor{comment}{}}
\DoxyCodeLine{00137\ \textcolor{comment}{\ \ \ \ drflac\_int32*\ pSamples\ =\ malloc(pFlac-\/>totalPCMFrameCount\ *\ pFlac-\/>channels\ *\ sizeof(drflac\_int32));}}
\DoxyCodeLine{00138\ \textcolor{comment}{\ \ \ \ drflac\_uint64\ numberOfInterleavedSamplesActuallyRead\ =\ drflac\_read\_pcm\_frames\_s32(pFlac,\ pFlac-\/>totalPCMFrameCount,\ pSamples);}}
\DoxyCodeLine{00139\ \textcolor{comment}{\ \ \ \ \`{}\`{}\`{}}}
\DoxyCodeLine{00140\ \textcolor{comment}{}}
\DoxyCodeLine{00141\ \textcolor{comment}{The\ drflac\ object\ represents\ the\ decoder.\ It\ is\ a\ transparent\ type\ so\ all\ the\ information\ you\ need,\ such\ as\ the\ number\ of\ channels\ and\ the\ bits\ per\ sample,}}
\DoxyCodeLine{00142\ \textcolor{comment}{should\ be\ directly\ accessible\ -\/\ just\ make\ sure\ you\ don't\ change\ their\ values.\ Samples\ are\ always\ output\ as\ interleaved\ signed\ 32-\/bit\ PCM.\ In\ the\ example\ above}}
\DoxyCodeLine{00143\ \textcolor{comment}{a\ native\ FLAC\ stream\ was\ opened,\ however\ dr\_flac\ has\ seamless\ support\ for\ Ogg\ encapsulated\ FLAC\ streams\ as\ well.}}
\DoxyCodeLine{00144\ \textcolor{comment}{}}
\DoxyCodeLine{00145\ \textcolor{comment}{You\ do\ not\ need\ to\ decode\ the\ entire\ stream\ in\ one\ go\ -\/\ you\ just\ specify\ how\ many\ samples\ you'd\ like\ at\ any\ given\ time\ and\ the\ decoder\ will\ give\ you\ as\ many}}
\DoxyCodeLine{00146\ \textcolor{comment}{samples\ as\ it\ can,\ up\ to\ the\ amount\ requested.\ Later\ on\ when\ you\ need\ the\ next\ batch\ of\ samples,\ just\ call\ it\ again.\ Example:}}
\DoxyCodeLine{00147\ \textcolor{comment}{}}
\DoxyCodeLine{00148\ \textcolor{comment}{\ \ \ \ \`{}\`{}\`{}c}}
\DoxyCodeLine{00149\ \textcolor{comment}{\ \ \ \ while\ (drflac\_read\_pcm\_frames\_s32(pFlac,\ chunkSizeInPCMFrames,\ pChunkSamples)\ >\ 0)\ \{}}
\DoxyCodeLine{00150\ \textcolor{comment}{\ \ \ \ \ \ \ \ do\_something();}}
\DoxyCodeLine{00151\ \textcolor{comment}{\ \ \ \ \}}}
\DoxyCodeLine{00152\ \textcolor{comment}{\ \ \ \ \`{}\`{}\`{}}}
\DoxyCodeLine{00153\ \textcolor{comment}{}}
\DoxyCodeLine{00154\ \textcolor{comment}{You\ can\ seek\ to\ a\ specific\ PCM\ frame\ with\ \`{}drflac\_seek\_to\_pcm\_frame()`.}}
\DoxyCodeLine{00155\ \textcolor{comment}{}}
\DoxyCodeLine{00156\ \textcolor{comment}{If\ you\ just\ want\ to\ quickly\ decode\ an\ entire\ FLAC\ file\ in\ one\ go\ you\ can\ do\ something\ like\ this:}}
\DoxyCodeLine{00157\ \textcolor{comment}{}}
\DoxyCodeLine{00158\ \textcolor{comment}{\ \ \ \ \`{}\`{}\`{}c}}
\DoxyCodeLine{00159\ \textcolor{comment}{\ \ \ \ unsigned\ int\ channels;}}
\DoxyCodeLine{00160\ \textcolor{comment}{\ \ \ \ unsigned\ int\ sampleRate;}}
\DoxyCodeLine{00161\ \textcolor{comment}{\ \ \ \ drflac\_uint64\ totalPCMFrameCount;}}
\DoxyCodeLine{00162\ \textcolor{comment}{\ \ \ \ drflac\_int32*\ pSampleData\ =\ drflac\_open\_file\_and\_read\_pcm\_frames\_s32("{}MySong.flac"{},\ \&channels,\ \&sampleRate,\ \&totalPCMFrameCount,\ NULL);}}
\DoxyCodeLine{00163\ \textcolor{comment}{\ \ \ \ if\ (pSampleData\ ==\ NULL)\ \{}}
\DoxyCodeLine{00164\ \textcolor{comment}{\ \ \ \ \ \ \ \ //\ Failed\ to\ open\ and\ decode\ FLAC\ file.}}
\DoxyCodeLine{00165\ \textcolor{comment}{\ \ \ \ \}}}
\DoxyCodeLine{00166\ \textcolor{comment}{}}
\DoxyCodeLine{00167\ \textcolor{comment}{\ \ \ \ ...}}
\DoxyCodeLine{00168\ \textcolor{comment}{}}
\DoxyCodeLine{00169\ \textcolor{comment}{\ \ \ \ drflac\_free(pSampleData,\ NULL);}}
\DoxyCodeLine{00170\ \textcolor{comment}{\ \ \ \ \`{}\`{}\`{}}}
\DoxyCodeLine{00171\ \textcolor{comment}{}}
\DoxyCodeLine{00172\ \textcolor{comment}{You\ can\ read\ samples\ as\ signed\ 16-\/bit\ integer\ and\ 32-\/bit\ floating-\/point\ PCM\ with\ the\ *\_s16()\ and\ *\_f32()\ family\ of\ APIs\ respectively,\ but\ note\ that\ these}}
\DoxyCodeLine{00173\ \textcolor{comment}{should\ be\ considered\ lossy.}}
\DoxyCodeLine{00174\ \textcolor{comment}{}}
\DoxyCodeLine{00175\ \textcolor{comment}{}}
\DoxyCodeLine{00176\ \textcolor{comment}{If\ you\ need\ access\ to\ metadata\ (album\ art,\ etc.),\ use\ \`{}drflac\_open\_with\_metadata()`,\ \`{}drflac\_open\_file\_with\_metdata()`\ or\ \`{}drflac\_open\_memory\_with\_metadata()`.}}
\DoxyCodeLine{00177\ \textcolor{comment}{The\ rationale\ for\ keeping\ these\ APIs\ separate\ is\ that\ they're\ slightly\ slower\ than\ the\ normal\ versions\ and\ also\ just\ a\ little\ bit\ harder\ to\ use.\ dr\_flac}}
\DoxyCodeLine{00178\ \textcolor{comment}{reports\ metadata\ to\ the\ application\ through\ the\ use\ of\ a\ callback,\ and\ every\ metadata\ block\ is\ reported\ before\ \`{}drflac\_open\_with\_metdata()`\ returns.}}
\DoxyCodeLine{00179\ \textcolor{comment}{}}
\DoxyCodeLine{00180\ \textcolor{comment}{The\ main\ opening\ APIs\ (`drflac\_open()`,\ etc.)\ will\ fail\ if\ the\ header\ is\ not\ present.\ The\ presents\ a\ problem\ in\ certain\ scenarios\ such\ as\ broadcast\ style}}
\DoxyCodeLine{00181\ \textcolor{comment}{streams\ or\ internet\ radio\ where\ the\ header\ may\ not\ be\ present\ because\ the\ user\ has\ started\ playback\ mid-\/stream.\ To\ handle\ this,\ use\ the\ relaxed\ APIs:}}
\DoxyCodeLine{00182\ \textcolor{comment}{\ \ \ \ }}
\DoxyCodeLine{00183\ \textcolor{comment}{\ \ \ \ \`{}drflac\_open\_relaxed()`}}
\DoxyCodeLine{00184\ \textcolor{comment}{\ \ \ \ \`{}drflac\_open\_with\_metadata\_relaxed()`}}
\DoxyCodeLine{00185\ \textcolor{comment}{}}
\DoxyCodeLine{00186\ \textcolor{comment}{It\ is\ not\ recommended\ to\ use\ these\ APIs\ for\ file\ based\ streams\ because\ a\ missing\ header\ would\ usually\ indicate\ a\ corrupt\ or\ perverse\ file.\ In\ addition,\ these}}
\DoxyCodeLine{00187\ \textcolor{comment}{APIs\ can\ take\ a\ long\ time\ to\ initialize\ because\ they\ may\ need\ to\ spend\ a\ lot\ of\ time\ finding\ the\ first\ frame.}}
\DoxyCodeLine{00188\ \textcolor{comment}{}}
\DoxyCodeLine{00189\ \textcolor{comment}{}}
\DoxyCodeLine{00190\ \textcolor{comment}{}}
\DoxyCodeLine{00191\ \textcolor{comment}{Build\ Options}}
\DoxyCodeLine{00192\ \textcolor{comment}{=============}}
\DoxyCodeLine{00193\ \textcolor{comment}{\#define\ these\ options\ before\ including\ this\ file.}}
\DoxyCodeLine{00194\ \textcolor{comment}{}}
\DoxyCodeLine{00195\ \textcolor{comment}{\#define\ DR\_FLAC\_NO\_STDIO}}
\DoxyCodeLine{00196\ \textcolor{comment}{\ \ Disable\ \`{}drflac\_open\_file()`\ and\ family.}}
\DoxyCodeLine{00197\ \textcolor{comment}{}}
\DoxyCodeLine{00198\ \textcolor{comment}{\#define\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{00199\ \textcolor{comment}{\ \ Disables\ support\ for\ Ogg/FLAC\ streams.}}
\DoxyCodeLine{00200\ \textcolor{comment}{}}
\DoxyCodeLine{00201\ \textcolor{comment}{\#define\ DR\_FLAC\_BUFFER\_SIZE\ <number>}}
\DoxyCodeLine{00202\ \textcolor{comment}{\ \ Defines\ the\ size\ of\ the\ internal\ buffer\ to\ store\ data\ from\ onRead().\ This\ buffer\ is\ used\ to\ reduce\ the\ number\ of\ calls\ back\ to\ the\ client\ for\ more\ data.}}
\DoxyCodeLine{00203\ \textcolor{comment}{\ \ Larger\ values\ means\ more\ memory,\ but\ better\ performance.\ My\ tests\ show\ diminishing\ returns\ after\ about\ 4KB\ (which\ is\ the\ default).\ Consider\ reducing\ this\ if}}
\DoxyCodeLine{00204\ \textcolor{comment}{\ \ you\ have\ a\ very\ efficient\ implementation\ of\ onRead(),\ or\ increase\ it\ if\ it's\ very\ inefficient.\ Must\ be\ a\ multiple\ of\ 8.}}
\DoxyCodeLine{00205\ \textcolor{comment}{}}
\DoxyCodeLine{00206\ \textcolor{comment}{\#define\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{00207\ \textcolor{comment}{\ \ Disables\ CRC\ checks.\ This\ will\ offer\ a\ performance\ boost\ when\ CRC\ is\ unnecessary.\ This\ will\ disable\ binary\ search\ seeking.\ When\ seeking,\ the\ seek\ table\ will}}
\DoxyCodeLine{00208\ \textcolor{comment}{\ \ be\ used\ if\ available.\ Otherwise\ the\ seek\ will\ be\ performed\ using\ brute\ force.}}
\DoxyCodeLine{00209\ \textcolor{comment}{}}
\DoxyCodeLine{00210\ \textcolor{comment}{\#define\ DR\_FLAC\_NO\_SIMD}}
\DoxyCodeLine{00211\ \textcolor{comment}{\ \ Disables\ SIMD\ optimizations\ (SSE\ on\ x86/x64\ architectures,\ NEON\ on\ ARM\ architectures).\ Use\ this\ if\ you\ are\ having\ compatibility\ issues\ with\ your\ compiler.}}
\DoxyCodeLine{00212\ \textcolor{comment}{}}
\DoxyCodeLine{00213\ \textcolor{comment}{\#define\ DR\_FLAC\_NO\_WCHAR}}
\DoxyCodeLine{00214\ \textcolor{comment}{\ \ Disables\ all\ functions\ ending\ with\ \`{}\_w`.\ Use\ this\ if\ your\ compiler\ does\ not\ provide\ wchar.h.\ Not\ required\ if\ DR\_FLAC\_NO\_STDIO\ is\ also\ defined.}}
\DoxyCodeLine{00215\ \textcolor{comment}{}}
\DoxyCodeLine{00216\ \textcolor{comment}{}}
\DoxyCodeLine{00217\ \textcolor{comment}{}}
\DoxyCodeLine{00218\ \textcolor{comment}{Notes}}
\DoxyCodeLine{00219\ \textcolor{comment}{=====}}
\DoxyCodeLine{00220\ \textcolor{comment}{-\/\ dr\_flac\ does\ not\ support\ changing\ the\ sample\ rate\ nor\ channel\ count\ mid\ stream.}}
\DoxyCodeLine{00221\ \textcolor{comment}{-\/\ dr\_flac\ is\ not\ thread-\/safe,\ but\ its\ APIs\ can\ be\ called\ from\ any\ thread\ so\ long\ as\ you\ do\ your\ own\ synchronization.}}
\DoxyCodeLine{00222\ \textcolor{comment}{-\/\ When\ using\ Ogg\ encapsulation,\ a\ corrupted\ metadata\ block\ will\ result\ in\ \`{}drflac\_open\_with\_metadata()`\ and\ \`{}drflac\_open()`\ returning\ inconsistent\ samples\ due}}
\DoxyCodeLine{00223\ \textcolor{comment}{\ \ to\ differences\ in\ corrupted\ stream\ recorvery\ logic\ between\ the\ two\ APIs.}}
\DoxyCodeLine{00224\ \textcolor{comment}{*/}}
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00226\ \textcolor{preprocessor}{\#ifndef\ dr\_flac\_h}}
\DoxyCodeLine{00227\ \textcolor{preprocessor}{\#define\ dr\_flac\_h}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \textcolor{preprocessor}{\#ifdef\ \_\_cplusplus}}
\DoxyCodeLine{00230\ \textcolor{keyword}{extern}\ \textcolor{stringliteral}{"{}C"{}}\ \{}
\DoxyCodeLine{00231\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \textcolor{preprocessor}{\#define\ DRFLAC\_STRINGIFY(x)\ \ \ \ \ \ \#x}}
\DoxyCodeLine{00234\ \textcolor{preprocessor}{\#define\ DRFLAC\_XSTRINGIFY(x)\ \ \ \ \ DRFLAC\_STRINGIFY(x)}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \textcolor{preprocessor}{\#define\ DRFLAC\_VERSION\_MAJOR\ \ \ \ \ 0}}
\DoxyCodeLine{00237\ \textcolor{preprocessor}{\#define\ DRFLAC\_VERSION\_MINOR\ \ \ \ \ 12}}
\DoxyCodeLine{00238\ \textcolor{preprocessor}{\#define\ DRFLAC\_VERSION\_REVISION\ \ 42}}
\DoxyCodeLine{00239\ \textcolor{preprocessor}{\#define\ DRFLAC\_VERSION\_STRING\ \ \ \ DRFLAC\_XSTRINGIFY(DRFLAC\_VERSION\_MAJOR)\ "{}."{}\ DRFLAC\_XSTRINGIFY(DRFLAC\_VERSION\_MINOR)\ "{}."{}\ DRFLAC\_XSTRINGIFY(DRFLAC\_VERSION\_REVISION)}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \textcolor{preprocessor}{\#include\ <stddef.h>}\ \textcolor{comment}{/*\ For\ size\_t.\ */}}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \textcolor{comment}{/*\ Sized\ Types\ */}}
\DoxyCodeLine{00244\ \textcolor{keyword}{typedef}\ \ \ \textcolor{keywordtype}{signed}\ \textcolor{keywordtype}{char}\ \ \ \ \ \ \ \ \ \ \ drflac\_int8;}
\DoxyCodeLine{00245\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \ \ \ \ \ \ \ \ \ \ drflac\_uint8;}
\DoxyCodeLine{00246\ \textcolor{keyword}{typedef}\ \ \ \textcolor{keywordtype}{signed}\ \textcolor{keywordtype}{short}\ \ \ \ \ \ \ \ \ \ drflac\_int16;}
\DoxyCodeLine{00247\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ \ \ \ \ \ \ \ \ \ drflac\_uint16;}
\DoxyCodeLine{00248\ \textcolor{keyword}{typedef}\ \ \ \textcolor{keywordtype}{signed}\ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ \ drflac\_int32;}
\DoxyCodeLine{00249\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32;}
\DoxyCodeLine{00250\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{keyword}{typedef}\ \ \ \textcolor{keywordtype}{signed}\ \_\_int64\ \ \ \ drflac\_int64;}
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \_\_int64\ \ \ \ drflac\_uint64;}
\DoxyCodeLine{00253\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00254\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\_\_clang\_\_)\ ||\ (defined(\_\_GNUC\_\_)\ \&\&\ (\_\_GNUC\_\_\ >\ 4\ ||\ (\_\_GNUC\_\_\ ==\ 4\ \&\&\ \_\_GNUC\_MINOR\_\_\ >=\ 6)))}}
\DoxyCodeLine{00255\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#pragma\ GCC\ diagnostic\ push}}
\DoxyCodeLine{00256\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#pragma\ GCC\ diagnostic\ ignored\ "{}-\/Wlong-\/long"{}}}
\DoxyCodeLine{00257\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ defined(\_\_clang\_\_)}}
\DoxyCodeLine{00258\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#pragma\ GCC\ diagnostic\ ignored\ "{}-\/Wc++11-\/long-\/long"{}}}
\DoxyCodeLine{00259\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00260\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00261\ \ \ \ \ \textcolor{keyword}{typedef}\ \ \ \textcolor{keywordtype}{signed}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ \ drflac\_int64;}
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ \ drflac\_uint64;}
\DoxyCodeLine{00263\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\_\_clang\_\_)\ ||\ (defined(\_\_GNUC\_\_)\ \&\&\ (\_\_GNUC\_\_\ >\ 4\ ||\ (\_\_GNUC\_\_\ ==\ 4\ \&\&\ \_\_GNUC\_MINOR\_\_\ >=\ 6)))}}
\DoxyCodeLine{00264\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#pragma\ GCC\ diagnostic\ pop}}
\DoxyCodeLine{00265\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00266\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00267\ \textcolor{preprocessor}{\#if\ defined(\_\_LP64\_\_)\ ||\ defined(\_WIN64)\ ||\ (defined(\_\_x86\_64\_\_)\ \&\&\ !defined(\_\_ILP32\_\_))\ ||\ defined(\_M\_X64)\ ||\ defined(\_\_ia64)\ ||\ defined(\_M\_IA64)\ ||\ defined(\_\_aarch64\_\_)\ ||\ defined(\_M\_ARM64)\ ||\ defined(\_\_powerpc64\_\_)}}
\DoxyCodeLine{00268\ \ \ \ \ \textcolor{keyword}{typedef}\ drflac\_uint64\ \ \ \ \ \ \ drflac\_uintptr;}
\DoxyCodeLine{00269\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{keyword}{typedef}\ drflac\_uint32\ \ \ \ \ \ \ drflac\_uintptr;}
\DoxyCodeLine{00271\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00272\ \textcolor{keyword}{typedef}\ drflac\_uint8\ \ \ \ \ \ \ \ \ \ \ \ drflac\_bool8;}
\DoxyCodeLine{00273\ \textcolor{keyword}{typedef}\ drflac\_uint32\ \ \ \ \ \ \ \ \ \ \ drflac\_bool32;}
\DoxyCodeLine{00274\ \textcolor{preprocessor}{\#define\ DRFLAC\_TRUE\ \ \ \ \ \ \ \ \ \ \ \ \ 1}}
\DoxyCodeLine{00275\ \textcolor{preprocessor}{\#define\ DRFLAC\_FALSE\ \ \ \ \ \ \ \ \ \ \ \ 0}}
\DoxyCodeLine{00276\ \textcolor{comment}{/*\ End\ Sized\ Types\ */}}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00278\ \textcolor{comment}{/*\ Decorations\ */}}
\DoxyCodeLine{00279\ \textcolor{preprocessor}{\#if\ !defined(DRFLAC\_API)}}
\DoxyCodeLine{00280\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(DRFLAC\_DLL)}}
\DoxyCodeLine{00281\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ defined(\_WIN32)}}
\DoxyCodeLine{00282\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_DLL\_IMPORT\ \ \_\_declspec(dllimport)}}
\DoxyCodeLine{00283\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_DLL\_EXPORT\ \ \_\_declspec(dllexport)}}
\DoxyCodeLine{00284\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_DLL\_PRIVATE\ static}}
\DoxyCodeLine{00285\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#else}}
\DoxyCodeLine{00286\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#if\ defined(\_\_GNUC\_\_)\ \&\&\ \_\_GNUC\_\_\ >=\ 4}}
\DoxyCodeLine{00287\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_DLL\_IMPORT\ \ \_\_attribute\_\_((visibility("{}default"{})))}}
\DoxyCodeLine{00288\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_DLL\_EXPORT\ \ \_\_attribute\_\_((visibility("{}default"{})))}}
\DoxyCodeLine{00289\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_DLL\_PRIVATE\ \_\_attribute\_\_((visibility("{}hidden"{})))}}
\DoxyCodeLine{00290\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#else}}
\DoxyCodeLine{00291\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_DLL\_IMPORT}}
\DoxyCodeLine{00292\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_DLL\_EXPORT}}
\DoxyCodeLine{00293\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_DLL\_PRIVATE\ static}}
\DoxyCodeLine{00294\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00295\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ defined(DR\_FLAC\_IMPLEMENTATION)\ ||\ defined(DRFLAC\_IMPLEMENTATION)}}
\DoxyCodeLine{00298\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_API\ \ DRFLAC\_DLL\_EXPORT}}
\DoxyCodeLine{00299\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#else}}
\DoxyCodeLine{00300\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_API\ \ DRFLAC\_DLL\_IMPORT}}
\DoxyCodeLine{00301\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00302\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_PRIVATE\ DRFLAC\_DLL\_PRIVATE}}
\DoxyCodeLine{00303\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{00304\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_API\ extern}}
\DoxyCodeLine{00305\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_PRIVATE\ static}}
\DoxyCodeLine{00306\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00307\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00308\ \textcolor{comment}{/*\ End\ Decorations\ */}}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)\ \&\&\ \_MSC\_VER\ >=\ 1700\ \ \ }\textcolor{comment}{/*\ Visual\ Studio\ 2012\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00311\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_DEPRECATED\ \ \ \ \ \ \ \_\_declspec(deprecated)}}
\DoxyCodeLine{00312\ \textcolor{preprocessor}{\#elif\ (defined(\_\_GNUC\_\_)\ \&\&\ \_\_GNUC\_\_\ >=\ 4)\ \ }\textcolor{comment}{/*\ GCC\ 4\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00313\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_DEPRECATED\ \ \ \ \ \ \ \_\_attribute\_\_((deprecated))}}
\DoxyCodeLine{00314\ \textcolor{preprocessor}{\#elif\ defined(\_\_has\_feature)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }\textcolor{comment}{/*\ Clang\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00315\ \textcolor{preprocessor}{\ \ \ \ \#if\ \_\_has\_feature(attribute\_deprecated)}}
\DoxyCodeLine{00316\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_DEPRECATED\ \ \ \_\_attribute\_\_((deprecated))}}
\DoxyCodeLine{00317\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{00318\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_DEPRECATED}}
\DoxyCodeLine{00319\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{00320\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00321\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_DEPRECATED}}
\DoxyCodeLine{00322\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ DRFLAC\_API\ \textcolor{keywordtype}{void}\ drflac\_version(drflac\_uint32*\ pMajor,\ drflac\_uint32*\ pMinor,\ drflac\_uint32*\ pRevision);}
\DoxyCodeLine{00325\ DRFLAC\_API\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ drflac\_version\_string(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00327\ \textcolor{comment}{/*\ Allocation\ Callbacks\ */}}
\DoxyCodeLine{00328\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00329\ \{}
\DoxyCodeLine{00330\ \ \ \ \ \textcolor{keywordtype}{void}*\ pUserData;}
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keywordtype}{void}*\ (*\ onMalloc)(\textcolor{keywordtype}{size\_t}\ sz,\ \textcolor{keywordtype}{void}*\ pUserData);}
\DoxyCodeLine{00332\ \ \ \ \ \textcolor{keywordtype}{void}*\ (*\ onRealloc)(\textcolor{keywordtype}{void}*\ p,\ \textcolor{keywordtype}{size\_t}\ sz,\ \textcolor{keywordtype}{void}*\ pUserData);}
\DoxyCodeLine{00333\ \ \ \ \ void\ \ (*\ onFree)(\textcolor{keywordtype}{void}*\ p,\ \textcolor{keywordtype}{void}*\ pUserData);}
\DoxyCodeLine{00334\ \}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}};}
\DoxyCodeLine{00335\ \textcolor{comment}{/*\ End\ Allocation\ Callbacks\ */}}
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00337\ \textcolor{comment}{/*}}
\DoxyCodeLine{00338\ \textcolor{comment}{As\ data\ is\ read\ from\ the\ client\ it\ is\ placed\ into\ an\ internal\ buffer\ for\ fast\ access.\ This\ controls\ the\ size\ of\ that\ buffer.\ Larger\ values\ means\ more\ speed,}}
\DoxyCodeLine{00339\ \textcolor{comment}{but\ also\ more\ memory.\ In\ my\ testing\ there\ is\ diminishing\ returns\ after\ about\ 4KB,\ but\ you\ can\ fiddle\ with\ this\ to\ suit\ your\ own\ needs.\ Must\ be\ a\ multiple\ of\ 8.}}
\DoxyCodeLine{00340\ \textcolor{comment}{*/}}
\DoxyCodeLine{00341\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_BUFFER\_SIZE}}
\DoxyCodeLine{00342\ \textcolor{preprocessor}{\#define\ DR\_FLAC\_BUFFER\_SIZE\ \ \ 4096}}
\DoxyCodeLine{00343\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00344\ }
\DoxyCodeLine{00345\ }
\DoxyCodeLine{00346\ \textcolor{comment}{/*\ Architecture\ Detection\ */}}
\DoxyCodeLine{00347\ \textcolor{preprocessor}{\#if\ defined(\_WIN64)\ ||\ defined(\_LP64)\ ||\ defined(\_\_LP64\_\_)}}
\DoxyCodeLine{00348\ \textcolor{preprocessor}{\#define\ DRFLAC\_64BIT}}
\DoxyCodeLine{00349\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00351\ \textcolor{preprocessor}{\#if\ defined(\_\_x86\_64\_\_)\ ||\ defined(\_M\_X64)}}
\DoxyCodeLine{00352\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_X64}}
\DoxyCodeLine{00353\ \textcolor{preprocessor}{\#elif\ defined(\_\_i386)\ ||\ defined(\_M\_IX86)}}
\DoxyCodeLine{00354\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_X86}}
\DoxyCodeLine{00355\ \textcolor{preprocessor}{\#elif\ defined(\_\_arm\_\_)\ ||\ defined(\_M\_ARM)\ ||\ defined(\_\_arm64)\ ||\ defined(\_\_arm64\_\_)\ ||\ defined(\_\_aarch64\_\_)\ ||\ defined(\_M\_ARM64)}}
\DoxyCodeLine{00356\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_ARM}}
\DoxyCodeLine{00357\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00358\ \textcolor{comment}{/*\ End\ Architecture\ Detection\ */}}
\DoxyCodeLine{00359\ }
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00361\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_64BIT}}
\DoxyCodeLine{00362\ \textcolor{keyword}{typedef}\ drflac\_uint64\ drflac\_cache\_t;}
\DoxyCodeLine{00363\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00364\ \textcolor{keyword}{typedef}\ drflac\_uint32\ drflac\_cache\_t;}
\DoxyCodeLine{00365\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \textcolor{comment}{/*\ The\ various\ metadata\ block\ types.\ */}}
\DoxyCodeLine{00368\ \textcolor{preprocessor}{\#define\ DRFLAC\_METADATA\_BLOCK\_TYPE\_STREAMINFO\ \ \ \ \ \ \ 0}}
\DoxyCodeLine{00369\ \textcolor{preprocessor}{\#define\ DRFLAC\_METADATA\_BLOCK\_TYPE\_PADDING\ \ \ \ \ \ \ \ \ \ 1}}
\DoxyCodeLine{00370\ \textcolor{preprocessor}{\#define\ DRFLAC\_METADATA\_BLOCK\_TYPE\_APPLICATION\ \ \ \ \ \ 2}}
\DoxyCodeLine{00371\ \textcolor{preprocessor}{\#define\ DRFLAC\_METADATA\_BLOCK\_TYPE\_SEEKTABLE\ \ \ \ \ \ \ \ 3}}
\DoxyCodeLine{00372\ \textcolor{preprocessor}{\#define\ DRFLAC\_METADATA\_BLOCK\_TYPE\_VORBIS\_COMMENT\ \ \ 4}}
\DoxyCodeLine{00373\ \textcolor{preprocessor}{\#define\ DRFLAC\_METADATA\_BLOCK\_TYPE\_CUESHEET\ \ \ \ \ \ \ \ \ 5}}
\DoxyCodeLine{00374\ \textcolor{preprocessor}{\#define\ DRFLAC\_METADATA\_BLOCK\_TYPE\_PICTURE\ \ \ \ \ \ \ \ \ \ 6}}
\DoxyCodeLine{00375\ \textcolor{preprocessor}{\#define\ DRFLAC\_METADATA\_BLOCK\_TYPE\_INVALID\ \ \ \ \ \ \ \ \ \ 127}}
\DoxyCodeLine{00376\ }
\DoxyCodeLine{00377\ \textcolor{comment}{/*\ The\ various\ picture\ types\ specified\ in\ the\ PICTURE\ block.\ */}}
\DoxyCodeLine{00378\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_OTHER\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0}}
\DoxyCodeLine{00379\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_FILE\_ICON\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1}}
\DoxyCodeLine{00380\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_OTHER\_FILE\_ICON\ \ \ \ \ \ \ \ \ 2}}
\DoxyCodeLine{00381\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_COVER\_FRONT\ \ \ \ \ \ \ \ \ \ \ \ \ 3}}
\DoxyCodeLine{00382\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_COVER\_BACK\ \ \ \ \ \ \ \ \ \ \ \ \ \ 4}}
\DoxyCodeLine{00383\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_LEAFLET\_PAGE\ \ \ \ \ \ \ \ \ \ \ \ 5}}
\DoxyCodeLine{00384\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_MEDIA\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 6}}
\DoxyCodeLine{00385\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_LEAD\_ARTIST\ \ \ \ \ \ \ \ \ \ \ \ \ 7}}
\DoxyCodeLine{00386\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_ARTIST\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 8}}
\DoxyCodeLine{00387\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_CONDUCTOR\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 9}}
\DoxyCodeLine{00388\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_BAND\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 10}}
\DoxyCodeLine{00389\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_COMPOSER\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 11}}
\DoxyCodeLine{00390\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_LYRICIST\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 12}}
\DoxyCodeLine{00391\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_RECORDING\_LOCATION\ \ \ \ \ \ 13}}
\DoxyCodeLine{00392\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_DURING\_RECORDING\ \ \ \ \ \ \ \ 14}}
\DoxyCodeLine{00393\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_DURING\_PERFORMANCE\ \ \ \ \ \ 15}}
\DoxyCodeLine{00394\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_SCREEN\_CAPTURE\ \ \ \ \ \ \ \ \ \ 16}}
\DoxyCodeLine{00395\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_BRIGHT\_COLORED\_FISH\ \ \ \ \ 17}}
\DoxyCodeLine{00396\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_ILLUSTRATION\ \ \ \ \ \ \ \ \ \ \ \ 18}}
\DoxyCodeLine{00397\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_BAND\_LOGOTYPE\ \ \ \ \ \ \ \ \ \ \ 19}}
\DoxyCodeLine{00398\ \textcolor{preprocessor}{\#define\ DRFLAC\_PICTURE\_TYPE\_PUBLISHER\_LOGOTYPE\ \ \ \ \ \ 20}}
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00400\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}}
\DoxyCodeLine{00401\ \{}
\DoxyCodeLine{00402\ \ \ \ \ drflac\_container\_native,}
\DoxyCodeLine{00403\ \ \ \ \ drflac\_container\_ogg,}
\DoxyCodeLine{00404\ \ \ \ \ drflac\_container\_unknown}
\DoxyCodeLine{00405\ \}\ drflac\_container;}
\DoxyCodeLine{00406\ }
\DoxyCodeLine{00407\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}}
\DoxyCodeLine{00408\ \{}
\DoxyCodeLine{00409\ \ \ \ \ drflac\_seek\_origin\_start,}
\DoxyCodeLine{00410\ \ \ \ \ drflac\_seek\_origin\_current}
\DoxyCodeLine{00411\ \}\ drflac\_seek\_origin;}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \textcolor{comment}{/*\ The\ order\ of\ members\ in\ this\ structure\ is\ important\ because\ we\ map\ this\ directly\ to\ the\ raw\ data\ within\ the\ SEEKTABLE\ metadata\ block.\ */}}
\DoxyCodeLine{00414\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00415\ \{}
\DoxyCodeLine{00416\ \ \ \ \ drflac\_uint64\ firstPCMFrame;}
\DoxyCodeLine{00417\ \ \ \ \ drflac\_uint64\ flacFrameOffset;\ \ \ \textcolor{comment}{/*\ The\ offset\ from\ the\ first\ byte\ of\ the\ header\ of\ the\ first\ frame.\ */}}
\DoxyCodeLine{00418\ \ \ \ \ drflac\_uint16\ pcmFrameCount;}
\DoxyCodeLine{00419\ \}\ \mbox{\hyperlink{structdrflac__seekpoint}{drflac\_seekpoint}};}
\DoxyCodeLine{00420\ }
\DoxyCodeLine{00421\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00422\ \{}
\DoxyCodeLine{00423\ \ \ \ \ drflac\_uint16\ minBlockSizeInPCMFrames;}
\DoxyCodeLine{00424\ \ \ \ \ drflac\_uint16\ maxBlockSizeInPCMFrames;}
\DoxyCodeLine{00425\ \ \ \ \ drflac\_uint32\ minFrameSizeInPCMFrames;}
\DoxyCodeLine{00426\ \ \ \ \ drflac\_uint32\ maxFrameSizeInPCMFrames;}
\DoxyCodeLine{00427\ \ \ \ \ drflac\_uint32\ sampleRate;}
\DoxyCodeLine{00428\ \ \ \ \ drflac\_uint8\ \ channels;}
\DoxyCodeLine{00429\ \ \ \ \ drflac\_uint8\ \ bitsPerSample;}
\DoxyCodeLine{00430\ \ \ \ \ drflac\_uint64\ totalPCMFrameCount;}
\DoxyCodeLine{00431\ \ \ \ \ drflac\_uint8\ \ md5[16];}
\DoxyCodeLine{00432\ \}\ \mbox{\hyperlink{structdrflac__streaminfo}{drflac\_streaminfo}};}
\DoxyCodeLine{00433\ }
\DoxyCodeLine{00434\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00435\ \{}
\DoxyCodeLine{00436\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00437\ \textcolor{comment}{\ \ \ \ The\ metadata\ type.\ Use\ this\ to\ know\ how\ to\ interpret\ the\ data\ below.\ Will\ be\ set\ to\ one\ of\ the}}
\DoxyCodeLine{00438\ \textcolor{comment}{\ \ \ \ DRFLAC\_METADATA\_BLOCK\_TYPE\_*\ tokens.}}
\DoxyCodeLine{00439\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00440\ \ \ \ \ drflac\_uint32\ type;}
\DoxyCodeLine{00441\ }
\DoxyCodeLine{00442\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00443\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ the\ raw\ data.\ This\ points\ to\ a\ temporary\ buffer\ so\ don't\ hold\ on\ to\ it.\ It's\ best\ to}}
\DoxyCodeLine{00444\ \textcolor{comment}{\ \ \ \ not\ modify\ the\ contents\ of\ this\ buffer.\ Use\ the\ structures\ below\ for\ more\ meaningful\ and\ structured}}
\DoxyCodeLine{00445\ \textcolor{comment}{\ \ \ \ information\ about\ the\ metadata.\ It's\ possible\ for\ this\ to\ be\ null.}}
\DoxyCodeLine{00446\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00447\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ pRawData;}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \ \ \ \ \textcolor{comment}{/*\ The\ size\ in\ bytes\ of\ the\ block\ and\ the\ buffer\ pointed\ to\ by\ pRawData\ if\ it's\ non-\/NULL.\ */}}
\DoxyCodeLine{00450\ \ \ \ \ drflac\_uint32\ rawDataSize;}
\DoxyCodeLine{00451\ }
\DoxyCodeLine{00452\ \ \ \ \ \textcolor{keyword}{union}}
\DoxyCodeLine{00453\ \ \ \ \ \{}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdrflac__streaminfo}{drflac\_streaminfo}}\ streaminfo;}
\DoxyCodeLine{00455\ }
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct}}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ unused;}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \}\ padding;}
\DoxyCodeLine{00460\ }
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct}}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ id;}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ pData;}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ dataSize;}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \}\ application;}
\DoxyCodeLine{00467\ }
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct}}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ seekpointCount;}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__seekpoint}{drflac\_seekpoint}}*\ pSeekpoints;}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \}\ seektable;}
\DoxyCodeLine{00473\ }
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct}}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ vendorLength;}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ vendor;}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ commentCount;}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ pComments;}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \}\ vorbis\_comment;}
\DoxyCodeLine{00481\ }
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct}}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ catalog[128];}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ leadInSampleCount;}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_bool32\ isCD;}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ trackCount;}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ pTrackData;}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \}\ cuesheet;}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct}}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ type;}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mimeLength;}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ mime;}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ descriptionLength;}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ description;}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ width;}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ height;}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ colorDepth;}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ indexColorCount;}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ pictureDataSize;}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint8*\ pPictureData;}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \}\ picture;}
\DoxyCodeLine{00505\ \ \ \ \ \}\ data;}
\DoxyCodeLine{00506\ \}\ \mbox{\hyperlink{structdrflac__metadata}{drflac\_metadata}};}
\DoxyCodeLine{00507\ }
\DoxyCodeLine{00508\ }
\DoxyCodeLine{00509\ \textcolor{comment}{/*}}
\DoxyCodeLine{00510\ \textcolor{comment}{Callback\ for\ when\ data\ needs\ to\ be\ read\ from\ the\ client.}}
\DoxyCodeLine{00511\ \textcolor{comment}{}}
\DoxyCodeLine{00512\ \textcolor{comment}{}}
\DoxyCodeLine{00513\ \textcolor{comment}{Parameters}}
\DoxyCodeLine{00514\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00515\ \textcolor{comment}{pUserData\ (in)}}
\DoxyCodeLine{00516\ \textcolor{comment}{\ \ \ \ The\ user\ data\ that\ was\ passed\ to\ drflac\_open()\ and\ family.}}
\DoxyCodeLine{00517\ \textcolor{comment}{}}
\DoxyCodeLine{00518\ \textcolor{comment}{pBufferOut\ (out)}}
\DoxyCodeLine{00519\ \textcolor{comment}{\ \ \ \ The\ output\ buffer.}}
\DoxyCodeLine{00520\ \textcolor{comment}{}}
\DoxyCodeLine{00521\ \textcolor{comment}{bytesToRead\ (in)}}
\DoxyCodeLine{00522\ \textcolor{comment}{\ \ \ \ The\ number\ of\ bytes\ to\ read.}}
\DoxyCodeLine{00523\ \textcolor{comment}{}}
\DoxyCodeLine{00524\ \textcolor{comment}{}}
\DoxyCodeLine{00525\ \textcolor{comment}{Return\ Value}}
\DoxyCodeLine{00526\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00527\ \textcolor{comment}{The\ number\ of\ bytes\ actually\ read.}}
\DoxyCodeLine{00528\ \textcolor{comment}{}}
\DoxyCodeLine{00529\ \textcolor{comment}{}}
\DoxyCodeLine{00530\ \textcolor{comment}{Remarks}}
\DoxyCodeLine{00531\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00532\ \textcolor{comment}{A\ return\ value\ of\ less\ than\ bytesToRead\ indicates\ the\ end\ of\ the\ stream.\ Do\ \_not\_\ return\ from\ this\ callback\ until\ either\ the\ entire\ bytesToRead\ is\ filled\ or}}
\DoxyCodeLine{00533\ \textcolor{comment}{you\ have\ reached\ the\ end\ of\ the\ stream.}}
\DoxyCodeLine{00534\ \textcolor{comment}{*/}}
\DoxyCodeLine{00535\ \textcolor{keyword}{typedef}\ size\_t\ (*\ drflac\_read\_proc)(\textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{void}*\ pBufferOut,\ \textcolor{keywordtype}{size\_t}\ bytesToRead);}
\DoxyCodeLine{00536\ }
\DoxyCodeLine{00537\ \textcolor{comment}{/*}}
\DoxyCodeLine{00538\ \textcolor{comment}{Callback\ for\ when\ data\ needs\ to\ be\ seeked.}}
\DoxyCodeLine{00539\ \textcolor{comment}{}}
\DoxyCodeLine{00540\ \textcolor{comment}{}}
\DoxyCodeLine{00541\ \textcolor{comment}{Parameters}}
\DoxyCodeLine{00542\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00543\ \textcolor{comment}{pUserData\ (in)}}
\DoxyCodeLine{00544\ \textcolor{comment}{\ \ \ \ The\ user\ data\ that\ was\ passed\ to\ drflac\_open()\ and\ family.}}
\DoxyCodeLine{00545\ \textcolor{comment}{}}
\DoxyCodeLine{00546\ \textcolor{comment}{offset\ (in)}}
\DoxyCodeLine{00547\ \textcolor{comment}{\ \ \ \ The\ number\ of\ bytes\ to\ move,\ relative\ to\ the\ origin.\ Will\ never\ be\ negative.}}
\DoxyCodeLine{00548\ \textcolor{comment}{}}
\DoxyCodeLine{00549\ \textcolor{comment}{origin\ (in)}}
\DoxyCodeLine{00550\ \textcolor{comment}{\ \ \ \ The\ origin\ of\ the\ seek\ -\/\ the\ current\ position\ or\ the\ start\ of\ the\ stream.}}
\DoxyCodeLine{00551\ \textcolor{comment}{}}
\DoxyCodeLine{00552\ \textcolor{comment}{}}
\DoxyCodeLine{00553\ \textcolor{comment}{Return\ Value}}
\DoxyCodeLine{00554\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00555\ \textcolor{comment}{Whether\ or\ not\ the\ seek\ was\ successful.}}
\DoxyCodeLine{00556\ \textcolor{comment}{}}
\DoxyCodeLine{00557\ \textcolor{comment}{}}
\DoxyCodeLine{00558\ \textcolor{comment}{Remarks}}
\DoxyCodeLine{00559\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00560\ \textcolor{comment}{The\ offset\ will\ never\ be\ negative.\ Whether\ or\ not\ it\ is\ relative\ to\ the\ beginning\ or\ current\ position\ is\ determined\ by\ the\ "{}origin"{}\ parameter\ which\ will\ be}}
\DoxyCodeLine{00561\ \textcolor{comment}{either\ drflac\_seek\_origin\_start\ or\ drflac\_seek\_origin\_current.}}
\DoxyCodeLine{00562\ \textcolor{comment}{}}
\DoxyCodeLine{00563\ \textcolor{comment}{When\ seeking\ to\ a\ PCM\ frame\ using\ drflac\_seek\_to\_pcm\_frame(),\ dr\_flac\ may\ call\ this\ with\ an\ offset\ beyond\ the\ end\ of\ the\ FLAC\ stream.\ This\ needs\ to\ be\ detected}}
\DoxyCodeLine{00564\ \textcolor{comment}{and\ handled\ by\ returning\ DRFLAC\_FALSE.}}
\DoxyCodeLine{00565\ \textcolor{comment}{*/}}
\DoxyCodeLine{00566\ \textcolor{keyword}{typedef}\ drflac\_bool32\ (*\ drflac\_seek\_proc)(\textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structoffset}{offset}},\ drflac\_seek\_origin\ origin);}
\DoxyCodeLine{00567\ }
\DoxyCodeLine{00568\ \textcolor{comment}{/*}}
\DoxyCodeLine{00569\ \textcolor{comment}{Callback\ for\ when\ a\ metadata\ block\ is\ read.}}
\DoxyCodeLine{00570\ \textcolor{comment}{}}
\DoxyCodeLine{00571\ \textcolor{comment}{}}
\DoxyCodeLine{00572\ \textcolor{comment}{Parameters}}
\DoxyCodeLine{00573\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00574\ \textcolor{comment}{pUserData\ (in)}}
\DoxyCodeLine{00575\ \textcolor{comment}{\ \ \ \ The\ user\ data\ that\ was\ passed\ to\ drflac\_open()\ and\ family.}}
\DoxyCodeLine{00576\ \textcolor{comment}{}}
\DoxyCodeLine{00577\ \textcolor{comment}{pMetadata\ (in)}}
\DoxyCodeLine{00578\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ a\ structure\ containing\ the\ data\ of\ the\ metadata\ block.}}
\DoxyCodeLine{00579\ \textcolor{comment}{}}
\DoxyCodeLine{00580\ \textcolor{comment}{}}
\DoxyCodeLine{00581\ \textcolor{comment}{Remarks}}
\DoxyCodeLine{00582\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00583\ \textcolor{comment}{Use\ pMetadata-\/>type\ to\ determine\ which\ metadata\ block\ is\ being\ handled\ and\ how\ to\ read\ the\ data.\ This}}
\DoxyCodeLine{00584\ \textcolor{comment}{will\ be\ set\ to\ one\ of\ the\ DRFLAC\_METADATA\_BLOCK\_TYPE\_*\ tokens.}}
\DoxyCodeLine{00585\ \textcolor{comment}{*/}}
\DoxyCodeLine{00586\ \textcolor{keyword}{typedef}\ void\ (*\ drflac\_meta\_proc)(\textcolor{keywordtype}{void}*\ pUserData,\ \mbox{\hyperlink{structdrflac__metadata}{drflac\_metadata}}*\ pMetadata);}
\DoxyCodeLine{00587\ }
\DoxyCodeLine{00588\ }
\DoxyCodeLine{00589\ \textcolor{comment}{/*\ Structure\ for\ internal\ use.\ Only\ used\ for\ decoders\ opened\ with\ drflac\_open\_memory.\ */}}
\DoxyCodeLine{00590\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00591\ \{}
\DoxyCodeLine{00592\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint8*\ data;}
\DoxyCodeLine{00593\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ dataSize;}
\DoxyCodeLine{00594\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ currentReadPos;}
\DoxyCodeLine{00595\ \}\ \mbox{\hyperlink{structdrflac____memory__stream}{drflac\_\_memory\_stream}};}
\DoxyCodeLine{00596\ }
\DoxyCodeLine{00597\ \textcolor{comment}{/*\ Structure\ for\ internal\ use.\ Used\ for\ bit\ streaming.\ */}}
\DoxyCodeLine{00598\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00599\ \{}
\DoxyCodeLine{00600\ \ \ \ \ \textcolor{comment}{/*\ The\ function\ to\ call\ when\ more\ data\ needs\ to\ be\ read.\ */}}
\DoxyCodeLine{00601\ \ \ \ \ drflac\_read\_proc\ onRead;}
\DoxyCodeLine{00602\ }
\DoxyCodeLine{00603\ \ \ \ \ \textcolor{comment}{/*\ The\ function\ to\ call\ when\ the\ current\ read\ position\ needs\ to\ be\ moved.\ */}}
\DoxyCodeLine{00604\ \ \ \ \ drflac\_seek\_proc\ onSeek;}
\DoxyCodeLine{00605\ }
\DoxyCodeLine{00606\ \ \ \ \ \textcolor{comment}{/*\ The\ user\ data\ to\ pass\ around\ to\ onRead\ and\ onSeek.\ */}}
\DoxyCodeLine{00607\ \ \ \ \ \textcolor{keywordtype}{void}*\ pUserData;}
\DoxyCodeLine{00608\ }
\DoxyCodeLine{00609\ }
\DoxyCodeLine{00610\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00611\ \textcolor{comment}{\ \ \ \ The\ number\ of\ unaligned\ bytes\ in\ the\ L2\ cache.\ This\ will\ always\ be\ 0\ until\ the\ end\ of\ the\ stream\ is\ hit.\ At\ the\ end\ of\ the}}
\DoxyCodeLine{00612\ \textcolor{comment}{\ \ \ \ stream\ there\ will\ be\ a\ number\ of\ bytes\ that\ don't\ cleanly\ fit\ in\ an\ L1\ cache\ line,\ so\ we\ use\ this\ variable\ to\ know\ whether}}
\DoxyCodeLine{00613\ \textcolor{comment}{\ \ \ \ or\ not\ the\ bistreamer\ needs\ to\ run\ on\ a\ slower\ path\ to\ read\ those\ last\ bytes.\ This\ will\ never\ be\ more\ than\ sizeof(drflac\_cache\_t).}}
\DoxyCodeLine{00614\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00615\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ unalignedByteCount;}
\DoxyCodeLine{00616\ }
\DoxyCodeLine{00617\ \ \ \ \ \textcolor{comment}{/*\ The\ content\ of\ the\ unaligned\ bytes.\ */}}
\DoxyCodeLine{00618\ \ \ \ \ drflac\_cache\_t\ unalignedCache;}
\DoxyCodeLine{00619\ }
\DoxyCodeLine{00620\ \ \ \ \ \textcolor{comment}{/*\ The\ index\ of\ the\ next\ valid\ cache\ line\ in\ the\ "{}L2"{}\ cache.\ */}}
\DoxyCodeLine{00621\ \ \ \ \ drflac\_uint32\ nextL2Line;}
\DoxyCodeLine{00622\ }
\DoxyCodeLine{00623\ \ \ \ \ \textcolor{comment}{/*\ The\ number\ of\ bits\ that\ have\ been\ consumed\ by\ the\ cache.\ This\ is\ used\ to\ determine\ how\ many\ valid\ bits\ are\ remaining.\ */}}
\DoxyCodeLine{00624\ \ \ \ \ drflac\_uint32\ consumedBits;}
\DoxyCodeLine{00625\ }
\DoxyCodeLine{00626\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00627\ \textcolor{comment}{\ \ \ \ The\ cached\ data\ which\ was\ most\ recently\ read\ from\ the\ client.\ There\ are\ two\ levels\ of\ cache.\ Data\ flows\ as\ such:}}
\DoxyCodeLine{00628\ \textcolor{comment}{\ \ \ \ Client\ -\/>\ L2\ -\/>\ L1.\ The\ L2\ -\/>\ L1\ movement\ is\ aligned\ and\ runs\ on\ a\ fast\ path\ in\ just\ a\ few\ instructions.}}
\DoxyCodeLine{00629\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00630\ \ \ \ \ drflac\_cache\_t\ cacheL2[DR\_FLAC\_BUFFER\_SIZE/\textcolor{keyword}{sizeof}(drflac\_cache\_t)];}
\DoxyCodeLine{00631\ \ \ \ \ drflac\_cache\_t\ cache;}
\DoxyCodeLine{00632\ }
\DoxyCodeLine{00633\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00634\ \textcolor{comment}{\ \ \ \ CRC-\/16.\ This\ is\ updated\ whenever\ bits\ are\ read\ from\ the\ bit\ stream.\ Manually\ set\ this\ to\ 0\ to\ reset\ the\ CRC.\ For\ FLAC,\ this}}
\DoxyCodeLine{00635\ \textcolor{comment}{\ \ \ \ is\ reset\ to\ 0\ at\ the\ beginning\ of\ each\ frame.}}
\DoxyCodeLine{00636\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00637\ \ \ \ \ drflac\_uint16\ crc16;}
\DoxyCodeLine{00638\ \ \ \ \ drflac\_cache\_t\ crc16Cache;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ A\ cache\ for\ optimizing\ CRC\ calculations.\ This\ is\ filled\ when\ when\ the\ L1\ cache\ is\ reloaded.\ */}}
\DoxyCodeLine{00639\ \ \ \ \ drflac\_uint32\ crc16CacheIgnoredBytes;\ \ \ \textcolor{comment}{/*\ The\ number\ of\ bytes\ to\ ignore\ when\ updating\ the\ CRC-\/16\ from\ the\ CRC-\/16\ cache.\ */}}
\DoxyCodeLine{00640\ \}\ \mbox{\hyperlink{structdrflac__bs}{drflac\_bs}};}
\DoxyCodeLine{00641\ }
\DoxyCodeLine{00642\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00643\ \{}
\DoxyCodeLine{00644\ \ \ \ \ \textcolor{comment}{/*\ The\ type\ of\ the\ subframe:\ SUBFRAME\_CONSTANT,\ SUBFRAME\_VERBATIM,\ SUBFRAME\_FIXED\ or\ SUBFRAME\_LPC.\ */}}
\DoxyCodeLine{00645\ \ \ \ \ drflac\_uint8\ subframeType;}
\DoxyCodeLine{00646\ }
\DoxyCodeLine{00647\ \ \ \ \ \textcolor{comment}{/*\ The\ number\ of\ wasted\ bits\ per\ sample\ as\ specified\ by\ the\ sub-\/frame\ header.\ */}}
\DoxyCodeLine{00648\ \ \ \ \ drflac\_uint8\ wastedBitsPerSample;}
\DoxyCodeLine{00649\ }
\DoxyCodeLine{00650\ \ \ \ \ \textcolor{comment}{/*\ The\ order\ to\ use\ for\ the\ prediction\ stage\ for\ SUBFRAME\_FIXED\ and\ SUBFRAME\_LPC.\ */}}
\DoxyCodeLine{00651\ \ \ \ \ drflac\_uint8\ lpcOrder;}
\DoxyCodeLine{00652\ }
\DoxyCodeLine{00653\ \ \ \ \ \textcolor{comment}{/*\ A\ pointer\ to\ the\ buffer\ containing\ the\ decoded\ samples\ in\ the\ subframe.\ This\ pointer\ is\ an\ offset\ from\ drflac::pExtraData.\ */}}
\DoxyCodeLine{00654\ \ \ \ \ drflac\_int32*\ pSamplesS32;}
\DoxyCodeLine{00655\ \}\ \mbox{\hyperlink{structdrflac__subframe}{drflac\_subframe}};}
\DoxyCodeLine{00656\ }
\DoxyCodeLine{00657\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00658\ \{}
\DoxyCodeLine{00659\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00660\ \textcolor{comment}{\ \ \ \ If\ the\ stream\ uses\ variable\ block\ sizes,\ this\ will\ be\ set\ to\ the\ index\ of\ the\ first\ PCM\ frame.\ If\ fixed\ block\ sizes\ are\ used,\ this\ will}}
\DoxyCodeLine{00661\ \textcolor{comment}{\ \ \ \ always\ be\ set\ to\ 0.\ This\ is\ 64-\/bit\ because\ the\ decoded\ PCM\ frame\ number\ will\ be\ 36\ bits.}}
\DoxyCodeLine{00662\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00663\ \ \ \ \ drflac\_uint64\ pcmFrameNumber;}
\DoxyCodeLine{00664\ }
\DoxyCodeLine{00665\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00666\ \textcolor{comment}{\ \ \ \ If\ the\ stream\ uses\ fixed\ block\ sizes,\ this\ will\ be\ set\ to\ the\ frame\ number.\ If\ variable\ block\ sizes\ are\ used,\ this\ will\ always\ be\ 0.\ This}}
\DoxyCodeLine{00667\ \textcolor{comment}{\ \ \ \ is\ 32-\/bit\ because\ in\ fixed\ block\ sizes,\ the\ maximum\ frame\ number\ will\ be\ 31\ bits.}}
\DoxyCodeLine{00668\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00669\ \ \ \ \ drflac\_uint32\ flacFrameNumber;}
\DoxyCodeLine{00670\ }
\DoxyCodeLine{00671\ \ \ \ \ \textcolor{comment}{/*\ The\ sample\ rate\ of\ this\ frame.\ */}}
\DoxyCodeLine{00672\ \ \ \ \ drflac\_uint32\ sampleRate;}
\DoxyCodeLine{00673\ }
\DoxyCodeLine{00674\ \ \ \ \ \textcolor{comment}{/*\ The\ number\ of\ PCM\ frames\ in\ each\ sub-\/frame\ within\ this\ frame.\ */}}
\DoxyCodeLine{00675\ \ \ \ \ drflac\_uint16\ blockSizeInPCMFrames;}
\DoxyCodeLine{00676\ }
\DoxyCodeLine{00677\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00678\ \textcolor{comment}{\ \ \ \ The\ channel\ assignment\ of\ this\ frame.\ This\ is\ not\ always\ set\ to\ the\ channel\ count.\ If\ interchannel\ decorrelation\ is\ being\ used\ this}}
\DoxyCodeLine{00679\ \textcolor{comment}{\ \ \ \ will\ be\ set\ to\ DRFLAC\_CHANNEL\_ASSIGNMENT\_LEFT\_SIDE,\ DRFLAC\_CHANNEL\_ASSIGNMENT\_RIGHT\_SIDE\ or\ DRFLAC\_CHANNEL\_ASSIGNMENT\_MID\_SIDE.}}
\DoxyCodeLine{00680\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00681\ \ \ \ \ drflac\_uint8\ channelAssignment;}
\DoxyCodeLine{00682\ }
\DoxyCodeLine{00683\ \ \ \ \ \textcolor{comment}{/*\ The\ number\ of\ bits\ per\ sample\ within\ this\ frame.\ */}}
\DoxyCodeLine{00684\ \ \ \ \ drflac\_uint8\ bitsPerSample;}
\DoxyCodeLine{00685\ }
\DoxyCodeLine{00686\ \ \ \ \ \textcolor{comment}{/*\ The\ frame's\ CRC.\ */}}
\DoxyCodeLine{00687\ \ \ \ \ drflac\_uint8\ crc8;}
\DoxyCodeLine{00688\ \}\ \mbox{\hyperlink{structdrflac__frame__header}{drflac\_frame\_header}};}
\DoxyCodeLine{00689\ }
\DoxyCodeLine{00690\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00691\ \{}
\DoxyCodeLine{00692\ \ \ \ \ \textcolor{comment}{/*\ The\ header.\ */}}
\DoxyCodeLine{00693\ \ \ \ \ \mbox{\hyperlink{structdrflac__frame__header}{drflac\_frame\_header}}\ header;}
\DoxyCodeLine{00694\ }
\DoxyCodeLine{00695\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00696\ \textcolor{comment}{\ \ \ \ The\ number\ of\ PCM\ frames\ left\ to\ be\ read\ in\ this\ FLAC\ frame.\ This\ is\ initially\ set\ to\ the\ block\ size.\ As\ PCM\ frames\ are\ read,}}
\DoxyCodeLine{00697\ \textcolor{comment}{\ \ \ \ this\ will\ be\ decremented.\ When\ it\ reaches\ 0,\ the\ decoder\ will\ see\ this\ frame\ as\ fully\ consumed\ and\ load\ the\ next\ frame.}}
\DoxyCodeLine{00698\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00699\ \ \ \ \ drflac\_uint32\ pcmFramesRemaining;}
\DoxyCodeLine{00700\ }
\DoxyCodeLine{00701\ \ \ \ \ \textcolor{comment}{/*\ The\ list\ of\ sub-\/frames\ within\ the\ frame.\ There\ is\ one\ sub-\/frame\ for\ each\ channel,\ and\ there's\ a\ maximum\ of\ 8\ channels.\ */}}
\DoxyCodeLine{00702\ \ \ \ \ \mbox{\hyperlink{structdrflac__subframe}{drflac\_subframe}}\ subframes[8];}
\DoxyCodeLine{00703\ \}\ \mbox{\hyperlink{structdrflac__frame}{drflac\_frame}};}
\DoxyCodeLine{00704\ }
\DoxyCodeLine{00705\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00706\ \{}
\DoxyCodeLine{00707\ \ \ \ \ \textcolor{comment}{/*\ The\ function\ to\ call\ when\ a\ metadata\ block\ is\ read.\ */}}
\DoxyCodeLine{00708\ \ \ \ \ drflac\_meta\_proc\ onMeta;}
\DoxyCodeLine{00709\ }
\DoxyCodeLine{00710\ \ \ \ \ \textcolor{comment}{/*\ The\ user\ data\ posted\ to\ the\ metadata\ callback\ function.\ */}}
\DoxyCodeLine{00711\ \ \ \ \ \textcolor{keywordtype}{void}*\ pUserDataMD;}
\DoxyCodeLine{00712\ }
\DoxyCodeLine{00713\ \ \ \ \ \textcolor{comment}{/*\ Memory\ allocation\ callbacks.\ */}}
\DoxyCodeLine{00714\ \ \ \ \ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}\ allocationCallbacks;}
\DoxyCodeLine{00715\ }
\DoxyCodeLine{00716\ }
\DoxyCodeLine{00717\ \ \ \ \ \textcolor{comment}{/*\ The\ sample\ rate.\ Will\ be\ set\ to\ something\ like\ 44100.\ */}}
\DoxyCodeLine{00718\ \ \ \ \ drflac\_uint32\ sampleRate;}
\DoxyCodeLine{00719\ }
\DoxyCodeLine{00720\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00721\ \textcolor{comment}{\ \ \ \ The\ number\ of\ channels.\ This\ will\ be\ set\ to\ 1\ for\ monaural\ streams,\ 2\ for\ stereo,\ etc.\ Maximum\ 8.\ This\ is\ set\ based\ on\ the}}
\DoxyCodeLine{00722\ \textcolor{comment}{\ \ \ \ value\ specified\ in\ the\ STREAMINFO\ block.}}
\DoxyCodeLine{00723\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00724\ \ \ \ \ drflac\_uint8\ channels;}
\DoxyCodeLine{00725\ }
\DoxyCodeLine{00726\ \ \ \ \ \textcolor{comment}{/*\ The\ bits\ per\ sample.\ Will\ be\ set\ to\ something\ like\ 16,\ 24,\ etc.\ */}}
\DoxyCodeLine{00727\ \ \ \ \ drflac\_uint8\ bitsPerSample;}
\DoxyCodeLine{00728\ }
\DoxyCodeLine{00729\ \ \ \ \ \textcolor{comment}{/*\ The\ maximum\ block\ size,\ in\ samples.\ This\ number\ represents\ the\ number\ of\ samples\ in\ each\ channel\ (not\ combined).\ */}}
\DoxyCodeLine{00730\ \ \ \ \ drflac\_uint16\ maxBlockSizeInPCMFrames;}
\DoxyCodeLine{00731\ }
\DoxyCodeLine{00732\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00733\ \textcolor{comment}{\ \ \ \ The\ total\ number\ of\ PCM\ Frames\ making\ up\ the\ stream.\ Can\ be\ 0\ in\ which\ case\ it's\ still\ a\ valid\ stream,\ but\ just\ means}}
\DoxyCodeLine{00734\ \textcolor{comment}{\ \ \ \ the\ total\ PCM\ frame\ count\ is\ unknown.\ Likely\ the\ case\ with\ streams\ like\ internet\ radio.}}
\DoxyCodeLine{00735\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{00736\ \ \ \ \ drflac\_uint64\ totalPCMFrameCount;}
\DoxyCodeLine{00737\ }
\DoxyCodeLine{00738\ }
\DoxyCodeLine{00739\ \ \ \ \ \textcolor{comment}{/*\ The\ container\ type.\ This\ is\ set\ based\ on\ whether\ or\ not\ the\ decoder\ was\ opened\ from\ a\ native\ or\ Ogg\ stream.\ */}}
\DoxyCodeLine{00740\ \ \ \ \ drflac\_container\ container;}
\DoxyCodeLine{00741\ }
\DoxyCodeLine{00742\ \ \ \ \ \textcolor{comment}{/*\ The\ number\ of\ seekpoints\ in\ the\ seektable.\ */}}
\DoxyCodeLine{00743\ \ \ \ \ drflac\_uint32\ seekpointCount;}
\DoxyCodeLine{00744\ }
\DoxyCodeLine{00745\ }
\DoxyCodeLine{00746\ \ \ \ \ \textcolor{comment}{/*\ Information\ about\ the\ frame\ the\ decoder\ is\ currently\ sitting\ on.\ */}}
\DoxyCodeLine{00747\ \ \ \ \ \mbox{\hyperlink{structdrflac__frame}{drflac\_frame}}\ currentFLACFrame;}
\DoxyCodeLine{00748\ }
\DoxyCodeLine{00749\ }
\DoxyCodeLine{00750\ \ \ \ \ \textcolor{comment}{/*\ The\ index\ of\ the\ PCM\ frame\ the\ decoder\ is\ currently\ sitting\ on.\ This\ is\ only\ used\ for\ seeking.\ */}}
\DoxyCodeLine{00751\ \ \ \ \ drflac\_uint64\ currentPCMFrame;}
\DoxyCodeLine{00752\ }
\DoxyCodeLine{00753\ \ \ \ \ \textcolor{comment}{/*\ The\ position\ of\ the\ first\ FLAC\ frame\ in\ the\ stream.\ This\ is\ only\ ever\ used\ for\ seeking.\ */}}
\DoxyCodeLine{00754\ \ \ \ \ drflac\_uint64\ firstFLACFramePosInBytes;}
\DoxyCodeLine{00755\ }
\DoxyCodeLine{00756\ }
\DoxyCodeLine{00757\ \ \ \ \ \textcolor{comment}{/*\ A\ hack\ to\ avoid\ a\ malloc()\ when\ opening\ a\ decoder\ with\ drflac\_open\_memory().\ */}}
\DoxyCodeLine{00758\ \ \ \ \ \mbox{\hyperlink{structdrflac____memory__stream}{drflac\_\_memory\_stream}}\ memoryStream;}
\DoxyCodeLine{00759\ }
\DoxyCodeLine{00760\ }
\DoxyCodeLine{00761\ \ \ \ \ \textcolor{comment}{/*\ A\ pointer\ to\ the\ decoded\ sample\ data.\ This\ is\ an\ offset\ of\ pExtraData.\ */}}
\DoxyCodeLine{00762\ \ \ \ \ drflac\_int32*\ pDecodedSamples;}
\DoxyCodeLine{00763\ }
\DoxyCodeLine{00764\ \ \ \ \ \textcolor{comment}{/*\ A\ pointer\ to\ the\ seek\ table.\ This\ is\ an\ offset\ of\ pExtraData,\ or\ NULL\ if\ there\ is\ no\ seek\ table.\ */}}
\DoxyCodeLine{00765\ \ \ \ \ \mbox{\hyperlink{structdrflac__seekpoint}{drflac\_seekpoint}}*\ pSeekpoints;}
\DoxyCodeLine{00766\ }
\DoxyCodeLine{00767\ \ \ \ \ \textcolor{comment}{/*\ Internal\ use\ only.\ Only\ used\ with\ Ogg\ containers.\ Points\ to\ a\ drflac\_oggbs\ object.\ This\ is\ an\ offset\ of\ pExtraData.\ */}}
\DoxyCodeLine{00768\ \ \ \ \ \textcolor{keywordtype}{void}*\ \_oggbs;}
\DoxyCodeLine{00769\ }
\DoxyCodeLine{00770\ \ \ \ \ \textcolor{comment}{/*\ Internal\ use\ only.\ Used\ for\ profiling\ and\ testing\ different\ seeking\ modes.\ */}}
\DoxyCodeLine{00771\ \ \ \ \ drflac\_bool32\ \_noSeekTableSeek\ \ \ \ :\ 1;}
\DoxyCodeLine{00772\ \ \ \ \ drflac\_bool32\ \_noBinarySearchSeek\ :\ 1;}
\DoxyCodeLine{00773\ \ \ \ \ drflac\_bool32\ \_noBruteForceSeek\ \ \ :\ 1;}
\DoxyCodeLine{00774\ }
\DoxyCodeLine{00775\ \ \ \ \ \textcolor{comment}{/*\ The\ bit\ streamer.\ The\ raw\ FLAC\ data\ is\ fed\ through\ this\ object.\ */}}
\DoxyCodeLine{00776\ \ \ \ \ \mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}\ bs;}
\DoxyCodeLine{00777\ }
\DoxyCodeLine{00778\ \ \ \ \ \textcolor{comment}{/*\ Variable\ length\ extra\ data.\ We\ attach\ this\ to\ the\ end\ of\ the\ object\ so\ we\ can\ avoid\ unnecessary\ mallocs.\ */}}
\DoxyCodeLine{00779\ \ \ \ \ drflac\_uint8\ pExtraData[1];}
\DoxyCodeLine{00780\ \}\ \mbox{\hyperlink{structdrflac}{drflac}};}
\DoxyCodeLine{00781\ }
\DoxyCodeLine{00782\ }
\DoxyCodeLine{00783\ \textcolor{comment}{/*}}
\DoxyCodeLine{00784\ \textcolor{comment}{Opens\ a\ FLAC\ decoder.}}
\DoxyCodeLine{00785\ \textcolor{comment}{}}
\DoxyCodeLine{00786\ \textcolor{comment}{}}
\DoxyCodeLine{00787\ \textcolor{comment}{Parameters}}
\DoxyCodeLine{00788\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00789\ \textcolor{comment}{onRead\ (in)}}
\DoxyCodeLine{00790\ \textcolor{comment}{\ \ \ \ The\ function\ to\ call\ when\ data\ needs\ to\ be\ read\ from\ the\ client.}}
\DoxyCodeLine{00791\ \textcolor{comment}{}}
\DoxyCodeLine{00792\ \textcolor{comment}{onSeek\ (in)}}
\DoxyCodeLine{00793\ \textcolor{comment}{\ \ \ \ The\ function\ to\ call\ when\ the\ read\ position\ of\ the\ client\ data\ needs\ to\ move.}}
\DoxyCodeLine{00794\ \textcolor{comment}{}}
\DoxyCodeLine{00795\ \textcolor{comment}{pUserData\ (in,\ optional)}}
\DoxyCodeLine{00796\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ application\ defined\ data\ that\ will\ be\ passed\ to\ onRead\ and\ onSeek.}}
\DoxyCodeLine{00797\ \textcolor{comment}{}}
\DoxyCodeLine{00798\ \textcolor{comment}{pAllocationCallbacks\ (in,\ optional)}}
\DoxyCodeLine{00799\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ application\ defined\ callbacks\ for\ managing\ memory\ allocations.}}
\DoxyCodeLine{00800\ \textcolor{comment}{}}
\DoxyCodeLine{00801\ \textcolor{comment}{}}
\DoxyCodeLine{00802\ \textcolor{comment}{Return\ Value}}
\DoxyCodeLine{00803\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00804\ \textcolor{comment}{Returns\ a\ pointer\ to\ an\ object\ representing\ the\ decoder.}}
\DoxyCodeLine{00805\ \textcolor{comment}{}}
\DoxyCodeLine{00806\ \textcolor{comment}{}}
\DoxyCodeLine{00807\ \textcolor{comment}{Remarks}}
\DoxyCodeLine{00808\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00809\ \textcolor{comment}{Close\ the\ decoder\ with\ \`{}drflac\_close()`.}}
\DoxyCodeLine{00810\ \textcolor{comment}{}}
\DoxyCodeLine{00811\ \textcolor{comment}{\`{}pAllocationCallbacks`\ can\ be\ NULL\ in\ which\ case\ it\ will\ use\ \`{}DRFLAC\_MALLOC`,\ \`{}DRFLAC\_REALLOC`\ and\ \`{}DRFLAC\_FREE`.}}
\DoxyCodeLine{00812\ \textcolor{comment}{}}
\DoxyCodeLine{00813\ \textcolor{comment}{This\ function\ will\ automatically\ detect\ whether\ or\ not\ you\ are\ attempting\ to\ open\ a\ native\ or\ Ogg\ encapsulated\ FLAC,\ both\ of\ which\ should\ work\ seamlessly}}
\DoxyCodeLine{00814\ \textcolor{comment}{without\ any\ manual\ intervention.\ Ogg\ encapsulation\ also\ works\ with\ multiplexed\ streams\ which\ basically\ means\ it\ can\ play\ FLAC\ encoded\ audio\ tracks\ in\ videos.}}
\DoxyCodeLine{00815\ \textcolor{comment}{}}
\DoxyCodeLine{00816\ \textcolor{comment}{This\ is\ the\ lowest\ level\ function\ for\ opening\ a\ FLAC\ stream.\ You\ can\ also\ use\ \`{}drflac\_open\_file()`\ and\ \`{}drflac\_open\_memory()`\ to\ open\ the\ stream\ from\ a\ file\ or}}
\DoxyCodeLine{00817\ \textcolor{comment}{from\ a\ block\ of\ memory\ respectively.}}
\DoxyCodeLine{00818\ \textcolor{comment}{}}
\DoxyCodeLine{00819\ \textcolor{comment}{The\ STREAMINFO\ block\ must\ be\ present\ for\ this\ to\ succeed.\ Use\ \`{}drflac\_open\_relaxed()`\ to\ open\ a\ FLAC\ stream\ where\ the\ header\ may\ not\ be\ present.}}
\DoxyCodeLine{00820\ \textcolor{comment}{}}
\DoxyCodeLine{00821\ \textcolor{comment}{Use\ \`{}drflac\_open\_with\_metadata()`\ if\ you\ need\ access\ to\ metadata.}}
\DoxyCodeLine{00822\ \textcolor{comment}{}}
\DoxyCodeLine{00823\ \textcolor{comment}{}}
\DoxyCodeLine{00824\ \textcolor{comment}{Seek\ Also}}
\DoxyCodeLine{00825\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00826\ \textcolor{comment}{drflac\_open\_file()}}
\DoxyCodeLine{00827\ \textcolor{comment}{drflac\_open\_memory()}}
\DoxyCodeLine{00828\ \textcolor{comment}{drflac\_open\_with\_metadata()}}
\DoxyCodeLine{00829\ \textcolor{comment}{drflac\_close()}}
\DoxyCodeLine{00830\ \textcolor{comment}{*/}}
\DoxyCodeLine{00831\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open(drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{00832\ }
\DoxyCodeLine{00833\ \textcolor{comment}{/*}}
\DoxyCodeLine{00834\ \textcolor{comment}{Opens\ a\ FLAC\ stream\ with\ relaxed\ validation\ of\ the\ header\ block.}}
\DoxyCodeLine{00835\ \textcolor{comment}{}}
\DoxyCodeLine{00836\ \textcolor{comment}{}}
\DoxyCodeLine{00837\ \textcolor{comment}{Parameters}}
\DoxyCodeLine{00838\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00839\ \textcolor{comment}{onRead\ (in)}}
\DoxyCodeLine{00840\ \textcolor{comment}{\ \ \ \ The\ function\ to\ call\ when\ data\ needs\ to\ be\ read\ from\ the\ client.}}
\DoxyCodeLine{00841\ \textcolor{comment}{}}
\DoxyCodeLine{00842\ \textcolor{comment}{onSeek\ (in)}}
\DoxyCodeLine{00843\ \textcolor{comment}{\ \ \ \ The\ function\ to\ call\ when\ the\ read\ position\ of\ the\ client\ data\ needs\ to\ move.}}
\DoxyCodeLine{00844\ \textcolor{comment}{}}
\DoxyCodeLine{00845\ \textcolor{comment}{container\ (in)}}
\DoxyCodeLine{00846\ \textcolor{comment}{\ \ \ \ Whether\ or\ not\ the\ FLAC\ stream\ is\ encapsulated\ using\ standard\ FLAC\ encapsulation\ or\ Ogg\ encapsulation.}}
\DoxyCodeLine{00847\ \textcolor{comment}{}}
\DoxyCodeLine{00848\ \textcolor{comment}{pUserData\ (in,\ optional)}}
\DoxyCodeLine{00849\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ application\ defined\ data\ that\ will\ be\ passed\ to\ onRead\ and\ onSeek.}}
\DoxyCodeLine{00850\ \textcolor{comment}{}}
\DoxyCodeLine{00851\ \textcolor{comment}{pAllocationCallbacks\ (in,\ optional)}}
\DoxyCodeLine{00852\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ application\ defined\ callbacks\ for\ managing\ memory\ allocations.}}
\DoxyCodeLine{00853\ \textcolor{comment}{}}
\DoxyCodeLine{00854\ \textcolor{comment}{}}
\DoxyCodeLine{00855\ \textcolor{comment}{Return\ Value}}
\DoxyCodeLine{00856\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00857\ \textcolor{comment}{A\ pointer\ to\ an\ object\ representing\ the\ decoder.}}
\DoxyCodeLine{00858\ \textcolor{comment}{}}
\DoxyCodeLine{00859\ \textcolor{comment}{}}
\DoxyCodeLine{00860\ \textcolor{comment}{Remarks}}
\DoxyCodeLine{00861\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00862\ \textcolor{comment}{The\ same\ as\ drflac\_open(),\ except\ attempts\ to\ open\ the\ stream\ even\ when\ a\ header\ block\ is\ not\ present.}}
\DoxyCodeLine{00863\ \textcolor{comment}{}}
\DoxyCodeLine{00864\ \textcolor{comment}{Because\ the\ header\ is\ not\ necessarily\ available,\ the\ caller\ must\ explicitly\ define\ the\ container\ (Native\ or\ Ogg).\ Do\ not\ set\ this\ to\ \`{}drflac\_container\_unknown`}}
\DoxyCodeLine{00865\ \textcolor{comment}{as\ that\ is\ for\ internal\ use\ only.}}
\DoxyCodeLine{00866\ \textcolor{comment}{}}
\DoxyCodeLine{00867\ \textcolor{comment}{Opening\ in\ relaxed\ mode\ will\ continue\ reading\ data\ from\ onRead\ until\ it\ finds\ a\ valid\ frame.\ If\ a\ frame\ is\ never\ found\ it\ will\ continue\ forever.\ To\ abort,}}
\DoxyCodeLine{00868\ \textcolor{comment}{force\ your\ \`{}onRead`\ callback\ to\ return\ 0,\ which\ dr\_flac\ will\ use\ as\ an\ indicator\ that\ the\ end\ of\ the\ stream\ was\ found.}}
\DoxyCodeLine{00869\ \textcolor{comment}{}}
\DoxyCodeLine{00870\ \textcolor{comment}{Use\ \`{}drflac\_open\_with\_metadata\_relaxed()`\ if\ you\ need\ access\ to\ metadata.}}
\DoxyCodeLine{00871\ \textcolor{comment}{*/}}
\DoxyCodeLine{00872\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_relaxed(drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ drflac\_container\ container,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{00873\ }
\DoxyCodeLine{00874\ \textcolor{comment}{/*}}
\DoxyCodeLine{00875\ \textcolor{comment}{Opens\ a\ FLAC\ decoder\ and\ notifies\ the\ caller\ of\ the\ metadata\ chunks\ (album\ art,\ etc.).}}
\DoxyCodeLine{00876\ \textcolor{comment}{}}
\DoxyCodeLine{00877\ \textcolor{comment}{}}
\DoxyCodeLine{00878\ \textcolor{comment}{Parameters}}
\DoxyCodeLine{00879\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00880\ \textcolor{comment}{onRead\ (in)}}
\DoxyCodeLine{00881\ \textcolor{comment}{\ \ \ \ The\ function\ to\ call\ when\ data\ needs\ to\ be\ read\ from\ the\ client.}}
\DoxyCodeLine{00882\ \textcolor{comment}{}}
\DoxyCodeLine{00883\ \textcolor{comment}{onSeek\ (in)}}
\DoxyCodeLine{00884\ \textcolor{comment}{\ \ \ \ The\ function\ to\ call\ when\ the\ read\ position\ of\ the\ client\ data\ needs\ to\ move.}}
\DoxyCodeLine{00885\ \textcolor{comment}{}}
\DoxyCodeLine{00886\ \textcolor{comment}{onMeta\ (in)}}
\DoxyCodeLine{00887\ \textcolor{comment}{\ \ \ \ The\ function\ to\ call\ for\ every\ metadata\ block.}}
\DoxyCodeLine{00888\ \textcolor{comment}{}}
\DoxyCodeLine{00889\ \textcolor{comment}{pUserData\ (in,\ optional)}}
\DoxyCodeLine{00890\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ application\ defined\ data\ that\ will\ be\ passed\ to\ onRead,\ onSeek\ and\ onMeta.}}
\DoxyCodeLine{00891\ \textcolor{comment}{}}
\DoxyCodeLine{00892\ \textcolor{comment}{pAllocationCallbacks\ (in,\ optional)}}
\DoxyCodeLine{00893\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ application\ defined\ callbacks\ for\ managing\ memory\ allocations.}}
\DoxyCodeLine{00894\ \textcolor{comment}{}}
\DoxyCodeLine{00895\ \textcolor{comment}{}}
\DoxyCodeLine{00896\ \textcolor{comment}{Return\ Value}}
\DoxyCodeLine{00897\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00898\ \textcolor{comment}{A\ pointer\ to\ an\ object\ representing\ the\ decoder.}}
\DoxyCodeLine{00899\ \textcolor{comment}{}}
\DoxyCodeLine{00900\ \textcolor{comment}{}}
\DoxyCodeLine{00901\ \textcolor{comment}{Remarks}}
\DoxyCodeLine{00902\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00903\ \textcolor{comment}{Close\ the\ decoder\ with\ \`{}drflac\_close()`.}}
\DoxyCodeLine{00904\ \textcolor{comment}{}}
\DoxyCodeLine{00905\ \textcolor{comment}{\`{}pAllocationCallbacks`\ can\ be\ NULL\ in\ which\ case\ it\ will\ use\ \`{}DRFLAC\_MALLOC`,\ \`{}DRFLAC\_REALLOC`\ and\ \`{}DRFLAC\_FREE`.}}
\DoxyCodeLine{00906\ \textcolor{comment}{}}
\DoxyCodeLine{00907\ \textcolor{comment}{This\ is\ slower\ than\ \`{}drflac\_open()`,\ so\ avoid\ this\ one\ if\ you\ don't\ need\ metadata.\ Internally,\ this\ will\ allocate\ and\ free\ memory\ on\ the\ heap\ for\ every}}
\DoxyCodeLine{00908\ \textcolor{comment}{metadata\ block\ except\ for\ STREAMINFO\ and\ PADDING\ blocks.}}
\DoxyCodeLine{00909\ \textcolor{comment}{}}
\DoxyCodeLine{00910\ \textcolor{comment}{The\ caller\ is\ notified\ of\ the\ metadata\ via\ the\ \`{}onMeta`\ callback.\ All\ metadata\ blocks\ will\ be\ handled\ before\ the\ function\ returns.\ This\ callback\ takes\ a}}
\DoxyCodeLine{00911\ \textcolor{comment}{pointer\ to\ a\ \`{}drflac\_metadata`\ object\ which\ is\ a\ union\ containing\ the\ data\ of\ all\ relevant\ metadata\ blocks.\ Use\ the\ \`{}type`\ member\ to\ discriminate\ against}}
\DoxyCodeLine{00912\ \textcolor{comment}{the\ different\ metadata\ types.}}
\DoxyCodeLine{00913\ \textcolor{comment}{}}
\DoxyCodeLine{00914\ \textcolor{comment}{The\ STREAMINFO\ block\ must\ be\ present\ for\ this\ to\ succeed.\ Use\ \`{}drflac\_open\_with\_metadata\_relaxed()`\ to\ open\ a\ FLAC\ stream\ where\ the\ header\ may\ not\ be\ present.}}
\DoxyCodeLine{00915\ \textcolor{comment}{}}
\DoxyCodeLine{00916\ \textcolor{comment}{Note\ that\ this\ will\ behave\ inconsistently\ with\ \`{}drflac\_open()`\ if\ the\ stream\ is\ an\ Ogg\ encapsulated\ stream\ and\ a\ metadata\ block\ is\ corrupted.\ This\ is\ due\ to}}
\DoxyCodeLine{00917\ \textcolor{comment}{the\ way\ the\ Ogg\ stream\ recovers\ from\ corrupted\ pages.\ When\ \`{}drflac\_open\_with\_metadata()`\ is\ being\ used,\ the\ open\ routine\ will\ try\ to\ read\ the\ contents\ of\ the}}
\DoxyCodeLine{00918\ \textcolor{comment}{metadata\ block,\ whereas\ \`{}drflac\_open()`\ will\ simply\ seek\ past\ it\ (for\ the\ sake\ of\ efficiency).\ This\ inconsistency\ can\ result\ in\ different\ samples\ being}}
\DoxyCodeLine{00919\ \textcolor{comment}{returned\ depending\ on\ whether\ or\ not\ the\ stream\ is\ being\ opened\ with\ metadata.}}
\DoxyCodeLine{00920\ \textcolor{comment}{}}
\DoxyCodeLine{00921\ \textcolor{comment}{}}
\DoxyCodeLine{00922\ \textcolor{comment}{Seek\ Also}}
\DoxyCodeLine{00923\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00924\ \textcolor{comment}{drflac\_open\_file\_with\_metadata()}}
\DoxyCodeLine{00925\ \textcolor{comment}{drflac\_open\_memory\_with\_metadata()}}
\DoxyCodeLine{00926\ \textcolor{comment}{drflac\_open()}}
\DoxyCodeLine{00927\ \textcolor{comment}{drflac\_close()}}
\DoxyCodeLine{00928\ \textcolor{comment}{*/}}
\DoxyCodeLine{00929\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_with\_metadata(drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ drflac\_meta\_proc\ onMeta,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{00930\ }
\DoxyCodeLine{00931\ \textcolor{comment}{/*}}
\DoxyCodeLine{00932\ \textcolor{comment}{The\ same\ as\ drflac\_open\_with\_metadata(),\ except\ attempts\ to\ open\ the\ stream\ even\ when\ a\ header\ block\ is\ not\ present.}}
\DoxyCodeLine{00933\ \textcolor{comment}{}}
\DoxyCodeLine{00934\ \textcolor{comment}{See\ Also}}
\DoxyCodeLine{00935\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00936\ \textcolor{comment}{drflac\_open\_with\_metadata()}}
\DoxyCodeLine{00937\ \textcolor{comment}{drflac\_open\_relaxed()}}
\DoxyCodeLine{00938\ \textcolor{comment}{*/}}
\DoxyCodeLine{00939\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_with\_metadata\_relaxed(drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ drflac\_meta\_proc\ onMeta,\ drflac\_container\ container,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{00940\ }
\DoxyCodeLine{00941\ \textcolor{comment}{/*}}
\DoxyCodeLine{00942\ \textcolor{comment}{Closes\ the\ given\ FLAC\ decoder.}}
\DoxyCodeLine{00943\ \textcolor{comment}{}}
\DoxyCodeLine{00944\ \textcolor{comment}{}}
\DoxyCodeLine{00945\ \textcolor{comment}{Parameters}}
\DoxyCodeLine{00946\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00947\ \textcolor{comment}{pFlac\ (in)}}
\DoxyCodeLine{00948\ \textcolor{comment}{\ \ \ \ The\ decoder\ to\ close.}}
\DoxyCodeLine{00949\ \textcolor{comment}{}}
\DoxyCodeLine{00950\ \textcolor{comment}{}}
\DoxyCodeLine{00951\ \textcolor{comment}{Remarks}}
\DoxyCodeLine{00952\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00953\ \textcolor{comment}{This\ will\ destroy\ the\ decoder\ object.}}
\DoxyCodeLine{00954\ \textcolor{comment}{}}
\DoxyCodeLine{00955\ \textcolor{comment}{}}
\DoxyCodeLine{00956\ \textcolor{comment}{See\ Also}}
\DoxyCodeLine{00957\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00958\ \textcolor{comment}{drflac\_open()}}
\DoxyCodeLine{00959\ \textcolor{comment}{drflac\_open\_with\_metadata()}}
\DoxyCodeLine{00960\ \textcolor{comment}{drflac\_open\_file()}}
\DoxyCodeLine{00961\ \textcolor{comment}{drflac\_open\_file\_w()}}
\DoxyCodeLine{00962\ \textcolor{comment}{drflac\_open\_file\_with\_metadata()}}
\DoxyCodeLine{00963\ \textcolor{comment}{drflac\_open\_file\_with\_metadata\_w()}}
\DoxyCodeLine{00964\ \textcolor{comment}{drflac\_open\_memory()}}
\DoxyCodeLine{00965\ \textcolor{comment}{drflac\_open\_memory\_with\_metadata()}}
\DoxyCodeLine{00966\ \textcolor{comment}{*/}}
\DoxyCodeLine{00967\ DRFLAC\_API\ \textcolor{keywordtype}{void}\ drflac\_close(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac);}
\DoxyCodeLine{00968\ }
\DoxyCodeLine{00969\ }
\DoxyCodeLine{00970\ \textcolor{comment}{/*}}
\DoxyCodeLine{00971\ \textcolor{comment}{Reads\ sample\ data\ from\ the\ given\ FLAC\ decoder,\ output\ as\ interleaved\ signed\ 32-\/bit\ PCM.}}
\DoxyCodeLine{00972\ \textcolor{comment}{}}
\DoxyCodeLine{00973\ \textcolor{comment}{}}
\DoxyCodeLine{00974\ \textcolor{comment}{Parameters}}
\DoxyCodeLine{00975\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00976\ \textcolor{comment}{pFlac\ (in)}}
\DoxyCodeLine{00977\ \textcolor{comment}{\ \ \ \ The\ decoder.}}
\DoxyCodeLine{00978\ \textcolor{comment}{}}
\DoxyCodeLine{00979\ \textcolor{comment}{framesToRead\ (in)}}
\DoxyCodeLine{00980\ \textcolor{comment}{\ \ \ \ The\ number\ of\ PCM\ frames\ to\ read.}}
\DoxyCodeLine{00981\ \textcolor{comment}{}}
\DoxyCodeLine{00982\ \textcolor{comment}{pBufferOut\ (out,\ optional)}}
\DoxyCodeLine{00983\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ the\ buffer\ that\ will\ receive\ the\ decoded\ samples.}}
\DoxyCodeLine{00984\ \textcolor{comment}{}}
\DoxyCodeLine{00985\ \textcolor{comment}{}}
\DoxyCodeLine{00986\ \textcolor{comment}{Return\ Value}}
\DoxyCodeLine{00987\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00988\ \textcolor{comment}{Returns\ the\ number\ of\ PCM\ frames\ actually\ read.\ If\ the\ return\ value\ is\ less\ than\ \`{}framesToRead`\ it\ has\ reached\ the\ end.}}
\DoxyCodeLine{00989\ \textcolor{comment}{}}
\DoxyCodeLine{00990\ \textcolor{comment}{}}
\DoxyCodeLine{00991\ \textcolor{comment}{Remarks}}
\DoxyCodeLine{00992\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00993\ \textcolor{comment}{pBufferOut\ can\ be\ null,\ in\ which\ case\ the\ call\ will\ act\ as\ a\ seek,\ and\ the\ return\ value\ will\ be\ the\ number\ of\ frames\ seeked.}}
\DoxyCodeLine{00994\ \textcolor{comment}{*/}}
\DoxyCodeLine{00995\ DRFLAC\_API\ drflac\_uint64\ drflac\_read\_pcm\_frames\_s32(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ framesToRead,\ drflac\_int32*\ pBufferOut);}
\DoxyCodeLine{00996\ }
\DoxyCodeLine{00997\ }
\DoxyCodeLine{00998\ \textcolor{comment}{/*}}
\DoxyCodeLine{00999\ \textcolor{comment}{Reads\ sample\ data\ from\ the\ given\ FLAC\ decoder,\ output\ as\ interleaved\ signed\ 16-\/bit\ PCM.}}
\DoxyCodeLine{01000\ \textcolor{comment}{}}
\DoxyCodeLine{01001\ \textcolor{comment}{}}
\DoxyCodeLine{01002\ \textcolor{comment}{Parameters}}
\DoxyCodeLine{01003\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01004\ \textcolor{comment}{pFlac\ (in)}}
\DoxyCodeLine{01005\ \textcolor{comment}{\ \ \ \ The\ decoder.}}
\DoxyCodeLine{01006\ \textcolor{comment}{}}
\DoxyCodeLine{01007\ \textcolor{comment}{framesToRead\ (in)}}
\DoxyCodeLine{01008\ \textcolor{comment}{\ \ \ \ The\ number\ of\ PCM\ frames\ to\ read.}}
\DoxyCodeLine{01009\ \textcolor{comment}{}}
\DoxyCodeLine{01010\ \textcolor{comment}{pBufferOut\ (out,\ optional)}}
\DoxyCodeLine{01011\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ the\ buffer\ that\ will\ receive\ the\ decoded\ samples.}}
\DoxyCodeLine{01012\ \textcolor{comment}{}}
\DoxyCodeLine{01013\ \textcolor{comment}{}}
\DoxyCodeLine{01014\ \textcolor{comment}{Return\ Value}}
\DoxyCodeLine{01015\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01016\ \textcolor{comment}{Returns\ the\ number\ of\ PCM\ frames\ actually\ read.\ If\ the\ return\ value\ is\ less\ than\ \`{}framesToRead`\ it\ has\ reached\ the\ end.}}
\DoxyCodeLine{01017\ \textcolor{comment}{}}
\DoxyCodeLine{01018\ \textcolor{comment}{}}
\DoxyCodeLine{01019\ \textcolor{comment}{Remarks}}
\DoxyCodeLine{01020\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01021\ \textcolor{comment}{pBufferOut\ can\ be\ null,\ in\ which\ case\ the\ call\ will\ act\ as\ a\ seek,\ and\ the\ return\ value\ will\ be\ the\ number\ of\ frames\ seeked.}}
\DoxyCodeLine{01022\ \textcolor{comment}{}}
\DoxyCodeLine{01023\ \textcolor{comment}{Note\ that\ this\ is\ lossy\ for\ streams\ where\ the\ bits\ per\ sample\ is\ larger\ than\ 16.}}
\DoxyCodeLine{01024\ \textcolor{comment}{*/}}
\DoxyCodeLine{01025\ DRFLAC\_API\ drflac\_uint64\ drflac\_read\_pcm\_frames\_s16(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ framesToRead,\ drflac\_int16*\ pBufferOut);}
\DoxyCodeLine{01026\ }
\DoxyCodeLine{01027\ \textcolor{comment}{/*}}
\DoxyCodeLine{01028\ \textcolor{comment}{Reads\ sample\ data\ from\ the\ given\ FLAC\ decoder,\ output\ as\ interleaved\ 32-\/bit\ floating\ point\ PCM.}}
\DoxyCodeLine{01029\ \textcolor{comment}{}}
\DoxyCodeLine{01030\ \textcolor{comment}{}}
\DoxyCodeLine{01031\ \textcolor{comment}{Parameters}}
\DoxyCodeLine{01032\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01033\ \textcolor{comment}{pFlac\ (in)}}
\DoxyCodeLine{01034\ \textcolor{comment}{\ \ \ \ The\ decoder.}}
\DoxyCodeLine{01035\ \textcolor{comment}{}}
\DoxyCodeLine{01036\ \textcolor{comment}{framesToRead\ (in)}}
\DoxyCodeLine{01037\ \textcolor{comment}{\ \ \ \ The\ number\ of\ PCM\ frames\ to\ read.}}
\DoxyCodeLine{01038\ \textcolor{comment}{}}
\DoxyCodeLine{01039\ \textcolor{comment}{pBufferOut\ (out,\ optional)}}
\DoxyCodeLine{01040\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ the\ buffer\ that\ will\ receive\ the\ decoded\ samples.}}
\DoxyCodeLine{01041\ \textcolor{comment}{}}
\DoxyCodeLine{01042\ \textcolor{comment}{}}
\DoxyCodeLine{01043\ \textcolor{comment}{Return\ Value}}
\DoxyCodeLine{01044\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01045\ \textcolor{comment}{Returns\ the\ number\ of\ PCM\ frames\ actually\ read.\ If\ the\ return\ value\ is\ less\ than\ \`{}framesToRead`\ it\ has\ reached\ the\ end.}}
\DoxyCodeLine{01046\ \textcolor{comment}{}}
\DoxyCodeLine{01047\ \textcolor{comment}{}}
\DoxyCodeLine{01048\ \textcolor{comment}{Remarks}}
\DoxyCodeLine{01049\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01050\ \textcolor{comment}{pBufferOut\ can\ be\ null,\ in\ which\ case\ the\ call\ will\ act\ as\ a\ seek,\ and\ the\ return\ value\ will\ be\ the\ number\ of\ frames\ seeked.}}
\DoxyCodeLine{01051\ \textcolor{comment}{}}
\DoxyCodeLine{01052\ \textcolor{comment}{Note\ that\ this\ should\ be\ considered\ lossy\ due\ to\ the\ nature\ of\ floating\ point\ numbers\ not\ being\ able\ to\ exactly\ represent\ every\ possible\ number.}}
\DoxyCodeLine{01053\ \textcolor{comment}{*/}}
\DoxyCodeLine{01054\ DRFLAC\_API\ drflac\_uint64\ drflac\_read\_pcm\_frames\_f32(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ framesToRead,\ \textcolor{keywordtype}{float}*\ pBufferOut);}
\DoxyCodeLine{01055\ }
\DoxyCodeLine{01056\ \textcolor{comment}{/*}}
\DoxyCodeLine{01057\ \textcolor{comment}{Seeks\ to\ the\ PCM\ frame\ at\ the\ given\ index.}}
\DoxyCodeLine{01058\ \textcolor{comment}{}}
\DoxyCodeLine{01059\ \textcolor{comment}{}}
\DoxyCodeLine{01060\ \textcolor{comment}{Parameters}}
\DoxyCodeLine{01061\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01062\ \textcolor{comment}{pFlac\ (in)}}
\DoxyCodeLine{01063\ \textcolor{comment}{\ \ \ \ The\ decoder.}}
\DoxyCodeLine{01064\ \textcolor{comment}{}}
\DoxyCodeLine{01065\ \textcolor{comment}{pcmFrameIndex\ (in)}}
\DoxyCodeLine{01066\ \textcolor{comment}{\ \ \ \ The\ index\ of\ the\ PCM\ frame\ to\ seek\ to.\ See\ notes\ below.}}
\DoxyCodeLine{01067\ \textcolor{comment}{}}
\DoxyCodeLine{01068\ \textcolor{comment}{}}
\DoxyCodeLine{01069\ \textcolor{comment}{Return\ Value}}
\DoxyCodeLine{01070\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01071\ \textcolor{comment}{\`{}DRFLAC\_TRUE`\ if\ successful;\ \`{}DRFLAC\_FALSE`\ otherwise.}}
\DoxyCodeLine{01072\ \textcolor{comment}{*/}}
\DoxyCodeLine{01073\ DRFLAC\_API\ drflac\_bool32\ drflac\_seek\_to\_pcm\_frame(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ pcmFrameIndex);}
\DoxyCodeLine{01074\ }
\DoxyCodeLine{01075\ }
\DoxyCodeLine{01076\ }
\DoxyCodeLine{01077\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_STDIO}}
\DoxyCodeLine{01078\ \textcolor{comment}{/*}}
\DoxyCodeLine{01079\ \textcolor{comment}{Opens\ a\ FLAC\ decoder\ from\ the\ file\ at\ the\ given\ path.}}
\DoxyCodeLine{01080\ \textcolor{comment}{}}
\DoxyCodeLine{01081\ \textcolor{comment}{}}
\DoxyCodeLine{01082\ \textcolor{comment}{Parameters}}
\DoxyCodeLine{01083\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01084\ \textcolor{comment}{pFileName\ (in)}}
\DoxyCodeLine{01085\ \textcolor{comment}{\ \ \ \ The\ path\ of\ the\ file\ to\ open,\ either\ absolute\ or\ relative\ to\ the\ current\ directory.}}
\DoxyCodeLine{01086\ \textcolor{comment}{}}
\DoxyCodeLine{01087\ \textcolor{comment}{pAllocationCallbacks\ (in,\ optional)}}
\DoxyCodeLine{01088\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ application\ defined\ callbacks\ for\ managing\ memory\ allocations.}}
\DoxyCodeLine{01089\ \textcolor{comment}{}}
\DoxyCodeLine{01090\ \textcolor{comment}{}}
\DoxyCodeLine{01091\ \textcolor{comment}{Return\ Value}}
\DoxyCodeLine{01092\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01093\ \textcolor{comment}{A\ pointer\ to\ an\ object\ representing\ the\ decoder.}}
\DoxyCodeLine{01094\ \textcolor{comment}{}}
\DoxyCodeLine{01095\ \textcolor{comment}{}}
\DoxyCodeLine{01096\ \textcolor{comment}{Remarks}}
\DoxyCodeLine{01097\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01098\ \textcolor{comment}{Close\ the\ decoder\ with\ drflac\_close().}}
\DoxyCodeLine{01099\ \textcolor{comment}{}}
\DoxyCodeLine{01100\ \textcolor{comment}{}}
\DoxyCodeLine{01101\ \textcolor{comment}{Remarks}}
\DoxyCodeLine{01102\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01103\ \textcolor{comment}{This\ will\ hold\ a\ handle\ to\ the\ file\ until\ the\ decoder\ is\ closed\ with\ drflac\_close().\ Some\ platforms\ will\ restrict\ the\ number\ of\ files\ a\ process\ can\ have\ open}}
\DoxyCodeLine{01104\ \textcolor{comment}{at\ any\ given\ time,\ so\ keep\ this\ mind\ if\ you\ have\ many\ decoders\ open\ at\ the\ same\ time.}}
\DoxyCodeLine{01105\ \textcolor{comment}{}}
\DoxyCodeLine{01106\ \textcolor{comment}{}}
\DoxyCodeLine{01107\ \textcolor{comment}{See\ Also}}
\DoxyCodeLine{01108\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01109\ \textcolor{comment}{drflac\_open\_file\_with\_metadata()}}
\DoxyCodeLine{01110\ \textcolor{comment}{drflac\_open()}}
\DoxyCodeLine{01111\ \textcolor{comment}{drflac\_close()}}
\DoxyCodeLine{01112\ \textcolor{comment}{*/}}
\DoxyCodeLine{01113\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_file(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pFileName,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{01114\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_file\_w(\textcolor{keyword}{const}\ \textcolor{keywordtype}{wchar\_t}*\ pFileName,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{01115\ }
\DoxyCodeLine{01116\ \textcolor{comment}{/*}}
\DoxyCodeLine{01117\ \textcolor{comment}{Opens\ a\ FLAC\ decoder\ from\ the\ file\ at\ the\ given\ path\ and\ notifies\ the\ caller\ of\ the\ metadata\ chunks\ (album\ art,\ etc.)}}
\DoxyCodeLine{01118\ \textcolor{comment}{}}
\DoxyCodeLine{01119\ \textcolor{comment}{}}
\DoxyCodeLine{01120\ \textcolor{comment}{Parameters}}
\DoxyCodeLine{01121\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01122\ \textcolor{comment}{pFileName\ (in)}}
\DoxyCodeLine{01123\ \textcolor{comment}{\ \ \ \ The\ path\ of\ the\ file\ to\ open,\ either\ absolute\ or\ relative\ to\ the\ current\ directory.}}
\DoxyCodeLine{01124\ \textcolor{comment}{}}
\DoxyCodeLine{01125\ \textcolor{comment}{pAllocationCallbacks\ (in,\ optional)}}
\DoxyCodeLine{01126\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ application\ defined\ callbacks\ for\ managing\ memory\ allocations.}}
\DoxyCodeLine{01127\ \textcolor{comment}{}}
\DoxyCodeLine{01128\ \textcolor{comment}{onMeta\ (in)}}
\DoxyCodeLine{01129\ \textcolor{comment}{\ \ \ \ The\ callback\ to\ fire\ for\ each\ metadata\ block.}}
\DoxyCodeLine{01130\ \textcolor{comment}{}}
\DoxyCodeLine{01131\ \textcolor{comment}{pUserData\ (in)}}
\DoxyCodeLine{01132\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ the\ user\ data\ to\ pass\ to\ the\ metadata\ callback.}}
\DoxyCodeLine{01133\ \textcolor{comment}{}}
\DoxyCodeLine{01134\ \textcolor{comment}{pAllocationCallbacks\ (in)}}
\DoxyCodeLine{01135\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ application\ defined\ callbacks\ for\ managing\ memory\ allocations.}}
\DoxyCodeLine{01136\ \textcolor{comment}{}}
\DoxyCodeLine{01137\ \textcolor{comment}{}}
\DoxyCodeLine{01138\ \textcolor{comment}{Remarks}}
\DoxyCodeLine{01139\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01140\ \textcolor{comment}{Look\ at\ the\ documentation\ for\ drflac\_open\_with\_metadata()\ for\ more\ information\ on\ how\ metadata\ is\ handled.}}
\DoxyCodeLine{01141\ \textcolor{comment}{}}
\DoxyCodeLine{01142\ \textcolor{comment}{}}
\DoxyCodeLine{01143\ \textcolor{comment}{See\ Also}}
\DoxyCodeLine{01144\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01145\ \textcolor{comment}{drflac\_open\_with\_metadata()}}
\DoxyCodeLine{01146\ \textcolor{comment}{drflac\_open()}}
\DoxyCodeLine{01147\ \textcolor{comment}{drflac\_close()}}
\DoxyCodeLine{01148\ \textcolor{comment}{*/}}
\DoxyCodeLine{01149\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_file\_with\_metadata(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pFileName,\ drflac\_meta\_proc\ onMeta,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{01150\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_file\_with\_metadata\_w(\textcolor{keyword}{const}\ \textcolor{keywordtype}{wchar\_t}*\ pFileName,\ drflac\_meta\_proc\ onMeta,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{01151\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01152\ }
\DoxyCodeLine{01153\ \textcolor{comment}{/*}}
\DoxyCodeLine{01154\ \textcolor{comment}{Opens\ a\ FLAC\ decoder\ from\ a\ pre-\/allocated\ block\ of\ memory}}
\DoxyCodeLine{01155\ \textcolor{comment}{}}
\DoxyCodeLine{01156\ \textcolor{comment}{}}
\DoxyCodeLine{01157\ \textcolor{comment}{Parameters}}
\DoxyCodeLine{01158\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01159\ \textcolor{comment}{pData\ (in)}}
\DoxyCodeLine{01160\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ the\ raw\ encoded\ FLAC\ data.}}
\DoxyCodeLine{01161\ \textcolor{comment}{}}
\DoxyCodeLine{01162\ \textcolor{comment}{dataSize\ (in)}}
\DoxyCodeLine{01163\ \textcolor{comment}{\ \ \ \ The\ size\ in\ bytes\ of\ \`{}data`.}}
\DoxyCodeLine{01164\ \textcolor{comment}{}}
\DoxyCodeLine{01165\ \textcolor{comment}{pAllocationCallbacks\ (in)}}
\DoxyCodeLine{01166\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ application\ defined\ callbacks\ for\ managing\ memory\ allocations.}}
\DoxyCodeLine{01167\ \textcolor{comment}{}}
\DoxyCodeLine{01168\ \textcolor{comment}{}}
\DoxyCodeLine{01169\ \textcolor{comment}{Return\ Value}}
\DoxyCodeLine{01170\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01171\ \textcolor{comment}{A\ pointer\ to\ an\ object\ representing\ the\ decoder.}}
\DoxyCodeLine{01172\ \textcolor{comment}{}}
\DoxyCodeLine{01173\ \textcolor{comment}{}}
\DoxyCodeLine{01174\ \textcolor{comment}{Remarks}}
\DoxyCodeLine{01175\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01176\ \textcolor{comment}{This\ does\ not\ create\ a\ copy\ of\ the\ data.\ It\ is\ up\ to\ the\ application\ to\ ensure\ the\ buffer\ remains\ valid\ for\ the\ lifetime\ of\ the\ decoder.}}
\DoxyCodeLine{01177\ \textcolor{comment}{}}
\DoxyCodeLine{01178\ \textcolor{comment}{}}
\DoxyCodeLine{01179\ \textcolor{comment}{See\ Also}}
\DoxyCodeLine{01180\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01181\ \textcolor{comment}{drflac\_open()}}
\DoxyCodeLine{01182\ \textcolor{comment}{drflac\_close()}}
\DoxyCodeLine{01183\ \textcolor{comment}{*/}}
\DoxyCodeLine{01184\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_memory(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ pData,\ \textcolor{keywordtype}{size\_t}\ dataSize,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{01185\ }
\DoxyCodeLine{01186\ \textcolor{comment}{/*}}
\DoxyCodeLine{01187\ \textcolor{comment}{Opens\ a\ FLAC\ decoder\ from\ a\ pre-\/allocated\ block\ of\ memory\ and\ notifies\ the\ caller\ of\ the\ metadata\ chunks\ (album\ art,\ etc.)}}
\DoxyCodeLine{01188\ \textcolor{comment}{}}
\DoxyCodeLine{01189\ \textcolor{comment}{}}
\DoxyCodeLine{01190\ \textcolor{comment}{Parameters}}
\DoxyCodeLine{01191\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01192\ \textcolor{comment}{pData\ (in)}}
\DoxyCodeLine{01193\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ the\ raw\ encoded\ FLAC\ data.}}
\DoxyCodeLine{01194\ \textcolor{comment}{}}
\DoxyCodeLine{01195\ \textcolor{comment}{dataSize\ (in)}}
\DoxyCodeLine{01196\ \textcolor{comment}{\ \ \ \ The\ size\ in\ bytes\ of\ \`{}data`.}}
\DoxyCodeLine{01197\ \textcolor{comment}{}}
\DoxyCodeLine{01198\ \textcolor{comment}{onMeta\ (in)}}
\DoxyCodeLine{01199\ \textcolor{comment}{\ \ \ \ The\ callback\ to\ fire\ for\ each\ metadata\ block.}}
\DoxyCodeLine{01200\ \textcolor{comment}{}}
\DoxyCodeLine{01201\ \textcolor{comment}{pUserData\ (in)}}
\DoxyCodeLine{01202\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ the\ user\ data\ to\ pass\ to\ the\ metadata\ callback.}}
\DoxyCodeLine{01203\ \textcolor{comment}{}}
\DoxyCodeLine{01204\ \textcolor{comment}{pAllocationCallbacks\ (in)}}
\DoxyCodeLine{01205\ \textcolor{comment}{\ \ \ \ A\ pointer\ to\ application\ defined\ callbacks\ for\ managing\ memory\ allocations.}}
\DoxyCodeLine{01206\ \textcolor{comment}{}}
\DoxyCodeLine{01207\ \textcolor{comment}{}}
\DoxyCodeLine{01208\ \textcolor{comment}{Remarks}}
\DoxyCodeLine{01209\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01210\ \textcolor{comment}{Look\ at\ the\ documentation\ for\ drflac\_open\_with\_metadata()\ for\ more\ information\ on\ how\ metadata\ is\ handled.}}
\DoxyCodeLine{01211\ \textcolor{comment}{}}
\DoxyCodeLine{01212\ \textcolor{comment}{}}
\DoxyCodeLine{01213\ \textcolor{comment}{See\ Also}}
\DoxyCodeLine{01214\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{01215\ \textcolor{comment}{drflac\_open\_with\_metadata()}}
\DoxyCodeLine{01216\ \textcolor{comment}{drflac\_open()}}
\DoxyCodeLine{01217\ \textcolor{comment}{drflac\_close()}}
\DoxyCodeLine{01218\ \textcolor{comment}{*/}}
\DoxyCodeLine{01219\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_memory\_with\_metadata(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ pData,\ \textcolor{keywordtype}{size\_t}\ dataSize,\ drflac\_meta\_proc\ onMeta,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{01220\ }
\DoxyCodeLine{01221\ }
\DoxyCodeLine{01222\ }
\DoxyCodeLine{01223\ \textcolor{comment}{/*\ High\ Level\ APIs\ */}}
\DoxyCodeLine{01224\ }
\DoxyCodeLine{01225\ \textcolor{comment}{/*}}
\DoxyCodeLine{01226\ \textcolor{comment}{Opens\ a\ FLAC\ stream\ from\ the\ given\ callbacks\ and\ fully\ decodes\ it\ in\ a\ single\ operation.\ The\ return\ value\ is\ a}}
\DoxyCodeLine{01227\ \textcolor{comment}{pointer\ to\ the\ sample\ data\ as\ interleaved\ signed\ 32-\/bit\ PCM.\ The\ returned\ data\ must\ be\ freed\ with\ drflac\_free().}}
\DoxyCodeLine{01228\ \textcolor{comment}{}}
\DoxyCodeLine{01229\ \textcolor{comment}{You\ can\ pass\ in\ custom\ memory\ allocation\ callbacks\ via\ the\ pAllocationCallbacks\ parameter.\ This\ can\ be\ NULL\ in\ which}}
\DoxyCodeLine{01230\ \textcolor{comment}{case\ it\ will\ use\ DRFLAC\_MALLOC,\ DRFLAC\_REALLOC\ and\ DRFLAC\_FREE.}}
\DoxyCodeLine{01231\ \textcolor{comment}{}}
\DoxyCodeLine{01232\ \textcolor{comment}{Sometimes\ a\ FLAC\ file\ won't\ keep\ track\ of\ the\ total\ sample\ count.\ In\ this\ situation\ the\ function\ will\ continuously}}
\DoxyCodeLine{01233\ \textcolor{comment}{read\ samples\ into\ a\ dynamically\ sized\ buffer\ on\ the\ heap\ until\ no\ samples\ are\ left.}}
\DoxyCodeLine{01234\ \textcolor{comment}{}}
\DoxyCodeLine{01235\ \textcolor{comment}{Do\ not\ call\ this\ function\ on\ a\ broadcast\ type\ of\ stream\ (like\ internet\ radio\ streams\ and\ whatnot).}}
\DoxyCodeLine{01236\ \textcolor{comment}{*/}}
\DoxyCodeLine{01237\ DRFLAC\_API\ drflac\_int32*\ drflac\_open\_and\_read\_pcm\_frames\_s32(drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channels,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRate,\ drflac\_uint64*\ totalPCMFrameCount,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{01238\ }
\DoxyCodeLine{01239\ \textcolor{comment}{/*\ Same\ as\ drflac\_open\_and\_read\_pcm\_frames\_s32(),\ except\ returns\ signed\ 16-\/bit\ integer\ samples.\ */}}
\DoxyCodeLine{01240\ DRFLAC\_API\ drflac\_int16*\ drflac\_open\_and\_read\_pcm\_frames\_s16(drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channels,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRate,\ drflac\_uint64*\ totalPCMFrameCount,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{01241\ }
\DoxyCodeLine{01242\ \textcolor{comment}{/*\ Same\ as\ drflac\_open\_and\_read\_pcm\_frames\_s32(),\ except\ returns\ 32-\/bit\ floating-\/point\ samples.\ */}}
\DoxyCodeLine{01243\ DRFLAC\_API\ \textcolor{keywordtype}{float}*\ drflac\_open\_and\_read\_pcm\_frames\_f32(drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channels,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRate,\ drflac\_uint64*\ totalPCMFrameCount,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{01244\ }
\DoxyCodeLine{01245\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_STDIO}}
\DoxyCodeLine{01246\ \textcolor{comment}{/*\ Same\ as\ drflac\_open\_and\_read\_pcm\_frames\_s32()\ except\ opens\ the\ decoder\ from\ a\ file.\ */}}
\DoxyCodeLine{01247\ DRFLAC\_API\ drflac\_int32*\ drflac\_open\_file\_and\_read\_pcm\_frames\_s32(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ filename,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channels,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRate,\ drflac\_uint64*\ totalPCMFrameCount,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{01248\ }
\DoxyCodeLine{01249\ \textcolor{comment}{/*\ Same\ as\ drflac\_open\_file\_and\_read\_pcm\_frames\_s32(),\ except\ returns\ signed\ 16-\/bit\ integer\ samples.\ */}}
\DoxyCodeLine{01250\ DRFLAC\_API\ drflac\_int16*\ drflac\_open\_file\_and\_read\_pcm\_frames\_s16(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ filename,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channels,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRate,\ drflac\_uint64*\ totalPCMFrameCount,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{01251\ }
\DoxyCodeLine{01252\ \textcolor{comment}{/*\ Same\ as\ drflac\_open\_file\_and\_read\_pcm\_frames\_s32(),\ except\ returns\ 32-\/bit\ floating-\/point\ samples.\ */}}
\DoxyCodeLine{01253\ DRFLAC\_API\ \textcolor{keywordtype}{float}*\ drflac\_open\_file\_and\_read\_pcm\_frames\_f32(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ filename,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channels,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRate,\ drflac\_uint64*\ totalPCMFrameCount,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{01254\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01255\ }
\DoxyCodeLine{01256\ \textcolor{comment}{/*\ Same\ as\ drflac\_open\_and\_read\_pcm\_frames\_s32()\ except\ opens\ the\ decoder\ from\ a\ block\ of\ memory.\ */}}
\DoxyCodeLine{01257\ DRFLAC\_API\ drflac\_int32*\ drflac\_open\_memory\_and\_read\_pcm\_frames\_s32(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ data,\ \textcolor{keywordtype}{size\_t}\ dataSize,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channels,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRate,\ drflac\_uint64*\ totalPCMFrameCount,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{01258\ }
\DoxyCodeLine{01259\ \textcolor{comment}{/*\ Same\ as\ drflac\_open\_memory\_and\_read\_pcm\_frames\_s32(),\ except\ returns\ signed\ 16-\/bit\ integer\ samples.\ */}}
\DoxyCodeLine{01260\ DRFLAC\_API\ drflac\_int16*\ drflac\_open\_memory\_and\_read\_pcm\_frames\_s16(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ data,\ \textcolor{keywordtype}{size\_t}\ dataSize,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channels,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRate,\ drflac\_uint64*\ totalPCMFrameCount,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{01261\ }
\DoxyCodeLine{01262\ \textcolor{comment}{/*\ Same\ as\ drflac\_open\_memory\_and\_read\_pcm\_frames\_s32(),\ except\ returns\ 32-\/bit\ floating-\/point\ samples.\ */}}
\DoxyCodeLine{01263\ DRFLAC\_API\ \textcolor{keywordtype}{float}*\ drflac\_open\_memory\_and\_read\_pcm\_frames\_f32(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ data,\ \textcolor{keywordtype}{size\_t}\ dataSize,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channels,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRate,\ drflac\_uint64*\ totalPCMFrameCount,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{01264\ }
\DoxyCodeLine{01265\ \textcolor{comment}{/*}}
\DoxyCodeLine{01266\ \textcolor{comment}{Frees\ memory\ that\ was\ allocated\ internally\ by\ dr\_flac.}}
\DoxyCodeLine{01267\ \textcolor{comment}{}}
\DoxyCodeLine{01268\ \textcolor{comment}{Set\ pAllocationCallbacks\ to\ the\ same\ object\ that\ was\ passed\ to\ drflac\_open\_*\_and\_read\_pcm\_frames\_*().\ If\ you\ originally\ passed\ in\ NULL,\ pass\ in\ NULL\ for\ this.}}
\DoxyCodeLine{01269\ \textcolor{comment}{*/}}
\DoxyCodeLine{01270\ DRFLAC\_API\ \textcolor{keywordtype}{void}\ drflac\_free(\textcolor{keywordtype}{void}*\ p,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks);}
\DoxyCodeLine{01271\ }
\DoxyCodeLine{01272\ }
\DoxyCodeLine{01273\ \textcolor{comment}{/*\ Structure\ representing\ an\ iterator\ for\ vorbis\ comments\ in\ a\ VORBIS\_COMMENT\ metadata\ block.\ */}}
\DoxyCodeLine{01274\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{01275\ \{}
\DoxyCodeLine{01276\ \ \ \ \ drflac\_uint32\ countRemaining;}
\DoxyCodeLine{01277\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pRunningData;}
\DoxyCodeLine{01278\ \}\ \mbox{\hyperlink{structdrflac__vorbis__comment__iterator}{drflac\_vorbis\_comment\_iterator}};}
\DoxyCodeLine{01279\ }
\DoxyCodeLine{01280\ \textcolor{comment}{/*}}
\DoxyCodeLine{01281\ \textcolor{comment}{Initializes\ a\ vorbis\ comment\ iterator.\ This\ can\ be\ used\ for\ iterating\ over\ the\ vorbis\ comments\ in\ a\ VORBIS\_COMMENT}}
\DoxyCodeLine{01282\ \textcolor{comment}{metadata\ block.}}
\DoxyCodeLine{01283\ \textcolor{comment}{*/}}
\DoxyCodeLine{01284\ DRFLAC\_API\ \textcolor{keywordtype}{void}\ drflac\_init\_vorbis\_comment\_iterator(\mbox{\hyperlink{structdrflac__vorbis__comment__iterator}{drflac\_vorbis\_comment\_iterator}}*\ pIter,\ drflac\_uint32\ commentCount,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ pComments);}
\DoxyCodeLine{01285\ }
\DoxyCodeLine{01286\ \textcolor{comment}{/*}}
\DoxyCodeLine{01287\ \textcolor{comment}{Goes\ to\ the\ next\ vorbis\ comment\ in\ the\ given\ iterator.\ If\ null\ is\ returned\ it\ means\ there\ are\ no\ more\ comments.\ The}}
\DoxyCodeLine{01288\ \textcolor{comment}{returned\ string\ is\ NOT\ null\ terminated.}}
\DoxyCodeLine{01289\ \textcolor{comment}{*/}}
\DoxyCodeLine{01290\ DRFLAC\_API\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ drflac\_next\_vorbis\_comment(\mbox{\hyperlink{structdrflac__vorbis__comment__iterator}{drflac\_vorbis\_comment\_iterator}}*\ pIter,\ drflac\_uint32*\ pCommentLengthOut);}
\DoxyCodeLine{01291\ }
\DoxyCodeLine{01292\ }
\DoxyCodeLine{01293\ \textcolor{comment}{/*\ Structure\ representing\ an\ iterator\ for\ cuesheet\ tracks\ in\ a\ CUESHEET\ metadata\ block.\ */}}
\DoxyCodeLine{01294\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{01295\ \{}
\DoxyCodeLine{01296\ \ \ \ \ drflac\_uint32\ countRemaining;}
\DoxyCodeLine{01297\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pRunningData;}
\DoxyCodeLine{01298\ \}\ \mbox{\hyperlink{structdrflac__cuesheet__track__iterator}{drflac\_cuesheet\_track\_iterator}};}
\DoxyCodeLine{01299\ }
\DoxyCodeLine{01300\ \textcolor{comment}{/*\ The\ order\ of\ members\ here\ is\ important\ because\ we\ map\ this\ directly\ to\ the\ raw\ data\ within\ the\ CUESHEET\ metadata\ block.\ */}}
\DoxyCodeLine{01301\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{01302\ \{}
\DoxyCodeLine{01303\ \ \ \ \ drflac\_uint64\ offset;}
\DoxyCodeLine{01304\ \ \ \ \ drflac\_uint8\ index;}
\DoxyCodeLine{01305\ \ \ \ \ drflac\_uint8\ reserved[3];}
\DoxyCodeLine{01306\ \}\ \mbox{\hyperlink{structdrflac__cuesheet__track__index}{drflac\_cuesheet\_track\_index}};}
\DoxyCodeLine{01307\ }
\DoxyCodeLine{01308\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{01309\ \{}
\DoxyCodeLine{01310\ \ \ \ \ drflac\_uint64\ offset;}
\DoxyCodeLine{01311\ \ \ \ \ drflac\_uint8\ trackNumber;}
\DoxyCodeLine{01312\ \ \ \ \ \textcolor{keywordtype}{char}\ ISRC[12];}
\DoxyCodeLine{01313\ \ \ \ \ drflac\_bool8\ isAudio;}
\DoxyCodeLine{01314\ \ \ \ \ drflac\_bool8\ preEmphasis;}
\DoxyCodeLine{01315\ \ \ \ \ drflac\_uint8\ indexCount;}
\DoxyCodeLine{01316\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__cuesheet__track__index}{drflac\_cuesheet\_track\_index}}*\ pIndexPoints;}
\DoxyCodeLine{01317\ \}\ \mbox{\hyperlink{structdrflac__cuesheet__track}{drflac\_cuesheet\_track}};}
\DoxyCodeLine{01318\ }
\DoxyCodeLine{01319\ \textcolor{comment}{/*}}
\DoxyCodeLine{01320\ \textcolor{comment}{Initializes\ a\ cuesheet\ track\ iterator.\ This\ can\ be\ used\ for\ iterating\ over\ the\ cuesheet\ tracks\ in\ a\ CUESHEET\ metadata}}
\DoxyCodeLine{01321\ \textcolor{comment}{block.}}
\DoxyCodeLine{01322\ \textcolor{comment}{*/}}
\DoxyCodeLine{01323\ DRFLAC\_API\ \textcolor{keywordtype}{void}\ drflac\_init\_cuesheet\_track\_iterator(\mbox{\hyperlink{structdrflac__cuesheet__track__iterator}{drflac\_cuesheet\_track\_iterator}}*\ pIter,\ drflac\_uint32\ trackCount,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ pTrackData);}
\DoxyCodeLine{01324\ }
\DoxyCodeLine{01325\ \textcolor{comment}{/*\ Goes\ to\ the\ next\ cuesheet\ track\ in\ the\ given\ iterator.\ If\ DRFLAC\_FALSE\ is\ returned\ it\ means\ there\ are\ no\ more\ comments.\ */}}
\DoxyCodeLine{01326\ DRFLAC\_API\ drflac\_bool32\ drflac\_next\_cuesheet\_track(\mbox{\hyperlink{structdrflac__cuesheet__track__iterator}{drflac\_cuesheet\_track\_iterator}}*\ pIter,\ \mbox{\hyperlink{structdrflac__cuesheet__track}{drflac\_cuesheet\_track}}*\ pCuesheetTrack);}
\DoxyCodeLine{01327\ }
\DoxyCodeLine{01328\ }
\DoxyCodeLine{01329\ \textcolor{preprocessor}{\#ifdef\ \_\_cplusplus}}
\DoxyCodeLine{01330\ \}}
\DoxyCodeLine{01331\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01332\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{/*\ dr\_flac\_h\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{01333\ }
\DoxyCodeLine{01334\ }
\DoxyCodeLine{01335\ \textcolor{comment}{/************************************************************************************************************************************************************}}
\DoxyCodeLine{01336\ \textcolor{comment}{\ ************************************************************************************************************************************************************}}
\DoxyCodeLine{01337\ \textcolor{comment}{}}
\DoxyCodeLine{01338\ \textcolor{comment}{\ IMPLEMENTATION}}
\DoxyCodeLine{01339\ \textcolor{comment}{}}
\DoxyCodeLine{01340\ \textcolor{comment}{\ ************************************************************************************************************************************************************}}
\DoxyCodeLine{01341\ \textcolor{comment}{\ ************************************************************************************************************************************************************/}}
\DoxyCodeLine{01342\ \textcolor{preprocessor}{\#if\ defined(DR\_FLAC\_IMPLEMENTATION)\ ||\ defined(DRFLAC\_IMPLEMENTATION)}}
\DoxyCodeLine{01343\ \textcolor{preprocessor}{\#ifndef\ dr\_flac\_c}}
\DoxyCodeLine{01344\ \textcolor{preprocessor}{\#define\ dr\_flac\_c}}
\DoxyCodeLine{01345\ }
\DoxyCodeLine{01346\ \textcolor{comment}{/*\ Disable\ some\ annoying\ warnings.\ */}}
\DoxyCodeLine{01347\ \textcolor{preprocessor}{\#if\ defined(\_\_clang\_\_)\ ||\ (defined(\_\_GNUC\_\_)\ \&\&\ (\_\_GNUC\_\_\ >\ 4\ ||\ (\_\_GNUC\_\_\ ==\ 4\ \&\&\ \_\_GNUC\_MINOR\_\_\ >=\ 6)))}}
\DoxyCodeLine{01348\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ GCC\ diagnostic\ push}}
\DoxyCodeLine{01349\ \textcolor{preprocessor}{\ \ \ \ \#if\ \_\_GNUC\_\_\ >=\ 7}}
\DoxyCodeLine{01350\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ GCC\ diagnostic\ ignored\ "{}-\/Wimplicit-\/fallthrough"{}}}
\DoxyCodeLine{01351\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01352\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01353\ }
\DoxyCodeLine{01354\ \textcolor{preprocessor}{\#ifdef\ \_\_linux\_\_}}
\DoxyCodeLine{01355\ \textcolor{preprocessor}{\ \ \ \ \#ifndef\ \_BSD\_SOURCE}}
\DoxyCodeLine{01356\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ \_BSD\_SOURCE}}
\DoxyCodeLine{01357\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01358\ \textcolor{preprocessor}{\ \ \ \ \#ifndef\ \_DEFAULT\_SOURCE}}
\DoxyCodeLine{01359\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ \_DEFAULT\_SOURCE}}
\DoxyCodeLine{01360\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01361\ \textcolor{preprocessor}{\ \ \ \ \#ifndef\ \_\_USE\_BSD}}
\DoxyCodeLine{01362\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ \_\_USE\_BSD}}
\DoxyCodeLine{01363\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01364\ \textcolor{preprocessor}{\ \ \ \ \#include\ <endian.h>}}
\DoxyCodeLine{01365\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01366\ }
\DoxyCodeLine{01367\ \textcolor{preprocessor}{\#include\ <stdlib.h>}}
\DoxyCodeLine{01368\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{01369\ }
\DoxyCodeLine{01370\ \textcolor{comment}{/*\ Inline\ */}}
\DoxyCodeLine{01371\ \textcolor{preprocessor}{\#ifdef\ \_MSC\_VER}}
\DoxyCodeLine{01372\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_INLINE\ \_\_forceinline}}
\DoxyCodeLine{01373\ \textcolor{preprocessor}{\#elif\ defined(\_\_GNUC\_\_)}}
\DoxyCodeLine{01374\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{01375\ \textcolor{comment}{\ \ \ \ I've\ had\ a\ bug\ report\ where\ GCC\ is\ emitting\ warnings\ about\ functions\ possibly\ not\ being\ inlineable.\ This\ warning\ happens\ when}}
\DoxyCodeLine{01376\ \textcolor{comment}{\ \ \ \ the\ \_\_attribute\_\_((always\_inline))\ attribute\ is\ defined\ without\ an\ "{}inline"{}\ statement.\ I\ think\ therefore\ there\ must\ be\ some}}
\DoxyCodeLine{01377\ \textcolor{comment}{\ \ \ \ case\ where\ "{}\_\_inline\_\_"{}\ is\ not\ always\ defined,\ thus\ the\ compiler\ emitting\ these\ warnings.\ When\ using\ -\/std=c89\ or\ -\/ansi\ on\ the}}
\DoxyCodeLine{01378\ \textcolor{comment}{\ \ \ \ command\ line,\ we\ cannot\ use\ the\ "{}inline"{}\ keyword\ and\ instead\ need\ to\ use\ "{}\_\_inline\_\_"{}.\ In\ an\ attempt\ to\ work\ around\ this\ issue}}
\DoxyCodeLine{01379\ \textcolor{comment}{\ \ \ \ I\ am\ using\ "{}\_\_inline\_\_"{}\ only\ when\ we're\ compiling\ in\ strict\ ANSI\ mode.}}
\DoxyCodeLine{01380\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{01381\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\_\_STRICT\_ANSI\_\_)}}
\DoxyCodeLine{01382\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_GNUC\_INLINE\_HINT\ \_\_inline\_\_}}
\DoxyCodeLine{01383\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01384\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_GNUC\_INLINE\_HINT\ inline}}
\DoxyCodeLine{01385\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01386\ }
\DoxyCodeLine{01387\ \textcolor{preprocessor}{\ \ \ \ \#if\ (\_\_GNUC\_\_\ >\ 3\ ||\ (\_\_GNUC\_\_\ ==\ 3\ \&\&\ \_\_GNUC\_MINOR\_\_\ >=\ 2))\ ||\ defined(\_\_clang\_\_)}}
\DoxyCodeLine{01388\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_INLINE\ DRFLAC\_GNUC\_INLINE\_HINT\ \_\_attribute\_\_((always\_inline))}}
\DoxyCodeLine{01389\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01390\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_INLINE\ DRFLAC\_GNUC\_INLINE\_HINT}}
\DoxyCodeLine{01391\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01392\ \textcolor{preprocessor}{\#elif\ defined(\_\_WATCOMC\_\_)}}
\DoxyCodeLine{01393\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_INLINE\ \_\_inline}}
\DoxyCodeLine{01394\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01395\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_INLINE}}
\DoxyCodeLine{01396\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01397\ \textcolor{comment}{/*\ End\ Inline\ */}}
\DoxyCodeLine{01398\ }
\DoxyCodeLine{01399\ \textcolor{comment}{/*}}
\DoxyCodeLine{01400\ \textcolor{comment}{Intrinsics\ Support}}
\DoxyCodeLine{01401\ \textcolor{comment}{}}
\DoxyCodeLine{01402\ \textcolor{comment}{There's\ a\ bug\ in\ GCC\ 4.2.x\ which\ results\ in\ an\ incorrect\ compilation\ error\ when\ using\ \_mm\_slli\_epi32()\ where\ it\ complains\ with}}
\DoxyCodeLine{01403\ \textcolor{comment}{}}
\DoxyCodeLine{01404\ \textcolor{comment}{\ \ \ \ "{}error:\ shift\ must\ be\ an\ immediate"{}}}
\DoxyCodeLine{01405\ \textcolor{comment}{}}
\DoxyCodeLine{01406\ \textcolor{comment}{Unfortuantely\ dr\_flac\ depends\ on\ this\ for\ a\ few\ things\ so\ we're\ just\ going\ to\ disable\ SSE\ on\ GCC\ 4.2\ and\ below.}}
\DoxyCodeLine{01407\ \textcolor{comment}{*/}}
\DoxyCodeLine{01408\ \textcolor{preprocessor}{\#if\ !defined(DR\_FLAC\_NO\_SIMD)}}
\DoxyCodeLine{01409\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(DRFLAC\_X64)\ ||\ defined(DRFLAC\_X86)}}
\DoxyCodeLine{01410\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ defined(\_MSC\_VER)\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{01411\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ MSVC.\ */}}
\DoxyCodeLine{01412\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#if\ \_MSC\_VER\ >=\ 1400\ \&\&\ !defined(DRFLAC\_NO\_SSE2)\ \ \ \ }\textcolor{comment}{/*\ 2005\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{01413\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_SUPPORT\_SSE2}}
\DoxyCodeLine{01414\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01415\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#if\ \_MSC\_VER\ >=\ 1600\ \&\&\ !defined(DRFLAC\_NO\_SSE41)\ \ \ }\textcolor{comment}{/*\ 2010\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{01416\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_SUPPORT\_SSE41}}
\DoxyCodeLine{01417\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01418\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#elif\ defined(\_\_clang\_\_)\ ||\ (defined(\_\_GNUC\_\_)\ \&\&\ (\_\_GNUC\_\_\ >\ 4\ ||\ (\_\_GNUC\_\_\ ==\ 4\ \&\&\ \_\_GNUC\_MINOR\_\_\ >=\ 3)))}}
\DoxyCodeLine{01419\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Assume\ GNUC-\/style.\ */}}
\DoxyCodeLine{01420\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#if\ defined(\_\_SSE2\_\_)\ \&\&\ !defined(DRFLAC\_NO\_SSE2)}}
\DoxyCodeLine{01421\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_SUPPORT\_SSE2}}
\DoxyCodeLine{01422\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01423\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#if\ defined(\_\_SSE4\_1\_\_)\ \&\&\ !defined(DRFLAC\_NO\_SSE41)}}
\DoxyCodeLine{01424\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_SUPPORT\_SSE41}}
\DoxyCodeLine{01425\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01426\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01427\ }
\DoxyCodeLine{01428\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ at\ this\ point\ we\ still\ haven't\ determined\ compiler\ support\ for\ the\ intrinsics\ just\ fall\ back\ to\ \_\_has\_include.\ */}}
\DoxyCodeLine{01429\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ !defined(\_\_GNUC\_\_)\ \&\&\ !defined(\_\_clang\_\_)\ \&\&\ defined(\_\_has\_include)}}
\DoxyCodeLine{01430\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#if\ !defined(DRFLAC\_SUPPORT\_SSE2)\ \&\&\ !defined(DRFLAC\_NO\_SSE2)\ \&\&\ \_\_has\_include(<emmintrin.h>)}}
\DoxyCodeLine{01431\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_SUPPORT\_SSE2}}
\DoxyCodeLine{01432\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01433\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#if\ !defined(DRFLAC\_SUPPORT\_SSE41)\ \&\&\ !defined(DRFLAC\_NO\_SSE41)\ \&\&\ \_\_has\_include(<smmintrin.h>)}}
\DoxyCodeLine{01434\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_SUPPORT\_SSE41}}
\DoxyCodeLine{01435\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01436\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01437\ }
\DoxyCodeLine{01438\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ defined(DRFLAC\_SUPPORT\_SSE41)}}
\DoxyCodeLine{01439\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#include\ <smmintrin.h>}}
\DoxyCodeLine{01440\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#elif\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{01441\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#include\ <emmintrin.h>}}
\DoxyCodeLine{01442\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01443\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01444\ }
\DoxyCodeLine{01445\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(DRFLAC\_ARM)}}
\DoxyCodeLine{01446\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ !defined(DRFLAC\_NO\_NEON)\ \&\&\ (defined(\_\_ARM\_NEON)\ ||\ defined(\_\_aarch64\_\_)\ ||\ defined(\_M\_ARM64))}}
\DoxyCodeLine{01447\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_SUPPORT\_NEON}}
\DoxyCodeLine{01448\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#include\ <arm\_neon.h>}}
\DoxyCodeLine{01449\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01450\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01451\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01452\ }
\DoxyCodeLine{01453\ \textcolor{comment}{/*\ Compile-\/time\ CPU\ feature\ support.\ */}}
\DoxyCodeLine{01454\ \textcolor{preprocessor}{\#if\ !defined(DR\_FLAC\_NO\_SIMD)\ \&\&\ (defined(DRFLAC\_X86)\ ||\ defined(DRFLAC\_X64))}}
\DoxyCodeLine{01455\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\_MSC\_VER)\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{01456\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ \_MSC\_VER\ >=\ 1400}}
\DoxyCodeLine{01457\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#include\ <intrin.h>}}
\DoxyCodeLine{01458\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ drflac\_\_cpuid(\textcolor{keywordtype}{int}\ info[4],\ \textcolor{keywordtype}{int}\ fid)}
\DoxyCodeLine{01459\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01460\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_cpuid(info,\ fid);}
\DoxyCodeLine{01461\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01462\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#else}}
\DoxyCodeLine{01463\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_NO\_CPUID}}
\DoxyCodeLine{01464\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01465\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01466\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ defined(\_\_GNUC\_\_)\ ||\ defined(\_\_clang\_\_)}}
\DoxyCodeLine{01467\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ drflac\_\_cpuid(\textcolor{keywordtype}{int}\ info[4],\ \textcolor{keywordtype}{int}\ fid)}
\DoxyCodeLine{01468\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01469\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{01470\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ It\ looks\ like\ the\ -\/fPIC\ option\ uses\ the\ ebx\ register\ which\ GCC\ complains\ about.\ We\ can\ work\ around\ this\ by\ just\ using\ a\ different\ register,\ the}}
\DoxyCodeLine{01471\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ specific\ register\ of\ which\ I'm\ letting\ the\ compiler\ decide\ on.\ The\ "{}k"{}\ prefix\ is\ used\ to\ specify\ a\ 32-\/bit\ register.\ The\ \{...\}\ syntax\ is\ for}}
\DoxyCodeLine{01472\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ supporting\ different\ assembly\ dialects.}}
\DoxyCodeLine{01473\ \textcolor{comment}{}}
\DoxyCodeLine{01474\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ What's\ basically\ happening\ is\ that\ we're\ saving\ and\ restoring\ the\ ebx\ register\ manually.}}
\DoxyCodeLine{01475\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{01476\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#if\ defined(DRFLAC\_X86)\ \&\&\ defined(\_\_PIC\_\_)}}
\DoxyCodeLine{01477\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_asm\_\_\ \_\_volatile\_\_\ (}
\DoxyCodeLine{01478\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}xchg\{l\}\ \{\%\%\}ebx,\ \%k1;"{}}}
\DoxyCodeLine{01479\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}cpuid;"{}}}
\DoxyCodeLine{01480\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}xchg\{l\}\ \{\%\%\}ebx,\ \%k1;"{}}}
\DoxyCodeLine{01481\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \textcolor{stringliteral}{"{}=a"{}}(info[0]),\ \textcolor{stringliteral}{"{}=\&r"{}}(info[1]),\ \textcolor{stringliteral}{"{}=c"{}}(info[2]),\ \textcolor{stringliteral}{"{}=d"{}}(info[3])\ :\ \textcolor{stringliteral}{"{}a"{}}(fid),\ \textcolor{stringliteral}{"{}c"{}}(0)}
\DoxyCodeLine{01482\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{01483\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#else}}
\DoxyCodeLine{01484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_asm\_\_\ \_\_volatile\_\_\ (}
\DoxyCodeLine{01485\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}cpuid"{}}\ :\ \textcolor{stringliteral}{"{}=a"{}}(info[0]),\ \textcolor{stringliteral}{"{}=b"{}}(info[1]),\ \textcolor{stringliteral}{"{}=c"{}}(info[2]),\ \textcolor{stringliteral}{"{}=d"{}}(info[3])\ :\ \textcolor{stringliteral}{"{}a"{}}(fid),\ \textcolor{stringliteral}{"{}c"{}}(0)}
\DoxyCodeLine{01486\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{01487\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01488\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01489\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#else}}
\DoxyCodeLine{01490\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_NO\_CPUID}}
\DoxyCodeLine{01491\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01492\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01493\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01494\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_NO\_CPUID}}
\DoxyCodeLine{01495\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01496\ }
\DoxyCodeLine{01497\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_bool32\ drflac\_has\_sse2(\textcolor{keywordtype}{void})}
\DoxyCodeLine{01498\ \{}
\DoxyCodeLine{01499\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{01500\ \textcolor{preprocessor}{\ \ \ \ \#if\ (defined(DRFLAC\_X64)\ ||\ defined(DRFLAC\_X86))\ \&\&\ !defined(DRFLAC\_NO\_SSE2)}}
\DoxyCodeLine{01501\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ defined(DRFLAC\_X64)}}
\DoxyCodeLine{01502\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;\ \ \ \ \textcolor{comment}{/*\ 64-\/bit\ targets\ always\ support\ SSE2.\ */}}
\DoxyCodeLine{01503\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#elif\ (defined(\_M\_IX86\_FP)\ \&\&\ \_M\_IX86\_FP\ ==\ 2)\ ||\ defined(\_\_SSE2\_\_)}}
\DoxyCodeLine{01504\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;\ \ \ \ \textcolor{comment}{/*\ If\ the\ compiler\ is\ allowed\ to\ freely\ generate\ SSE2\ code\ we\ can\ assume\ support.\ */}}
\DoxyCodeLine{01505\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#else}}
\DoxyCodeLine{01506\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#if\ defined(DRFLAC\_NO\_CPUID)}}
\DoxyCodeLine{01507\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{01508\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#else}}
\DoxyCodeLine{01509\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ info[4];}
\DoxyCodeLine{01510\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_cpuid(info,\ 1);}
\DoxyCodeLine{01511\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (info[3]\ \&\ (1\ <<\ 26))\ !=\ 0;}
\DoxyCodeLine{01512\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01513\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01514\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01515\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \ \ \ \textcolor{comment}{/*\ SSE2\ is\ only\ supported\ on\ x86\ and\ x64\ architectures.\ */}}
\DoxyCodeLine{01516\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01517\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01518\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ No\ compiler\ support.\ */}}
\DoxyCodeLine{01519\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01520\ \}}
\DoxyCodeLine{01521\ }
\DoxyCodeLine{01522\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_bool32\ drflac\_has\_sse41(\textcolor{keywordtype}{void})}
\DoxyCodeLine{01523\ \{}
\DoxyCodeLine{01524\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE41)}}
\DoxyCodeLine{01525\ \textcolor{preprocessor}{\ \ \ \ \#if\ (defined(DRFLAC\_X64)\ ||\ defined(DRFLAC\_X86))\ \&\&\ !defined(DRFLAC\_NO\_SSE41)}}
\DoxyCodeLine{01526\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ defined(\_\_SSE4\_1\_\_)\ ||\ defined(\_\_AVX\_\_)}}
\DoxyCodeLine{01527\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;\ \ \ \ \textcolor{comment}{/*\ If\ the\ compiler\ is\ allowed\ to\ freely\ generate\ SSE41\ code\ we\ can\ assume\ support.\ */}}
\DoxyCodeLine{01528\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#else}}
\DoxyCodeLine{01529\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#if\ defined(DRFLAC\_NO\_CPUID)}}
\DoxyCodeLine{01530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{01531\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#else}}
\DoxyCodeLine{01532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ info[4];}
\DoxyCodeLine{01533\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_cpuid(info,\ 1);}
\DoxyCodeLine{01534\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (info[2]\ \&\ (1\ <<\ 19))\ !=\ 0;}
\DoxyCodeLine{01535\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01536\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01537\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01538\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \ \ \ \textcolor{comment}{/*\ SSE41\ is\ only\ supported\ on\ x86\ and\ x64\ architectures.\ */}}
\DoxyCodeLine{01539\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01540\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01541\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ No\ compiler\ support.\ */}}
\DoxyCodeLine{01542\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01543\ \}}
\DoxyCodeLine{01544\ }
\DoxyCodeLine{01545\ }
\DoxyCodeLine{01546\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)\ \&\&\ \_MSC\_VER\ >=\ 1500\ \&\&\ (defined(DRFLAC\_X86)\ ||\ defined(DRFLAC\_X64))\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{01547\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_HAS\_LZCNT\_INTRINSIC}}
\DoxyCodeLine{01548\ \textcolor{preprocessor}{\#elif\ (defined(\_\_GNUC\_\_)\ \&\&\ ((\_\_GNUC\_\_\ >\ 4)\ ||\ (\_\_GNUC\_\_\ ==\ 4\ \&\&\ \_\_GNUC\_MINOR\_\_\ >=\ 7)))}}
\DoxyCodeLine{01549\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_HAS\_LZCNT\_INTRINSIC}}
\DoxyCodeLine{01550\ \textcolor{preprocessor}{\#elif\ defined(\_\_clang\_\_)}}
\DoxyCodeLine{01551\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\_\_has\_builtin)}}
\DoxyCodeLine{01552\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ \_\_has\_builtin(\_\_builtin\_clzll)\ ||\ \_\_has\_builtin(\_\_builtin\_clzl)}}
\DoxyCodeLine{01553\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_HAS\_LZCNT\_INTRINSIC}}
\DoxyCodeLine{01554\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01555\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01556\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01557\ }
\DoxyCodeLine{01558\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)\ \&\&\ \_MSC\_VER\ >=\ 1400\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{01559\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_HAS\_BYTESWAP16\_INTRINSIC}}
\DoxyCodeLine{01560\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_HAS\_BYTESWAP32\_INTRINSIC}}
\DoxyCodeLine{01561\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_HAS\_BYTESWAP64\_INTRINSIC}}
\DoxyCodeLine{01562\ \textcolor{preprocessor}{\#elif\ defined(\_\_clang\_\_)}}
\DoxyCodeLine{01563\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\_\_has\_builtin)}}
\DoxyCodeLine{01564\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ \_\_has\_builtin(\_\_builtin\_bswap16)}}
\DoxyCodeLine{01565\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_HAS\_BYTESWAP16\_INTRINSIC}}
\DoxyCodeLine{01566\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01567\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ \_\_has\_builtin(\_\_builtin\_bswap32)}}
\DoxyCodeLine{01568\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_HAS\_BYTESWAP32\_INTRINSIC}}
\DoxyCodeLine{01569\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01570\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ \_\_has\_builtin(\_\_builtin\_bswap64)}}
\DoxyCodeLine{01571\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ DRFLAC\_HAS\_BYTESWAP64\_INTRINSIC}}
\DoxyCodeLine{01572\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01573\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01574\ \textcolor{preprocessor}{\#elif\ defined(\_\_GNUC\_\_)}}
\DoxyCodeLine{01575\ \textcolor{preprocessor}{\ \ \ \ \#if\ ((\_\_GNUC\_\_\ >\ 4)\ ||\ (\_\_GNUC\_\_\ ==\ 4\ \&\&\ \_\_GNUC\_MINOR\_\_\ >=\ 3))}}
\DoxyCodeLine{01576\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_HAS\_BYTESWAP32\_INTRINSIC}}
\DoxyCodeLine{01577\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_HAS\_BYTESWAP64\_INTRINSIC}}
\DoxyCodeLine{01578\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01579\ \textcolor{preprocessor}{\ \ \ \ \#if\ ((\_\_GNUC\_\_\ >\ 4)\ ||\ (\_\_GNUC\_\_\ ==\ 4\ \&\&\ \_\_GNUC\_MINOR\_\_\ >=\ 8))}}
\DoxyCodeLine{01580\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_HAS\_BYTESWAP16\_INTRINSIC}}
\DoxyCodeLine{01581\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01582\ \textcolor{preprocessor}{\#elif\ defined(\_\_WATCOMC\_\_)\ \&\&\ defined(\_\_386\_\_)}}
\DoxyCodeLine{01583\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_HAS\_BYTESWAP16\_INTRINSIC}}
\DoxyCodeLine{01584\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_HAS\_BYTESWAP32\_INTRINSIC}}
\DoxyCodeLine{01585\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_HAS\_BYTESWAP64\_INTRINSIC}}
\DoxyCodeLine{01586\ \ \ \ \ \textcolor{keyword}{extern}\ \_\_inline\ drflac\_uint16\ \_watcom\_bswap16(drflac\_uint16);}
\DoxyCodeLine{01587\ \ \ \ \ \textcolor{keyword}{extern}\ \_\_inline\ drflac\_uint32\ \_watcom\_bswap32(drflac\_uint32);}
\DoxyCodeLine{01588\ \ \ \ \ \textcolor{keyword}{extern}\ \_\_inline\ drflac\_uint64\ \_watcom\_bswap64(drflac\_uint64);}
\DoxyCodeLine{01589\ \textcolor{preprocessor}{\#pragma\ aux\ \_watcom\_bswap16\ =\ \(\backslash\)}}
\DoxyCodeLine{01590\ \textcolor{preprocessor}{\ \ \ \ "{}xchg\ al,\ ah"{}\ \(\backslash\)}}
\DoxyCodeLine{01591\ \textcolor{preprocessor}{\ \ \ \ parm\ \ [ax]\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01592\ \textcolor{preprocessor}{\ \ \ \ value\ [ax]\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01593\ \textcolor{preprocessor}{\ \ \ \ modify\ nomemory;}}
\DoxyCodeLine{01594\ \textcolor{preprocessor}{\#pragma\ aux\ \_watcom\_bswap32\ =\ \(\backslash\)}}
\DoxyCodeLine{01595\ \textcolor{preprocessor}{\ \ \ \ "{}bswap\ eax"{}\ \(\backslash\)}}
\DoxyCodeLine{01596\ \textcolor{preprocessor}{\ \ \ \ parm\ \ [eax]\ \(\backslash\)}}
\DoxyCodeLine{01597\ \textcolor{preprocessor}{\ \ \ \ value\ [eax]\ \(\backslash\)}}
\DoxyCodeLine{01598\ \textcolor{preprocessor}{\ \ \ \ modify\ nomemory;}}
\DoxyCodeLine{01599\ \textcolor{preprocessor}{\#pragma\ aux\ \_watcom\_bswap64\ =\ \(\backslash\)}}
\DoxyCodeLine{01600\ \textcolor{preprocessor}{\ \ \ \ "{}bswap\ eax"{}\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01601\ \textcolor{preprocessor}{\ \ \ \ "{}bswap\ edx"{}\ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{01602\ \textcolor{preprocessor}{\ \ \ \ "{}xchg\ eax,edx"{}\ \ \(\backslash\)}}
\DoxyCodeLine{01603\ \textcolor{preprocessor}{\ \ \ \ parm\ [eax\ edx]\ \ \(\backslash\)}}
\DoxyCodeLine{01604\ \textcolor{preprocessor}{\ \ \ \ value\ [eax\ edx]\ \(\backslash\)}}
\DoxyCodeLine{01605\ \textcolor{preprocessor}{\ \ \ \ modify\ nomemory;}}
\DoxyCodeLine{01606\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01607\ }
\DoxyCodeLine{01608\ }
\DoxyCodeLine{01609\ \textcolor{comment}{/*\ Standard\ library\ stuff.\ */}}
\DoxyCodeLine{01610\ \textcolor{preprocessor}{\#ifndef\ DRFLAC\_ASSERT}}
\DoxyCodeLine{01611\ \textcolor{preprocessor}{\#include\ <assert.h>}}
\DoxyCodeLine{01612\ \textcolor{preprocessor}{\#define\ DRFLAC\_ASSERT(expression)\ \ \ \ \ \ \ \ \ \ \ assert(expression)}}
\DoxyCodeLine{01613\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01614\ \textcolor{preprocessor}{\#ifndef\ DRFLAC\_MALLOC}}
\DoxyCodeLine{01615\ \textcolor{preprocessor}{\#define\ DRFLAC\_MALLOC(sz)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ malloc((sz))}}
\DoxyCodeLine{01616\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01617\ \textcolor{preprocessor}{\#ifndef\ DRFLAC\_REALLOC}}
\DoxyCodeLine{01618\ \textcolor{preprocessor}{\#define\ DRFLAC\_REALLOC(p,\ sz)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ realloc((p),\ (sz))}}
\DoxyCodeLine{01619\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01620\ \textcolor{preprocessor}{\#ifndef\ DRFLAC\_FREE}}
\DoxyCodeLine{01621\ \textcolor{preprocessor}{\#define\ DRFLAC\_FREE(p)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ free((p))}}
\DoxyCodeLine{01622\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01623\ \textcolor{preprocessor}{\#ifndef\ DRFLAC\_COPY\_MEMORY}}
\DoxyCodeLine{01624\ \textcolor{preprocessor}{\#define\ DRFLAC\_COPY\_MEMORY(dst,\ src,\ sz)\ \ \ \ memcpy((dst),\ (src),\ (sz))}}
\DoxyCodeLine{01625\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01626\ \textcolor{preprocessor}{\#ifndef\ DRFLAC\_ZERO\_MEMORY}}
\DoxyCodeLine{01627\ \textcolor{preprocessor}{\#define\ DRFLAC\_ZERO\_MEMORY(p,\ sz)\ \ \ \ \ \ \ \ \ \ \ memset((p),\ 0,\ (sz))}}
\DoxyCodeLine{01628\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01629\ \textcolor{preprocessor}{\#ifndef\ DRFLAC\_ZERO\_OBJECT}}
\DoxyCodeLine{01630\ \textcolor{preprocessor}{\#define\ DRFLAC\_ZERO\_OBJECT(p)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DRFLAC\_ZERO\_MEMORY((p),\ sizeof(*(p)))}}
\DoxyCodeLine{01631\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01632\ }
\DoxyCodeLine{01633\ \textcolor{preprocessor}{\#define\ DRFLAC\_MAX\_SIMD\_VECTOR\_SIZE\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 64\ \ }\textcolor{comment}{/*\ 64\ for\ AVX-\/512\ in\ the\ future.\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{01634\ }
\DoxyCodeLine{01635\ \textcolor{comment}{/*\ Result\ Codes\ */}}
\DoxyCodeLine{01636\ \textcolor{keyword}{typedef}\ drflac\_int32\ drflac\_result;}
\DoxyCodeLine{01637\ \textcolor{preprocessor}{\#define\ DRFLAC\_SUCCESS\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0}}
\DoxyCodeLine{01638\ \textcolor{preprocessor}{\#define\ DRFLAC\_ERROR\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1\ \ \ }\textcolor{comment}{/*\ A\ generic\ error.\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{01639\ \textcolor{preprocessor}{\#define\ DRFLAC\_INVALID\_ARGS\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/2}}
\DoxyCodeLine{01640\ \textcolor{preprocessor}{\#define\ DRFLAC\_INVALID\_OPERATION\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/3}}
\DoxyCodeLine{01641\ \textcolor{preprocessor}{\#define\ DRFLAC\_OUT\_OF\_MEMORY\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/4}}
\DoxyCodeLine{01642\ \textcolor{preprocessor}{\#define\ DRFLAC\_OUT\_OF\_RANGE\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/5}}
\DoxyCodeLine{01643\ \textcolor{preprocessor}{\#define\ DRFLAC\_ACCESS\_DENIED\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/6}}
\DoxyCodeLine{01644\ \textcolor{preprocessor}{\#define\ DRFLAC\_DOES\_NOT\_EXIST\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/7}}
\DoxyCodeLine{01645\ \textcolor{preprocessor}{\#define\ DRFLAC\_ALREADY\_EXISTS\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/8}}
\DoxyCodeLine{01646\ \textcolor{preprocessor}{\#define\ DRFLAC\_TOO\_MANY\_OPEN\_FILES\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/9}}
\DoxyCodeLine{01647\ \textcolor{preprocessor}{\#define\ DRFLAC\_INVALID\_FILE\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/10}}
\DoxyCodeLine{01648\ \textcolor{preprocessor}{\#define\ DRFLAC\_TOO\_BIG\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/11}}
\DoxyCodeLine{01649\ \textcolor{preprocessor}{\#define\ DRFLAC\_PATH\_TOO\_LONG\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/12}}
\DoxyCodeLine{01650\ \textcolor{preprocessor}{\#define\ DRFLAC\_NAME\_TOO\_LONG\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/13}}
\DoxyCodeLine{01651\ \textcolor{preprocessor}{\#define\ DRFLAC\_NOT\_DIRECTORY\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/14}}
\DoxyCodeLine{01652\ \textcolor{preprocessor}{\#define\ DRFLAC\_IS\_DIRECTORY\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/15}}
\DoxyCodeLine{01653\ \textcolor{preprocessor}{\#define\ DRFLAC\_DIRECTORY\_NOT\_EMPTY\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/16}}
\DoxyCodeLine{01654\ \textcolor{preprocessor}{\#define\ DRFLAC\_END\_OF\_FILE\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/17}}
\DoxyCodeLine{01655\ \textcolor{preprocessor}{\#define\ DRFLAC\_NO\_SPACE\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/18}}
\DoxyCodeLine{01656\ \textcolor{preprocessor}{\#define\ DRFLAC\_BUSY\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/19}}
\DoxyCodeLine{01657\ \textcolor{preprocessor}{\#define\ DRFLAC\_IO\_ERROR\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/20}}
\DoxyCodeLine{01658\ \textcolor{preprocessor}{\#define\ DRFLAC\_INTERRUPT\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/21}}
\DoxyCodeLine{01659\ \textcolor{preprocessor}{\#define\ DRFLAC\_UNAVAILABLE\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/22}}
\DoxyCodeLine{01660\ \textcolor{preprocessor}{\#define\ DRFLAC\_ALREADY\_IN\_USE\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/23}}
\DoxyCodeLine{01661\ \textcolor{preprocessor}{\#define\ DRFLAC\_BAD\_ADDRESS\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/24}}
\DoxyCodeLine{01662\ \textcolor{preprocessor}{\#define\ DRFLAC\_BAD\_SEEK\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/25}}
\DoxyCodeLine{01663\ \textcolor{preprocessor}{\#define\ DRFLAC\_BAD\_PIPE\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/26}}
\DoxyCodeLine{01664\ \textcolor{preprocessor}{\#define\ DRFLAC\_DEADLOCK\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/27}}
\DoxyCodeLine{01665\ \textcolor{preprocessor}{\#define\ DRFLAC\_TOO\_MANY\_LINKS\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/28}}
\DoxyCodeLine{01666\ \textcolor{preprocessor}{\#define\ DRFLAC\_NOT\_IMPLEMENTED\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/29}}
\DoxyCodeLine{01667\ \textcolor{preprocessor}{\#define\ DRFLAC\_NO\_MESSAGE\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/30}}
\DoxyCodeLine{01668\ \textcolor{preprocessor}{\#define\ DRFLAC\_BAD\_MESSAGE\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/31}}
\DoxyCodeLine{01669\ \textcolor{preprocessor}{\#define\ DRFLAC\_NO\_DATA\_AVAILABLE\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/32}}
\DoxyCodeLine{01670\ \textcolor{preprocessor}{\#define\ DRFLAC\_INVALID\_DATA\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/33}}
\DoxyCodeLine{01671\ \textcolor{preprocessor}{\#define\ DRFLAC\_TIMEOUT\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/34}}
\DoxyCodeLine{01672\ \textcolor{preprocessor}{\#define\ DRFLAC\_NO\_NETWORK\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/35}}
\DoxyCodeLine{01673\ \textcolor{preprocessor}{\#define\ DRFLAC\_NOT\_UNIQUE\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/36}}
\DoxyCodeLine{01674\ \textcolor{preprocessor}{\#define\ DRFLAC\_NOT\_SOCKET\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/37}}
\DoxyCodeLine{01675\ \textcolor{preprocessor}{\#define\ DRFLAC\_NO\_ADDRESS\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/38}}
\DoxyCodeLine{01676\ \textcolor{preprocessor}{\#define\ DRFLAC\_BAD\_PROTOCOL\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/39}}
\DoxyCodeLine{01677\ \textcolor{preprocessor}{\#define\ DRFLAC\_PROTOCOL\_UNAVAILABLE\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/40}}
\DoxyCodeLine{01678\ \textcolor{preprocessor}{\#define\ DRFLAC\_PROTOCOL\_NOT\_SUPPORTED\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/41}}
\DoxyCodeLine{01679\ \textcolor{preprocessor}{\#define\ DRFLAC\_PROTOCOL\_FAMILY\_NOT\_SUPPORTED\ \ \ \ \ \ \ \ \ \ \ \ -\/42}}
\DoxyCodeLine{01680\ \textcolor{preprocessor}{\#define\ DRFLAC\_ADDRESS\_FAMILY\_NOT\_SUPPORTED\ \ \ \ \ \ \ \ \ \ \ \ \ -\/43}}
\DoxyCodeLine{01681\ \textcolor{preprocessor}{\#define\ DRFLAC\_SOCKET\_NOT\_SUPPORTED\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/44}}
\DoxyCodeLine{01682\ \textcolor{preprocessor}{\#define\ DRFLAC\_CONNECTION\_RESET\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/45}}
\DoxyCodeLine{01683\ \textcolor{preprocessor}{\#define\ DRFLAC\_ALREADY\_CONNECTED\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/46}}
\DoxyCodeLine{01684\ \textcolor{preprocessor}{\#define\ DRFLAC\_NOT\_CONNECTED\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/47}}
\DoxyCodeLine{01685\ \textcolor{preprocessor}{\#define\ DRFLAC\_CONNECTION\_REFUSED\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/48}}
\DoxyCodeLine{01686\ \textcolor{preprocessor}{\#define\ DRFLAC\_NO\_HOST\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/49}}
\DoxyCodeLine{01687\ \textcolor{preprocessor}{\#define\ DRFLAC\_IN\_PROGRESS\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/50}}
\DoxyCodeLine{01688\ \textcolor{preprocessor}{\#define\ DRFLAC\_CANCELLED\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/51}}
\DoxyCodeLine{01689\ \textcolor{preprocessor}{\#define\ DRFLAC\_MEMORY\_ALREADY\_MAPPED\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/52}}
\DoxyCodeLine{01690\ \textcolor{preprocessor}{\#define\ DRFLAC\_AT\_END\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/53}}
\DoxyCodeLine{01691\ }
\DoxyCodeLine{01692\ \textcolor{preprocessor}{\#define\ DRFLAC\_CRC\_MISMATCH\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/100}}
\DoxyCodeLine{01693\ \textcolor{comment}{/*\ End\ Result\ Codes\ */}}
\DoxyCodeLine{01694\ }
\DoxyCodeLine{01695\ }
\DoxyCodeLine{01696\ \textcolor{preprocessor}{\#define\ DRFLAC\_SUBFRAME\_CONSTANT\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0}}
\DoxyCodeLine{01697\ \textcolor{preprocessor}{\#define\ DRFLAC\_SUBFRAME\_VERBATIM\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1}}
\DoxyCodeLine{01698\ \textcolor{preprocessor}{\#define\ DRFLAC\_SUBFRAME\_FIXED\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 8}}
\DoxyCodeLine{01699\ \textcolor{preprocessor}{\#define\ DRFLAC\_SUBFRAME\_LPC\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 32}}
\DoxyCodeLine{01700\ \textcolor{preprocessor}{\#define\ DRFLAC\_SUBFRAME\_RESERVED\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 255}}
\DoxyCodeLine{01701\ }
\DoxyCodeLine{01702\ \textcolor{preprocessor}{\#define\ DRFLAC\_RESIDUAL\_CODING\_METHOD\_PARTITIONED\_RICE\ \ 0}}
\DoxyCodeLine{01703\ \textcolor{preprocessor}{\#define\ DRFLAC\_RESIDUAL\_CODING\_METHOD\_PARTITIONED\_RICE2\ 1}}
\DoxyCodeLine{01704\ }
\DoxyCodeLine{01705\ \textcolor{preprocessor}{\#define\ DRFLAC\_CHANNEL\_ASSIGNMENT\_INDEPENDENT\ \ \ \ \ \ \ \ \ \ \ 0}}
\DoxyCodeLine{01706\ \textcolor{preprocessor}{\#define\ DRFLAC\_CHANNEL\_ASSIGNMENT\_LEFT\_SIDE\ \ \ \ \ \ \ \ \ \ \ \ \ 8}}
\DoxyCodeLine{01707\ \textcolor{preprocessor}{\#define\ DRFLAC\_CHANNEL\_ASSIGNMENT\_RIGHT\_SIDE\ \ \ \ \ \ \ \ \ \ \ \ 9}}
\DoxyCodeLine{01708\ \textcolor{preprocessor}{\#define\ DRFLAC\_CHANNEL\_ASSIGNMENT\_MID\_SIDE\ \ \ \ \ \ \ \ \ \ \ \ \ \ 10}}
\DoxyCodeLine{01709\ }
\DoxyCodeLine{01710\ \textcolor{preprocessor}{\#define\ DRFLAC\_SEEKPOINT\_SIZE\_IN\_BYTES\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 18}}
\DoxyCodeLine{01711\ \textcolor{preprocessor}{\#define\ DRFLAC\_CUESHEET\_TRACK\_SIZE\_IN\_BYTES\ \ \ \ \ \ \ \ \ \ \ \ \ 36}}
\DoxyCodeLine{01712\ \textcolor{preprocessor}{\#define\ DRFLAC\_CUESHEET\_TRACK\_INDEX\_SIZE\_IN\_BYTES\ \ \ \ \ \ \ 12}}
\DoxyCodeLine{01713\ }
\DoxyCodeLine{01714\ \textcolor{preprocessor}{\#define\ drflac\_align(x,\ a)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((((x)\ +\ (a)\ -\/\ 1)\ /\ (a))\ *\ (a))}}
\DoxyCodeLine{01715\ }
\DoxyCodeLine{01716\ }
\DoxyCodeLine{01717\ DRFLAC\_API\ \textcolor{keywordtype}{void}\ drflac\_version(drflac\_uint32*\ pMajor,\ drflac\_uint32*\ pMinor,\ drflac\_uint32*\ pRevision)}
\DoxyCodeLine{01718\ \{}
\DoxyCodeLine{01719\ \ \ \ \ \textcolor{keywordflow}{if}\ (pMajor)\ \{}
\DoxyCodeLine{01720\ \ \ \ \ \ \ \ \ *pMajor\ =\ DRFLAC\_VERSION\_MAJOR;}
\DoxyCodeLine{01721\ \ \ \ \ \}}
\DoxyCodeLine{01722\ }
\DoxyCodeLine{01723\ \ \ \ \ \textcolor{keywordflow}{if}\ (pMinor)\ \{}
\DoxyCodeLine{01724\ \ \ \ \ \ \ \ \ *pMinor\ =\ DRFLAC\_VERSION\_MINOR;}
\DoxyCodeLine{01725\ \ \ \ \ \}}
\DoxyCodeLine{01726\ }
\DoxyCodeLine{01727\ \ \ \ \ \textcolor{keywordflow}{if}\ (pRevision)\ \{}
\DoxyCodeLine{01728\ \ \ \ \ \ \ \ \ *pRevision\ =\ DRFLAC\_VERSION\_REVISION;}
\DoxyCodeLine{01729\ \ \ \ \ \}}
\DoxyCodeLine{01730\ \}}
\DoxyCodeLine{01731\ }
\DoxyCodeLine{01732\ DRFLAC\_API\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ drflac\_version\_string(\textcolor{keywordtype}{void})}
\DoxyCodeLine{01733\ \{}
\DoxyCodeLine{01734\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_VERSION\_STRING;}
\DoxyCodeLine{01735\ \}}
\DoxyCodeLine{01736\ }
\DoxyCodeLine{01737\ }
\DoxyCodeLine{01738\ \textcolor{comment}{/*\ CPU\ caps.\ */}}
\DoxyCodeLine{01739\ \textcolor{preprocessor}{\#if\ defined(\_\_has\_feature)}}
\DoxyCodeLine{01740\ \textcolor{preprocessor}{\ \ \ \ \#if\ \_\_has\_feature(thread\_sanitizer)}}
\DoxyCodeLine{01741\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_NO\_THREAD\_SANITIZE\ \_\_attribute\_\_((no\_sanitize("{}thread"{})))}}
\DoxyCodeLine{01742\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01743\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_NO\_THREAD\_SANITIZE}}
\DoxyCodeLine{01744\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01745\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01746\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_NO\_THREAD\_SANITIZE}}
\DoxyCodeLine{01747\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01748\ }
\DoxyCodeLine{01749\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_HAS\_LZCNT\_INTRINSIC)}}
\DoxyCodeLine{01750\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_gIsLZCNTSupported\ =\ DRFLAC\_FALSE;}
\DoxyCodeLine{01751\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01752\ }
\DoxyCodeLine{01753\ \textcolor{preprocessor}{\#ifndef\ DRFLAC\_NO\_CPUID}}
\DoxyCodeLine{01754\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_gIsSSE2Supported\ \ =\ DRFLAC\_FALSE;}
\DoxyCodeLine{01755\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_gIsSSE41Supported\ =\ DRFLAC\_FALSE;}
\DoxyCodeLine{01756\ }
\DoxyCodeLine{01757\ \textcolor{comment}{/*}}
\DoxyCodeLine{01758\ \textcolor{comment}{I've\ had\ a\ bug\ report\ that\ Clang's\ ThreadSanitizer\ presents\ a\ warning\ in\ this\ function.\ Having\ reviewed\ this,\ this\ does}}
\DoxyCodeLine{01759\ \textcolor{comment}{actually\ make\ sense.\ However,\ since\ CPU\ caps\ should\ never\ differ\ for\ a\ running\ process,\ I\ don't\ think\ the\ trade\ off\ of}}
\DoxyCodeLine{01760\ \textcolor{comment}{complicating\ internal\ API's\ by\ passing\ around\ CPU\ caps\ versus\ just\ disabling\ the\ warnings\ is\ worthwhile.\ I'm\ therefore}}
\DoxyCodeLine{01761\ \textcolor{comment}{just\ going\ to\ disable\ these\ warnings.\ This\ is\ disabled\ via\ the\ DRFLAC\_NO\_THREAD\_SANITIZE\ attribute.}}
\DoxyCodeLine{01762\ \textcolor{comment}{*/}}
\DoxyCodeLine{01763\ DRFLAC\_NO\_THREAD\_SANITIZE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ drflac\_\_init\_cpu\_caps(\textcolor{keywordtype}{void})}
\DoxyCodeLine{01764\ \{}
\DoxyCodeLine{01765\ \ \ \ \ \textcolor{keyword}{static}\ drflac\_bool32\ isCPUCapsInitialized\ =\ DRFLAC\_FALSE;}
\DoxyCodeLine{01766\ }
\DoxyCodeLine{01767\ \ \ \ \ \textcolor{keywordflow}{if}\ (!isCPUCapsInitialized)\ \{}
\DoxyCodeLine{01768\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ LZCNT\ */}}
\DoxyCodeLine{01769\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_HAS\_LZCNT\_INTRINSIC)}}
\DoxyCodeLine{01770\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ info[4]\ =\ \{0\};}
\DoxyCodeLine{01771\ \ \ \ \ \ \ \ \ drflac\_\_cpuid(info,\ 0x80000001);}
\DoxyCodeLine{01772\ \ \ \ \ \ \ \ \ drflac\_\_gIsLZCNTSupported\ =\ (info[2]\ \&\ (1\ <<\ 5))\ !=\ 0;}
\DoxyCodeLine{01773\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01774\ }
\DoxyCodeLine{01775\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ SSE2\ */}}
\DoxyCodeLine{01776\ \ \ \ \ \ \ \ \ drflac\_\_gIsSSE2Supported\ =\ drflac\_has\_sse2();}
\DoxyCodeLine{01777\ }
\DoxyCodeLine{01778\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ SSE4.1\ */}}
\DoxyCodeLine{01779\ \ \ \ \ \ \ \ \ drflac\_\_gIsSSE41Supported\ =\ drflac\_has\_sse41();}
\DoxyCodeLine{01780\ }
\DoxyCodeLine{01781\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Initialized.\ */}}
\DoxyCodeLine{01782\ \ \ \ \ \ \ \ \ isCPUCapsInitialized\ =\ DRFLAC\_TRUE;}
\DoxyCodeLine{01783\ \ \ \ \ \}}
\DoxyCodeLine{01784\ \}}
\DoxyCodeLine{01785\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01786\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_gIsNEONSupported\ \ =\ DRFLAC\_FALSE;}
\DoxyCodeLine{01787\ }
\DoxyCodeLine{01788\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_bool32\ drflac\_\_has\_neon(\textcolor{keywordtype}{void})}
\DoxyCodeLine{01789\ \{}
\DoxyCodeLine{01790\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{01791\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(DRFLAC\_ARM)\ \&\&\ !defined(DRFLAC\_NO\_NEON)}}
\DoxyCodeLine{01792\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ (defined(\_\_ARM\_NEON)\ ||\ defined(\_\_aarch64\_\_)\ ||\ defined(\_M\_ARM64))}}
\DoxyCodeLine{01793\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;\ \ \ \ \textcolor{comment}{/*\ If\ the\ compiler\ is\ allowed\ to\ freely\ generate\ NEON\ code\ we\ can\ assume\ support.\ */}}
\DoxyCodeLine{01794\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#else}}
\DoxyCodeLine{01795\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ TODO:\ Runtime\ check.\ */}}
\DoxyCodeLine{01796\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{01797\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01798\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01799\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \ \ \ \textcolor{comment}{/*\ NEON\ is\ only\ supported\ on\ ARM\ architectures.\ */}}
\DoxyCodeLine{01800\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01801\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01802\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ No\ compiler\ support.\ */}}
\DoxyCodeLine{01803\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01804\ \}}
\DoxyCodeLine{01805\ }
\DoxyCodeLine{01806\ DRFLAC\_NO\_THREAD\_SANITIZE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ drflac\_\_init\_cpu\_caps(\textcolor{keywordtype}{void})}
\DoxyCodeLine{01807\ \{}
\DoxyCodeLine{01808\ \ \ \ \ drflac\_\_gIsNEONSupported\ =\ drflac\_\_has\_neon();}
\DoxyCodeLine{01809\ }
\DoxyCodeLine{01810\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_HAS\_LZCNT\_INTRINSIC)\ \&\&\ defined(DRFLAC\_ARM)\ \&\&\ (defined(\_\_ARM\_ARCH)\ \&\&\ \_\_ARM\_ARCH\ >=\ 5)}}
\DoxyCodeLine{01811\ \ \ \ \ drflac\_\_gIsLZCNTSupported\ =\ DRFLAC\_TRUE;}
\DoxyCodeLine{01812\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01813\ \}}
\DoxyCodeLine{01814\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01815\ }
\DoxyCodeLine{01816\ }
\DoxyCodeLine{01817\ \textcolor{comment}{/*\ Endian\ Management\ */}}
\DoxyCodeLine{01818\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_bool32\ drflac\_\_is\_little\_endian(\textcolor{keywordtype}{void})}
\DoxyCodeLine{01819\ \{}
\DoxyCodeLine{01820\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_X86)\ ||\ defined(DRFLAC\_X64)}}
\DoxyCodeLine{01821\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{01822\ \textcolor{preprocessor}{\#elif\ defined(\_\_BYTE\_ORDER)\ \&\&\ defined(\_\_LITTLE\_ENDIAN)\ \&\&\ \_\_BYTE\_ORDER\ ==\ \_\_LITTLE\_ENDIAN}}
\DoxyCodeLine{01823\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{01824\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01825\ \ \ \ \ \textcolor{keywordtype}{int}\ n\ =\ 1;}
\DoxyCodeLine{01826\ \ \ \ \ \textcolor{keywordflow}{return}\ (*(\textcolor{keywordtype}{char}*)\&n)\ ==\ 1;}
\DoxyCodeLine{01827\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01828\ \}}
\DoxyCodeLine{01829\ }
\DoxyCodeLine{01830\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint16\ drflac\_\_swap\_endian\_uint16(drflac\_uint16\ n)}
\DoxyCodeLine{01831\ \{}
\DoxyCodeLine{01832\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_HAS\_BYTESWAP16\_INTRINSIC}}
\DoxyCodeLine{01833\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\_MSC\_VER)\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{01834\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_byteswap\_ushort(n);}
\DoxyCodeLine{01835\ \textcolor{preprocessor}{\ \ \ \ \#elif\ defined(\_\_GNUC\_\_)\ ||\ defined(\_\_clang\_\_)}}
\DoxyCodeLine{01836\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_\_builtin\_bswap16(n);}
\DoxyCodeLine{01837\ \textcolor{preprocessor}{\ \ \ \ \#elif\ defined(\_\_WATCOMC\_\_)\ \&\&\ defined(\_\_386\_\_)}}
\DoxyCodeLine{01838\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_watcom\_bswap16(n);}
\DoxyCodeLine{01839\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01840\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#error\ "{}This\ compiler\ does\ not\ support\ the\ byte\ swap\ intrinsic."{}}}
\DoxyCodeLine{01841\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01842\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01843\ \ \ \ \ \textcolor{keywordflow}{return}\ ((n\ \&\ 0xFF00)\ >>\ 8)\ |}
\DoxyCodeLine{01844\ \ \ \ \ \ \ \ \ \ \ \ ((n\ \&\ 0x00FF)\ <<\ 8);}
\DoxyCodeLine{01845\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01846\ \}}
\DoxyCodeLine{01847\ }
\DoxyCodeLine{01848\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_\_swap\_endian\_uint32(drflac\_uint32\ n)}
\DoxyCodeLine{01849\ \{}
\DoxyCodeLine{01850\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_HAS\_BYTESWAP32\_INTRINSIC}}
\DoxyCodeLine{01851\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\_MSC\_VER)\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{01852\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_byteswap\_ulong(n);}
\DoxyCodeLine{01853\ \textcolor{preprocessor}{\ \ \ \ \#elif\ defined(\_\_GNUC\_\_)\ ||\ defined(\_\_clang\_\_)}}
\DoxyCodeLine{01854\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ defined(DRFLAC\_ARM)\ \&\&\ (defined(\_\_ARM\_ARCH)\ \&\&\ \_\_ARM\_ARCH\ >=\ 6)\ \&\&\ !defined(\_\_ARM\_ARCH\_6M\_\_)\ \&\&\ !defined(DRFLAC\_64BIT)\ \ \ }\textcolor{comment}{/*\ <-\/-\/\ 64-\/bit\ inline\ assembly\ has\ not\ been\ tested,\ so\ disabling\ for\ now.\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{01855\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Inline\ assembly\ optimized\ implementation\ for\ ARM.\ In\ my\ testing,\ GCC\ does\ not\ generate\ optimized\ code\ with\ \_\_builtin\_bswap32().\ */}}
\DoxyCodeLine{01856\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ r;}
\DoxyCodeLine{01857\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_asm\_\_\ \_\_volatile\_\_\ (}
\DoxyCodeLine{01858\ \ \ \ \ \ \ \ \ \ \ \ \ \#\textcolor{keywordflow}{if}\ defined(DRFLAC\_64BIT)}
\DoxyCodeLine{01859\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}rev\ \%w[out],\ \%w[in]"{}}\ :\ [out]\textcolor{stringliteral}{"{}=r"{}}(r)\ :\ [in]\textcolor{stringliteral}{"{}r"{}}(n)\ \ \ \textcolor{comment}{/*\ <-\/-\/\ This\ is\ untested.\ If\ someone\ in\ the\ community\ could\ test\ this,\ that\ would\ be\ appreciated!\ */}}
\DoxyCodeLine{01860\ \ \ \ \ \ \ \ \ \ \ \ \ \#\textcolor{keywordflow}{else}}
\DoxyCodeLine{01861\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}rev\ \%[out],\ \%[in]"{}}\ :\ [out]\textcolor{stringliteral}{"{}=r"{}}(r)\ :\ [in]\textcolor{stringliteral}{"{}r"{}}(n)}
\DoxyCodeLine{01862\ \ \ \ \ \ \ \ \ \ \ \ \ \#endif}
\DoxyCodeLine{01863\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{01864\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ r;}
\DoxyCodeLine{01865\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#else}}
\DoxyCodeLine{01866\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_\_builtin\_bswap32(n);}
\DoxyCodeLine{01867\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{01868\ \textcolor{preprocessor}{\ \ \ \ \#elif\ defined(\_\_WATCOMC\_\_)\ \&\&\ defined(\_\_386\_\_)}}
\DoxyCodeLine{01869\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_watcom\_bswap32(n);}
\DoxyCodeLine{01870\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01871\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#error\ "{}This\ compiler\ does\ not\ support\ the\ byte\ swap\ intrinsic."{}}}
\DoxyCodeLine{01872\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01873\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01874\ \ \ \ \ \textcolor{keywordflow}{return}\ ((n\ \&\ 0xFF000000)\ >>\ 24)\ |}
\DoxyCodeLine{01875\ \ \ \ \ \ \ \ \ \ \ \ ((n\ \&\ 0x00FF0000)\ >>\ \ 8)\ |}
\DoxyCodeLine{01876\ \ \ \ \ \ \ \ \ \ \ \ ((n\ \&\ 0x0000FF00)\ <<\ \ 8)\ |}
\DoxyCodeLine{01877\ \ \ \ \ \ \ \ \ \ \ \ ((n\ \&\ 0x000000FF)\ <<\ 24);}
\DoxyCodeLine{01878\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01879\ \}}
\DoxyCodeLine{01880\ }
\DoxyCodeLine{01881\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint64\ drflac\_\_swap\_endian\_uint64(drflac\_uint64\ n)}
\DoxyCodeLine{01882\ \{}
\DoxyCodeLine{01883\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_HAS\_BYTESWAP64\_INTRINSIC}}
\DoxyCodeLine{01884\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\_MSC\_VER)\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{01885\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_byteswap\_uint64(n);}
\DoxyCodeLine{01886\ \textcolor{preprocessor}{\ \ \ \ \#elif\ defined(\_\_GNUC\_\_)\ ||\ defined(\_\_clang\_\_)}}
\DoxyCodeLine{01887\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_\_builtin\_bswap64(n);}
\DoxyCodeLine{01888\ \textcolor{preprocessor}{\ \ \ \ \#elif\ defined(\_\_WATCOMC\_\_)\ \&\&\ defined(\_\_386\_\_)}}
\DoxyCodeLine{01889\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_watcom\_bswap64(n);}
\DoxyCodeLine{01890\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01891\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#error\ "{}This\ compiler\ does\ not\ support\ the\ byte\ swap\ intrinsic."{}}}
\DoxyCodeLine{01892\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01893\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01894\ \ \ \ \ \textcolor{comment}{/*\ Weird\ "{}<<\ 32"{}\ bitshift\ is\ required\ for\ C89\ because\ it\ doesn't\ support\ 64-\/bit\ constants.\ Should\ be\ optimized\ out\ by\ a\ good\ compiler.\ */}}
\DoxyCodeLine{01895\ \ \ \ \ \textcolor{keywordflow}{return}\ ((n\ \&\ ((drflac\_uint64)0xFF000000\ <<\ 32))\ >>\ 56)\ |}
\DoxyCodeLine{01896\ \ \ \ \ \ \ \ \ \ \ \ ((n\ \&\ ((drflac\_uint64)0x00FF0000\ <<\ 32))\ >>\ 40)\ |}
\DoxyCodeLine{01897\ \ \ \ \ \ \ \ \ \ \ \ ((n\ \&\ ((drflac\_uint64)0x0000FF00\ <<\ 32))\ >>\ 24)\ |}
\DoxyCodeLine{01898\ \ \ \ \ \ \ \ \ \ \ \ ((n\ \&\ ((drflac\_uint64)0x000000FF\ <<\ 32))\ >>\ \ 8)\ |}
\DoxyCodeLine{01899\ \ \ \ \ \ \ \ \ \ \ \ ((n\ \&\ ((drflac\_uint64)0xFF000000\ \ \ \ \ \ ))\ <<\ \ 8)\ |}
\DoxyCodeLine{01900\ \ \ \ \ \ \ \ \ \ \ \ ((n\ \&\ ((drflac\_uint64)0x00FF0000\ \ \ \ \ \ ))\ <<\ 24)\ |}
\DoxyCodeLine{01901\ \ \ \ \ \ \ \ \ \ \ \ ((n\ \&\ ((drflac\_uint64)0x0000FF00\ \ \ \ \ \ ))\ <<\ 40)\ |}
\DoxyCodeLine{01902\ \ \ \ \ \ \ \ \ \ \ \ ((n\ \&\ ((drflac\_uint64)0x000000FF\ \ \ \ \ \ ))\ <<\ 56);}
\DoxyCodeLine{01903\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01904\ \}}
\DoxyCodeLine{01905\ }
\DoxyCodeLine{01906\ }
\DoxyCodeLine{01907\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint16\ drflac\_\_be2host\_16(drflac\_uint16\ n)}
\DoxyCodeLine{01908\ \{}
\DoxyCodeLine{01909\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_is\_little\_endian())\ \{}
\DoxyCodeLine{01910\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_swap\_endian\_uint16(n);}
\DoxyCodeLine{01911\ \ \ \ \ \}}
\DoxyCodeLine{01912\ }
\DoxyCodeLine{01913\ \ \ \ \ \textcolor{keywordflow}{return}\ n;}
\DoxyCodeLine{01914\ \}}
\DoxyCodeLine{01915\ }
\DoxyCodeLine{01916\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_\_be2host\_32(drflac\_uint32\ n)}
\DoxyCodeLine{01917\ \{}
\DoxyCodeLine{01918\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_is\_little\_endian())\ \{}
\DoxyCodeLine{01919\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_swap\_endian\_uint32(n);}
\DoxyCodeLine{01920\ \ \ \ \ \}}
\DoxyCodeLine{01921\ }
\DoxyCodeLine{01922\ \ \ \ \ \textcolor{keywordflow}{return}\ n;}
\DoxyCodeLine{01923\ \}}
\DoxyCodeLine{01924\ }
\DoxyCodeLine{01925\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_\_be2host\_32\_ptr\_unaligned(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ pData)}
\DoxyCodeLine{01926\ \{}
\DoxyCodeLine{01927\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint8*\ pNum\ =\ (drflac\_uint8*)pData;}
\DoxyCodeLine{01928\ \ \ \ \ \textcolor{keywordflow}{return}\ *(pNum)\ <<\ 24\ |\ *(pNum+1)\ <<\ 16\ |\ *(pNum+2)\ <<\ 8\ |\ *(pNum+3);}
\DoxyCodeLine{01929\ \}}
\DoxyCodeLine{01930\ }
\DoxyCodeLine{01931\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint64\ drflac\_\_be2host\_64(drflac\_uint64\ n)}
\DoxyCodeLine{01932\ \{}
\DoxyCodeLine{01933\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_is\_little\_endian())\ \{}
\DoxyCodeLine{01934\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_swap\_endian\_uint64(n);}
\DoxyCodeLine{01935\ \ \ \ \ \}}
\DoxyCodeLine{01936\ }
\DoxyCodeLine{01937\ \ \ \ \ \textcolor{keywordflow}{return}\ n;}
\DoxyCodeLine{01938\ \}}
\DoxyCodeLine{01939\ }
\DoxyCodeLine{01940\ }
\DoxyCodeLine{01941\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_\_le2host\_32(drflac\_uint32\ n)}
\DoxyCodeLine{01942\ \{}
\DoxyCodeLine{01943\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_is\_little\_endian())\ \{}
\DoxyCodeLine{01944\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_swap\_endian\_uint32(n);}
\DoxyCodeLine{01945\ \ \ \ \ \}}
\DoxyCodeLine{01946\ }
\DoxyCodeLine{01947\ \ \ \ \ \textcolor{keywordflow}{return}\ n;}
\DoxyCodeLine{01948\ \}}
\DoxyCodeLine{01949\ }
\DoxyCodeLine{01950\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_\_le2host\_32\_ptr\_unaligned(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ pData)}
\DoxyCodeLine{01951\ \{}
\DoxyCodeLine{01952\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint8*\ pNum\ =\ (drflac\_uint8*)pData;}
\DoxyCodeLine{01953\ \ \ \ \ \textcolor{keywordflow}{return}\ *pNum\ |\ *(pNum+1)\ <<\ 8\ |\ \ *(pNum+2)\ <<\ 16\ |\ *(pNum+3)\ <<\ 24;}
\DoxyCodeLine{01954\ \}}
\DoxyCodeLine{01955\ }
\DoxyCodeLine{01956\ }
\DoxyCodeLine{01957\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_\_unsynchsafe\_32(drflac\_uint32\ n)}
\DoxyCodeLine{01958\ \{}
\DoxyCodeLine{01959\ \ \ \ \ drflac\_uint32\ result\ =\ 0;}
\DoxyCodeLine{01960\ \ \ \ \ result\ |=\ (n\ \&\ 0x7F000000)\ >>\ 3;}
\DoxyCodeLine{01961\ \ \ \ \ result\ |=\ (n\ \&\ 0x007F0000)\ >>\ 2;}
\DoxyCodeLine{01962\ \ \ \ \ result\ |=\ (n\ \&\ 0x00007F00)\ >>\ 1;}
\DoxyCodeLine{01963\ \ \ \ \ result\ |=\ (n\ \&\ 0x0000007F)\ >>\ 0;}
\DoxyCodeLine{01964\ }
\DoxyCodeLine{01965\ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{01966\ \}}
\DoxyCodeLine{01967\ }
\DoxyCodeLine{01968\ }
\DoxyCodeLine{01969\ }
\DoxyCodeLine{01970\ \textcolor{comment}{/*\ The\ CRC\ code\ below\ is\ based\ on\ this\ document:\ http://zlib.net/crc\_v3.txt\ */}}
\DoxyCodeLine{01971\ \textcolor{keyword}{static}\ drflac\_uint8\ drflac\_\_crc8\_table[]\ =\ \{}
\DoxyCodeLine{01972\ \ \ \ \ 0x00,\ 0x07,\ 0x0E,\ 0x09,\ 0x1C,\ 0x1B,\ 0x12,\ 0x15,\ 0x38,\ 0x3F,\ 0x36,\ 0x31,\ 0x24,\ 0x23,\ 0x2A,\ 0x2D,}
\DoxyCodeLine{01973\ \ \ \ \ 0x70,\ 0x77,\ 0x7E,\ 0x79,\ 0x6C,\ 0x6B,\ 0x62,\ 0x65,\ 0x48,\ 0x4F,\ 0x46,\ 0x41,\ 0x54,\ 0x53,\ 0x5A,\ 0x5D,}
\DoxyCodeLine{01974\ \ \ \ \ 0xE0,\ 0xE7,\ 0xEE,\ 0xE9,\ 0xFC,\ 0xFB,\ 0xF2,\ 0xF5,\ 0xD8,\ 0xDF,\ 0xD6,\ 0xD1,\ 0xC4,\ 0xC3,\ 0xCA,\ 0xCD,}
\DoxyCodeLine{01975\ \ \ \ \ 0x90,\ 0x97,\ 0x9E,\ 0x99,\ 0x8C,\ 0x8B,\ 0x82,\ 0x85,\ 0xA8,\ 0xAF,\ 0xA6,\ 0xA1,\ 0xB4,\ 0xB3,\ 0xBA,\ 0xBD,}
\DoxyCodeLine{01976\ \ \ \ \ 0xC7,\ 0xC0,\ 0xC9,\ 0xCE,\ 0xDB,\ 0xDC,\ 0xD5,\ 0xD2,\ 0xFF,\ 0xF8,\ 0xF1,\ 0xF6,\ 0xE3,\ 0xE4,\ 0xED,\ 0xEA,}
\DoxyCodeLine{01977\ \ \ \ \ 0xB7,\ 0xB0,\ 0xB9,\ 0xBE,\ 0xAB,\ 0xAC,\ 0xA5,\ 0xA2,\ 0x8F,\ 0x88,\ 0x81,\ 0x86,\ 0x93,\ 0x94,\ 0x9D,\ 0x9A,}
\DoxyCodeLine{01978\ \ \ \ \ 0x27,\ 0x20,\ 0x29,\ 0x2E,\ 0x3B,\ 0x3C,\ 0x35,\ 0x32,\ 0x1F,\ 0x18,\ 0x11,\ 0x16,\ 0x03,\ 0x04,\ 0x0D,\ 0x0A,}
\DoxyCodeLine{01979\ \ \ \ \ 0x57,\ 0x50,\ 0x59,\ 0x5E,\ 0x4B,\ 0x4C,\ 0x45,\ 0x42,\ 0x6F,\ 0x68,\ 0x61,\ 0x66,\ 0x73,\ 0x74,\ 0x7D,\ 0x7A,}
\DoxyCodeLine{01980\ \ \ \ \ 0x89,\ 0x8E,\ 0x87,\ 0x80,\ 0x95,\ 0x92,\ 0x9B,\ 0x9C,\ 0xB1,\ 0xB6,\ 0xBF,\ 0xB8,\ 0xAD,\ 0xAA,\ 0xA3,\ 0xA4,}
\DoxyCodeLine{01981\ \ \ \ \ 0xF9,\ 0xFE,\ 0xF7,\ 0xF0,\ 0xE5,\ 0xE2,\ 0xEB,\ 0xEC,\ 0xC1,\ 0xC6,\ 0xCF,\ 0xC8,\ 0xDD,\ 0xDA,\ 0xD3,\ 0xD4,}
\DoxyCodeLine{01982\ \ \ \ \ 0x69,\ 0x6E,\ 0x67,\ 0x60,\ 0x75,\ 0x72,\ 0x7B,\ 0x7C,\ 0x51,\ 0x56,\ 0x5F,\ 0x58,\ 0x4D,\ 0x4A,\ 0x43,\ 0x44,}
\DoxyCodeLine{01983\ \ \ \ \ 0x19,\ 0x1E,\ 0x17,\ 0x10,\ 0x05,\ 0x02,\ 0x0B,\ 0x0C,\ 0x21,\ 0x26,\ 0x2F,\ 0x28,\ 0x3D,\ 0x3A,\ 0x33,\ 0x34,}
\DoxyCodeLine{01984\ \ \ \ \ 0x4E,\ 0x49,\ 0x40,\ 0x47,\ 0x52,\ 0x55,\ 0x5C,\ 0x5B,\ 0x76,\ 0x71,\ 0x78,\ 0x7F,\ 0x6A,\ 0x6D,\ 0x64,\ 0x63,}
\DoxyCodeLine{01985\ \ \ \ \ 0x3E,\ 0x39,\ 0x30,\ 0x37,\ 0x22,\ 0x25,\ 0x2C,\ 0x2B,\ 0x06,\ 0x01,\ 0x08,\ 0x0F,\ 0x1A,\ 0x1D,\ 0x14,\ 0x13,}
\DoxyCodeLine{01986\ \ \ \ \ 0xAE,\ 0xA9,\ 0xA0,\ 0xA7,\ 0xB2,\ 0xB5,\ 0xBC,\ 0xBB,\ 0x96,\ 0x91,\ 0x98,\ 0x9F,\ 0x8A,\ 0x8D,\ 0x84,\ 0x83,}
\DoxyCodeLine{01987\ \ \ \ \ 0xDE,\ 0xD9,\ 0xD0,\ 0xD7,\ 0xC2,\ 0xC5,\ 0xCC,\ 0xCB,\ 0xE6,\ 0xE1,\ 0xE8,\ 0xEF,\ 0xFA,\ 0xFD,\ 0xF4,\ 0xF3}
\DoxyCodeLine{01988\ \};}
\DoxyCodeLine{01989\ }
\DoxyCodeLine{01990\ \textcolor{keyword}{static}\ drflac\_uint16\ drflac\_\_crc16\_table[]\ =\ \{}
\DoxyCodeLine{01991\ \ \ \ \ 0x0000,\ 0x8005,\ 0x800F,\ 0x000A,\ 0x801B,\ 0x001E,\ 0x0014,\ 0x8011,}
\DoxyCodeLine{01992\ \ \ \ \ 0x8033,\ 0x0036,\ 0x003C,\ 0x8039,\ 0x0028,\ 0x802D,\ 0x8027,\ 0x0022,}
\DoxyCodeLine{01993\ \ \ \ \ 0x8063,\ 0x0066,\ 0x006C,\ 0x8069,\ 0x0078,\ 0x807D,\ 0x8077,\ 0x0072,}
\DoxyCodeLine{01994\ \ \ \ \ 0x0050,\ 0x8055,\ 0x805F,\ 0x005A,\ 0x804B,\ 0x004E,\ 0x0044,\ 0x8041,}
\DoxyCodeLine{01995\ \ \ \ \ 0x80C3,\ 0x00C6,\ 0x00CC,\ 0x80C9,\ 0x00D8,\ 0x80DD,\ 0x80D7,\ 0x00D2,}
\DoxyCodeLine{01996\ \ \ \ \ 0x00F0,\ 0x80F5,\ 0x80FF,\ 0x00FA,\ 0x80EB,\ 0x00EE,\ 0x00E4,\ 0x80E1,}
\DoxyCodeLine{01997\ \ \ \ \ 0x00A0,\ 0x80A5,\ 0x80AF,\ 0x00AA,\ 0x80BB,\ 0x00BE,\ 0x00B4,\ 0x80B1,}
\DoxyCodeLine{01998\ \ \ \ \ 0x8093,\ 0x0096,\ 0x009C,\ 0x8099,\ 0x0088,\ 0x808D,\ 0x8087,\ 0x0082,}
\DoxyCodeLine{01999\ \ \ \ \ 0x8183,\ 0x0186,\ 0x018C,\ 0x8189,\ 0x0198,\ 0x819D,\ 0x8197,\ 0x0192,}
\DoxyCodeLine{02000\ \ \ \ \ 0x01B0,\ 0x81B5,\ 0x81BF,\ 0x01BA,\ 0x81AB,\ 0x01AE,\ 0x01A4,\ 0x81A1,}
\DoxyCodeLine{02001\ \ \ \ \ 0x01E0,\ 0x81E5,\ 0x81EF,\ 0x01EA,\ 0x81FB,\ 0x01FE,\ 0x01F4,\ 0x81F1,}
\DoxyCodeLine{02002\ \ \ \ \ 0x81D3,\ 0x01D6,\ 0x01DC,\ 0x81D9,\ 0x01C8,\ 0x81CD,\ 0x81C7,\ 0x01C2,}
\DoxyCodeLine{02003\ \ \ \ \ 0x0140,\ 0x8145,\ 0x814F,\ 0x014A,\ 0x815B,\ 0x015E,\ 0x0154,\ 0x8151,}
\DoxyCodeLine{02004\ \ \ \ \ 0x8173,\ 0x0176,\ 0x017C,\ 0x8179,\ 0x0168,\ 0x816D,\ 0x8167,\ 0x0162,}
\DoxyCodeLine{02005\ \ \ \ \ 0x8123,\ 0x0126,\ 0x012C,\ 0x8129,\ 0x0138,\ 0x813D,\ 0x8137,\ 0x0132,}
\DoxyCodeLine{02006\ \ \ \ \ 0x0110,\ 0x8115,\ 0x811F,\ 0x011A,\ 0x810B,\ 0x010E,\ 0x0104,\ 0x8101,}
\DoxyCodeLine{02007\ \ \ \ \ 0x8303,\ 0x0306,\ 0x030C,\ 0x8309,\ 0x0318,\ 0x831D,\ 0x8317,\ 0x0312,}
\DoxyCodeLine{02008\ \ \ \ \ 0x0330,\ 0x8335,\ 0x833F,\ 0x033A,\ 0x832B,\ 0x032E,\ 0x0324,\ 0x8321,}
\DoxyCodeLine{02009\ \ \ \ \ 0x0360,\ 0x8365,\ 0x836F,\ 0x036A,\ 0x837B,\ 0x037E,\ 0x0374,\ 0x8371,}
\DoxyCodeLine{02010\ \ \ \ \ 0x8353,\ 0x0356,\ 0x035C,\ 0x8359,\ 0x0348,\ 0x834D,\ 0x8347,\ 0x0342,}
\DoxyCodeLine{02011\ \ \ \ \ 0x03C0,\ 0x83C5,\ 0x83CF,\ 0x03CA,\ 0x83DB,\ 0x03DE,\ 0x03D4,\ 0x83D1,}
\DoxyCodeLine{02012\ \ \ \ \ 0x83F3,\ 0x03F6,\ 0x03FC,\ 0x83F9,\ 0x03E8,\ 0x83ED,\ 0x83E7,\ 0x03E2,}
\DoxyCodeLine{02013\ \ \ \ \ 0x83A3,\ 0x03A6,\ 0x03AC,\ 0x83A9,\ 0x03B8,\ 0x83BD,\ 0x83B7,\ 0x03B2,}
\DoxyCodeLine{02014\ \ \ \ \ 0x0390,\ 0x8395,\ 0x839F,\ 0x039A,\ 0x838B,\ 0x038E,\ 0x0384,\ 0x8381,}
\DoxyCodeLine{02015\ \ \ \ \ 0x0280,\ 0x8285,\ 0x828F,\ 0x028A,\ 0x829B,\ 0x029E,\ 0x0294,\ 0x8291,}
\DoxyCodeLine{02016\ \ \ \ \ 0x82B3,\ 0x02B6,\ 0x02BC,\ 0x82B9,\ 0x02A8,\ 0x82AD,\ 0x82A7,\ 0x02A2,}
\DoxyCodeLine{02017\ \ \ \ \ 0x82E3,\ 0x02E6,\ 0x02EC,\ 0x82E9,\ 0x02F8,\ 0x82FD,\ 0x82F7,\ 0x02F2,}
\DoxyCodeLine{02018\ \ \ \ \ 0x02D0,\ 0x82D5,\ 0x82DF,\ 0x02DA,\ 0x82CB,\ 0x02CE,\ 0x02C4,\ 0x82C1,}
\DoxyCodeLine{02019\ \ \ \ \ 0x8243,\ 0x0246,\ 0x024C,\ 0x8249,\ 0x0258,\ 0x825D,\ 0x8257,\ 0x0252,}
\DoxyCodeLine{02020\ \ \ \ \ 0x0270,\ 0x8275,\ 0x827F,\ 0x027A,\ 0x826B,\ 0x026E,\ 0x0264,\ 0x8261,}
\DoxyCodeLine{02021\ \ \ \ \ 0x0220,\ 0x8225,\ 0x822F,\ 0x022A,\ 0x823B,\ 0x023E,\ 0x0234,\ 0x8231,}
\DoxyCodeLine{02022\ \ \ \ \ 0x8213,\ 0x0216,\ 0x021C,\ 0x8219,\ 0x0208,\ 0x820D,\ 0x8207,\ 0x0202}
\DoxyCodeLine{02023\ \};}
\DoxyCodeLine{02024\ }
\DoxyCodeLine{02025\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint8\ drflac\_crc8\_byte(drflac\_uint8\ crc,\ drflac\_uint8\ data)}
\DoxyCodeLine{02026\ \{}
\DoxyCodeLine{02027\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_crc8\_table[crc\ \string^\ data];}
\DoxyCodeLine{02028\ \}}
\DoxyCodeLine{02029\ }
\DoxyCodeLine{02030\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint8\ drflac\_crc8(drflac\_uint8\ crc,\ drflac\_uint32\ data,\ drflac\_uint32\ count)}
\DoxyCodeLine{02031\ \{}
\DoxyCodeLine{02032\ \textcolor{preprocessor}{\#ifdef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{02033\ \ \ \ \ (void)crc;}
\DoxyCodeLine{02034\ \ \ \ \ (void)data;}
\DoxyCodeLine{02035\ \ \ \ \ (void)count;}
\DoxyCodeLine{02036\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{02037\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02038\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{02039\ \ \ \ \ \textcolor{comment}{/*\ REFERENCE\ (use\ of\ this\ implementation\ requires\ an\ explicit\ flush\ by\ doing\ "{}drflac\_crc8(crc,\ 0,\ 8);"{})\ */}}
\DoxyCodeLine{02040\ \ \ \ \ drflac\_uint8\ p\ =\ 0x07;}
\DoxyCodeLine{02041\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ count-\/1;\ i\ >=\ 0;\ -\/-\/i)\ \{}
\DoxyCodeLine{02042\ \ \ \ \ \ \ \ \ drflac\_uint8\ bit\ =\ (data\ \&\ (1\ <<\ i))\ >>\ i;}
\DoxyCodeLine{02043\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (crc\ \&\ 0x80)\ \{}
\DoxyCodeLine{02044\ \ \ \ \ \ \ \ \ \ \ \ \ crc\ =\ ((crc\ <<\ 1)\ |\ bit)\ \string^\ p;}
\DoxyCodeLine{02045\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02046\ \ \ \ \ \ \ \ \ \ \ \ \ crc\ =\ ((crc\ <<\ 1)\ |\ bit);}
\DoxyCodeLine{02047\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02048\ \ \ \ \ \}}
\DoxyCodeLine{02049\ \ \ \ \ \textcolor{keywordflow}{return}\ crc;}
\DoxyCodeLine{02050\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02051\ \ \ \ \ drflac\_uint32\ wholeBytes;}
\DoxyCodeLine{02052\ \ \ \ \ drflac\_uint32\ leftoverBits;}
\DoxyCodeLine{02053\ \ \ \ \ drflac\_uint64\ leftoverDataMask;}
\DoxyCodeLine{02054\ }
\DoxyCodeLine{02055\ \ \ \ \ \textcolor{keyword}{static}\ drflac\_uint64\ leftoverDataMaskTable[8]\ =\ \{}
\DoxyCodeLine{02056\ \ \ \ \ \ \ \ \ 0x00,\ 0x01,\ 0x03,\ 0x07,\ 0x0F,\ 0x1F,\ 0x3F,\ 0x7F}
\DoxyCodeLine{02057\ \ \ \ \ \};}
\DoxyCodeLine{02058\ }
\DoxyCodeLine{02059\ \ \ \ \ DRFLAC\_ASSERT(count\ <=\ 32);}
\DoxyCodeLine{02060\ }
\DoxyCodeLine{02061\ \ \ \ \ wholeBytes\ =\ count\ >>\ 3;}
\DoxyCodeLine{02062\ \ \ \ \ leftoverBits\ =\ count\ -\/\ (wholeBytes*8);}
\DoxyCodeLine{02063\ \ \ \ \ leftoverDataMask\ =\ leftoverDataMaskTable[leftoverBits];}
\DoxyCodeLine{02064\ }
\DoxyCodeLine{02065\ \ \ \ \ \textcolor{keywordflow}{switch}\ (wholeBytes)\ \{}
\DoxyCodeLine{02066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:\ crc\ =\ drflac\_crc8\_byte(crc,\ (drflac\_uint8)((data\ \&\ (0xFF000000UL\ <<\ leftoverBits))\ >>\ (24\ +\ leftoverBits)));}
\DoxyCodeLine{02067\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ crc\ =\ drflac\_crc8\_byte(crc,\ (drflac\_uint8)((data\ \&\ (0x00FF0000UL\ <<\ leftoverBits))\ >>\ (16\ +\ leftoverBits)));}
\DoxyCodeLine{02068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ crc\ =\ drflac\_crc8\_byte(crc,\ (drflac\_uint8)((data\ \&\ (0x0000FF00UL\ <<\ leftoverBits))\ >>\ (\ 8\ +\ leftoverBits)));}
\DoxyCodeLine{02069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ crc\ =\ drflac\_crc8\_byte(crc,\ (drflac\_uint8)((data\ \&\ (0x000000FFUL\ <<\ leftoverBits))\ >>\ (\ 0\ +\ leftoverBits)));}
\DoxyCodeLine{02070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ \textcolor{keywordflow}{if}\ (leftoverBits\ >\ 0)\ crc\ =\ (drflac\_uint8)((crc\ <<\ leftoverBits)\ \string^\ drflac\_\_crc8\_table[(crc\ >>\ (8\ -\/\ leftoverBits))\ \string^\ (data\ \&\ leftoverDataMask)]);}
\DoxyCodeLine{02071\ \ \ \ \ \}}
\DoxyCodeLine{02072\ \ \ \ \ \textcolor{keywordflow}{return}\ crc;}
\DoxyCodeLine{02073\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02074\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02075\ \}}
\DoxyCodeLine{02076\ }
\DoxyCodeLine{02077\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint16\ drflac\_crc16\_byte(drflac\_uint16\ crc,\ drflac\_uint8\ data)}
\DoxyCodeLine{02078\ \{}
\DoxyCodeLine{02079\ \ \ \ \ \textcolor{keywordflow}{return}\ (crc\ <<\ 8)\ \string^\ drflac\_\_crc16\_table[(drflac\_uint8)(crc\ >>\ 8)\ \string^\ data];}
\DoxyCodeLine{02080\ \}}
\DoxyCodeLine{02081\ }
\DoxyCodeLine{02082\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint16\ drflac\_crc16\_cache(drflac\_uint16\ crc,\ drflac\_cache\_t\ data)}
\DoxyCodeLine{02083\ \{}
\DoxyCodeLine{02084\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_64BIT}}
\DoxyCodeLine{02085\ \ \ \ \ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ >>\ 56)\ \&\ 0xFF));}
\DoxyCodeLine{02086\ \ \ \ \ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ >>\ 48)\ \&\ 0xFF));}
\DoxyCodeLine{02087\ \ \ \ \ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ >>\ 40)\ \&\ 0xFF));}
\DoxyCodeLine{02088\ \ \ \ \ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ >>\ 32)\ \&\ 0xFF));}
\DoxyCodeLine{02089\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02090\ \ \ \ \ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ >>\ 24)\ \&\ 0xFF));}
\DoxyCodeLine{02091\ \ \ \ \ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ >>\ 16)\ \&\ 0xFF));}
\DoxyCodeLine{02092\ \ \ \ \ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ >>\ \ 8)\ \&\ 0xFF));}
\DoxyCodeLine{02093\ \ \ \ \ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ >>\ \ 0)\ \&\ 0xFF));}
\DoxyCodeLine{02094\ }
\DoxyCodeLine{02095\ \ \ \ \ \textcolor{keywordflow}{return}\ crc;}
\DoxyCodeLine{02096\ \}}
\DoxyCodeLine{02097\ }
\DoxyCodeLine{02098\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint16\ drflac\_crc16\_bytes(drflac\_uint16\ crc,\ drflac\_cache\_t\ data,\ drflac\_uint32\ byteCount)}
\DoxyCodeLine{02099\ \{}
\DoxyCodeLine{02100\ \ \ \ \ \textcolor{keywordflow}{switch}\ (byteCount)}
\DoxyCodeLine{02101\ \ \ \ \ \{}
\DoxyCodeLine{02102\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_64BIT}}
\DoxyCodeLine{02103\ \ \ \ \ \textcolor{keywordflow}{case}\ 8:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ >>\ 56)\ \&\ 0xFF));}
\DoxyCodeLine{02104\ \ \ \ \ \textcolor{keywordflow}{case}\ 7:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ >>\ 48)\ \&\ 0xFF));}
\DoxyCodeLine{02105\ \ \ \ \ \textcolor{keywordflow}{case}\ 6:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ >>\ 40)\ \&\ 0xFF));}
\DoxyCodeLine{02106\ \ \ \ \ \textcolor{keywordflow}{case}\ 5:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ >>\ 32)\ \&\ 0xFF));}
\DoxyCodeLine{02107\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02108\ \ \ \ \ \textcolor{keywordflow}{case}\ 4:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ >>\ 24)\ \&\ 0xFF));}
\DoxyCodeLine{02109\ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ >>\ 16)\ \&\ 0xFF));}
\DoxyCodeLine{02110\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ >>\ \ 8)\ \&\ 0xFF));}
\DoxyCodeLine{02111\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ >>\ \ 0)\ \&\ 0xFF));}
\DoxyCodeLine{02112\ \ \ \ \ \}}
\DoxyCodeLine{02113\ }
\DoxyCodeLine{02114\ \ \ \ \ \textcolor{keywordflow}{return}\ crc;}
\DoxyCodeLine{02115\ \}}
\DoxyCodeLine{02116\ }
\DoxyCodeLine{02117\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{02118\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint16\ drflac\_crc16\_\_32bit(drflac\_uint16\ crc,\ drflac\_uint32\ data,\ drflac\_uint32\ count)}
\DoxyCodeLine{02119\ \{}
\DoxyCodeLine{02120\ \textcolor{preprocessor}{\#ifdef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{02121\ \ \ \ \ (void)crc;}
\DoxyCodeLine{02122\ \ \ \ \ (void)data;}
\DoxyCodeLine{02123\ \ \ \ \ (void)count;}
\DoxyCodeLine{02124\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{02125\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02126\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{02127\ \ \ \ \ \textcolor{comment}{/*\ REFERENCE\ (use\ of\ this\ implementation\ requires\ an\ explicit\ flush\ by\ doing\ "{}drflac\_crc16(crc,\ 0,\ 16);"{})\ */}}
\DoxyCodeLine{02128\ \ \ \ \ drflac\_uint16\ p\ =\ 0x8005;}
\DoxyCodeLine{02129\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ count-\/1;\ i\ >=\ 0;\ -\/-\/i)\ \{}
\DoxyCodeLine{02130\ \ \ \ \ \ \ \ \ drflac\_uint16\ bit\ =\ (data\ \&\ (1ULL\ <<\ i))\ >>\ i;}
\DoxyCodeLine{02131\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (r\ \&\ 0x8000)\ \{}
\DoxyCodeLine{02132\ \ \ \ \ \ \ \ \ \ \ \ \ r\ =\ ((r\ <<\ 1)\ |\ bit)\ \string^\ p;}
\DoxyCodeLine{02133\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02134\ \ \ \ \ \ \ \ \ \ \ \ \ r\ =\ ((r\ <<\ 1)\ |\ bit);}
\DoxyCodeLine{02135\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02136\ \ \ \ \ \}}
\DoxyCodeLine{02137\ }
\DoxyCodeLine{02138\ \ \ \ \ \textcolor{keywordflow}{return}\ crc;}
\DoxyCodeLine{02139\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02140\ \ \ \ \ drflac\_uint32\ wholeBytes;}
\DoxyCodeLine{02141\ \ \ \ \ drflac\_uint32\ leftoverBits;}
\DoxyCodeLine{02142\ \ \ \ \ drflac\_uint64\ leftoverDataMask;}
\DoxyCodeLine{02143\ }
\DoxyCodeLine{02144\ \ \ \ \ \textcolor{keyword}{static}\ drflac\_uint64\ leftoverDataMaskTable[8]\ =\ \{}
\DoxyCodeLine{02145\ \ \ \ \ \ \ \ \ 0x00,\ 0x01,\ 0x03,\ 0x07,\ 0x0F,\ 0x1F,\ 0x3F,\ 0x7F}
\DoxyCodeLine{02146\ \ \ \ \ \};}
\DoxyCodeLine{02147\ }
\DoxyCodeLine{02148\ \ \ \ \ DRFLAC\_ASSERT(count\ <=\ 64);}
\DoxyCodeLine{02149\ }
\DoxyCodeLine{02150\ \ \ \ \ wholeBytes\ =\ count\ >>\ 3;}
\DoxyCodeLine{02151\ \ \ \ \ leftoverBits\ =\ count\ \&\ 7;}
\DoxyCodeLine{02152\ \ \ \ \ leftoverDataMask\ =\ leftoverDataMaskTable[leftoverBits];}
\DoxyCodeLine{02153\ }
\DoxyCodeLine{02154\ \ \ \ \ \textcolor{keywordflow}{switch}\ (wholeBytes)\ \{}
\DoxyCodeLine{02155\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{02156\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ \&\ (0xFF000000UL\ <<\ leftoverBits))\ >>\ (24\ +\ leftoverBits)));}
\DoxyCodeLine{02157\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ \&\ (0x00FF0000UL\ <<\ leftoverBits))\ >>\ (16\ +\ leftoverBits)));}
\DoxyCodeLine{02158\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ \&\ (0x0000FF00UL\ <<\ leftoverBits))\ >>\ (\ 8\ +\ leftoverBits)));}
\DoxyCodeLine{02159\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ \&\ (0x000000FFUL\ <<\ leftoverBits))\ >>\ (\ 0\ +\ leftoverBits)));}
\DoxyCodeLine{02160\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ \textcolor{keywordflow}{if}\ (leftoverBits\ >\ 0)\ crc\ =\ (crc\ <<\ leftoverBits)\ \string^\ drflac\_\_crc16\_table[(crc\ >>\ (16\ -\/\ leftoverBits))\ \string^\ (data\ \&\ leftoverDataMask)];}
\DoxyCodeLine{02161\ \ \ \ \ \}}
\DoxyCodeLine{02162\ \ \ \ \ \textcolor{keywordflow}{return}\ crc;}
\DoxyCodeLine{02163\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02164\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02165\ \}}
\DoxyCodeLine{02166\ }
\DoxyCodeLine{02167\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint16\ drflac\_crc16\_\_64bit(drflac\_uint16\ crc,\ drflac\_uint64\ data,\ drflac\_uint32\ count)}
\DoxyCodeLine{02168\ \{}
\DoxyCodeLine{02169\ \textcolor{preprocessor}{\#ifdef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{02170\ \ \ \ \ (void)crc;}
\DoxyCodeLine{02171\ \ \ \ \ (void)data;}
\DoxyCodeLine{02172\ \ \ \ \ (void)count;}
\DoxyCodeLine{02173\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{02174\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02175\ \ \ \ \ drflac\_uint32\ wholeBytes;}
\DoxyCodeLine{02176\ \ \ \ \ drflac\_uint32\ leftoverBits;}
\DoxyCodeLine{02177\ \ \ \ \ drflac\_uint64\ leftoverDataMask;}
\DoxyCodeLine{02178\ }
\DoxyCodeLine{02179\ \ \ \ \ \textcolor{keyword}{static}\ drflac\_uint64\ leftoverDataMaskTable[8]\ =\ \{}
\DoxyCodeLine{02180\ \ \ \ \ \ \ \ \ 0x00,\ 0x01,\ 0x03,\ 0x07,\ 0x0F,\ 0x1F,\ 0x3F,\ 0x7F}
\DoxyCodeLine{02181\ \ \ \ \ \};}
\DoxyCodeLine{02182\ }
\DoxyCodeLine{02183\ \ \ \ \ DRFLAC\_ASSERT(count\ <=\ 64);}
\DoxyCodeLine{02184\ }
\DoxyCodeLine{02185\ \ \ \ \ wholeBytes\ =\ count\ >>\ 3;}
\DoxyCodeLine{02186\ \ \ \ \ leftoverBits\ =\ count\ \&\ 7;}
\DoxyCodeLine{02187\ \ \ \ \ leftoverDataMask\ =\ leftoverDataMaskTable[leftoverBits];}
\DoxyCodeLine{02188\ }
\DoxyCodeLine{02189\ \ \ \ \ \textcolor{keywordflow}{switch}\ (wholeBytes)\ \{}
\DoxyCodeLine{02190\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{02191\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 8:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ \&\ (((drflac\_uint64)0xFF000000\ <<\ 32)\ <<\ leftoverBits))\ >>\ (56\ +\ leftoverBits)));\ \ \ \ \textcolor{comment}{/*\ Weird\ "{}<<\ 32"{}\ bitshift\ is\ required\ for\ C89\ because\ it\ doesn't\ support\ 64-\/bit\ constants.\ Should\ be\ optimized\ out\ by\ a\ good\ compiler.\ */}}
\DoxyCodeLine{02192\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 7:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ \&\ (((drflac\_uint64)0x00FF0000\ <<\ 32)\ <<\ leftoverBits))\ >>\ (48\ +\ leftoverBits)));}
\DoxyCodeLine{02193\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 6:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ \&\ (((drflac\_uint64)0x0000FF00\ <<\ 32)\ <<\ leftoverBits))\ >>\ (40\ +\ leftoverBits)));}
\DoxyCodeLine{02194\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 5:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ \&\ (((drflac\_uint64)0x000000FF\ <<\ 32)\ <<\ leftoverBits))\ >>\ (32\ +\ leftoverBits)));}
\DoxyCodeLine{02195\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ \&\ (((drflac\_uint64)0xFF000000\ \ \ \ \ \ )\ <<\ leftoverBits))\ >>\ (24\ +\ leftoverBits)));}
\DoxyCodeLine{02196\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ \&\ (((drflac\_uint64)0x00FF0000\ \ \ \ \ \ )\ <<\ leftoverBits))\ >>\ (16\ +\ leftoverBits)));}
\DoxyCodeLine{02197\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ \&\ (((drflac\_uint64)0x0000FF00\ \ \ \ \ \ )\ <<\ leftoverBits))\ >>\ (\ 8\ +\ leftoverBits)));}
\DoxyCodeLine{02198\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ crc\ =\ drflac\_crc16\_byte(crc,\ (drflac\_uint8)((data\ \&\ (((drflac\_uint64)0x000000FF\ \ \ \ \ \ )\ <<\ leftoverBits))\ >>\ (\ 0\ +\ leftoverBits)));}
\DoxyCodeLine{02199\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ \textcolor{keywordflow}{if}\ (leftoverBits\ >\ 0)\ crc\ =\ (crc\ <<\ leftoverBits)\ \string^\ drflac\_\_crc16\_table[(crc\ >>\ (16\ -\/\ leftoverBits))\ \string^\ (data\ \&\ leftoverDataMask)];}
\DoxyCodeLine{02200\ \ \ \ \ \}}
\DoxyCodeLine{02201\ \ \ \ \ \textcolor{keywordflow}{return}\ crc;}
\DoxyCodeLine{02202\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02203\ \}}
\DoxyCodeLine{02204\ }
\DoxyCodeLine{02205\ }
\DoxyCodeLine{02206\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint16\ drflac\_crc16(drflac\_uint16\ crc,\ drflac\_cache\_t\ data,\ drflac\_uint32\ count)}
\DoxyCodeLine{02207\ \{}
\DoxyCodeLine{02208\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_64BIT}}
\DoxyCodeLine{02209\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_crc16\_\_64bit(crc,\ data,\ count);}
\DoxyCodeLine{02210\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02211\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_crc16\_\_32bit(crc,\ data,\ count);}
\DoxyCodeLine{02212\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02213\ \}}
\DoxyCodeLine{02214\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02215\ }
\DoxyCodeLine{02216\ }
\DoxyCodeLine{02217\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_64BIT}}
\DoxyCodeLine{02218\ \textcolor{preprocessor}{\#define\ drflac\_\_be2host\_\_cache\_line\ drflac\_\_be2host\_64}}
\DoxyCodeLine{02219\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02220\ \textcolor{preprocessor}{\#define\ drflac\_\_be2host\_\_cache\_line\ drflac\_\_be2host\_32}}
\DoxyCodeLine{02221\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02222\ }
\DoxyCodeLine{02223\ \textcolor{comment}{/*}}
\DoxyCodeLine{02224\ \textcolor{comment}{BIT\ READING\ ATTEMPT\ \#2}}
\DoxyCodeLine{02225\ \textcolor{comment}{}}
\DoxyCodeLine{02226\ \textcolor{comment}{This\ uses\ a\ 32-\/\ or\ 64-\/bit\ bit-\/shifted\ cache\ -\/\ as\ bits\ are\ read,\ the\ cache\ is\ shifted\ such\ that\ the\ first\ valid\ bit\ is\ sitting}}
\DoxyCodeLine{02227\ \textcolor{comment}{on\ the\ most\ significant\ bit.\ It\ uses\ the\ notion\ of\ an\ L1\ and\ L2\ cache\ (borrowed\ from\ CPU\ architecture),\ where\ the\ L1\ cache}}
\DoxyCodeLine{02228\ \textcolor{comment}{is\ a\ 32-\/\ or\ 64-\/bit\ unsigned\ integer\ (depending\ on\ whether\ or\ not\ a\ 32-\/\ or\ 64-\/bit\ build\ is\ being\ compiled)\ and\ the\ L2\ is\ an}}
\DoxyCodeLine{02229\ \textcolor{comment}{array\ of\ "{}cache\ lines"{},\ with\ each\ cache\ line\ being\ the\ same\ size\ as\ the\ L1.\ The\ L2\ is\ a\ buffer\ of\ about\ 4KB\ and\ is\ where\ data}}
\DoxyCodeLine{02230\ \textcolor{comment}{from\ onRead()\ is\ read\ into.}}
\DoxyCodeLine{02231\ \textcolor{comment}{*/}}
\DoxyCodeLine{02232\ \textcolor{preprocessor}{\#define\ DRFLAC\_CACHE\_L1\_SIZE\_BYTES(bs)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (sizeof((bs)-\/>cache))}}
\DoxyCodeLine{02233\ \textcolor{preprocessor}{\#define\ DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (sizeof((bs)-\/>cache)*8)}}
\DoxyCodeLine{02234\ \textcolor{preprocessor}{\#define\ DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs)\ -\/\ (bs)-\/>consumedBits)}}
\DoxyCodeLine{02235\ \textcolor{preprocessor}{\#define\ DRFLAC\_CACHE\_L1\_SELECTION\_MASK(\_bitCount)\ \ \ \ \ \ \ \ \ \ \ (\string~((\string~(drflac\_cache\_t)0)\ >>\ (\_bitCount)))}}
\DoxyCodeLine{02236\ \textcolor{preprocessor}{\#define\ DRFLAC\_CACHE\_L1\_SELECTION\_SHIFT(bs,\ \_bitCount)\ \ \ \ \ \ (DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs)\ -\/\ (\_bitCount))}}
\DoxyCodeLine{02237\ \textcolor{preprocessor}{\#define\ DRFLAC\_CACHE\_L1\_SELECT(bs,\ \_bitCount)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (((bs)-\/>cache)\ \&\ DRFLAC\_CACHE\_L1\_SELECTION\_MASK(\_bitCount))}}
\DoxyCodeLine{02238\ \textcolor{preprocessor}{\#define\ DRFLAC\_CACHE\_L1\_SELECT\_AND\_SHIFT(bs,\ \_bitCount)\ \ \ \ \ (DRFLAC\_CACHE\_L1\_SELECT((bs),\ (\_bitCount))\ >>\ \ DRFLAC\_CACHE\_L1\_SELECTION\_SHIFT((bs),\ (\_bitCount)))}}
\DoxyCodeLine{02239\ \textcolor{preprocessor}{\#define\ DRFLAC\_CACHE\_L1\_SELECT\_AND\_SHIFT\_SAFE(bs,\ \_bitCount)(DRFLAC\_CACHE\_L1\_SELECT((bs),\ (\_bitCount))\ >>\ (DRFLAC\_CACHE\_L1\_SELECTION\_SHIFT((bs),\ (\_bitCount))\ \&\ (DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs)-\/1)))}}
\DoxyCodeLine{02240\ \textcolor{preprocessor}{\#define\ DRFLAC\_CACHE\_L2\_SIZE\_BYTES(bs)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (sizeof((bs)-\/>cacheL2))}}
\DoxyCodeLine{02241\ \textcolor{preprocessor}{\#define\ DRFLAC\_CACHE\_L2\_LINE\_COUNT(bs)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (DRFLAC\_CACHE\_L2\_SIZE\_BYTES(bs)\ /\ sizeof((bs)-\/>cacheL2[0]))}}
\DoxyCodeLine{02242\ \textcolor{preprocessor}{\#define\ DRFLAC\_CACHE\_L2\_LINES\_REMAINING(bs)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (DRFLAC\_CACHE\_L2\_LINE\_COUNT(bs)\ -\/\ (bs)-\/>nextL2Line)}}
\DoxyCodeLine{02243\ }
\DoxyCodeLine{02244\ }
\DoxyCodeLine{02245\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{02246\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_\_reset\_crc16(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs)}
\DoxyCodeLine{02247\ \{}
\DoxyCodeLine{02248\ \ \ \ \ bs-\/>crc16\ =\ 0;}
\DoxyCodeLine{02249\ \ \ \ \ bs-\/>crc16CacheIgnoredBytes\ =\ bs-\/>consumedBits\ >>\ 3;}
\DoxyCodeLine{02250\ \}}
\DoxyCodeLine{02251\ }
\DoxyCodeLine{02252\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_\_update\_crc16(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs)}
\DoxyCodeLine{02253\ \{}
\DoxyCodeLine{02254\ \ \ \ \ \textcolor{keywordflow}{if}\ (bs-\/>crc16CacheIgnoredBytes\ ==\ 0)\ \{}
\DoxyCodeLine{02255\ \ \ \ \ \ \ \ \ bs-\/>crc16\ =\ drflac\_crc16\_cache(bs-\/>crc16,\ bs-\/>crc16Cache);}
\DoxyCodeLine{02256\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02257\ \ \ \ \ \ \ \ \ bs-\/>crc16\ =\ drflac\_crc16\_bytes(bs-\/>crc16,\ bs-\/>crc16Cache,\ DRFLAC\_CACHE\_L1\_SIZE\_BYTES(bs)\ -\/\ bs-\/>crc16CacheIgnoredBytes);}
\DoxyCodeLine{02258\ \ \ \ \ \ \ \ \ bs-\/>crc16CacheIgnoredBytes\ =\ 0;}
\DoxyCodeLine{02259\ \ \ \ \ \}}
\DoxyCodeLine{02260\ \}}
\DoxyCodeLine{02261\ }
\DoxyCodeLine{02262\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint16\ drflac\_\_flush\_crc16(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs)}
\DoxyCodeLine{02263\ \{}
\DoxyCodeLine{02264\ \ \ \ \ \textcolor{comment}{/*\ We\ should\ never\ be\ flushing\ in\ a\ situation\ where\ we\ are\ not\ aligned\ on\ a\ byte\ boundary.\ */}}
\DoxyCodeLine{02265\ \ \ \ \ DRFLAC\_ASSERT((DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs)\ \&\ 7)\ ==\ 0);}
\DoxyCodeLine{02266\ }
\DoxyCodeLine{02267\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{02268\ \textcolor{comment}{\ \ \ \ The\ bits\ that\ were\ read\ from\ the\ L1\ cache\ need\ to\ be\ accumulated.\ The\ number\ of\ bytes\ needing\ to\ be\ accumulated\ is\ determined}}
\DoxyCodeLine{02269\ \textcolor{comment}{\ \ \ \ by\ the\ number\ of\ bits\ that\ have\ been\ consumed.}}
\DoxyCodeLine{02270\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{02271\ \ \ \ \ \textcolor{keywordflow}{if}\ (DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs)\ ==\ 0)\ \{}
\DoxyCodeLine{02272\ \ \ \ \ \ \ \ \ drflac\_\_update\_crc16(bs);}
\DoxyCodeLine{02273\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02274\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ only\ accumulate\ the\ consumed\ bits.\ */}}
\DoxyCodeLine{02275\ \ \ \ \ \ \ \ \ bs-\/>crc16\ =\ drflac\_crc16\_bytes(bs-\/>crc16,\ bs-\/>crc16Cache\ >>\ DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs),\ (bs-\/>consumedBits\ >>\ 3)\ -\/\ bs-\/>crc16CacheIgnoredBytes);}
\DoxyCodeLine{02276\ }
\DoxyCodeLine{02277\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{02278\ \textcolor{comment}{\ \ \ \ \ \ \ \ The\ bits\ that\ we\ just\ accumulated\ should\ never\ be\ accumulated\ again.\ We\ need\ to\ keep\ track\ of\ how\ many\ bytes\ were\ accumulated}}
\DoxyCodeLine{02279\ \textcolor{comment}{\ \ \ \ \ \ \ \ so\ we\ can\ handle\ that\ later.}}
\DoxyCodeLine{02280\ \textcolor{comment}{\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{02281\ \ \ \ \ \ \ \ \ bs-\/>crc16CacheIgnoredBytes\ =\ bs-\/>consumedBits\ >>\ 3;}
\DoxyCodeLine{02282\ \ \ \ \ \}}
\DoxyCodeLine{02283\ }
\DoxyCodeLine{02284\ \ \ \ \ \textcolor{keywordflow}{return}\ bs-\/>crc16;}
\DoxyCodeLine{02285\ \}}
\DoxyCodeLine{02286\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02287\ }
\DoxyCodeLine{02288\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_bool32\ drflac\_\_reload\_l1\_cache\_from\_l2(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs)}
\DoxyCodeLine{02289\ \{}
\DoxyCodeLine{02290\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ bytesRead;}
\DoxyCodeLine{02291\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ alignedL1LineCount;}
\DoxyCodeLine{02292\ }
\DoxyCodeLine{02293\ \ \ \ \ \textcolor{comment}{/*\ Fast\ path.\ Try\ loading\ straight\ from\ L2.\ */}}
\DoxyCodeLine{02294\ \ \ \ \ \textcolor{keywordflow}{if}\ (bs-\/>nextL2Line\ <\ DRFLAC\_CACHE\_L2\_LINE\_COUNT(bs))\ \{}
\DoxyCodeLine{02295\ \ \ \ \ \ \ \ \ bs-\/>cache\ =\ bs-\/>cacheL2[bs-\/>nextL2Line++];}
\DoxyCodeLine{02296\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02297\ \ \ \ \ \}}
\DoxyCodeLine{02298\ }
\DoxyCodeLine{02299\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{02300\ \textcolor{comment}{\ \ \ \ If\ we\ get\ here\ it\ means\ we've\ run\ out\ of\ data\ in\ the\ L2\ cache.\ We'll\ need\ to\ fetch\ more\ from\ the\ client,\ if\ there's}}
\DoxyCodeLine{02301\ \textcolor{comment}{\ \ \ \ any\ left.}}
\DoxyCodeLine{02302\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{02303\ \ \ \ \ \textcolor{keywordflow}{if}\ (bs-\/>unalignedByteCount\ >\ 0)\ \{}
\DoxyCodeLine{02304\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \textcolor{comment}{/*\ If\ we\ have\ any\ unaligned\ bytes\ it\ means\ there's\ no\ more\ aligned\ bytes\ left\ in\ the\ client.\ */}}
\DoxyCodeLine{02305\ \ \ \ \ \}}
\DoxyCodeLine{02306\ }
\DoxyCodeLine{02307\ \ \ \ \ bytesRead\ =\ bs-\/>onRead(bs-\/>pUserData,\ bs-\/>cacheL2,\ DRFLAC\_CACHE\_L2\_SIZE\_BYTES(bs));}
\DoxyCodeLine{02308\ }
\DoxyCodeLine{02309\ \ \ \ \ bs-\/>nextL2Line\ =\ 0;}
\DoxyCodeLine{02310\ \ \ \ \ \textcolor{keywordflow}{if}\ (bytesRead\ ==\ DRFLAC\_CACHE\_L2\_SIZE\_BYTES(bs))\ \{}
\DoxyCodeLine{02311\ \ \ \ \ \ \ \ \ bs-\/>cache\ =\ bs-\/>cacheL2[bs-\/>nextL2Line++];}
\DoxyCodeLine{02312\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02313\ \ \ \ \ \}}
\DoxyCodeLine{02314\ }
\DoxyCodeLine{02315\ }
\DoxyCodeLine{02316\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{02317\ \textcolor{comment}{\ \ \ \ If\ we\ get\ here\ it\ means\ we\ were\ unable\ to\ retrieve\ enough\ data\ to\ fill\ the\ entire\ L2\ cache.\ It\ probably}}
\DoxyCodeLine{02318\ \textcolor{comment}{\ \ \ \ means\ we've\ just\ reached\ the\ end\ of\ the\ file.\ We\ need\ to\ move\ the\ valid\ data\ down\ to\ the\ end\ of\ the\ buffer}}
\DoxyCodeLine{02319\ \textcolor{comment}{\ \ \ \ and\ adjust\ the\ index\ of\ the\ next\ line\ accordingly.\ Also\ keep\ in\ mind\ that\ the\ L2\ cache\ must\ be\ aligned\ to}}
\DoxyCodeLine{02320\ \textcolor{comment}{\ \ \ \ the\ size\ of\ the\ L1\ so\ we'll\ need\ to\ seek\ backwards\ by\ any\ misaligned\ bytes.}}
\DoxyCodeLine{02321\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{02322\ \ \ \ \ alignedL1LineCount\ =\ bytesRead\ /\ DRFLAC\_CACHE\_L1\_SIZE\_BYTES(bs);}
\DoxyCodeLine{02323\ }
\DoxyCodeLine{02324\ \ \ \ \ \textcolor{comment}{/*\ We\ need\ to\ keep\ track\ of\ any\ unaligned\ bytes\ for\ later\ use.\ */}}
\DoxyCodeLine{02325\ \ \ \ \ bs-\/>unalignedByteCount\ =\ bytesRead\ -\/\ (alignedL1LineCount\ *\ DRFLAC\_CACHE\_L1\_SIZE\_BYTES(bs));}
\DoxyCodeLine{02326\ \ \ \ \ \textcolor{keywordflow}{if}\ (bs-\/>unalignedByteCount\ >\ 0)\ \{}
\DoxyCodeLine{02327\ \ \ \ \ \ \ \ \ bs-\/>unalignedCache\ =\ bs-\/>cacheL2[alignedL1LineCount];}
\DoxyCodeLine{02328\ \ \ \ \ \}}
\DoxyCodeLine{02329\ }
\DoxyCodeLine{02330\ \ \ \ \ \textcolor{keywordflow}{if}\ (alignedL1LineCount\ >\ 0)\ \{}
\DoxyCodeLine{02331\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structoffset}{offset}}\ =\ DRFLAC\_CACHE\_L2\_LINE\_COUNT(bs)\ -\/\ alignedL1LineCount;}
\DoxyCodeLine{02332\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ i;}
\DoxyCodeLine{02333\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ alignedL1LineCount;\ i\ >\ 0;\ -\/-\/i)\ \{}
\DoxyCodeLine{02334\ \ \ \ \ \ \ \ \ \ \ \ \ bs-\/>cacheL2[i-\/1\ +\ \mbox{\hyperlink{structoffset}{offset}}]\ =\ bs-\/>cacheL2[i-\/1];}
\DoxyCodeLine{02335\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02336\ }
\DoxyCodeLine{02337\ \ \ \ \ \ \ \ \ bs-\/>nextL2Line\ =\ (drflac\_uint32)\mbox{\hyperlink{structoffset}{offset}};}
\DoxyCodeLine{02338\ \ \ \ \ \ \ \ \ bs-\/>cache\ =\ bs-\/>cacheL2[bs-\/>nextL2Line++];}
\DoxyCodeLine{02339\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02340\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02341\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ we\ get\ into\ this\ branch\ it\ means\ we\ weren't\ able\ to\ load\ any\ L1-\/aligned\ data.\ */}}
\DoxyCodeLine{02342\ \ \ \ \ \ \ \ \ bs-\/>nextL2Line\ =\ DRFLAC\_CACHE\_L2\_LINE\_COUNT(bs);}
\DoxyCodeLine{02343\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02344\ \ \ \ \ \}}
\DoxyCodeLine{02345\ \}}
\DoxyCodeLine{02346\ }
\DoxyCodeLine{02347\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_reload\_cache(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs)}
\DoxyCodeLine{02348\ \{}
\DoxyCodeLine{02349\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ bytesRead;}
\DoxyCodeLine{02350\ }
\DoxyCodeLine{02351\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{02352\ \ \ \ \ drflac\_\_update\_crc16(bs);}
\DoxyCodeLine{02353\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02354\ }
\DoxyCodeLine{02355\ \ \ \ \ \textcolor{comment}{/*\ Fast\ path.\ Try\ just\ moving\ the\ next\ value\ in\ the\ L2\ cache\ to\ the\ L1\ cache.\ */}}
\DoxyCodeLine{02356\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_reload\_l1\_cache\_from\_l2(bs))\ \{}
\DoxyCodeLine{02357\ \ \ \ \ \ \ \ \ bs-\/>cache\ =\ drflac\_\_be2host\_\_cache\_line(bs-\/>cache);}
\DoxyCodeLine{02358\ \ \ \ \ \ \ \ \ bs-\/>consumedBits\ =\ 0;}
\DoxyCodeLine{02359\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{02360\ \ \ \ \ \ \ \ \ bs-\/>crc16Cache\ =\ bs-\/>cache;}
\DoxyCodeLine{02361\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02362\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02363\ \ \ \ \ \}}
\DoxyCodeLine{02364\ }
\DoxyCodeLine{02365\ \ \ \ \ \textcolor{comment}{/*\ Slow\ path.\ */}}
\DoxyCodeLine{02366\ }
\DoxyCodeLine{02367\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{02368\ \textcolor{comment}{\ \ \ \ If\ we\ get\ here\ it\ means\ we\ have\ failed\ to\ load\ the\ L1\ cache\ from\ the\ L2.\ Likely\ we've\ just\ reached\ the\ end\ of\ the\ stream\ and\ the\ last}}
\DoxyCodeLine{02369\ \textcolor{comment}{\ \ \ \ few\ bytes\ did\ not\ meet\ the\ alignment\ requirements\ for\ the\ L2\ cache.\ In\ this\ case\ we\ need\ to\ fall\ back\ to\ a\ slower\ path\ and\ read\ the}}
\DoxyCodeLine{02370\ \textcolor{comment}{\ \ \ \ data\ from\ the\ unaligned\ cache.}}
\DoxyCodeLine{02371\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{02372\ \ \ \ \ bytesRead\ =\ bs-\/>unalignedByteCount;}
\DoxyCodeLine{02373\ \ \ \ \ \textcolor{keywordflow}{if}\ (bytesRead\ ==\ 0)\ \{}
\DoxyCodeLine{02374\ \ \ \ \ \ \ \ \ bs-\/>consumedBits\ =\ DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs);\ \ \ \textcolor{comment}{/*\ <-\/-\/\ The\ stream\ has\ been\ exhausted,\ so\ marked\ the\ bits\ as\ consumed.\ */}}
\DoxyCodeLine{02375\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02376\ \ \ \ \ \}}
\DoxyCodeLine{02377\ }
\DoxyCodeLine{02378\ \ \ \ \ DRFLAC\_ASSERT(bytesRead\ <\ DRFLAC\_CACHE\_L1\_SIZE\_BYTES(bs));}
\DoxyCodeLine{02379\ \ \ \ \ bs-\/>consumedBits\ =\ (drflac\_uint32)(DRFLAC\_CACHE\_L1\_SIZE\_BYTES(bs)\ -\/\ bytesRead)\ *\ 8;}
\DoxyCodeLine{02380\ }
\DoxyCodeLine{02381\ \ \ \ \ bs-\/>cache\ =\ drflac\_\_be2host\_\_cache\_line(bs-\/>unalignedCache);}
\DoxyCodeLine{02382\ \ \ \ \ bs-\/>cache\ \&=\ DRFLAC\_CACHE\_L1\_SELECTION\_MASK(DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs));\ \ \ \ \textcolor{comment}{/*\ <-\/-\/\ Make\ sure\ the\ consumed\ bits\ are\ always\ set\ to\ zero.\ Other\ parts\ of\ the\ library\ depend\ on\ this\ property.\ */}}
\DoxyCodeLine{02383\ \ \ \ \ bs-\/>unalignedByteCount\ =\ 0;\ \ \ \ \ \textcolor{comment}{/*\ <-\/-\/\ At\ this\ point\ the\ unaligned\ bytes\ have\ been\ moved\ into\ the\ cache\ and\ we\ thus\ have\ no\ more\ unaligned\ bytes.\ */}}
\DoxyCodeLine{02384\ }
\DoxyCodeLine{02385\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{02386\ \ \ \ \ bs-\/>crc16Cache\ =\ bs-\/>cache\ >>\ bs-\/>consumedBits;}
\DoxyCodeLine{02387\ \ \ \ \ bs-\/>crc16CacheIgnoredBytes\ =\ bs-\/>consumedBits\ >>\ 3;}
\DoxyCodeLine{02388\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02389\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02390\ \}}
\DoxyCodeLine{02391\ }
\DoxyCodeLine{02392\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ drflac\_\_reset\_cache(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs)}
\DoxyCodeLine{02393\ \{}
\DoxyCodeLine{02394\ \ \ \ \ bs-\/>nextL2Line\ \ \ =\ DRFLAC\_CACHE\_L2\_LINE\_COUNT(bs);\ \ \textcolor{comment}{/*\ <-\/-\/\ This\ clears\ the\ L2\ cache.\ */}}
\DoxyCodeLine{02395\ \ \ \ \ bs-\/>consumedBits\ =\ DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs);\ \ \ \textcolor{comment}{/*\ <-\/-\/\ This\ clears\ the\ L1\ cache.\ */}}
\DoxyCodeLine{02396\ \ \ \ \ bs-\/>cache\ =\ 0;}
\DoxyCodeLine{02397\ \ \ \ \ bs-\/>unalignedByteCount\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ <-\/-\/\ This\ clears\ the\ trailing\ unaligned\ bytes.\ */}}
\DoxyCodeLine{02398\ \ \ \ \ bs-\/>unalignedCache\ =\ 0;}
\DoxyCodeLine{02399\ }
\DoxyCodeLine{02400\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{02401\ \ \ \ \ bs-\/>crc16Cache\ =\ 0;}
\DoxyCodeLine{02402\ \ \ \ \ bs-\/>crc16CacheIgnoredBytes\ =\ 0;}
\DoxyCodeLine{02403\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02404\ \}}
\DoxyCodeLine{02405\ }
\DoxyCodeLine{02406\ }
\DoxyCodeLine{02407\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_bool32\ drflac\_\_read\_uint32(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bitCount,\ drflac\_uint32*\ pResultOut)}
\DoxyCodeLine{02408\ \{}
\DoxyCodeLine{02409\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{02410\ \ \ \ \ DRFLAC\_ASSERT(pResultOut\ !=\ NULL);}
\DoxyCodeLine{02411\ \ \ \ \ DRFLAC\_ASSERT(bitCount\ >\ 0);}
\DoxyCodeLine{02412\ \ \ \ \ DRFLAC\_ASSERT(bitCount\ <=\ 32);}
\DoxyCodeLine{02413\ }
\DoxyCodeLine{02414\ \ \ \ \ \textcolor{keywordflow}{if}\ (bs-\/>consumedBits\ ==\ DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs))\ \{}
\DoxyCodeLine{02415\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_reload\_cache(bs))\ \{}
\DoxyCodeLine{02416\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02417\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02418\ \ \ \ \ \}}
\DoxyCodeLine{02419\ }
\DoxyCodeLine{02420\ \ \ \ \ \textcolor{keywordflow}{if}\ (bitCount\ <=\ DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs))\ \{}
\DoxyCodeLine{02421\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{02422\ \textcolor{comment}{\ \ \ \ \ \ \ \ If\ we\ want\ to\ load\ all\ 32-\/bits\ from\ a\ 32-\/bit\ cache\ we\ need\ to\ do\ it\ slightly\ differently\ because\ we\ can't\ do}}
\DoxyCodeLine{02423\ \textcolor{comment}{\ \ \ \ \ \ \ \ a\ 32-\/bit\ shift\ on\ a\ 32-\/bit\ integer.\ This\ will\ never\ be\ the\ case\ on\ 64-\/bit\ caches,\ so\ we\ can\ have\ a\ slightly}}
\DoxyCodeLine{02424\ \textcolor{comment}{\ \ \ \ \ \ \ \ more\ optimal\ solution\ for\ this.}}
\DoxyCodeLine{02425\ \textcolor{comment}{\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{02426\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_64BIT}}
\DoxyCodeLine{02427\ \ \ \ \ \ \ \ \ *pResultOut\ =\ (drflac\_uint32)DRFLAC\_CACHE\_L1\_SELECT\_AND\_SHIFT(bs,\ bitCount);}
\DoxyCodeLine{02428\ \ \ \ \ \ \ \ \ bs-\/>consumedBits\ +=\ bitCount;}
\DoxyCodeLine{02429\ \ \ \ \ \ \ \ \ bs-\/>cache\ <<=\ bitCount;}
\DoxyCodeLine{02430\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02431\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bitCount\ <\ DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs))\ \{}
\DoxyCodeLine{02432\ \ \ \ \ \ \ \ \ \ \ \ \ *pResultOut\ =\ (drflac\_uint32)DRFLAC\_CACHE\_L1\_SELECT\_AND\_SHIFT(bs,\ bitCount);}
\DoxyCodeLine{02433\ \ \ \ \ \ \ \ \ \ \ \ \ bs-\/>consumedBits\ +=\ bitCount;}
\DoxyCodeLine{02434\ \ \ \ \ \ \ \ \ \ \ \ \ bs-\/>cache\ <<=\ bitCount;}
\DoxyCodeLine{02435\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02436\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Cannot\ shift\ by\ 32-\/bits,\ so\ need\ to\ do\ it\ differently.\ */}}
\DoxyCodeLine{02437\ \ \ \ \ \ \ \ \ \ \ \ \ *pResultOut\ =\ (drflac\_uint32)bs-\/>cache;}
\DoxyCodeLine{02438\ \ \ \ \ \ \ \ \ \ \ \ \ bs-\/>consumedBits\ =\ DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs);}
\DoxyCodeLine{02439\ \ \ \ \ \ \ \ \ \ \ \ \ bs-\/>cache\ =\ 0;}
\DoxyCodeLine{02440\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02441\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02442\ }
\DoxyCodeLine{02443\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02444\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02445\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ It\ straddles\ the\ cached\ data.\ It\ will\ never\ cover\ more\ than\ the\ next\ chunk.\ We\ just\ read\ the\ number\ in\ two\ parts\ and\ combine\ them.\ */}}
\DoxyCodeLine{02446\ \ \ \ \ \ \ \ \ drflac\_uint32\ bitCountHi\ =\ DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs);}
\DoxyCodeLine{02447\ \ \ \ \ \ \ \ \ drflac\_uint32\ bitCountLo\ =\ bitCount\ -\/\ bitCountHi;}
\DoxyCodeLine{02448\ \ \ \ \ \ \ \ \ drflac\_uint32\ resultHi;}
\DoxyCodeLine{02449\ }
\DoxyCodeLine{02450\ \ \ \ \ \ \ \ \ DRFLAC\_ASSERT(bitCountHi\ >\ 0);}
\DoxyCodeLine{02451\ \ \ \ \ \ \ \ \ DRFLAC\_ASSERT(bitCountHi\ <\ 32);}
\DoxyCodeLine{02452\ \ \ \ \ \ \ \ \ resultHi\ =\ (drflac\_uint32)DRFLAC\_CACHE\_L1\_SELECT\_AND\_SHIFT(bs,\ bitCountHi);}
\DoxyCodeLine{02453\ }
\DoxyCodeLine{02454\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_reload\_cache(bs))\ \{}
\DoxyCodeLine{02455\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02456\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02457\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bitCountLo\ >\ DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs))\ \{}
\DoxyCodeLine{02458\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ This\ happens\ when\ we\ get\ to\ end\ of\ stream\ */}}
\DoxyCodeLine{02459\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02460\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02461\ }
\DoxyCodeLine{02462\ \ \ \ \ \ \ \ \ *pResultOut\ =\ (resultHi\ <<\ bitCountLo)\ |\ (drflac\_uint32)DRFLAC\_CACHE\_L1\_SELECT\_AND\_SHIFT(bs,\ bitCountLo);}
\DoxyCodeLine{02463\ \ \ \ \ \ \ \ \ bs-\/>consumedBits\ +=\ bitCountLo;}
\DoxyCodeLine{02464\ \ \ \ \ \ \ \ \ bs-\/>cache\ <<=\ bitCountLo;}
\DoxyCodeLine{02465\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02466\ \ \ \ \ \}}
\DoxyCodeLine{02467\ \}}
\DoxyCodeLine{02468\ }
\DoxyCodeLine{02469\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_read\_int32(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bitCount,\ drflac\_int32*\ pResult)}
\DoxyCodeLine{02470\ \{}
\DoxyCodeLine{02471\ \ \ \ \ drflac\_uint32\ result;}
\DoxyCodeLine{02472\ }
\DoxyCodeLine{02473\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{02474\ \ \ \ \ DRFLAC\_ASSERT(pResult\ !=\ NULL);}
\DoxyCodeLine{02475\ \ \ \ \ DRFLAC\_ASSERT(bitCount\ >\ 0);}
\DoxyCodeLine{02476\ \ \ \ \ DRFLAC\_ASSERT(bitCount\ <=\ 32);}
\DoxyCodeLine{02477\ }
\DoxyCodeLine{02478\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint32(bs,\ bitCount,\ \&result))\ \{}
\DoxyCodeLine{02479\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02480\ \ \ \ \ \}}
\DoxyCodeLine{02481\ }
\DoxyCodeLine{02482\ \ \ \ \ \textcolor{comment}{/*\ Do\ not\ attempt\ to\ shift\ by\ 32\ as\ it's\ undefined.\ */}}
\DoxyCodeLine{02483\ \ \ \ \ \textcolor{keywordflow}{if}\ (bitCount\ <\ 32)\ \{}
\DoxyCodeLine{02484\ \ \ \ \ \ \ \ \ drflac\_uint32\ signbit;}
\DoxyCodeLine{02485\ \ \ \ \ \ \ \ \ signbit\ =\ ((result\ >>\ (bitCount-\/1))\ \&\ 0x01);}
\DoxyCodeLine{02486\ \ \ \ \ \ \ \ \ result\ |=\ (\string~signbit\ +\ 1)\ <<\ bitCount;}
\DoxyCodeLine{02487\ \ \ \ \ \}}
\DoxyCodeLine{02488\ }
\DoxyCodeLine{02489\ \ \ \ \ *pResult\ =\ (drflac\_int32)result;}
\DoxyCodeLine{02490\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02491\ \}}
\DoxyCodeLine{02492\ }
\DoxyCodeLine{02493\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_64BIT}}
\DoxyCodeLine{02494\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_read\_uint64(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bitCount,\ drflac\_uint64*\ pResultOut)}
\DoxyCodeLine{02495\ \{}
\DoxyCodeLine{02496\ \ \ \ \ drflac\_uint32\ resultHi;}
\DoxyCodeLine{02497\ \ \ \ \ drflac\_uint32\ resultLo;}
\DoxyCodeLine{02498\ }
\DoxyCodeLine{02499\ \ \ \ \ DRFLAC\_ASSERT(bitCount\ <=\ 64);}
\DoxyCodeLine{02500\ \ \ \ \ DRFLAC\_ASSERT(bitCount\ >\ \ 32);}
\DoxyCodeLine{02501\ }
\DoxyCodeLine{02502\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint32(bs,\ bitCount\ -\/\ 32,\ \&resultHi))\ \{}
\DoxyCodeLine{02503\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02504\ \ \ \ \ \}}
\DoxyCodeLine{02505\ }
\DoxyCodeLine{02506\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint32(bs,\ 32,\ \&resultLo))\ \{}
\DoxyCodeLine{02507\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02508\ \ \ \ \ \}}
\DoxyCodeLine{02509\ }
\DoxyCodeLine{02510\ \ \ \ \ *pResultOut\ =\ (((drflac\_uint64)resultHi)\ <<\ 32)\ |\ ((drflac\_uint64)resultLo);}
\DoxyCodeLine{02511\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02512\ \}}
\DoxyCodeLine{02513\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02514\ }
\DoxyCodeLine{02515\ \textcolor{comment}{/*\ Function\ below\ is\ unused,\ but\ leaving\ it\ here\ in\ case\ I\ need\ to\ quickly\ add\ it\ again.\ */}}
\DoxyCodeLine{02516\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{02517\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_read\_int64(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bitCount,\ drflac\_int64*\ pResultOut)}
\DoxyCodeLine{02518\ \{}
\DoxyCodeLine{02519\ \ \ \ \ drflac\_uint64\ result;}
\DoxyCodeLine{02520\ \ \ \ \ drflac\_uint64\ signbit;}
\DoxyCodeLine{02521\ }
\DoxyCodeLine{02522\ \ \ \ \ DRFLAC\_ASSERT(bitCount\ <=\ 64);}
\DoxyCodeLine{02523\ }
\DoxyCodeLine{02524\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint64(bs,\ bitCount,\ \&result))\ \{}
\DoxyCodeLine{02525\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02526\ \ \ \ \ \}}
\DoxyCodeLine{02527\ }
\DoxyCodeLine{02528\ \ \ \ \ signbit\ =\ ((result\ >>\ (bitCount-\/1))\ \&\ 0x01);}
\DoxyCodeLine{02529\ \ \ \ \ result\ |=\ (\string~signbit\ +\ 1)\ <<\ bitCount;}
\DoxyCodeLine{02530\ }
\DoxyCodeLine{02531\ \ \ \ \ *pResultOut\ =\ (drflac\_int64)result;}
\DoxyCodeLine{02532\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02533\ \}}
\DoxyCodeLine{02534\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02535\ }
\DoxyCodeLine{02536\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_read\_uint16(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bitCount,\ drflac\_uint16*\ pResult)}
\DoxyCodeLine{02537\ \{}
\DoxyCodeLine{02538\ \ \ \ \ drflac\_uint32\ result;}
\DoxyCodeLine{02539\ }
\DoxyCodeLine{02540\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{02541\ \ \ \ \ DRFLAC\_ASSERT(pResult\ !=\ NULL);}
\DoxyCodeLine{02542\ \ \ \ \ DRFLAC\_ASSERT(bitCount\ >\ 0);}
\DoxyCodeLine{02543\ \ \ \ \ DRFLAC\_ASSERT(bitCount\ <=\ 16);}
\DoxyCodeLine{02544\ }
\DoxyCodeLine{02545\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint32(bs,\ bitCount,\ \&result))\ \{}
\DoxyCodeLine{02546\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02547\ \ \ \ \ \}}
\DoxyCodeLine{02548\ }
\DoxyCodeLine{02549\ \ \ \ \ *pResult\ =\ (drflac\_uint16)result;}
\DoxyCodeLine{02550\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02551\ \}}
\DoxyCodeLine{02552\ }
\DoxyCodeLine{02553\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{02554\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_read\_int16(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bitCount,\ drflac\_int16*\ pResult)}
\DoxyCodeLine{02555\ \{}
\DoxyCodeLine{02556\ \ \ \ \ drflac\_int32\ result;}
\DoxyCodeLine{02557\ }
\DoxyCodeLine{02558\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{02559\ \ \ \ \ DRFLAC\_ASSERT(pResult\ !=\ NULL);}
\DoxyCodeLine{02560\ \ \ \ \ DRFLAC\_ASSERT(bitCount\ >\ 0);}
\DoxyCodeLine{02561\ \ \ \ \ DRFLAC\_ASSERT(bitCount\ <=\ 16);}
\DoxyCodeLine{02562\ }
\DoxyCodeLine{02563\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_int32(bs,\ bitCount,\ \&result))\ \{}
\DoxyCodeLine{02564\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02565\ \ \ \ \ \}}
\DoxyCodeLine{02566\ }
\DoxyCodeLine{02567\ \ \ \ \ *pResult\ =\ (drflac\_int16)result;}
\DoxyCodeLine{02568\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02569\ \}}
\DoxyCodeLine{02570\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02571\ }
\DoxyCodeLine{02572\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_read\_uint8(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bitCount,\ drflac\_uint8*\ pResult)}
\DoxyCodeLine{02573\ \{}
\DoxyCodeLine{02574\ \ \ \ \ drflac\_uint32\ result;}
\DoxyCodeLine{02575\ }
\DoxyCodeLine{02576\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{02577\ \ \ \ \ DRFLAC\_ASSERT(pResult\ !=\ NULL);}
\DoxyCodeLine{02578\ \ \ \ \ DRFLAC\_ASSERT(bitCount\ >\ 0);}
\DoxyCodeLine{02579\ \ \ \ \ DRFLAC\_ASSERT(bitCount\ <=\ 8);}
\DoxyCodeLine{02580\ }
\DoxyCodeLine{02581\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint32(bs,\ bitCount,\ \&result))\ \{}
\DoxyCodeLine{02582\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02583\ \ \ \ \ \}}
\DoxyCodeLine{02584\ }
\DoxyCodeLine{02585\ \ \ \ \ *pResult\ =\ (drflac\_uint8)result;}
\DoxyCodeLine{02586\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02587\ \}}
\DoxyCodeLine{02588\ }
\DoxyCodeLine{02589\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_read\_int8(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bitCount,\ drflac\_int8*\ pResult)}
\DoxyCodeLine{02590\ \{}
\DoxyCodeLine{02591\ \ \ \ \ drflac\_int32\ result;}
\DoxyCodeLine{02592\ }
\DoxyCodeLine{02593\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{02594\ \ \ \ \ DRFLAC\_ASSERT(pResult\ !=\ NULL);}
\DoxyCodeLine{02595\ \ \ \ \ DRFLAC\_ASSERT(bitCount\ >\ 0);}
\DoxyCodeLine{02596\ \ \ \ \ DRFLAC\_ASSERT(bitCount\ <=\ 8);}
\DoxyCodeLine{02597\ }
\DoxyCodeLine{02598\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_int32(bs,\ bitCount,\ \&result))\ \{}
\DoxyCodeLine{02599\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02600\ \ \ \ \ \}}
\DoxyCodeLine{02601\ }
\DoxyCodeLine{02602\ \ \ \ \ *pResult\ =\ (drflac\_int8)result;}
\DoxyCodeLine{02603\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02604\ \}}
\DoxyCodeLine{02605\ }
\DoxyCodeLine{02606\ }
\DoxyCodeLine{02607\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_seek\_bits(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ \textcolor{keywordtype}{size\_t}\ bitsToSeek)}
\DoxyCodeLine{02608\ \{}
\DoxyCodeLine{02609\ \ \ \ \ \textcolor{keywordflow}{if}\ (bitsToSeek\ <=\ DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs))\ \{}
\DoxyCodeLine{02610\ \ \ \ \ \ \ \ \ bs-\/>consumedBits\ +=\ (drflac\_uint32)bitsToSeek;}
\DoxyCodeLine{02611\ \ \ \ \ \ \ \ \ bs-\/>cache\ <<=\ bitsToSeek;}
\DoxyCodeLine{02612\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02613\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02614\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ It\ straddles\ the\ cached\ data.\ This\ function\ isn't\ called\ too\ frequently\ so\ I'm\ favouring\ simplicity\ here.\ */}}
\DoxyCodeLine{02615\ \ \ \ \ \ \ \ \ bitsToSeek\ \ \ \ \ \ \ -\/=\ DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs);}
\DoxyCodeLine{02616\ \ \ \ \ \ \ \ \ bs-\/>consumedBits\ +=\ DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs);}
\DoxyCodeLine{02617\ \ \ \ \ \ \ \ \ bs-\/>cache\ \ \ \ \ \ \ \ \ =\ 0;}
\DoxyCodeLine{02618\ }
\DoxyCodeLine{02619\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Simple\ case.\ Seek\ in\ groups\ of\ the\ same\ number\ as\ bits\ that\ fit\ within\ a\ cache\ line.\ */}}
\DoxyCodeLine{02620\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_64BIT}}
\DoxyCodeLine{02621\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (bitsToSeek\ >=\ DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs))\ \{}
\DoxyCodeLine{02622\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ \mbox{\hyperlink{structbin}{bin}};}
\DoxyCodeLine{02623\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint64(bs,\ DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs),\ \&\mbox{\hyperlink{structbin}{bin}}))\ \{}
\DoxyCodeLine{02624\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02625\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02626\ \ \ \ \ \ \ \ \ \ \ \ \ bitsToSeek\ -\/=\ DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs);}
\DoxyCodeLine{02627\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02628\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02629\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (bitsToSeek\ >=\ DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs))\ \{}
\DoxyCodeLine{02630\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ \mbox{\hyperlink{structbin}{bin}};}
\DoxyCodeLine{02631\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint32(bs,\ DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs),\ \&\mbox{\hyperlink{structbin}{bin}}))\ \{}
\DoxyCodeLine{02632\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02633\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02634\ \ \ \ \ \ \ \ \ \ \ \ \ bitsToSeek\ -\/=\ DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs);}
\DoxyCodeLine{02635\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02636\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02637\ }
\DoxyCodeLine{02638\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Whole\ leftover\ bytes.\ */}}
\DoxyCodeLine{02639\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (bitsToSeek\ >=\ 8)\ \{}
\DoxyCodeLine{02640\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ \mbox{\hyperlink{structbin}{bin}};}
\DoxyCodeLine{02641\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 8,\ \&\mbox{\hyperlink{structbin}{bin}}))\ \{}
\DoxyCodeLine{02642\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02643\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02644\ \ \ \ \ \ \ \ \ \ \ \ \ bitsToSeek\ -\/=\ 8;}
\DoxyCodeLine{02645\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02646\ }
\DoxyCodeLine{02647\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Leftover\ bits.\ */}}
\DoxyCodeLine{02648\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bitsToSeek\ >\ 0)\ \{}
\DoxyCodeLine{02649\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ \mbox{\hyperlink{structbin}{bin}};}
\DoxyCodeLine{02650\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ (drflac\_uint32)bitsToSeek,\ \&\mbox{\hyperlink{structbin}{bin}}))\ \{}
\DoxyCodeLine{02651\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02652\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02653\ \ \ \ \ \ \ \ \ \ \ \ \ bitsToSeek\ =\ 0;\ \textcolor{comment}{/*\ <-\/-\/\ Necessary\ for\ the\ assert\ below.\ */}}
\DoxyCodeLine{02654\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02655\ }
\DoxyCodeLine{02656\ \ \ \ \ \ \ \ \ DRFLAC\_ASSERT(bitsToSeek\ ==\ 0);}
\DoxyCodeLine{02657\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02658\ \ \ \ \ \}}
\DoxyCodeLine{02659\ \}}
\DoxyCodeLine{02660\ }
\DoxyCodeLine{02661\ }
\DoxyCodeLine{02662\ \textcolor{comment}{/*\ This\ function\ moves\ the\ bit\ streamer\ to\ the\ first\ bit\ after\ the\ sync\ code\ (bit\ 15\ of\ the\ of\ the\ frame\ header).\ It\ will\ also\ update\ the\ CRC-\/16.\ */}}
\DoxyCodeLine{02663\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_find\_and\_seek\_to\_next\_sync\_code(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs)}
\DoxyCodeLine{02664\ \{}
\DoxyCodeLine{02665\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{02666\ }
\DoxyCodeLine{02667\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{02668\ \textcolor{comment}{\ \ \ \ The\ sync\ code\ is\ always\ aligned\ to\ 8\ bits.\ This\ is\ convenient\ for\ us\ because\ it\ means\ we\ can\ do\ byte-\/aligned\ movements.\ The\ first}}
\DoxyCodeLine{02669\ \textcolor{comment}{\ \ \ \ thing\ to\ do\ is\ align\ to\ the\ next\ byte.}}
\DoxyCodeLine{02670\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{02671\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_bits(bs,\ DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs)\ \&\ 7))\ \{}
\DoxyCodeLine{02672\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02673\ \ \ \ \ \}}
\DoxyCodeLine{02674\ }
\DoxyCodeLine{02675\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{02676\ \ \ \ \ \ \ \ \ drflac\_uint8\ hi;}
\DoxyCodeLine{02677\ }
\DoxyCodeLine{02678\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{02679\ \ \ \ \ \ \ \ \ drflac\_\_reset\_crc16(bs);}
\DoxyCodeLine{02680\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02681\ }
\DoxyCodeLine{02682\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 8,\ \&hi))\ \{}
\DoxyCodeLine{02683\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02684\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02685\ }
\DoxyCodeLine{02686\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hi\ ==\ 0xFF)\ \{}
\DoxyCodeLine{02687\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ lo;}
\DoxyCodeLine{02688\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 6,\ \&lo))\ \{}
\DoxyCodeLine{02689\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02690\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02691\ }
\DoxyCodeLine{02692\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (lo\ ==\ 0x3E)\ \{}
\DoxyCodeLine{02693\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02694\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02695\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_bits(bs,\ DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs)\ \&\ 7))\ \{}
\DoxyCodeLine{02696\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02697\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02698\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02699\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02700\ \ \ \ \ \}}
\DoxyCodeLine{02701\ }
\DoxyCodeLine{02702\ \ \ \ \ \textcolor{comment}{/*\ Should\ never\ get\ here.\ */}}
\DoxyCodeLine{02703\ \ \ \ \ \textcolor{comment}{/*return\ DRFLAC\_FALSE;*/}}
\DoxyCodeLine{02704\ \}}
\DoxyCodeLine{02705\ }
\DoxyCodeLine{02706\ }
\DoxyCodeLine{02707\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_HAS\_LZCNT\_INTRINSIC)}}
\DoxyCodeLine{02708\ \textcolor{preprocessor}{\#define\ DRFLAC\_IMPLEMENT\_CLZ\_LZCNT}}
\DoxyCodeLine{02709\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02710\ \textcolor{preprocessor}{\#if\ \ defined(\_MSC\_VER)\ \&\&\ \_MSC\_VER\ >=\ 1400\ \&\&\ (defined(DRFLAC\_X64)\ ||\ defined(DRFLAC\_X86))\ \&\&\ !defined(\_\_clang\_\_)}}
\DoxyCodeLine{02711\ \textcolor{preprocessor}{\#define\ DRFLAC\_IMPLEMENT\_CLZ\_MSVC}}
\DoxyCodeLine{02712\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02713\ \textcolor{preprocessor}{\#if\ \ defined(\_\_WATCOMC\_\_)\ \&\&\ defined(\_\_386\_\_)}}
\DoxyCodeLine{02714\ \textcolor{preprocessor}{\#define\ DRFLAC\_IMPLEMENT\_CLZ\_WATCOM}}
\DoxyCodeLine{02715\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02716\ \textcolor{preprocessor}{\#ifdef\ \_\_MRC\_\_}}
\DoxyCodeLine{02717\ \textcolor{preprocessor}{\#include\ <intrinsics.h>}}
\DoxyCodeLine{02718\ \textcolor{preprocessor}{\#define\ DRFLAC\_IMPLEMENT\_CLZ\_MRC}}
\DoxyCodeLine{02719\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02720\ }
\DoxyCodeLine{02721\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_\_clz\_software(drflac\_cache\_t\ x)}
\DoxyCodeLine{02722\ \{}
\DoxyCodeLine{02723\ \ \ \ \ drflac\_uint32\ n;}
\DoxyCodeLine{02724\ \ \ \ \ \textcolor{keyword}{static}\ drflac\_uint32\ clz\_table\_4[]\ =\ \{}
\DoxyCodeLine{02725\ \ \ \ \ \ \ \ \ 0,}
\DoxyCodeLine{02726\ \ \ \ \ \ \ \ \ 4,}
\DoxyCodeLine{02727\ \ \ \ \ \ \ \ \ 3,\ 3,}
\DoxyCodeLine{02728\ \ \ \ \ \ \ \ \ 2,\ 2,\ 2,\ 2,}
\DoxyCodeLine{02729\ \ \ \ \ \ \ \ \ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1,\ 1}
\DoxyCodeLine{02730\ \ \ \ \ \};}
\DoxyCodeLine{02731\ }
\DoxyCodeLine{02732\ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ ==\ 0)\ \{}
\DoxyCodeLine{02733\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{sizeof}(x)*8;}
\DoxyCodeLine{02734\ \ \ \ \ \}}
\DoxyCodeLine{02735\ }
\DoxyCodeLine{02736\ \ \ \ \ n\ =\ clz\_table\_4[x\ >>\ (\textcolor{keyword}{sizeof}(x)*8\ -\/\ 4)];}
\DoxyCodeLine{02737\ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ ==\ 0)\ \{}
\DoxyCodeLine{02738\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_64BIT}}
\DoxyCodeLine{02739\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((x\ \&\ ((drflac\_uint64)0xFFFFFFFF\ <<\ 32))\ ==\ 0)\ \{\ n\ \ =\ 32;\ x\ <<=\ 32;\ \}}
\DoxyCodeLine{02740\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((x\ \&\ ((drflac\_uint64)0xFFFF0000\ <<\ 32))\ ==\ 0)\ \{\ n\ +=\ 16;\ x\ <<=\ 16;\ \}}
\DoxyCodeLine{02741\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((x\ \&\ ((drflac\_uint64)0xFF000000\ <<\ 32))\ ==\ 0)\ \{\ n\ +=\ 8;\ \ x\ <<=\ 8;\ \ \}}
\DoxyCodeLine{02742\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((x\ \&\ ((drflac\_uint64)0xF0000000\ <<\ 32))\ ==\ 0)\ \{\ n\ +=\ 4;\ \ x\ <<=\ 4;\ \ \}}
\DoxyCodeLine{02743\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02744\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((x\ \&\ 0xFFFF0000)\ ==\ 0)\ \{\ n\ \ =\ 16;\ x\ <<=\ 16;\ \}}
\DoxyCodeLine{02745\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((x\ \&\ 0xFF000000)\ ==\ 0)\ \{\ n\ +=\ 8;\ \ x\ <<=\ 8;\ \ \}}
\DoxyCodeLine{02746\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((x\ \&\ 0xF0000000)\ ==\ 0)\ \{\ n\ +=\ 4;\ \ x\ <<=\ 4;\ \ \}}
\DoxyCodeLine{02747\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02748\ \ \ \ \ \ \ \ \ n\ +=\ clz\_table\_4[x\ >>\ (\textcolor{keyword}{sizeof}(x)*8\ -\/\ 4)];}
\DoxyCodeLine{02749\ \ \ \ \ \}}
\DoxyCodeLine{02750\ }
\DoxyCodeLine{02751\ \ \ \ \ \textcolor{keywordflow}{return}\ n\ -\/\ 1;}
\DoxyCodeLine{02752\ \}}
\DoxyCodeLine{02753\ }
\DoxyCodeLine{02754\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_IMPLEMENT\_CLZ\_LZCNT}}
\DoxyCodeLine{02755\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_bool32\ drflac\_\_is\_lzcnt\_supported(\textcolor{keywordtype}{void})}
\DoxyCodeLine{02756\ \{}
\DoxyCodeLine{02757\ \ \ \ \ \textcolor{comment}{/*\ Fast\ compile\ time\ check\ for\ ARM.\ */}}
\DoxyCodeLine{02758\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_HAS\_LZCNT\_INTRINSIC)\ \&\&\ defined(DRFLAC\_ARM)\ \&\&\ (defined(\_\_ARM\_ARCH)\ \&\&\ \_\_ARM\_ARCH\ >=\ 5)}}
\DoxyCodeLine{02759\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02760\ \textcolor{preprocessor}{\#elif\ defined(\_\_MRC\_\_)}}
\DoxyCodeLine{02761\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02762\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02763\ \ \ \ \ \textcolor{comment}{/*\ If\ the\ compiler\ itself\ does\ not\ support\ the\ intrinsic\ then\ we'll\ need\ to\ return\ false.\ */}}
\DoxyCodeLine{02764\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ DRFLAC\_HAS\_LZCNT\_INTRINSIC}}
\DoxyCodeLine{02765\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_gIsLZCNTSupported;}
\DoxyCodeLine{02766\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{02767\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02768\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{02769\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02770\ \}}
\DoxyCodeLine{02771\ }
\DoxyCodeLine{02772\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_\_clz\_lzcnt(drflac\_cache\_t\ x)}
\DoxyCodeLine{02773\ \{}
\DoxyCodeLine{02774\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{02775\ \textcolor{comment}{\ \ \ \ It's\ critical\ for\ competitive\ decoding\ performance\ that\ this\ function\ be\ highly\ optimal.\ With\ MSVC\ we\ can\ use\ the\ \_\_lzcnt64()\ and\ \_\_lzcnt()\ intrinsics}}
\DoxyCodeLine{02776\ \textcolor{comment}{\ \ \ \ to\ achieve\ good\ performance,\ however\ on\ GCC\ and\ Clang\ it's\ a\ little\ bit\ more\ annoying.\ The\ \_\_builtin\_clzl()\ and\ \_\_builtin\_clzll()\ intrinsics\ leave}}
\DoxyCodeLine{02777\ \textcolor{comment}{\ \ \ \ it\ undefined\ as\ to\ the\ return\ value\ when\ \`{}x`\ is\ 0.\ We\ need\ this\ to\ be\ well\ defined\ as\ returning\ 32\ or\ 64,\ depending\ on\ whether\ or\ not\ it's\ a\ 32-\/\ or}}
\DoxyCodeLine{02778\ \textcolor{comment}{\ \ \ \ 64-\/bit\ build.\ To\ work\ around\ this\ we\ would\ need\ to\ add\ a\ conditional\ to\ check\ for\ the\ x\ =\ 0\ case,\ but\ this\ creates\ unnecessary\ inefficiency.\ To\ work}}
\DoxyCodeLine{02779\ \textcolor{comment}{\ \ \ \ around\ this\ problem\ I\ have\ written\ some\ inline\ assembly\ to\ emit\ the\ LZCNT\ (x86)\ or\ CLZ\ (ARM)\ instruction\ directly\ which\ removes\ the\ need\ to\ include}}
\DoxyCodeLine{02780\ \textcolor{comment}{\ \ \ \ the\ conditional.\ This\ has\ worked\ well\ in\ the\ past,\ but\ for\ some\ reason\ Clang's\ MSVC\ compatible\ driver,\ clang-\/cl,\ does\ not\ seem\ to\ be\ handling\ this}}
\DoxyCodeLine{02781\ \textcolor{comment}{\ \ \ \ in\ the\ same\ way\ as\ the\ normal\ Clang\ driver.\ It\ seems\ that\ \`{}clang-\/cl`\ is\ just\ outputting\ the\ wrong\ results\ sometimes,\ maybe\ due\ to\ some\ register}}
\DoxyCodeLine{02782\ \textcolor{comment}{\ \ \ \ getting\ clobbered?}}
\DoxyCodeLine{02783\ \textcolor{comment}{}}
\DoxyCodeLine{02784\ \textcolor{comment}{\ \ \ \ I'm\ not\ sure\ if\ this\ is\ a\ bug\ with\ dr\_flac's\ inlined\ assembly\ (most\ likely),\ a\ bug\ in\ \`{}clang-\/cl`\ or\ just\ a\ misunderstanding\ on\ my\ part\ with\ inline}}
\DoxyCodeLine{02785\ \textcolor{comment}{\ \ \ \ assembly\ rules\ for\ \`{}clang-\/cl`.\ If\ somebody\ can\ identify\ an\ error\ in\ dr\_flac's\ inlined\ assembly\ I'm\ happy\ to\ get\ that\ fixed.}}
\DoxyCodeLine{02786\ \textcolor{comment}{}}
\DoxyCodeLine{02787\ \textcolor{comment}{\ \ \ \ Fortunately\ there\ is\ an\ easy\ workaround\ for\ this.\ Clang\ implements\ MSVC-\/specific\ intrinsics\ for\ compatibility.\ It\ also\ defines\ \_MSC\_VER\ for\ extra}}
\DoxyCodeLine{02788\ \textcolor{comment}{\ \ \ \ compatibility.\ We\ can\ therefore\ just\ check\ for\ \_MSC\_VER\ and\ use\ the\ MSVC\ intrinsic\ which,\ fortunately\ for\ us,\ Clang\ supports.\ It\ would\ still\ be\ nice}}
\DoxyCodeLine{02789\ \textcolor{comment}{\ \ \ \ to\ know\ how\ to\ fix\ the\ inlined\ assembly\ for\ correctness\ sake,\ however.}}
\DoxyCodeLine{02790\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{02791\ }
\DoxyCodeLine{02792\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)\ }\textcolor{comment}{/*\&\&\ !defined(\_\_clang\_\_)*/}\textcolor{preprocessor}{\ \ \ \ }\textcolor{comment}{/*\ <-\/-\/\ Intentionally\ wanting\ Clang\ to\ use\ the\ MSVC\ \_\_lzcnt64/\_\_lzcnt\ intrinsics\ due\ to\ above\ \string^.\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{02793\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ DRFLAC\_64BIT}}
\DoxyCodeLine{02794\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (drflac\_uint32)\_\_lzcnt64(x);}
\DoxyCodeLine{02795\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{02796\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (drflac\_uint32)\_\_lzcnt(x);}
\DoxyCodeLine{02797\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{02798\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02799\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\_\_GNUC\_\_)\ ||\ defined(\_\_clang\_\_)}}
\DoxyCodeLine{02800\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#if\ defined(DRFLAC\_X64)}}
\DoxyCodeLine{02801\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02802\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ r;}
\DoxyCodeLine{02803\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_asm\_\_\ \_\_volatile\_\_\ (}
\DoxyCodeLine{02804\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}lzcnt\{\ \%1,\ \%0|\ \%0,\ \%1\}"{}}\ :\ \textcolor{stringliteral}{"{}=r"{}}(r)\ :\ \textcolor{stringliteral}{"{}r"{}}(x)\ :\ \textcolor{stringliteral}{"{}cc"{}}}
\DoxyCodeLine{02805\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{02806\ }
\DoxyCodeLine{02807\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (drflac\_uint32)r;}
\DoxyCodeLine{02808\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02809\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#elif\ defined(DRFLAC\_X86)}}
\DoxyCodeLine{02810\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02811\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ r;}
\DoxyCodeLine{02812\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_asm\_\_\ \_\_volatile\_\_\ (}
\DoxyCodeLine{02813\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}lzcnt\{l\ \%1,\ \%0|\ \%0,\ \%1\}"{}}\ :\ \textcolor{stringliteral}{"{}=r"{}}(r)\ :\ \textcolor{stringliteral}{"{}r"{}}(x)\ :\ \textcolor{stringliteral}{"{}cc"{}}}
\DoxyCodeLine{02814\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{02815\ }
\DoxyCodeLine{02816\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ r;}
\DoxyCodeLine{02817\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02818\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#elif\ defined(DRFLAC\_ARM)\ \&\&\ (defined(\_\_ARM\_ARCH)\ \&\&\ \_\_ARM\_ARCH\ >=\ 5)\ \&\&\ !defined(\_\_ARM\_ARCH\_6M\_\_)\ \&\&\ !defined(DRFLAC\_64BIT)\ \ \ }\textcolor{comment}{/*\ <-\/-\/\ I\ haven't\ tested\ 64-\/bit\ inline\ assembly,\ so\ only\ enabling\ this\ for\ the\ 32-\/bit\ build\ for\ now.\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{02819\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02820\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ r;}
\DoxyCodeLine{02821\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_\_asm\_\_\ \_\_volatile\_\_\ (}
\DoxyCodeLine{02822\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\textcolor{keywordflow}{if}\ defined(DRFLAC\_64BIT)}
\DoxyCodeLine{02823\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}clz\ \%w[out],\ \%w[in]"{}}\ :\ [out]\textcolor{stringliteral}{"{}=r"{}}(r)\ :\ [in]\textcolor{stringliteral}{"{}r"{}}(x)\ \ \ \textcolor{comment}{/*\ <-\/-\/\ This\ is\ untested.\ If\ someone\ in\ the\ community\ could\ test\ this,\ that\ would\ be\ appreciated!\ */}}
\DoxyCodeLine{02824\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#\textcolor{keywordflow}{else}}
\DoxyCodeLine{02825\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}clz\ \%[out],\ \%[in]"{}}\ :\ [out]\textcolor{stringliteral}{"{}=r"{}}(r)\ :\ [in]\textcolor{stringliteral}{"{}r"{}}(x)}
\DoxyCodeLine{02826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \#endif}
\DoxyCodeLine{02827\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{02828\ }
\DoxyCodeLine{02829\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ r;}
\DoxyCodeLine{02830\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02831\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#else}}
\DoxyCodeLine{02832\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ ==\ 0)\ \{}
\DoxyCodeLine{02833\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{sizeof}(x)*8;}
\DoxyCodeLine{02834\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02835\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#ifdef\ DRFLAC\_64BIT}}
\DoxyCodeLine{02836\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (drflac\_uint32)\_\_builtin\_clzll((drflac\_uint64)x);}
\DoxyCodeLine{02837\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#else}}
\DoxyCodeLine{02838\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (drflac\_uint32)\_\_builtin\_clzl((drflac\_uint32)x);}
\DoxyCodeLine{02839\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{02840\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{02841\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{02842\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Unsupported\ compiler.\ */}}
\DoxyCodeLine{02843\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#error\ "{}This\ compiler\ does\ not\ support\ the\ lzcnt\ intrinsic."{}}}
\DoxyCodeLine{02844\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{02845\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02846\ \}}
\DoxyCodeLine{02847\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02848\ }
\DoxyCodeLine{02849\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_IMPLEMENT\_CLZ\_MSVC}}
\DoxyCodeLine{02850\ \textcolor{preprocessor}{\#include\ <intrin.h>}\ \textcolor{comment}{/*\ For\ BitScanReverse().\ */}}
\DoxyCodeLine{02851\ }
\DoxyCodeLine{02852\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_\_clz\_msvc(drflac\_cache\_t\ x)}
\DoxyCodeLine{02853\ \{}
\DoxyCodeLine{02854\ \ \ \ \ drflac\_uint32\ n;}
\DoxyCodeLine{02855\ }
\DoxyCodeLine{02856\ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ ==\ 0)\ \{}
\DoxyCodeLine{02857\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{sizeof}(x)*8;}
\DoxyCodeLine{02858\ \ \ \ \ \}}
\DoxyCodeLine{02859\ }
\DoxyCodeLine{02860\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_64BIT}}
\DoxyCodeLine{02861\ \ \ \ \ \_BitScanReverse64((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}*)\&n,\ x);}
\DoxyCodeLine{02862\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02863\ \ \ \ \ \_BitScanReverse((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}*)\&n,\ x);}
\DoxyCodeLine{02864\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02865\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{sizeof}(x)*8\ -\/\ n\ -\/\ 1;}
\DoxyCodeLine{02866\ \}}
\DoxyCodeLine{02867\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02868\ }
\DoxyCodeLine{02869\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_IMPLEMENT\_CLZ\_WATCOM}}
\DoxyCodeLine{02870\ \textcolor{keyword}{static}\ \_\_inline\ drflac\_uint32\ drflac\_\_clz\_watcom\ (drflac\_uint32);}
\DoxyCodeLine{02871\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_IMPLEMENT\_CLZ\_WATCOM\_LZCNT}}
\DoxyCodeLine{02872\ \textcolor{comment}{/*\ Use\ the\ LZCNT\ instruction\ (only\ available\ on\ some\ processors\ since\ the\ 2010s).\ */}}
\DoxyCodeLine{02873\ \textcolor{preprocessor}{\#pragma\ aux\ drflac\_\_clz\_watcom\_lzcnt\ =\ \(\backslash\)}}
\DoxyCodeLine{02874\ \textcolor{preprocessor}{\ \ \ \ "{}db\ 0F3h,\ 0Fh,\ 0BDh,\ 0C0h"{}\ }\textcolor{comment}{/*\ lzcnt\ eax,\ eax\ */}\textcolor{preprocessor}{\ \(\backslash\)}}
\DoxyCodeLine{02875\ \textcolor{preprocessor}{\ \ \ \ parm\ [eax]\ \(\backslash\)}}
\DoxyCodeLine{02876\ \textcolor{preprocessor}{\ \ \ \ value\ [eax]\ \(\backslash\)}}
\DoxyCodeLine{02877\ \textcolor{preprocessor}{\ \ \ \ modify\ nomemory;}}
\DoxyCodeLine{02878\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02879\ \textcolor{comment}{/*\ Use\ the\ 386+-\/compatible\ implementation.\ */}}
\DoxyCodeLine{02880\ \textcolor{preprocessor}{\#pragma\ aux\ drflac\_\_clz\_watcom\ =\ \(\backslash\)}}
\DoxyCodeLine{02881\ \textcolor{preprocessor}{\ \ \ \ "{}bsr\ eax,\ eax"{}\ \(\backslash\)}}
\DoxyCodeLine{02882\ \textcolor{preprocessor}{\ \ \ \ "{}xor\ eax,\ 31"{}\ \(\backslash\)}}
\DoxyCodeLine{02883\ \textcolor{preprocessor}{\ \ \ \ parm\ [eax]\ nomemory\ \(\backslash\)}}
\DoxyCodeLine{02884\ \textcolor{preprocessor}{\ \ \ \ value\ [eax]\ \(\backslash\)}}
\DoxyCodeLine{02885\ \textcolor{preprocessor}{\ \ \ \ modify\ exact\ [eax]\ nomemory;}}
\DoxyCodeLine{02886\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02887\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02888\ }
\DoxyCodeLine{02889\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_\_clz(drflac\_cache\_t\ x)}
\DoxyCodeLine{02890\ \{}
\DoxyCodeLine{02891\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_IMPLEMENT\_CLZ\_LZCNT}}
\DoxyCodeLine{02892\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_is\_lzcnt\_supported())\ \{}
\DoxyCodeLine{02893\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_clz\_lzcnt(x);}
\DoxyCodeLine{02894\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02895\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02896\ \ \ \ \ \{}
\DoxyCodeLine{02897\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_IMPLEMENT\_CLZ\_MSVC}}
\DoxyCodeLine{02898\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_clz\_msvc(x);}
\DoxyCodeLine{02899\ \textcolor{preprocessor}{\#elif\ defined(DRFLAC\_IMPLEMENT\_CLZ\_WATCOM\_LZCNT)}}
\DoxyCodeLine{02900\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_clz\_watcom\_lzcnt(x);}
\DoxyCodeLine{02901\ \textcolor{preprocessor}{\#elif\ defined(DRFLAC\_IMPLEMENT\_CLZ\_WATCOM)}}
\DoxyCodeLine{02902\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (x\ ==\ 0)\ ?\ \textcolor{keyword}{sizeof}(x)*8\ :\ drflac\_\_clz\_watcom(x);}
\DoxyCodeLine{02903\ \textcolor{preprocessor}{\#elif\ defined(\_\_MRC\_\_)}}
\DoxyCodeLine{02904\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_\_cntlzw(x);}
\DoxyCodeLine{02905\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02906\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_clz\_software(x);}
\DoxyCodeLine{02907\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02908\ \ \ \ \ \}}
\DoxyCodeLine{02909\ \}}
\DoxyCodeLine{02910\ }
\DoxyCodeLine{02911\ }
\DoxyCodeLine{02912\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_bool32\ drflac\_\_seek\_past\_next\_set\_bit(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ pOffsetOut)}
\DoxyCodeLine{02913\ \{}
\DoxyCodeLine{02914\ \ \ \ \ drflac\_uint32\ zeroCounter\ =\ 0;}
\DoxyCodeLine{02915\ \ \ \ \ drflac\_uint32\ setBitOffsetPlus1;}
\DoxyCodeLine{02916\ }
\DoxyCodeLine{02917\ \ \ \ \ \textcolor{keywordflow}{while}\ (bs-\/>cache\ ==\ 0)\ \{}
\DoxyCodeLine{02918\ \ \ \ \ \ \ \ \ zeroCounter\ +=\ (drflac\_uint32)DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs);}
\DoxyCodeLine{02919\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_reload\_cache(bs))\ \{}
\DoxyCodeLine{02920\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02921\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02922\ \ \ \ \ \}}
\DoxyCodeLine{02923\ }
\DoxyCodeLine{02924\ \ \ \ \ \textcolor{keywordflow}{if}\ (bs-\/>cache\ ==\ 1)\ \{}
\DoxyCodeLine{02925\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Not\ catching\ this\ would\ lead\ to\ undefined\ behaviour:\ a\ shift\ of\ a\ 32-\/bit\ number\ by\ 32\ or\ more\ is\ undefined\ */}}
\DoxyCodeLine{02926\ \ \ \ \ \ \ \ \ *pOffsetOut\ =\ zeroCounter\ +\ (drflac\_uint32)DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs)\ -\/\ 1;}
\DoxyCodeLine{02927\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_reload\_cache(bs))\ \{}
\DoxyCodeLine{02928\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02929\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02930\ }
\DoxyCodeLine{02931\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02932\ \ \ \ \ \}}
\DoxyCodeLine{02933\ }
\DoxyCodeLine{02934\ \ \ \ \ setBitOffsetPlus1\ =\ drflac\_\_clz(bs-\/>cache);}
\DoxyCodeLine{02935\ \ \ \ \ setBitOffsetPlus1\ +=\ 1;}
\DoxyCodeLine{02936\ }
\DoxyCodeLine{02937\ \ \ \ \ \textcolor{keywordflow}{if}\ (setBitOffsetPlus1\ >\ DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs))\ \{}
\DoxyCodeLine{02938\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ This\ happens\ when\ we\ get\ to\ end\ of\ stream\ */}}
\DoxyCodeLine{02939\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02940\ \ \ \ \ \}}
\DoxyCodeLine{02941\ }
\DoxyCodeLine{02942\ \ \ \ \ bs-\/>consumedBits\ +=\ setBitOffsetPlus1;}
\DoxyCodeLine{02943\ \ \ \ \ bs-\/>cache\ <<=\ setBitOffsetPlus1;}
\DoxyCodeLine{02944\ }
\DoxyCodeLine{02945\ \ \ \ \ *pOffsetOut\ =\ zeroCounter\ +\ setBitOffsetPlus1\ -\/\ 1;}
\DoxyCodeLine{02946\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02947\ \}}
\DoxyCodeLine{02948\ }
\DoxyCodeLine{02949\ }
\DoxyCodeLine{02950\ }
\DoxyCodeLine{02951\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_seek\_to\_byte(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint64\ offsetFromStart)}
\DoxyCodeLine{02952\ \{}
\DoxyCodeLine{02953\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{02954\ \ \ \ \ DRFLAC\_ASSERT(offsetFromStart\ >\ 0);}
\DoxyCodeLine{02955\ }
\DoxyCodeLine{02956\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{02957\ \textcolor{comment}{\ \ \ \ Seeking\ from\ the\ start\ is\ not\ quite\ as\ trivial\ as\ it\ sounds\ because\ the\ onSeek\ callback\ takes\ a\ signed\ 32-\/bit\ integer\ (which}}
\DoxyCodeLine{02958\ \textcolor{comment}{\ \ \ \ is\ intentional\ because\ it\ simplifies\ the\ implementation\ of\ the\ onSeek\ callbacks),\ however\ offsetFromStart\ is\ unsigned\ 64-\/bit.}}
\DoxyCodeLine{02959\ \textcolor{comment}{\ \ \ \ To\ resolve\ we\ just\ need\ to\ do\ an\ initial\ seek\ from\ the\ start,\ and\ then\ a\ series\ of\ offset\ seeks\ to\ make\ up\ the\ remainder.}}
\DoxyCodeLine{02960\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{02961\ \ \ \ \ \textcolor{keywordflow}{if}\ (offsetFromStart\ >\ 0x7FFFFFFF)\ \{}
\DoxyCodeLine{02962\ \ \ \ \ \ \ \ \ drflac\_uint64\ bytesRemaining\ =\ offsetFromStart;}
\DoxyCodeLine{02963\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!bs-\/>onSeek(bs-\/>pUserData,\ 0x7FFFFFFF,\ drflac\_seek\_origin\_start))\ \{}
\DoxyCodeLine{02964\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02965\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02966\ \ \ \ \ \ \ \ \ bytesRemaining\ -\/=\ 0x7FFFFFFF;}
\DoxyCodeLine{02967\ }
\DoxyCodeLine{02968\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (bytesRemaining\ >\ 0x7FFFFFFF)\ \{}
\DoxyCodeLine{02969\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!bs-\/>onSeek(bs-\/>pUserData,\ 0x7FFFFFFF,\ drflac\_seek\_origin\_current))\ \{}
\DoxyCodeLine{02970\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02971\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02972\ \ \ \ \ \ \ \ \ \ \ \ \ bytesRemaining\ -\/=\ 0x7FFFFFFF;}
\DoxyCodeLine{02973\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02974\ }
\DoxyCodeLine{02975\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bytesRemaining\ >\ 0)\ \{}
\DoxyCodeLine{02976\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!bs-\/>onSeek(bs-\/>pUserData,\ (\textcolor{keywordtype}{int})bytesRemaining,\ drflac\_seek\_origin\_current))\ \{}
\DoxyCodeLine{02977\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02978\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02979\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02980\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{02981\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!bs-\/>onSeek(bs-\/>pUserData,\ (\textcolor{keywordtype}{int})offsetFromStart,\ drflac\_seek\_origin\_start))\ \{}
\DoxyCodeLine{02982\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{02983\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02984\ \ \ \ \ \}}
\DoxyCodeLine{02985\ }
\DoxyCodeLine{02986\ \ \ \ \ \textcolor{comment}{/*\ The\ cache\ should\ be\ reset\ to\ force\ a\ reload\ of\ fresh\ data\ from\ the\ client.\ */}}
\DoxyCodeLine{02987\ \ \ \ \ drflac\_\_reset\_cache(bs);}
\DoxyCodeLine{02988\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{02989\ \}}
\DoxyCodeLine{02990\ }
\DoxyCodeLine{02991\ }
\DoxyCodeLine{02992\ \textcolor{keyword}{static}\ drflac\_result\ drflac\_\_read\_utf8\_coded\_number(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint64*\ pNumberOut,\ drflac\_uint8*\ pCRCOut)}
\DoxyCodeLine{02993\ \{}
\DoxyCodeLine{02994\ \ \ \ \ drflac\_uint8\ crc;}
\DoxyCodeLine{02995\ \ \ \ \ drflac\_uint64\ result;}
\DoxyCodeLine{02996\ \ \ \ \ drflac\_uint8\ utf8[7]\ =\ \{0\};}
\DoxyCodeLine{02997\ \ \ \ \ \textcolor{keywordtype}{int}\ byteCount;}
\DoxyCodeLine{02998\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{02999\ }
\DoxyCodeLine{03000\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{03001\ \ \ \ \ DRFLAC\_ASSERT(pNumberOut\ !=\ NULL);}
\DoxyCodeLine{03002\ \ \ \ \ DRFLAC\_ASSERT(pCRCOut\ !=\ NULL);}
\DoxyCodeLine{03003\ }
\DoxyCodeLine{03004\ \ \ \ \ crc\ =\ *pCRCOut;}
\DoxyCodeLine{03005\ }
\DoxyCodeLine{03006\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 8,\ utf8))\ \{}
\DoxyCodeLine{03007\ \ \ \ \ \ \ \ \ *pNumberOut\ =\ 0;}
\DoxyCodeLine{03008\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_AT\_END;}
\DoxyCodeLine{03009\ \ \ \ \ \}}
\DoxyCodeLine{03010\ \ \ \ \ crc\ =\ drflac\_crc8(crc,\ utf8[0],\ 8);}
\DoxyCodeLine{03011\ }
\DoxyCodeLine{03012\ \ \ \ \ \textcolor{keywordflow}{if}\ ((utf8[0]\ \&\ 0x80)\ ==\ 0)\ \{}
\DoxyCodeLine{03013\ \ \ \ \ \ \ \ \ *pNumberOut\ =\ utf8[0];}
\DoxyCodeLine{03014\ \ \ \ \ \ \ \ \ *pCRCOut\ =\ crc;}
\DoxyCodeLine{03015\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_SUCCESS;}
\DoxyCodeLine{03016\ \ \ \ \ \}}
\DoxyCodeLine{03017\ }
\DoxyCodeLine{03018\ \ \ \ \ \textcolor{comment}{/*byteCount\ =\ 1;*/}}
\DoxyCodeLine{03019\ \ \ \ \ \textcolor{keywordflow}{if}\ ((utf8[0]\ \&\ 0xE0)\ ==\ 0xC0)\ \{}
\DoxyCodeLine{03020\ \ \ \ \ \ \ \ \ byteCount\ =\ 2;}
\DoxyCodeLine{03021\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((utf8[0]\ \&\ 0xF0)\ ==\ 0xE0)\ \{}
\DoxyCodeLine{03022\ \ \ \ \ \ \ \ \ byteCount\ =\ 3;}
\DoxyCodeLine{03023\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((utf8[0]\ \&\ 0xF8)\ ==\ 0xF0)\ \{}
\DoxyCodeLine{03024\ \ \ \ \ \ \ \ \ byteCount\ =\ 4;}
\DoxyCodeLine{03025\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((utf8[0]\ \&\ 0xFC)\ ==\ 0xF8)\ \{}
\DoxyCodeLine{03026\ \ \ \ \ \ \ \ \ byteCount\ =\ 5;}
\DoxyCodeLine{03027\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((utf8[0]\ \&\ 0xFE)\ ==\ 0xFC)\ \{}
\DoxyCodeLine{03028\ \ \ \ \ \ \ \ \ byteCount\ =\ 6;}
\DoxyCodeLine{03029\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((utf8[0]\ \&\ 0xFF)\ ==\ 0xFE)\ \{}
\DoxyCodeLine{03030\ \ \ \ \ \ \ \ \ byteCount\ =\ 7;}
\DoxyCodeLine{03031\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03032\ \ \ \ \ \ \ \ \ *pNumberOut\ =\ 0;}
\DoxyCodeLine{03033\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_CRC\_MISMATCH;\ \ \ \ \ \textcolor{comment}{/*\ Bad\ UTF-\/8\ encoding.\ */}}
\DoxyCodeLine{03034\ \ \ \ \ \}}
\DoxyCodeLine{03035\ }
\DoxyCodeLine{03036\ \ \ \ \ \textcolor{comment}{/*\ Read\ extra\ bytes.\ */}}
\DoxyCodeLine{03037\ \ \ \ \ DRFLAC\_ASSERT(byteCount\ >\ 1);}
\DoxyCodeLine{03038\ }
\DoxyCodeLine{03039\ \ \ \ \ result\ =\ (drflac\_uint64)(utf8[0]\ \&\ (0xFF\ >>\ (byteCount\ +\ 1)));}
\DoxyCodeLine{03040\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 1;\ i\ <\ byteCount;\ ++i)\ \{}
\DoxyCodeLine{03041\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 8,\ utf8\ +\ i))\ \{}
\DoxyCodeLine{03042\ \ \ \ \ \ \ \ \ \ \ \ \ *pNumberOut\ =\ 0;}
\DoxyCodeLine{03043\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_AT\_END;}
\DoxyCodeLine{03044\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03045\ \ \ \ \ \ \ \ \ crc\ =\ drflac\_crc8(crc,\ utf8[i],\ 8);}
\DoxyCodeLine{03046\ }
\DoxyCodeLine{03047\ \ \ \ \ \ \ \ \ result\ =\ (result\ <<\ 6)\ |\ (utf8[i]\ \&\ 0x3F);}
\DoxyCodeLine{03048\ \ \ \ \ \}}
\DoxyCodeLine{03049\ }
\DoxyCodeLine{03050\ \ \ \ \ *pNumberOut\ =\ result;}
\DoxyCodeLine{03051\ \ \ \ \ *pCRCOut\ =\ crc;}
\DoxyCodeLine{03052\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_SUCCESS;}
\DoxyCodeLine{03053\ \}}
\DoxyCodeLine{03054\ }
\DoxyCodeLine{03055\ }
\DoxyCodeLine{03056\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_\_ilog2\_u32(drflac\_uint32\ x)}
\DoxyCodeLine{03057\ \{}
\DoxyCodeLine{03058\ \textcolor{preprocessor}{\#if\ 1\ \ \ }\textcolor{comment}{/*\ Needs\ optimizing.\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{03059\ \ \ \ \ drflac\_uint32\ result\ =\ 0;}
\DoxyCodeLine{03060\ \ \ \ \ \textcolor{keywordflow}{while}\ (x\ >\ 0)\ \{}
\DoxyCodeLine{03061\ \ \ \ \ \ \ \ \ result\ +=\ 1;}
\DoxyCodeLine{03062\ \ \ \ \ \ \ \ \ x\ >>=\ 1;}
\DoxyCodeLine{03063\ \ \ \ \ \}}
\DoxyCodeLine{03064\ }
\DoxyCodeLine{03065\ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{03066\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{03067\ \}}
\DoxyCodeLine{03068\ }
\DoxyCodeLine{03069\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_bool32\ drflac\_\_use\_64\_bit\_prediction(drflac\_uint32\ bitsPerSample,\ drflac\_uint32\ order,\ drflac\_uint32\ precision)}
\DoxyCodeLine{03070\ \{}
\DoxyCodeLine{03071\ \ \ \ \ \textcolor{comment}{/*\ https://web.archive.org/web/20220205005724/https://github.com/ietf-\/wg-\/cellar/flac-\/specification/blob/37a49aa48ba4ba12e8757badfc59c0df35435fec/rfc\_backmatter.md\ */}}
\DoxyCodeLine{03072\ \ \ \ \ \textcolor{keywordflow}{return}\ bitsPerSample\ +\ precision\ +\ drflac\_\_ilog2\_u32(order)\ >\ 32;}
\DoxyCodeLine{03073\ \}}
\DoxyCodeLine{03074\ }
\DoxyCodeLine{03075\ }
\DoxyCodeLine{03076\ \textcolor{comment}{/*}}
\DoxyCodeLine{03077\ \textcolor{comment}{The\ next\ two\ functions\ are\ responsible\ for\ calculating\ the\ prediction.}}
\DoxyCodeLine{03078\ \textcolor{comment}{}}
\DoxyCodeLine{03079\ \textcolor{comment}{When\ the\ bits\ per\ sample\ is\ >16\ we\ need\ to\ use\ 64-\/bit\ integer\ arithmetic\ because\ otherwise\ we'll\ run\ out\ of\ precision.\ It's}}
\DoxyCodeLine{03080\ \textcolor{comment}{safe\ to\ assume\ this\ will\ be\ slower\ on\ 32-\/bit\ platforms\ so\ we\ use\ a\ more\ optimal\ solution\ when\ the\ bits\ per\ sample\ is\ <=16.}}
\DoxyCodeLine{03081\ \textcolor{comment}{*/}}
\DoxyCodeLine{03082\ \textcolor{preprocessor}{\#if\ defined(\_\_clang\_\_)}}
\DoxyCodeLine{03083\ \_\_attribute\_\_((no\_sanitize(\textcolor{stringliteral}{"{}signed-\/integer-\/overflow"{}})))}
\DoxyCodeLine{03084\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{03085\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_int32\ drflac\_\_calculate\_prediction\_32(drflac\_uint32\ order,\ drflac\_int32\ shift,\ \textcolor{keyword}{const}\ drflac\_int32*\ coefficients,\ drflac\_int32*\ pDecodedSamples)}
\DoxyCodeLine{03086\ \{}
\DoxyCodeLine{03087\ \ \ \ \ drflac\_int32\ prediction\ =\ 0;}
\DoxyCodeLine{03088\ }
\DoxyCodeLine{03089\ \ \ \ \ DRFLAC\_ASSERT(order\ <=\ 32);}
\DoxyCodeLine{03090\ }
\DoxyCodeLine{03091\ \ \ \ \ \textcolor{comment}{/*\ 32-\/bit\ version.\ */}}
\DoxyCodeLine{03092\ }
\DoxyCodeLine{03093\ \ \ \ \ \textcolor{comment}{/*\ VC++\ optimizes\ this\ to\ a\ single\ jmp.\ I've\ not\ yet\ verified\ this\ for\ other\ compilers.\ */}}
\DoxyCodeLine{03094\ \ \ \ \ \textcolor{keywordflow}{switch}\ (order)}
\DoxyCodeLine{03095\ \ \ \ \ \{}
\DoxyCodeLine{03096\ \ \ \ \ \textcolor{keywordflow}{case}\ 32:\ prediction\ +=\ coefficients[31]\ *\ pDecodedSamples[-\/32];}
\DoxyCodeLine{03097\ \ \ \ \ \textcolor{keywordflow}{case}\ 31:\ prediction\ +=\ coefficients[30]\ *\ pDecodedSamples[-\/31];}
\DoxyCodeLine{03098\ \ \ \ \ \textcolor{keywordflow}{case}\ 30:\ prediction\ +=\ coefficients[29]\ *\ pDecodedSamples[-\/30];}
\DoxyCodeLine{03099\ \ \ \ \ \textcolor{keywordflow}{case}\ 29:\ prediction\ +=\ coefficients[28]\ *\ pDecodedSamples[-\/29];}
\DoxyCodeLine{03100\ \ \ \ \ \textcolor{keywordflow}{case}\ 28:\ prediction\ +=\ coefficients[27]\ *\ pDecodedSamples[-\/28];}
\DoxyCodeLine{03101\ \ \ \ \ \textcolor{keywordflow}{case}\ 27:\ prediction\ +=\ coefficients[26]\ *\ pDecodedSamples[-\/27];}
\DoxyCodeLine{03102\ \ \ \ \ \textcolor{keywordflow}{case}\ 26:\ prediction\ +=\ coefficients[25]\ *\ pDecodedSamples[-\/26];}
\DoxyCodeLine{03103\ \ \ \ \ \textcolor{keywordflow}{case}\ 25:\ prediction\ +=\ coefficients[24]\ *\ pDecodedSamples[-\/25];}
\DoxyCodeLine{03104\ \ \ \ \ \textcolor{keywordflow}{case}\ 24:\ prediction\ +=\ coefficients[23]\ *\ pDecodedSamples[-\/24];}
\DoxyCodeLine{03105\ \ \ \ \ \textcolor{keywordflow}{case}\ 23:\ prediction\ +=\ coefficients[22]\ *\ pDecodedSamples[-\/23];}
\DoxyCodeLine{03106\ \ \ \ \ \textcolor{keywordflow}{case}\ 22:\ prediction\ +=\ coefficients[21]\ *\ pDecodedSamples[-\/22];}
\DoxyCodeLine{03107\ \ \ \ \ \textcolor{keywordflow}{case}\ 21:\ prediction\ +=\ coefficients[20]\ *\ pDecodedSamples[-\/21];}
\DoxyCodeLine{03108\ \ \ \ \ \textcolor{keywordflow}{case}\ 20:\ prediction\ +=\ coefficients[19]\ *\ pDecodedSamples[-\/20];}
\DoxyCodeLine{03109\ \ \ \ \ \textcolor{keywordflow}{case}\ 19:\ prediction\ +=\ coefficients[18]\ *\ pDecodedSamples[-\/19];}
\DoxyCodeLine{03110\ \ \ \ \ \textcolor{keywordflow}{case}\ 18:\ prediction\ +=\ coefficients[17]\ *\ pDecodedSamples[-\/18];}
\DoxyCodeLine{03111\ \ \ \ \ \textcolor{keywordflow}{case}\ 17:\ prediction\ +=\ coefficients[16]\ *\ pDecodedSamples[-\/17];}
\DoxyCodeLine{03112\ \ \ \ \ \textcolor{keywordflow}{case}\ 16:\ prediction\ +=\ coefficients[15]\ *\ pDecodedSamples[-\/16];}
\DoxyCodeLine{03113\ \ \ \ \ \textcolor{keywordflow}{case}\ 15:\ prediction\ +=\ coefficients[14]\ *\ pDecodedSamples[-\/15];}
\DoxyCodeLine{03114\ \ \ \ \ \textcolor{keywordflow}{case}\ 14:\ prediction\ +=\ coefficients[13]\ *\ pDecodedSamples[-\/14];}
\DoxyCodeLine{03115\ \ \ \ \ \textcolor{keywordflow}{case}\ 13:\ prediction\ +=\ coefficients[12]\ *\ pDecodedSamples[-\/13];}
\DoxyCodeLine{03116\ \ \ \ \ \textcolor{keywordflow}{case}\ 12:\ prediction\ +=\ coefficients[11]\ *\ pDecodedSamples[-\/12];}
\DoxyCodeLine{03117\ \ \ \ \ \textcolor{keywordflow}{case}\ 11:\ prediction\ +=\ coefficients[10]\ *\ pDecodedSamples[-\/11];}
\DoxyCodeLine{03118\ \ \ \ \ \textcolor{keywordflow}{case}\ 10:\ prediction\ +=\ coefficients[\ 9]\ *\ pDecodedSamples[-\/10];}
\DoxyCodeLine{03119\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 9:\ prediction\ +=\ coefficients[\ 8]\ *\ pDecodedSamples[-\/\ 9];}
\DoxyCodeLine{03120\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 8:\ prediction\ +=\ coefficients[\ 7]\ *\ pDecodedSamples[-\/\ 8];}
\DoxyCodeLine{03121\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 7:\ prediction\ +=\ coefficients[\ 6]\ *\ pDecodedSamples[-\/\ 7];}
\DoxyCodeLine{03122\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 6:\ prediction\ +=\ coefficients[\ 5]\ *\ pDecodedSamples[-\/\ 6];}
\DoxyCodeLine{03123\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 5:\ prediction\ +=\ coefficients[\ 4]\ *\ pDecodedSamples[-\/\ 5];}
\DoxyCodeLine{03124\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 4:\ prediction\ +=\ coefficients[\ 3]\ *\ pDecodedSamples[-\/\ 4];}
\DoxyCodeLine{03125\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 3:\ prediction\ +=\ coefficients[\ 2]\ *\ pDecodedSamples[-\/\ 3];}
\DoxyCodeLine{03126\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 2:\ prediction\ +=\ coefficients[\ 1]\ *\ pDecodedSamples[-\/\ 2];}
\DoxyCodeLine{03127\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 1:\ prediction\ +=\ coefficients[\ 0]\ *\ pDecodedSamples[-\/\ 1];}
\DoxyCodeLine{03128\ \ \ \ \ \}}
\DoxyCodeLine{03129\ }
\DoxyCodeLine{03130\ \ \ \ \ \textcolor{keywordflow}{return}\ (drflac\_int32)(prediction\ >>\ shift);}
\DoxyCodeLine{03131\ \}}
\DoxyCodeLine{03132\ }
\DoxyCodeLine{03133\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_int32\ drflac\_\_calculate\_prediction\_64(drflac\_uint32\ order,\ drflac\_int32\ shift,\ \textcolor{keyword}{const}\ drflac\_int32*\ coefficients,\ drflac\_int32*\ pDecodedSamples)}
\DoxyCodeLine{03134\ \{}
\DoxyCodeLine{03135\ \ \ \ \ drflac\_int64\ prediction;}
\DoxyCodeLine{03136\ }
\DoxyCodeLine{03137\ \ \ \ \ DRFLAC\_ASSERT(order\ <=\ 32);}
\DoxyCodeLine{03138\ }
\DoxyCodeLine{03139\ \ \ \ \ \textcolor{comment}{/*\ 64-\/bit\ version.\ */}}
\DoxyCodeLine{03140\ }
\DoxyCodeLine{03141\ \ \ \ \ \textcolor{comment}{/*\ This\ method\ is\ faster\ on\ the\ 32-\/bit\ build\ when\ compiling\ with\ VC++.\ See\ note\ below.\ */}}
\DoxyCodeLine{03142\ \textcolor{preprocessor}{\#ifndef\ DRFLAC\_64BIT}}
\DoxyCodeLine{03143\ \ \ \ \ \textcolor{keywordflow}{if}\ (order\ ==\ 8)}
\DoxyCodeLine{03144\ \ \ \ \ \{}
\DoxyCodeLine{03145\ \ \ \ \ \ \ \ \ prediction\ \ =\ coefficients[0]\ *\ (drflac\_int64)pDecodedSamples[-\/1];}
\DoxyCodeLine{03146\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[1]\ *\ (drflac\_int64)pDecodedSamples[-\/2];}
\DoxyCodeLine{03147\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[2]\ *\ (drflac\_int64)pDecodedSamples[-\/3];}
\DoxyCodeLine{03148\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[3]\ *\ (drflac\_int64)pDecodedSamples[-\/4];}
\DoxyCodeLine{03149\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[4]\ *\ (drflac\_int64)pDecodedSamples[-\/5];}
\DoxyCodeLine{03150\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[5]\ *\ (drflac\_int64)pDecodedSamples[-\/6];}
\DoxyCodeLine{03151\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[6]\ *\ (drflac\_int64)pDecodedSamples[-\/7];}
\DoxyCodeLine{03152\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[7]\ *\ (drflac\_int64)pDecodedSamples[-\/8];}
\DoxyCodeLine{03153\ \ \ \ \ \}}
\DoxyCodeLine{03154\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (order\ ==\ 7)}
\DoxyCodeLine{03155\ \ \ \ \ \{}
\DoxyCodeLine{03156\ \ \ \ \ \ \ \ \ prediction\ \ =\ coefficients[0]\ *\ (drflac\_int64)pDecodedSamples[-\/1];}
\DoxyCodeLine{03157\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[1]\ *\ (drflac\_int64)pDecodedSamples[-\/2];}
\DoxyCodeLine{03158\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[2]\ *\ (drflac\_int64)pDecodedSamples[-\/3];}
\DoxyCodeLine{03159\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[3]\ *\ (drflac\_int64)pDecodedSamples[-\/4];}
\DoxyCodeLine{03160\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[4]\ *\ (drflac\_int64)pDecodedSamples[-\/5];}
\DoxyCodeLine{03161\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[5]\ *\ (drflac\_int64)pDecodedSamples[-\/6];}
\DoxyCodeLine{03162\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[6]\ *\ (drflac\_int64)pDecodedSamples[-\/7];}
\DoxyCodeLine{03163\ \ \ \ \ \}}
\DoxyCodeLine{03164\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (order\ ==\ 3)}
\DoxyCodeLine{03165\ \ \ \ \ \{}
\DoxyCodeLine{03166\ \ \ \ \ \ \ \ \ prediction\ \ =\ coefficients[0]\ *\ (drflac\_int64)pDecodedSamples[-\/1];}
\DoxyCodeLine{03167\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[1]\ *\ (drflac\_int64)pDecodedSamples[-\/2];}
\DoxyCodeLine{03168\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[2]\ *\ (drflac\_int64)pDecodedSamples[-\/3];}
\DoxyCodeLine{03169\ \ \ \ \ \}}
\DoxyCodeLine{03170\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (order\ ==\ 6)}
\DoxyCodeLine{03171\ \ \ \ \ \{}
\DoxyCodeLine{03172\ \ \ \ \ \ \ \ \ prediction\ \ =\ coefficients[0]\ *\ (drflac\_int64)pDecodedSamples[-\/1];}
\DoxyCodeLine{03173\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[1]\ *\ (drflac\_int64)pDecodedSamples[-\/2];}
\DoxyCodeLine{03174\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[2]\ *\ (drflac\_int64)pDecodedSamples[-\/3];}
\DoxyCodeLine{03175\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[3]\ *\ (drflac\_int64)pDecodedSamples[-\/4];}
\DoxyCodeLine{03176\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[4]\ *\ (drflac\_int64)pDecodedSamples[-\/5];}
\DoxyCodeLine{03177\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[5]\ *\ (drflac\_int64)pDecodedSamples[-\/6];}
\DoxyCodeLine{03178\ \ \ \ \ \}}
\DoxyCodeLine{03179\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (order\ ==\ 5)}
\DoxyCodeLine{03180\ \ \ \ \ \{}
\DoxyCodeLine{03181\ \ \ \ \ \ \ \ \ prediction\ \ =\ coefficients[0]\ *\ (drflac\_int64)pDecodedSamples[-\/1];}
\DoxyCodeLine{03182\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[1]\ *\ (drflac\_int64)pDecodedSamples[-\/2];}
\DoxyCodeLine{03183\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[2]\ *\ (drflac\_int64)pDecodedSamples[-\/3];}
\DoxyCodeLine{03184\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[3]\ *\ (drflac\_int64)pDecodedSamples[-\/4];}
\DoxyCodeLine{03185\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[4]\ *\ (drflac\_int64)pDecodedSamples[-\/5];}
\DoxyCodeLine{03186\ \ \ \ \ \}}
\DoxyCodeLine{03187\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (order\ ==\ 4)}
\DoxyCodeLine{03188\ \ \ \ \ \{}
\DoxyCodeLine{03189\ \ \ \ \ \ \ \ \ prediction\ \ =\ coefficients[0]\ *\ (drflac\_int64)pDecodedSamples[-\/1];}
\DoxyCodeLine{03190\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[1]\ *\ (drflac\_int64)pDecodedSamples[-\/2];}
\DoxyCodeLine{03191\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[2]\ *\ (drflac\_int64)pDecodedSamples[-\/3];}
\DoxyCodeLine{03192\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[3]\ *\ (drflac\_int64)pDecodedSamples[-\/4];}
\DoxyCodeLine{03193\ \ \ \ \ \}}
\DoxyCodeLine{03194\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (order\ ==\ 12)}
\DoxyCodeLine{03195\ \ \ \ \ \{}
\DoxyCodeLine{03196\ \ \ \ \ \ \ \ \ prediction\ \ =\ coefficients[0]\ \ *\ (drflac\_int64)pDecodedSamples[-\/1];}
\DoxyCodeLine{03197\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[1]\ \ *\ (drflac\_int64)pDecodedSamples[-\/2];}
\DoxyCodeLine{03198\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[2]\ \ *\ (drflac\_int64)pDecodedSamples[-\/3];}
\DoxyCodeLine{03199\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[3]\ \ *\ (drflac\_int64)pDecodedSamples[-\/4];}
\DoxyCodeLine{03200\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[4]\ \ *\ (drflac\_int64)pDecodedSamples[-\/5];}
\DoxyCodeLine{03201\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[5]\ \ *\ (drflac\_int64)pDecodedSamples[-\/6];}
\DoxyCodeLine{03202\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[6]\ \ *\ (drflac\_int64)pDecodedSamples[-\/7];}
\DoxyCodeLine{03203\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[7]\ \ *\ (drflac\_int64)pDecodedSamples[-\/8];}
\DoxyCodeLine{03204\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[8]\ \ *\ (drflac\_int64)pDecodedSamples[-\/9];}
\DoxyCodeLine{03205\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[9]\ \ *\ (drflac\_int64)pDecodedSamples[-\/10];}
\DoxyCodeLine{03206\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[10]\ *\ (drflac\_int64)pDecodedSamples[-\/11];}
\DoxyCodeLine{03207\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[11]\ *\ (drflac\_int64)pDecodedSamples[-\/12];}
\DoxyCodeLine{03208\ \ \ \ \ \}}
\DoxyCodeLine{03209\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (order\ ==\ 2)}
\DoxyCodeLine{03210\ \ \ \ \ \{}
\DoxyCodeLine{03211\ \ \ \ \ \ \ \ \ prediction\ \ =\ coefficients[0]\ *\ (drflac\_int64)pDecodedSamples[-\/1];}
\DoxyCodeLine{03212\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[1]\ *\ (drflac\_int64)pDecodedSamples[-\/2];}
\DoxyCodeLine{03213\ \ \ \ \ \}}
\DoxyCodeLine{03214\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (order\ ==\ 1)}
\DoxyCodeLine{03215\ \ \ \ \ \{}
\DoxyCodeLine{03216\ \ \ \ \ \ \ \ \ prediction\ =\ coefficients[0]\ *\ (drflac\_int64)pDecodedSamples[-\/1];}
\DoxyCodeLine{03217\ \ \ \ \ \}}
\DoxyCodeLine{03218\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (order\ ==\ 10)}
\DoxyCodeLine{03219\ \ \ \ \ \{}
\DoxyCodeLine{03220\ \ \ \ \ \ \ \ \ prediction\ \ =\ coefficients[0]\ \ *\ (drflac\_int64)pDecodedSamples[-\/1];}
\DoxyCodeLine{03221\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[1]\ \ *\ (drflac\_int64)pDecodedSamples[-\/2];}
\DoxyCodeLine{03222\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[2]\ \ *\ (drflac\_int64)pDecodedSamples[-\/3];}
\DoxyCodeLine{03223\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[3]\ \ *\ (drflac\_int64)pDecodedSamples[-\/4];}
\DoxyCodeLine{03224\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[4]\ \ *\ (drflac\_int64)pDecodedSamples[-\/5];}
\DoxyCodeLine{03225\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[5]\ \ *\ (drflac\_int64)pDecodedSamples[-\/6];}
\DoxyCodeLine{03226\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[6]\ \ *\ (drflac\_int64)pDecodedSamples[-\/7];}
\DoxyCodeLine{03227\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[7]\ \ *\ (drflac\_int64)pDecodedSamples[-\/8];}
\DoxyCodeLine{03228\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[8]\ \ *\ (drflac\_int64)pDecodedSamples[-\/9];}
\DoxyCodeLine{03229\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[9]\ \ *\ (drflac\_int64)pDecodedSamples[-\/10];}
\DoxyCodeLine{03230\ \ \ \ \ \}}
\DoxyCodeLine{03231\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (order\ ==\ 9)}
\DoxyCodeLine{03232\ \ \ \ \ \{}
\DoxyCodeLine{03233\ \ \ \ \ \ \ \ \ prediction\ \ =\ coefficients[0]\ \ *\ (drflac\_int64)pDecodedSamples[-\/1];}
\DoxyCodeLine{03234\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[1]\ \ *\ (drflac\_int64)pDecodedSamples[-\/2];}
\DoxyCodeLine{03235\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[2]\ \ *\ (drflac\_int64)pDecodedSamples[-\/3];}
\DoxyCodeLine{03236\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[3]\ \ *\ (drflac\_int64)pDecodedSamples[-\/4];}
\DoxyCodeLine{03237\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[4]\ \ *\ (drflac\_int64)pDecodedSamples[-\/5];}
\DoxyCodeLine{03238\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[5]\ \ *\ (drflac\_int64)pDecodedSamples[-\/6];}
\DoxyCodeLine{03239\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[6]\ \ *\ (drflac\_int64)pDecodedSamples[-\/7];}
\DoxyCodeLine{03240\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[7]\ \ *\ (drflac\_int64)pDecodedSamples[-\/8];}
\DoxyCodeLine{03241\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[8]\ \ *\ (drflac\_int64)pDecodedSamples[-\/9];}
\DoxyCodeLine{03242\ \ \ \ \ \}}
\DoxyCodeLine{03243\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (order\ ==\ 11)}
\DoxyCodeLine{03244\ \ \ \ \ \{}
\DoxyCodeLine{03245\ \ \ \ \ \ \ \ \ prediction\ \ =\ coefficients[0]\ \ *\ (drflac\_int64)pDecodedSamples[-\/1];}
\DoxyCodeLine{03246\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[1]\ \ *\ (drflac\_int64)pDecodedSamples[-\/2];}
\DoxyCodeLine{03247\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[2]\ \ *\ (drflac\_int64)pDecodedSamples[-\/3];}
\DoxyCodeLine{03248\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[3]\ \ *\ (drflac\_int64)pDecodedSamples[-\/4];}
\DoxyCodeLine{03249\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[4]\ \ *\ (drflac\_int64)pDecodedSamples[-\/5];}
\DoxyCodeLine{03250\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[5]\ \ *\ (drflac\_int64)pDecodedSamples[-\/6];}
\DoxyCodeLine{03251\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[6]\ \ *\ (drflac\_int64)pDecodedSamples[-\/7];}
\DoxyCodeLine{03252\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[7]\ \ *\ (drflac\_int64)pDecodedSamples[-\/8];}
\DoxyCodeLine{03253\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[8]\ \ *\ (drflac\_int64)pDecodedSamples[-\/9];}
\DoxyCodeLine{03254\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[9]\ \ *\ (drflac\_int64)pDecodedSamples[-\/10];}
\DoxyCodeLine{03255\ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[10]\ *\ (drflac\_int64)pDecodedSamples[-\/11];}
\DoxyCodeLine{03256\ \ \ \ \ \}}
\DoxyCodeLine{03257\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{03258\ \ \ \ \ \{}
\DoxyCodeLine{03259\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ j;}
\DoxyCodeLine{03260\ }
\DoxyCodeLine{03261\ \ \ \ \ \ \ \ \ prediction\ =\ 0;}
\DoxyCodeLine{03262\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (j\ =\ 0;\ j\ <\ (int)order;\ ++j)\ \{}
\DoxyCodeLine{03263\ \ \ \ \ \ \ \ \ \ \ \ \ prediction\ +=\ coefficients[j]\ *\ (drflac\_int64)pDecodedSamples[-\/j-\/1];}
\DoxyCodeLine{03264\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03265\ \ \ \ \ \}}
\DoxyCodeLine{03266\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{03267\ }
\DoxyCodeLine{03268\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{03269\ \textcolor{comment}{\ \ \ \ VC++\ optimizes\ this\ to\ a\ single\ jmp\ instruction,\ but\ only\ the\ 64-\/bit\ build.\ The\ 32-\/bit\ build\ generates\ less\ efficient\ code\ for\ some}}
\DoxyCodeLine{03270\ \textcolor{comment}{\ \ \ \ reason.\ The\ ugly\ version\ above\ is\ faster\ so\ we'll\ just\ switch\ between\ the\ two\ depending\ on\ the\ target\ platform.}}
\DoxyCodeLine{03271\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{03272\ \textcolor{preprocessor}{\#ifdef\ DRFLAC\_64BIT}}
\DoxyCodeLine{03273\ \ \ \ \ prediction\ =\ 0;}
\DoxyCodeLine{03274\ \ \ \ \ \textcolor{keywordflow}{switch}\ (order)}
\DoxyCodeLine{03275\ \ \ \ \ \{}
\DoxyCodeLine{03276\ \ \ \ \ \textcolor{keywordflow}{case}\ 32:\ prediction\ +=\ coefficients[31]\ *\ (drflac\_int64)pDecodedSamples[-\/32];}
\DoxyCodeLine{03277\ \ \ \ \ \textcolor{keywordflow}{case}\ 31:\ prediction\ +=\ coefficients[30]\ *\ (drflac\_int64)pDecodedSamples[-\/31];}
\DoxyCodeLine{03278\ \ \ \ \ \textcolor{keywordflow}{case}\ 30:\ prediction\ +=\ coefficients[29]\ *\ (drflac\_int64)pDecodedSamples[-\/30];}
\DoxyCodeLine{03279\ \ \ \ \ \textcolor{keywordflow}{case}\ 29:\ prediction\ +=\ coefficients[28]\ *\ (drflac\_int64)pDecodedSamples[-\/29];}
\DoxyCodeLine{03280\ \ \ \ \ \textcolor{keywordflow}{case}\ 28:\ prediction\ +=\ coefficients[27]\ *\ (drflac\_int64)pDecodedSamples[-\/28];}
\DoxyCodeLine{03281\ \ \ \ \ \textcolor{keywordflow}{case}\ 27:\ prediction\ +=\ coefficients[26]\ *\ (drflac\_int64)pDecodedSamples[-\/27];}
\DoxyCodeLine{03282\ \ \ \ \ \textcolor{keywordflow}{case}\ 26:\ prediction\ +=\ coefficients[25]\ *\ (drflac\_int64)pDecodedSamples[-\/26];}
\DoxyCodeLine{03283\ \ \ \ \ \textcolor{keywordflow}{case}\ 25:\ prediction\ +=\ coefficients[24]\ *\ (drflac\_int64)pDecodedSamples[-\/25];}
\DoxyCodeLine{03284\ \ \ \ \ \textcolor{keywordflow}{case}\ 24:\ prediction\ +=\ coefficients[23]\ *\ (drflac\_int64)pDecodedSamples[-\/24];}
\DoxyCodeLine{03285\ \ \ \ \ \textcolor{keywordflow}{case}\ 23:\ prediction\ +=\ coefficients[22]\ *\ (drflac\_int64)pDecodedSamples[-\/23];}
\DoxyCodeLine{03286\ \ \ \ \ \textcolor{keywordflow}{case}\ 22:\ prediction\ +=\ coefficients[21]\ *\ (drflac\_int64)pDecodedSamples[-\/22];}
\DoxyCodeLine{03287\ \ \ \ \ \textcolor{keywordflow}{case}\ 21:\ prediction\ +=\ coefficients[20]\ *\ (drflac\_int64)pDecodedSamples[-\/21];}
\DoxyCodeLine{03288\ \ \ \ \ \textcolor{keywordflow}{case}\ 20:\ prediction\ +=\ coefficients[19]\ *\ (drflac\_int64)pDecodedSamples[-\/20];}
\DoxyCodeLine{03289\ \ \ \ \ \textcolor{keywordflow}{case}\ 19:\ prediction\ +=\ coefficients[18]\ *\ (drflac\_int64)pDecodedSamples[-\/19];}
\DoxyCodeLine{03290\ \ \ \ \ \textcolor{keywordflow}{case}\ 18:\ prediction\ +=\ coefficients[17]\ *\ (drflac\_int64)pDecodedSamples[-\/18];}
\DoxyCodeLine{03291\ \ \ \ \ \textcolor{keywordflow}{case}\ 17:\ prediction\ +=\ coefficients[16]\ *\ (drflac\_int64)pDecodedSamples[-\/17];}
\DoxyCodeLine{03292\ \ \ \ \ \textcolor{keywordflow}{case}\ 16:\ prediction\ +=\ coefficients[15]\ *\ (drflac\_int64)pDecodedSamples[-\/16];}
\DoxyCodeLine{03293\ \ \ \ \ \textcolor{keywordflow}{case}\ 15:\ prediction\ +=\ coefficients[14]\ *\ (drflac\_int64)pDecodedSamples[-\/15];}
\DoxyCodeLine{03294\ \ \ \ \ \textcolor{keywordflow}{case}\ 14:\ prediction\ +=\ coefficients[13]\ *\ (drflac\_int64)pDecodedSamples[-\/14];}
\DoxyCodeLine{03295\ \ \ \ \ \textcolor{keywordflow}{case}\ 13:\ prediction\ +=\ coefficients[12]\ *\ (drflac\_int64)pDecodedSamples[-\/13];}
\DoxyCodeLine{03296\ \ \ \ \ \textcolor{keywordflow}{case}\ 12:\ prediction\ +=\ coefficients[11]\ *\ (drflac\_int64)pDecodedSamples[-\/12];}
\DoxyCodeLine{03297\ \ \ \ \ \textcolor{keywordflow}{case}\ 11:\ prediction\ +=\ coefficients[10]\ *\ (drflac\_int64)pDecodedSamples[-\/11];}
\DoxyCodeLine{03298\ \ \ \ \ \textcolor{keywordflow}{case}\ 10:\ prediction\ +=\ coefficients[\ 9]\ *\ (drflac\_int64)pDecodedSamples[-\/10];}
\DoxyCodeLine{03299\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 9:\ prediction\ +=\ coefficients[\ 8]\ *\ (drflac\_int64)pDecodedSamples[-\/\ 9];}
\DoxyCodeLine{03300\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 8:\ prediction\ +=\ coefficients[\ 7]\ *\ (drflac\_int64)pDecodedSamples[-\/\ 8];}
\DoxyCodeLine{03301\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 7:\ prediction\ +=\ coefficients[\ 6]\ *\ (drflac\_int64)pDecodedSamples[-\/\ 7];}
\DoxyCodeLine{03302\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 6:\ prediction\ +=\ coefficients[\ 5]\ *\ (drflac\_int64)pDecodedSamples[-\/\ 6];}
\DoxyCodeLine{03303\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 5:\ prediction\ +=\ coefficients[\ 4]\ *\ (drflac\_int64)pDecodedSamples[-\/\ 5];}
\DoxyCodeLine{03304\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 4:\ prediction\ +=\ coefficients[\ 3]\ *\ (drflac\_int64)pDecodedSamples[-\/\ 4];}
\DoxyCodeLine{03305\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 3:\ prediction\ +=\ coefficients[\ 2]\ *\ (drflac\_int64)pDecodedSamples[-\/\ 3];}
\DoxyCodeLine{03306\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 2:\ prediction\ +=\ coefficients[\ 1]\ *\ (drflac\_int64)pDecodedSamples[-\/\ 2];}
\DoxyCodeLine{03307\ \ \ \ \ \textcolor{keywordflow}{case}\ \ 1:\ prediction\ +=\ coefficients[\ 0]\ *\ (drflac\_int64)pDecodedSamples[-\/\ 1];}
\DoxyCodeLine{03308\ \ \ \ \ \}}
\DoxyCodeLine{03309\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{03310\ }
\DoxyCodeLine{03311\ \ \ \ \ \textcolor{keywordflow}{return}\ (drflac\_int32)(prediction\ >>\ shift);}
\DoxyCodeLine{03312\ \}}
\DoxyCodeLine{03313\ }
\DoxyCodeLine{03314\ }
\DoxyCodeLine{03315\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{03316\ \textcolor{comment}{/*}}
\DoxyCodeLine{03317\ \textcolor{comment}{Reference\ implementation\ for\ reading\ and\ decoding\ samples\ with\ residual.\ This\ is\ intentionally\ left\ unoptimized\ for\ the}}
\DoxyCodeLine{03318\ \textcolor{comment}{sake\ of\ readability\ and\ should\ only\ be\ used\ as\ a\ reference.}}
\DoxyCodeLine{03319\ \textcolor{comment}{*/}}
\DoxyCodeLine{03320\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_reference(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ bitsPerSample,\ drflac\_uint32\ count,\ drflac\_uint8\ riceParam,\ drflac\_uint32\ lpcOrder,\ drflac\_int32\ lpcShift,\ drflac\_uint32\ lpcPrecision,\ \textcolor{keyword}{const}\ drflac\_int32*\ coefficients,\ drflac\_int32*\ pSamplesOut)}
\DoxyCodeLine{03321\ \{}
\DoxyCodeLine{03322\ \ \ \ \ drflac\_uint32\ i;}
\DoxyCodeLine{03323\ }
\DoxyCodeLine{03324\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{03325\ \ \ \ \ DRFLAC\_ASSERT(pSamplesOut\ !=\ NULL);}
\DoxyCodeLine{03326\ }
\DoxyCodeLine{03327\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ count;\ ++i)\ \{}
\DoxyCodeLine{03328\ \ \ \ \ \ \ \ \ drflac\_uint32\ zeroCounter\ =\ 0;}
\DoxyCodeLine{03329\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{03330\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ bit;}
\DoxyCodeLine{03331\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 1,\ \&bit))\ \{}
\DoxyCodeLine{03332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03333\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03334\ }
\DoxyCodeLine{03335\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bit\ ==\ 0)\ \{}
\DoxyCodeLine{03336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ zeroCounter\ +=\ 1;}
\DoxyCodeLine{03337\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03338\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03339\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03340\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03341\ }
\DoxyCodeLine{03342\ \ \ \ \ \ \ \ \ drflac\_uint32\ decodedRice;}
\DoxyCodeLine{03343\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (riceParam\ >\ 0)\ \{}
\DoxyCodeLine{03344\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint32(bs,\ riceParam,\ \&decodedRice))\ \{}
\DoxyCodeLine{03345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03346\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03347\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03348\ \ \ \ \ \ \ \ \ \ \ \ \ decodedRice\ =\ 0;}
\DoxyCodeLine{03349\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03350\ }
\DoxyCodeLine{03351\ \ \ \ \ \ \ \ \ decodedRice\ |=\ (zeroCounter\ <<\ riceParam);}
\DoxyCodeLine{03352\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((decodedRice\ \&\ 0x01))\ \{}
\DoxyCodeLine{03353\ \ \ \ \ \ \ \ \ \ \ \ \ decodedRice\ =\ \string~(decodedRice\ >>\ 1);}
\DoxyCodeLine{03354\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03355\ \ \ \ \ \ \ \ \ \ \ \ \ decodedRice\ =\ \ (decodedRice\ >>\ 1);}
\DoxyCodeLine{03356\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03357\ }
\DoxyCodeLine{03358\ }
\DoxyCodeLine{03359\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_use\_64\_bit\_prediction(bitsPerSample,\ lpcOrder,\ lpcPrecision))\ \{}
\DoxyCodeLine{03360\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut[i]\ =\ decodedRice\ +\ drflac\_\_calculate\_prediction\_64(lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut\ +\ i);}
\DoxyCodeLine{03361\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03362\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut[i]\ =\ decodedRice\ +\ drflac\_\_calculate\_prediction\_32(lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut\ +\ i);}
\DoxyCodeLine{03363\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03364\ \ \ \ \ \}}
\DoxyCodeLine{03365\ }
\DoxyCodeLine{03366\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{03367\ \}}
\DoxyCodeLine{03368\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{03369\ }
\DoxyCodeLine{03370\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{03371\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_read\_rice\_parts\_\_reference(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint8\ riceParam,\ drflac\_uint32*\ pZeroCounterOut,\ drflac\_uint32*\ pRiceParamPartOut)}
\DoxyCodeLine{03372\ \{}
\DoxyCodeLine{03373\ \ \ \ \ drflac\_uint32\ zeroCounter\ =\ 0;}
\DoxyCodeLine{03374\ \ \ \ \ drflac\_uint32\ decodedRice;}
\DoxyCodeLine{03375\ }
\DoxyCodeLine{03376\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{03377\ \ \ \ \ \ \ \ \ drflac\_uint8\ bit;}
\DoxyCodeLine{03378\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 1,\ \&bit))\ \{}
\DoxyCodeLine{03379\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03380\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03381\ }
\DoxyCodeLine{03382\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bit\ ==\ 0)\ \{}
\DoxyCodeLine{03383\ \ \ \ \ \ \ \ \ \ \ \ \ zeroCounter\ +=\ 1;}
\DoxyCodeLine{03384\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03385\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03386\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03387\ \ \ \ \ \}}
\DoxyCodeLine{03388\ }
\DoxyCodeLine{03389\ \ \ \ \ \textcolor{keywordflow}{if}\ (riceParam\ >\ 0)\ \{}
\DoxyCodeLine{03390\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint32(bs,\ riceParam,\ \&decodedRice))\ \{}
\DoxyCodeLine{03391\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03392\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03393\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03394\ \ \ \ \ \ \ \ \ decodedRice\ =\ 0;}
\DoxyCodeLine{03395\ \ \ \ \ \}}
\DoxyCodeLine{03396\ }
\DoxyCodeLine{03397\ \ \ \ \ *pZeroCounterOut\ =\ zeroCounter;}
\DoxyCodeLine{03398\ \ \ \ \ *pRiceParamPartOut\ =\ decodedRice;}
\DoxyCodeLine{03399\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{03400\ \}}
\DoxyCodeLine{03401\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{03402\ }
\DoxyCodeLine{03403\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{03404\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_bool32\ drflac\_\_read\_rice\_parts(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint8\ riceParam,\ drflac\_uint32*\ pZeroCounterOut,\ drflac\_uint32*\ pRiceParamPartOut)}
\DoxyCodeLine{03405\ \{}
\DoxyCodeLine{03406\ \ \ \ \ drflac\_cache\_t\ riceParamMask;}
\DoxyCodeLine{03407\ \ \ \ \ drflac\_uint32\ zeroCounter;}
\DoxyCodeLine{03408\ \ \ \ \ drflac\_uint32\ setBitOffsetPlus1;}
\DoxyCodeLine{03409\ \ \ \ \ drflac\_uint32\ riceParamPart;}
\DoxyCodeLine{03410\ \ \ \ \ drflac\_uint32\ riceLength;}
\DoxyCodeLine{03411\ }
\DoxyCodeLine{03412\ \ \ \ \ DRFLAC\_ASSERT(riceParam\ >\ 0);\ \ \ \textcolor{comment}{/*\ <-\/-\/\ riceParam\ should\ never\ be\ 0.\ drflac\_\_read\_rice\_parts\_\_param\_equals\_zero()\ should\ be\ used\ instead\ for\ this\ case.\ */}}
\DoxyCodeLine{03413\ }
\DoxyCodeLine{03414\ \ \ \ \ riceParamMask\ =\ DRFLAC\_CACHE\_L1\_SELECTION\_MASK(riceParam);}
\DoxyCodeLine{03415\ }
\DoxyCodeLine{03416\ \ \ \ \ zeroCounter\ =\ 0;}
\DoxyCodeLine{03417\ \ \ \ \ \textcolor{keywordflow}{while}\ (bs-\/>cache\ ==\ 0)\ \{}
\DoxyCodeLine{03418\ \ \ \ \ \ \ \ \ zeroCounter\ +=\ (drflac\_uint32)DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs);}
\DoxyCodeLine{03419\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_reload\_cache(bs))\ \{}
\DoxyCodeLine{03420\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03421\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03422\ \ \ \ \ \}}
\DoxyCodeLine{03423\ }
\DoxyCodeLine{03424\ \ \ \ \ setBitOffsetPlus1\ =\ drflac\_\_clz(bs-\/>cache);}
\DoxyCodeLine{03425\ \ \ \ \ zeroCounter\ +=\ setBitOffsetPlus1;}
\DoxyCodeLine{03426\ \ \ \ \ setBitOffsetPlus1\ +=\ 1;}
\DoxyCodeLine{03427\ }
\DoxyCodeLine{03428\ \ \ \ \ riceLength\ =\ setBitOffsetPlus1\ +\ riceParam;}
\DoxyCodeLine{03429\ \ \ \ \ \textcolor{keywordflow}{if}\ (riceLength\ <\ DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs))\ \{}
\DoxyCodeLine{03430\ \ \ \ \ \ \ \ \ riceParamPart\ =\ (drflac\_uint32)((bs-\/>cache\ \&\ (riceParamMask\ >>\ setBitOffsetPlus1))\ >>\ DRFLAC\_CACHE\_L1\_SELECTION\_SHIFT(bs,\ riceLength));}
\DoxyCodeLine{03431\ }
\DoxyCodeLine{03432\ \ \ \ \ \ \ \ \ bs-\/>consumedBits\ +=\ riceLength;}
\DoxyCodeLine{03433\ \ \ \ \ \ \ \ \ bs-\/>cache\ <<=\ riceLength;}
\DoxyCodeLine{03434\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03435\ \ \ \ \ \ \ \ \ drflac\_uint32\ bitCountLo;}
\DoxyCodeLine{03436\ \ \ \ \ \ \ \ \ drflac\_cache\_t\ resultHi;}
\DoxyCodeLine{03437\ }
\DoxyCodeLine{03438\ \ \ \ \ \ \ \ \ bs-\/>consumedBits\ +=\ riceLength;}
\DoxyCodeLine{03439\ \ \ \ \ \ \ \ \ bs-\/>cache\ <<=\ setBitOffsetPlus1\ \&\ (DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs)-\/1);\ \ \ \ \textcolor{comment}{/*\ <-\/-\/\ Equivalent\ to\ "{}if\ (setBitOffsetPlus1\ <\ DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs))\ \{\ bs-\/>cache\ <<=\ setBitOffsetPlus1;\ \}"{}\ */}}
\DoxyCodeLine{03440\ }
\DoxyCodeLine{03441\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ It\ straddles\ the\ cached\ data.\ It\ will\ never\ cover\ more\ than\ the\ next\ chunk.\ We\ just\ read\ the\ number\ in\ two\ parts\ and\ combine\ them.\ */}}
\DoxyCodeLine{03442\ \ \ \ \ \ \ \ \ bitCountLo\ =\ bs-\/>consumedBits\ -\/\ DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs);}
\DoxyCodeLine{03443\ \ \ \ \ \ \ \ \ resultHi\ =\ DRFLAC\_CACHE\_L1\_SELECT\_AND\_SHIFT(bs,\ riceParam);\ \ \textcolor{comment}{/*\ <-\/-\/\ Use\ DRFLAC\_CACHE\_L1\_SELECT\_AND\_SHIFT\_SAFE()\ if\ ever\ this\ function\ allows\ riceParam=0.\ */}}
\DoxyCodeLine{03444\ }
\DoxyCodeLine{03445\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bs-\/>nextL2Line\ <\ DRFLAC\_CACHE\_L2\_LINE\_COUNT(bs))\ \{}
\DoxyCodeLine{03446\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{03447\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_update\_crc16(bs);}
\DoxyCodeLine{03448\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{03449\ \ \ \ \ \ \ \ \ \ \ \ \ bs-\/>cache\ =\ drflac\_\_be2host\_\_cache\_line(bs-\/>cacheL2[bs-\/>nextL2Line++]);}
\DoxyCodeLine{03450\ \ \ \ \ \ \ \ \ \ \ \ \ bs-\/>consumedBits\ =\ 0;}
\DoxyCodeLine{03451\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{03452\ \ \ \ \ \ \ \ \ \ \ \ \ bs-\/>crc16Cache\ =\ bs-\/>cache;}
\DoxyCodeLine{03453\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{03454\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03455\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Slow\ path.\ We\ need\ to\ fetch\ more\ data\ from\ the\ client.\ */}}
\DoxyCodeLine{03456\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_reload\_cache(bs))\ \{}
\DoxyCodeLine{03457\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03458\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03459\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bitCountLo\ >\ DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs))\ \{}
\DoxyCodeLine{03460\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ This\ happens\ when\ we\ get\ to\ end\ of\ stream\ */}}
\DoxyCodeLine{03461\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03462\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03463\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03464\ }
\DoxyCodeLine{03465\ \ \ \ \ \ \ \ \ riceParamPart\ =\ (drflac\_uint32)(resultHi\ |\ DRFLAC\_CACHE\_L1\_SELECT\_AND\_SHIFT\_SAFE(bs,\ bitCountLo));}
\DoxyCodeLine{03466\ }
\DoxyCodeLine{03467\ \ \ \ \ \ \ \ \ bs-\/>consumedBits\ +=\ bitCountLo;}
\DoxyCodeLine{03468\ \ \ \ \ \ \ \ \ bs-\/>cache\ <<=\ bitCountLo;}
\DoxyCodeLine{03469\ \ \ \ \ \}}
\DoxyCodeLine{03470\ }
\DoxyCodeLine{03471\ \ \ \ \ pZeroCounterOut[0]\ =\ zeroCounter;}
\DoxyCodeLine{03472\ \ \ \ \ pRiceParamPartOut[0]\ =\ riceParamPart;}
\DoxyCodeLine{03473\ }
\DoxyCodeLine{03474\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{03475\ \}}
\DoxyCodeLine{03476\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{03477\ }
\DoxyCodeLine{03478\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_bool32\ drflac\_\_read\_rice\_parts\_x1(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint8\ riceParam,\ drflac\_uint32*\ pZeroCounterOut,\ drflac\_uint32*\ pRiceParamPartOut)}
\DoxyCodeLine{03479\ \{}
\DoxyCodeLine{03480\ \ \ \ \ drflac\_uint32\ \ riceParamPlus1\ =\ riceParam\ +\ 1;}
\DoxyCodeLine{03481\ \ \ \ \ \textcolor{comment}{/*drflac\_cache\_t\ riceParamPlus1Mask\ \ =\ DRFLAC\_CACHE\_L1\_SELECTION\_MASK(riceParamPlus1);*/}}
\DoxyCodeLine{03482\ \ \ \ \ drflac\_uint32\ \ riceParamPlus1Shift\ =\ DRFLAC\_CACHE\_L1\_SELECTION\_SHIFT(bs,\ riceParamPlus1);}
\DoxyCodeLine{03483\ \ \ \ \ drflac\_uint32\ \ riceParamPlus1MaxConsumedBits\ =\ DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs)\ -\/\ riceParamPlus1;}
\DoxyCodeLine{03484\ }
\DoxyCodeLine{03485\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{03486\ \textcolor{comment}{\ \ \ \ The\ idea\ here\ is\ to\ use\ local\ variables\ for\ the\ cache\ in\ an\ attempt\ to\ encourage\ the\ compiler\ to\ store\ them\ in\ registers.\ I\ have}}
\DoxyCodeLine{03487\ \textcolor{comment}{\ \ \ \ no\ idea\ how\ this\ will\ work\ in\ practice...}}
\DoxyCodeLine{03488\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{03489\ \ \ \ \ drflac\_cache\_t\ bs\_cache\ =\ bs-\/>cache;}
\DoxyCodeLine{03490\ \ \ \ \ drflac\_uint32\ \ bs\_consumedBits\ =\ bs-\/>consumedBits;}
\DoxyCodeLine{03491\ }
\DoxyCodeLine{03492\ \ \ \ \ \textcolor{comment}{/*\ The\ first\ thing\ to\ do\ is\ find\ the\ first\ unset\ bit.\ Most\ likely\ a\ bit\ will\ be\ set\ in\ the\ current\ cache\ line.\ */}}
\DoxyCodeLine{03493\ \ \ \ \ drflac\_uint32\ \ lzcount\ =\ drflac\_\_clz(bs\_cache);}
\DoxyCodeLine{03494\ \ \ \ \ \textcolor{keywordflow}{if}\ (lzcount\ <\ \textcolor{keyword}{sizeof}(bs\_cache)*8)\ \{}
\DoxyCodeLine{03495\ \ \ \ \ \ \ \ \ pZeroCounterOut[0]\ =\ lzcount;}
\DoxyCodeLine{03496\ }
\DoxyCodeLine{03497\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{03498\ \textcolor{comment}{\ \ \ \ \ \ \ \ It\ is\ most\ likely\ that\ the\ riceParam\ part\ (which\ comes\ after\ the\ zero\ counter)\ is\ also\ on\ this\ cache\ line.\ When\ extracting}}
\DoxyCodeLine{03499\ \textcolor{comment}{\ \ \ \ \ \ \ \ this,\ we\ include\ the\ set\ bit\ from\ the\ unary\ coded\ part\ because\ it\ simplifies\ cache\ management.\ This\ bit\ will\ be\ handled}}
\DoxyCodeLine{03500\ \textcolor{comment}{\ \ \ \ \ \ \ \ outside\ of\ this\ function\ at\ a\ higher\ level.}}
\DoxyCodeLine{03501\ \textcolor{comment}{\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{03502\ \ \ \ \ extract\_rice\_param\_part:}
\DoxyCodeLine{03503\ \ \ \ \ \ \ \ \ bs\_cache\ \ \ \ \ \ \ <<=\ lzcount;}
\DoxyCodeLine{03504\ \ \ \ \ \ \ \ \ bs\_consumedBits\ +=\ lzcount;}
\DoxyCodeLine{03505\ }
\DoxyCodeLine{03506\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bs\_consumedBits\ <=\ riceParamPlus1MaxConsumedBits)\ \{}
\DoxyCodeLine{03507\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Getting\ here\ means\ the\ rice\ parameter\ part\ is\ wholly\ contained\ within\ the\ current\ cache\ line.\ */}}
\DoxyCodeLine{03508\ \ \ \ \ \ \ \ \ \ \ \ \ pRiceParamPartOut[0]\ =\ (drflac\_uint32)(bs\_cache\ >>\ riceParamPlus1Shift);}
\DoxyCodeLine{03509\ \ \ \ \ \ \ \ \ \ \ \ \ bs\_cache\ \ \ \ \ \ \ <<=\ riceParamPlus1;}
\DoxyCodeLine{03510\ \ \ \ \ \ \ \ \ \ \ \ \ bs\_consumedBits\ +=\ riceParamPlus1;}
\DoxyCodeLine{03511\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03512\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ riceParamPartHi;}
\DoxyCodeLine{03513\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ riceParamPartLo;}
\DoxyCodeLine{03514\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ riceParamPartLoBitCount;}
\DoxyCodeLine{03515\ }
\DoxyCodeLine{03516\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{03517\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ Getting\ here\ means\ the\ rice\ parameter\ part\ straddles\ the\ cache\ line.\ We\ need\ to\ read\ from\ the\ tail\ of\ the\ current\ cache}}
\DoxyCodeLine{03518\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ line,\ reload\ the\ cache,\ and\ then\ combine\ it\ with\ the\ head\ of\ the\ next\ cache\ line.}}
\DoxyCodeLine{03519\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{03520\ }
\DoxyCodeLine{03521\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Grab\ the\ high\ part\ of\ the\ rice\ parameter\ part.\ */}}
\DoxyCodeLine{03522\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPartHi\ =\ (drflac\_uint32)(bs\_cache\ >>\ riceParamPlus1Shift);}
\DoxyCodeLine{03523\ }
\DoxyCodeLine{03524\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Before\ reloading\ the\ cache\ we\ need\ to\ grab\ the\ size\ in\ bits\ of\ the\ low\ part.\ */}}
\DoxyCodeLine{03525\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPartLoBitCount\ =\ bs\_consumedBits\ -\/\ riceParamPlus1MaxConsumedBits;}
\DoxyCodeLine{03526\ \ \ \ \ \ \ \ \ \ \ \ \ DRFLAC\_ASSERT(riceParamPartLoBitCount\ >\ 0\ \&\&\ riceParamPartLoBitCount\ <\ 32);}
\DoxyCodeLine{03527\ }
\DoxyCodeLine{03528\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Now\ reload\ the\ cache.\ */}}
\DoxyCodeLine{03529\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bs-\/>nextL2Line\ <\ DRFLAC\_CACHE\_L2\_LINE\_COUNT(bs))\ \{}
\DoxyCodeLine{03530\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{03531\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_update\_crc16(bs);}
\DoxyCodeLine{03532\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{03533\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs\_cache\ =\ drflac\_\_be2host\_\_cache\_line(bs-\/>cacheL2[bs-\/>nextL2Line++]);}
\DoxyCodeLine{03534\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs\_consumedBits\ =\ riceParamPartLoBitCount;}
\DoxyCodeLine{03535\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{03536\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs-\/>crc16Cache\ =\ bs\_cache;}
\DoxyCodeLine{03537\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{03538\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Slow\ path.\ We\ need\ to\ fetch\ more\ data\ from\ the\ client.\ */}}
\DoxyCodeLine{03540\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_reload\_cache(bs))\ \{}
\DoxyCodeLine{03541\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03542\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03543\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (riceParamPartLoBitCount\ >\ DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs))\ \{}
\DoxyCodeLine{03544\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ This\ happens\ when\ we\ get\ to\ end\ of\ stream\ */}}
\DoxyCodeLine{03545\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03547\ }
\DoxyCodeLine{03548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs\_cache\ =\ bs-\/>cache;}
\DoxyCodeLine{03549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs\_consumedBits\ =\ bs-\/>consumedBits\ +\ riceParamPartLoBitCount;}
\DoxyCodeLine{03550\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03551\ }
\DoxyCodeLine{03552\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ should\ now\ have\ enough\ information\ to\ construct\ the\ rice\ parameter\ part.\ */}}
\DoxyCodeLine{03553\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPartLo\ =\ (drflac\_uint32)(bs\_cache\ >>\ (DRFLAC\_CACHE\_L1\_SELECTION\_SHIFT(bs,\ riceParamPartLoBitCount)));}
\DoxyCodeLine{03554\ \ \ \ \ \ \ \ \ \ \ \ \ pRiceParamPartOut[0]\ =\ riceParamPartHi\ |\ riceParamPartLo;}
\DoxyCodeLine{03555\ }
\DoxyCodeLine{03556\ \ \ \ \ \ \ \ \ \ \ \ \ bs\_cache\ <<=\ riceParamPartLoBitCount;}
\DoxyCodeLine{03557\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03558\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03559\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{03560\ \textcolor{comment}{\ \ \ \ \ \ \ \ Getting\ here\ means\ there\ are\ no\ bits\ set\ on\ the\ cache\ line.\ This\ is\ a\ less\ optimal\ case\ because\ we\ just\ wasted\ a\ call}}
\DoxyCodeLine{03561\ \textcolor{comment}{\ \ \ \ \ \ \ \ to\ drflac\_\_clz()\ and\ we\ need\ to\ reload\ the\ cache.}}
\DoxyCodeLine{03562\ \textcolor{comment}{\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{03563\ \ \ \ \ \ \ \ \ drflac\_uint32\ zeroCounter\ =\ (drflac\_uint32)(DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs)\ -\/\ bs\_consumedBits);}
\DoxyCodeLine{03564\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{03565\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bs-\/>nextL2Line\ <\ DRFLAC\_CACHE\_L2\_LINE\_COUNT(bs))\ \{}
\DoxyCodeLine{03566\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{03567\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_update\_crc16(bs);}
\DoxyCodeLine{03568\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{03569\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs\_cache\ =\ drflac\_\_be2host\_\_cache\_line(bs-\/>cacheL2[bs-\/>nextL2Line++]);}
\DoxyCodeLine{03570\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs\_consumedBits\ =\ 0;}
\DoxyCodeLine{03571\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{03572\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs-\/>crc16Cache\ =\ bs\_cache;}
\DoxyCodeLine{03573\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{03574\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03575\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Slow\ path.\ We\ need\ to\ fetch\ more\ data\ from\ the\ client.\ */}}
\DoxyCodeLine{03576\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_reload\_cache(bs))\ \{}
\DoxyCodeLine{03577\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03578\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03579\ }
\DoxyCodeLine{03580\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs\_cache\ =\ bs-\/>cache;}
\DoxyCodeLine{03581\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs\_consumedBits\ =\ bs-\/>consumedBits;}
\DoxyCodeLine{03582\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03583\ }
\DoxyCodeLine{03584\ \ \ \ \ \ \ \ \ \ \ \ \ lzcount\ =\ drflac\_\_clz(bs\_cache);}
\DoxyCodeLine{03585\ \ \ \ \ \ \ \ \ \ \ \ \ zeroCounter\ +=\ lzcount;}
\DoxyCodeLine{03586\ }
\DoxyCodeLine{03587\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (lzcount\ <\ \textcolor{keyword}{sizeof}(bs\_cache)*8)\ \{}
\DoxyCodeLine{03588\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03589\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03590\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03591\ }
\DoxyCodeLine{03592\ \ \ \ \ \ \ \ \ pZeroCounterOut[0]\ =\ zeroCounter;}
\DoxyCodeLine{03593\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ extract\_rice\_param\_part;}
\DoxyCodeLine{03594\ \ \ \ \ \}}
\DoxyCodeLine{03595\ }
\DoxyCodeLine{03596\ \ \ \ \ \textcolor{comment}{/*\ Make\ sure\ the\ cache\ is\ restored\ at\ the\ end\ of\ it\ all.\ */}}
\DoxyCodeLine{03597\ \ \ \ \ bs-\/>cache\ =\ bs\_cache;}
\DoxyCodeLine{03598\ \ \ \ \ bs-\/>consumedBits\ =\ bs\_consumedBits;}
\DoxyCodeLine{03599\ }
\DoxyCodeLine{03600\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{03601\ \}}
\DoxyCodeLine{03602\ }
\DoxyCodeLine{03603\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_bool32\ drflac\_\_seek\_rice\_parts(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint8\ riceParam)}
\DoxyCodeLine{03604\ \{}
\DoxyCodeLine{03605\ \ \ \ \ drflac\_uint32\ \ riceParamPlus1\ =\ riceParam\ +\ 1;}
\DoxyCodeLine{03606\ \ \ \ \ drflac\_uint32\ \ riceParamPlus1MaxConsumedBits\ =\ DRFLAC\_CACHE\_L1\_SIZE\_BITS(bs)\ -\/\ riceParamPlus1;}
\DoxyCodeLine{03607\ }
\DoxyCodeLine{03608\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{03609\ \textcolor{comment}{\ \ \ \ The\ idea\ here\ is\ to\ use\ local\ variables\ for\ the\ cache\ in\ an\ attempt\ to\ encourage\ the\ compiler\ to\ store\ them\ in\ registers.\ I\ have}}
\DoxyCodeLine{03610\ \textcolor{comment}{\ \ \ \ no\ idea\ how\ this\ will\ work\ in\ practice...}}
\DoxyCodeLine{03611\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{03612\ \ \ \ \ drflac\_cache\_t\ bs\_cache\ =\ bs-\/>cache;}
\DoxyCodeLine{03613\ \ \ \ \ drflac\_uint32\ \ bs\_consumedBits\ =\ bs-\/>consumedBits;}
\DoxyCodeLine{03614\ }
\DoxyCodeLine{03615\ \ \ \ \ \textcolor{comment}{/*\ The\ first\ thing\ to\ do\ is\ find\ the\ first\ unset\ bit.\ Most\ likely\ a\ bit\ will\ be\ set\ in\ the\ current\ cache\ line.\ */}}
\DoxyCodeLine{03616\ \ \ \ \ drflac\_uint32\ \ lzcount\ =\ drflac\_\_clz(bs\_cache);}
\DoxyCodeLine{03617\ \ \ \ \ \textcolor{keywordflow}{if}\ (lzcount\ <\ \textcolor{keyword}{sizeof}(bs\_cache)*8)\ \{}
\DoxyCodeLine{03618\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{03619\ \textcolor{comment}{\ \ \ \ \ \ \ \ It\ is\ most\ likely\ that\ the\ riceParam\ part\ (which\ comes\ after\ the\ zero\ counter)\ is\ also\ on\ this\ cache\ line.\ When\ extracting}}
\DoxyCodeLine{03620\ \textcolor{comment}{\ \ \ \ \ \ \ \ this,\ we\ include\ the\ set\ bit\ from\ the\ unary\ coded\ part\ because\ it\ simplifies\ cache\ management.\ This\ bit\ will\ be\ handled}}
\DoxyCodeLine{03621\ \textcolor{comment}{\ \ \ \ \ \ \ \ outside\ of\ this\ function\ at\ a\ higher\ level.}}
\DoxyCodeLine{03622\ \textcolor{comment}{\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{03623\ \ \ \ \ extract\_rice\_param\_part:}
\DoxyCodeLine{03624\ \ \ \ \ \ \ \ \ bs\_cache\ \ \ \ \ \ \ <<=\ lzcount;}
\DoxyCodeLine{03625\ \ \ \ \ \ \ \ \ bs\_consumedBits\ +=\ lzcount;}
\DoxyCodeLine{03626\ }
\DoxyCodeLine{03627\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bs\_consumedBits\ <=\ riceParamPlus1MaxConsumedBits)\ \{}
\DoxyCodeLine{03628\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Getting\ here\ means\ the\ rice\ parameter\ part\ is\ wholly\ contained\ within\ the\ current\ cache\ line.\ */}}
\DoxyCodeLine{03629\ \ \ \ \ \ \ \ \ \ \ \ \ bs\_cache\ \ \ \ \ \ \ <<=\ riceParamPlus1;}
\DoxyCodeLine{03630\ \ \ \ \ \ \ \ \ \ \ \ \ bs\_consumedBits\ +=\ riceParamPlus1;}
\DoxyCodeLine{03631\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03632\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{03633\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ Getting\ here\ means\ the\ rice\ parameter\ part\ straddles\ the\ cache\ line.\ We\ need\ to\ read\ from\ the\ tail\ of\ the\ current\ cache}}
\DoxyCodeLine{03634\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ line,\ reload\ the\ cache,\ and\ then\ combine\ it\ with\ the\ head\ of\ the\ next\ cache\ line.}}
\DoxyCodeLine{03635\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{03636\ }
\DoxyCodeLine{03637\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Before\ reloading\ the\ cache\ we\ need\ to\ grab\ the\ size\ in\ bits\ of\ the\ low\ part.\ */}}
\DoxyCodeLine{03638\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ riceParamPartLoBitCount\ =\ bs\_consumedBits\ -\/\ riceParamPlus1MaxConsumedBits;}
\DoxyCodeLine{03639\ \ \ \ \ \ \ \ \ \ \ \ \ DRFLAC\_ASSERT(riceParamPartLoBitCount\ >\ 0\ \&\&\ riceParamPartLoBitCount\ <\ 32);}
\DoxyCodeLine{03640\ }
\DoxyCodeLine{03641\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Now\ reload\ the\ cache.\ */}}
\DoxyCodeLine{03642\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bs-\/>nextL2Line\ <\ DRFLAC\_CACHE\_L2\_LINE\_COUNT(bs))\ \{}
\DoxyCodeLine{03643\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{03644\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_update\_crc16(bs);}
\DoxyCodeLine{03645\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{03646\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs\_cache\ =\ drflac\_\_be2host\_\_cache\_line(bs-\/>cacheL2[bs-\/>nextL2Line++]);}
\DoxyCodeLine{03647\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs\_consumedBits\ =\ riceParamPartLoBitCount;}
\DoxyCodeLine{03648\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{03649\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs-\/>crc16Cache\ =\ bs\_cache;}
\DoxyCodeLine{03650\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{03651\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03652\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Slow\ path.\ We\ need\ to\ fetch\ more\ data\ from\ the\ client.\ */}}
\DoxyCodeLine{03653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_reload\_cache(bs))\ \{}
\DoxyCodeLine{03654\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03655\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03656\ }
\DoxyCodeLine{03657\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (riceParamPartLoBitCount\ >\ DRFLAC\_CACHE\_L1\_BITS\_REMAINING(bs))\ \{}
\DoxyCodeLine{03658\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ This\ happens\ when\ we\ get\ to\ end\ of\ stream\ */}}
\DoxyCodeLine{03659\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03660\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03661\ }
\DoxyCodeLine{03662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs\_cache\ =\ bs-\/>cache;}
\DoxyCodeLine{03663\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs\_consumedBits\ =\ bs-\/>consumedBits\ +\ riceParamPartLoBitCount;}
\DoxyCodeLine{03664\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03665\ }
\DoxyCodeLine{03666\ \ \ \ \ \ \ \ \ \ \ \ \ bs\_cache\ <<=\ riceParamPartLoBitCount;}
\DoxyCodeLine{03667\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03668\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03669\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{03670\ \textcolor{comment}{\ \ \ \ \ \ \ \ Getting\ here\ means\ there\ are\ no\ bits\ set\ on\ the\ cache\ line.\ This\ is\ a\ less\ optimal\ case\ because\ we\ just\ wasted\ a\ call}}
\DoxyCodeLine{03671\ \textcolor{comment}{\ \ \ \ \ \ \ \ to\ drflac\_\_clz()\ and\ we\ need\ to\ reload\ the\ cache.}}
\DoxyCodeLine{03672\ \textcolor{comment}{\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{03673\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{03674\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bs-\/>nextL2Line\ <\ DRFLAC\_CACHE\_L2\_LINE\_COUNT(bs))\ \{}
\DoxyCodeLine{03675\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{03676\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_update\_crc16(bs);}
\DoxyCodeLine{03677\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{03678\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs\_cache\ =\ drflac\_\_be2host\_\_cache\_line(bs-\/>cacheL2[bs-\/>nextL2Line++]);}
\DoxyCodeLine{03679\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs\_consumedBits\ =\ 0;}
\DoxyCodeLine{03680\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{03681\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs-\/>crc16Cache\ =\ bs\_cache;}
\DoxyCodeLine{03682\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{03683\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03684\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Slow\ path.\ We\ need\ to\ fetch\ more\ data\ from\ the\ client.\ */}}
\DoxyCodeLine{03685\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_reload\_cache(bs))\ \{}
\DoxyCodeLine{03686\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03687\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03688\ }
\DoxyCodeLine{03689\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs\_cache\ =\ bs-\/>cache;}
\DoxyCodeLine{03690\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bs\_consumedBits\ =\ bs-\/>consumedBits;}
\DoxyCodeLine{03691\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03692\ }
\DoxyCodeLine{03693\ \ \ \ \ \ \ \ \ \ \ \ \ lzcount\ =\ drflac\_\_clz(bs\_cache);}
\DoxyCodeLine{03694\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (lzcount\ <\ \textcolor{keyword}{sizeof}(bs\_cache)*8)\ \{}
\DoxyCodeLine{03695\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03696\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03697\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03698\ }
\DoxyCodeLine{03699\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ extract\_rice\_param\_part;}
\DoxyCodeLine{03700\ \ \ \ \ \}}
\DoxyCodeLine{03701\ }
\DoxyCodeLine{03702\ \ \ \ \ \textcolor{comment}{/*\ Make\ sure\ the\ cache\ is\ restored\ at\ the\ end\ of\ it\ all.\ */}}
\DoxyCodeLine{03703\ \ \ \ \ bs-\/>cache\ =\ bs\_cache;}
\DoxyCodeLine{03704\ \ \ \ \ bs-\/>consumedBits\ =\ bs\_consumedBits;}
\DoxyCodeLine{03705\ }
\DoxyCodeLine{03706\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{03707\ \}}
\DoxyCodeLine{03708\ }
\DoxyCodeLine{03709\ }
\DoxyCodeLine{03710\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_scalar\_zeroorder(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ bitsPerSample,\ drflac\_uint32\ count,\ drflac\_uint8\ riceParam,\ drflac\_uint32\ order,\ drflac\_int32\ shift,\ \textcolor{keyword}{const}\ drflac\_int32*\ coefficients,\ drflac\_int32*\ pSamplesOut)}
\DoxyCodeLine{03711\ \{}
\DoxyCodeLine{03712\ \ \ \ \ drflac\_uint32\ t[2]\ =\ \{0x00000000,\ 0xFFFFFFFF\};}
\DoxyCodeLine{03713\ \ \ \ \ drflac\_uint32\ zeroCountPart0;}
\DoxyCodeLine{03714\ \ \ \ \ drflac\_uint32\ riceParamPart0;}
\DoxyCodeLine{03715\ \ \ \ \ drflac\_uint32\ riceParamMask;}
\DoxyCodeLine{03716\ \ \ \ \ drflac\_uint32\ i;}
\DoxyCodeLine{03717\ }
\DoxyCodeLine{03718\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{03719\ \ \ \ \ DRFLAC\_ASSERT(pSamplesOut\ !=\ NULL);}
\DoxyCodeLine{03720\ }
\DoxyCodeLine{03721\ \ \ \ \ (void)bitsPerSample;}
\DoxyCodeLine{03722\ \ \ \ \ (void)order;}
\DoxyCodeLine{03723\ \ \ \ \ (void)shift;}
\DoxyCodeLine{03724\ \ \ \ \ (void)coefficients;}
\DoxyCodeLine{03725\ }
\DoxyCodeLine{03726\ \ \ \ \ riceParamMask\ \ =\ (drflac\_uint32)\string~((\string~0UL)\ <<\ riceParam);}
\DoxyCodeLine{03727\ }
\DoxyCodeLine{03728\ \ \ \ \ i\ =\ 0;}
\DoxyCodeLine{03729\ \ \ \ \ \textcolor{keywordflow}{while}\ (i\ <\ count)\ \{}
\DoxyCodeLine{03730\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Rice\ extraction.\ */}}
\DoxyCodeLine{03731\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountPart0,\ \&riceParamPart0))\ \{}
\DoxyCodeLine{03732\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03733\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03734\ }
\DoxyCodeLine{03735\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Rice\ reconstruction.\ */}}
\DoxyCodeLine{03736\ \ \ \ \ \ \ \ \ riceParamPart0\ \&=\ riceParamMask;}
\DoxyCodeLine{03737\ \ \ \ \ \ \ \ \ riceParamPart0\ |=\ (zeroCountPart0\ <<\ riceParam);}
\DoxyCodeLine{03738\ \ \ \ \ \ \ \ \ riceParamPart0\ \ =\ (riceParamPart0\ >>\ 1)\ \string^\ t[riceParamPart0\ \&\ 0x01];}
\DoxyCodeLine{03739\ }
\DoxyCodeLine{03740\ \ \ \ \ \ \ \ \ pSamplesOut[i]\ =\ riceParamPart0;}
\DoxyCodeLine{03741\ }
\DoxyCodeLine{03742\ \ \ \ \ \ \ \ \ i\ +=\ 1;}
\DoxyCodeLine{03743\ \ \ \ \ \}}
\DoxyCodeLine{03744\ }
\DoxyCodeLine{03745\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{03746\ \}}
\DoxyCodeLine{03747\ }
\DoxyCodeLine{03748\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_scalar(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ bitsPerSample,\ drflac\_uint32\ count,\ drflac\_uint8\ riceParam,\ drflac\_uint32\ lpcOrder,\ drflac\_int32\ lpcShift,\ drflac\_uint32\ lpcPrecision,\ \textcolor{keyword}{const}\ drflac\_int32*\ coefficients,\ drflac\_int32*\ pSamplesOut)}
\DoxyCodeLine{03749\ \{}
\DoxyCodeLine{03750\ \ \ \ \ drflac\_uint32\ t[2]\ =\ \{0x00000000,\ 0xFFFFFFFF\};}
\DoxyCodeLine{03751\ \ \ \ \ drflac\_uint32\ zeroCountPart0\ =\ 0;}
\DoxyCodeLine{03752\ \ \ \ \ drflac\_uint32\ zeroCountPart1\ =\ 0;}
\DoxyCodeLine{03753\ \ \ \ \ drflac\_uint32\ zeroCountPart2\ =\ 0;}
\DoxyCodeLine{03754\ \ \ \ \ drflac\_uint32\ zeroCountPart3\ =\ 0;}
\DoxyCodeLine{03755\ \ \ \ \ drflac\_uint32\ riceParamPart0\ =\ 0;}
\DoxyCodeLine{03756\ \ \ \ \ drflac\_uint32\ riceParamPart1\ =\ 0;}
\DoxyCodeLine{03757\ \ \ \ \ drflac\_uint32\ riceParamPart2\ =\ 0;}
\DoxyCodeLine{03758\ \ \ \ \ drflac\_uint32\ riceParamPart3\ =\ 0;}
\DoxyCodeLine{03759\ \ \ \ \ drflac\_uint32\ riceParamMask;}
\DoxyCodeLine{03760\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_int32*\ pSamplesOutEnd;}
\DoxyCodeLine{03761\ \ \ \ \ drflac\_uint32\ i;}
\DoxyCodeLine{03762\ }
\DoxyCodeLine{03763\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{03764\ \ \ \ \ DRFLAC\_ASSERT(pSamplesOut\ !=\ NULL);}
\DoxyCodeLine{03765\ }
\DoxyCodeLine{03766\ \ \ \ \ \textcolor{keywordflow}{if}\ (lpcOrder\ ==\ 0)\ \{}
\DoxyCodeLine{03767\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_scalar\_zeroorder(bs,\ bitsPerSample,\ count,\ riceParam,\ lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut);}
\DoxyCodeLine{03768\ \ \ \ \ \}}
\DoxyCodeLine{03769\ }
\DoxyCodeLine{03770\ \ \ \ \ riceParamMask\ \ =\ (drflac\_uint32)\string~((\string~0UL)\ <<\ riceParam);}
\DoxyCodeLine{03771\ \ \ \ \ pSamplesOutEnd\ =\ pSamplesOut\ +\ (count\ \&\ \string~3);}
\DoxyCodeLine{03772\ }
\DoxyCodeLine{03773\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_use\_64\_bit\_prediction(bitsPerSample,\ lpcOrder,\ lpcPrecision))\ \{}
\DoxyCodeLine{03774\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (pSamplesOut\ <\ pSamplesOutEnd)\ \{}
\DoxyCodeLine{03775\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{03776\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ Rice\ extraction.\ It's\ faster\ to\ do\ this\ one\ at\ a\ time\ against\ local\ variables\ than\ it\ is\ to\ use\ the\ x4\ version}}
\DoxyCodeLine{03777\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ against\ an\ array.\ Not\ sure\ why,\ but\ perhaps\ it's\ making\ more\ efficient\ use\ of\ registers?}}
\DoxyCodeLine{03778\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{03779\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountPart0,\ \&riceParamPart0)\ ||}
\DoxyCodeLine{03780\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountPart1,\ \&riceParamPart1)\ ||}
\DoxyCodeLine{03781\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountPart2,\ \&riceParamPart2)\ ||}
\DoxyCodeLine{03782\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountPart3,\ \&riceParamPart3))\ \{}
\DoxyCodeLine{03783\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03784\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03785\ }
\DoxyCodeLine{03786\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart0\ \&=\ riceParamMask;}
\DoxyCodeLine{03787\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart1\ \&=\ riceParamMask;}
\DoxyCodeLine{03788\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart2\ \&=\ riceParamMask;}
\DoxyCodeLine{03789\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart3\ \&=\ riceParamMask;}
\DoxyCodeLine{03790\ }
\DoxyCodeLine{03791\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart0\ |=\ (zeroCountPart0\ <<\ riceParam);}
\DoxyCodeLine{03792\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart1\ |=\ (zeroCountPart1\ <<\ riceParam);}
\DoxyCodeLine{03793\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart2\ |=\ (zeroCountPart2\ <<\ riceParam);}
\DoxyCodeLine{03794\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart3\ |=\ (zeroCountPart3\ <<\ riceParam);}
\DoxyCodeLine{03795\ }
\DoxyCodeLine{03796\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart0\ \ =\ (riceParamPart0\ >>\ 1)\ \string^\ t[riceParamPart0\ \&\ 0x01];}
\DoxyCodeLine{03797\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart1\ \ =\ (riceParamPart1\ >>\ 1)\ \string^\ t[riceParamPart1\ \&\ 0x01];}
\DoxyCodeLine{03798\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart2\ \ =\ (riceParamPart2\ >>\ 1)\ \string^\ t[riceParamPart2\ \&\ 0x01];}
\DoxyCodeLine{03799\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart3\ \ =\ (riceParamPart3\ >>\ 1)\ \string^\ t[riceParamPart3\ \&\ 0x01];}
\DoxyCodeLine{03800\ }
\DoxyCodeLine{03801\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut[0]\ =\ riceParamPart0\ +\ drflac\_\_calculate\_prediction\_64(lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut\ +\ 0);}
\DoxyCodeLine{03802\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut[1]\ =\ riceParamPart1\ +\ drflac\_\_calculate\_prediction\_64(lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut\ +\ 1);}
\DoxyCodeLine{03803\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut[2]\ =\ riceParamPart2\ +\ drflac\_\_calculate\_prediction\_64(lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut\ +\ 2);}
\DoxyCodeLine{03804\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut[3]\ =\ riceParamPart3\ +\ drflac\_\_calculate\_prediction\_64(lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut\ +\ 3);}
\DoxyCodeLine{03805\ }
\DoxyCodeLine{03806\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut\ +=\ 4;}
\DoxyCodeLine{03807\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03808\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03809\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (pSamplesOut\ <\ pSamplesOutEnd)\ \{}
\DoxyCodeLine{03810\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountPart0,\ \&riceParamPart0)\ ||}
\DoxyCodeLine{03811\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountPart1,\ \&riceParamPart1)\ ||}
\DoxyCodeLine{03812\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountPart2,\ \&riceParamPart2)\ ||}
\DoxyCodeLine{03813\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountPart3,\ \&riceParamPart3))\ \{}
\DoxyCodeLine{03814\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03815\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03816\ }
\DoxyCodeLine{03817\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart0\ \&=\ riceParamMask;}
\DoxyCodeLine{03818\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart1\ \&=\ riceParamMask;}
\DoxyCodeLine{03819\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart2\ \&=\ riceParamMask;}
\DoxyCodeLine{03820\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart3\ \&=\ riceParamMask;}
\DoxyCodeLine{03821\ }
\DoxyCodeLine{03822\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart0\ |=\ (zeroCountPart0\ <<\ riceParam);}
\DoxyCodeLine{03823\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart1\ |=\ (zeroCountPart1\ <<\ riceParam);}
\DoxyCodeLine{03824\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart2\ |=\ (zeroCountPart2\ <<\ riceParam);}
\DoxyCodeLine{03825\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart3\ |=\ (zeroCountPart3\ <<\ riceParam);}
\DoxyCodeLine{03826\ }
\DoxyCodeLine{03827\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart0\ \ =\ (riceParamPart0\ >>\ 1)\ \string^\ t[riceParamPart0\ \&\ 0x01];}
\DoxyCodeLine{03828\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart1\ \ =\ (riceParamPart1\ >>\ 1)\ \string^\ t[riceParamPart1\ \&\ 0x01];}
\DoxyCodeLine{03829\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart2\ \ =\ (riceParamPart2\ >>\ 1)\ \string^\ t[riceParamPart2\ \&\ 0x01];}
\DoxyCodeLine{03830\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart3\ \ =\ (riceParamPart3\ >>\ 1)\ \string^\ t[riceParamPart3\ \&\ 0x01];}
\DoxyCodeLine{03831\ }
\DoxyCodeLine{03832\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut[0]\ =\ riceParamPart0\ +\ drflac\_\_calculate\_prediction\_32(lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut\ +\ 0);}
\DoxyCodeLine{03833\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut[1]\ =\ riceParamPart1\ +\ drflac\_\_calculate\_prediction\_32(lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut\ +\ 1);}
\DoxyCodeLine{03834\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut[2]\ =\ riceParamPart2\ +\ drflac\_\_calculate\_prediction\_32(lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut\ +\ 2);}
\DoxyCodeLine{03835\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut[3]\ =\ riceParamPart3\ +\ drflac\_\_calculate\_prediction\_32(lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut\ +\ 3);}
\DoxyCodeLine{03836\ }
\DoxyCodeLine{03837\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut\ +=\ 4;}
\DoxyCodeLine{03838\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03839\ \ \ \ \ \}}
\DoxyCodeLine{03840\ }
\DoxyCodeLine{03841\ \ \ \ \ i\ =\ (count\ \&\ \string~3);}
\DoxyCodeLine{03842\ \ \ \ \ \textcolor{keywordflow}{while}\ (i\ <\ count)\ \{}
\DoxyCodeLine{03843\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Rice\ extraction.\ */}}
\DoxyCodeLine{03844\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountPart0,\ \&riceParamPart0))\ \{}
\DoxyCodeLine{03845\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{03846\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03847\ }
\DoxyCodeLine{03848\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Rice\ reconstruction.\ */}}
\DoxyCodeLine{03849\ \ \ \ \ \ \ \ \ riceParamPart0\ \&=\ riceParamMask;}
\DoxyCodeLine{03850\ \ \ \ \ \ \ \ \ riceParamPart0\ |=\ (zeroCountPart0\ <<\ riceParam);}
\DoxyCodeLine{03851\ \ \ \ \ \ \ \ \ riceParamPart0\ \ =\ (riceParamPart0\ >>\ 1)\ \string^\ t[riceParamPart0\ \&\ 0x01];}
\DoxyCodeLine{03852\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*riceParamPart0\ \ =\ (riceParamPart0\ >>\ 1)\ \string^\ (\string~(riceParamPart0\ \&\ 0x01)\ +\ 1);*/}}
\DoxyCodeLine{03853\ }
\DoxyCodeLine{03854\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Sample\ reconstruction.\ */}}
\DoxyCodeLine{03855\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_use\_64\_bit\_prediction(bitsPerSample,\ lpcOrder,\ lpcPrecision))\ \{}
\DoxyCodeLine{03856\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut[0]\ =\ riceParamPart0\ +\ drflac\_\_calculate\_prediction\_64(lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut\ +\ 0);}
\DoxyCodeLine{03857\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03858\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut[0]\ =\ riceParamPart0\ +\ drflac\_\_calculate\_prediction\_32(lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut\ +\ 0);}
\DoxyCodeLine{03859\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03860\ }
\DoxyCodeLine{03861\ \ \ \ \ \ \ \ \ i\ +=\ 1;}
\DoxyCodeLine{03862\ \ \ \ \ \ \ \ \ pSamplesOut\ +=\ 1;}
\DoxyCodeLine{03863\ \ \ \ \ \}}
\DoxyCodeLine{03864\ }
\DoxyCodeLine{03865\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{03866\ \}}
\DoxyCodeLine{03867\ }
\DoxyCodeLine{03868\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{03869\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \_\_m128i\ drflac\_\_mm\_packs\_interleaved\_epi32(\_\_m128i\ a,\ \_\_m128i\ b)}
\DoxyCodeLine{03870\ \{}
\DoxyCodeLine{03871\ \ \ \ \ \_\_m128i\ r;}
\DoxyCodeLine{03872\ }
\DoxyCodeLine{03873\ \ \ \ \ \textcolor{comment}{/*\ Pack.\ */}}
\DoxyCodeLine{03874\ \ \ \ \ r\ =\ \_mm\_packs\_epi32(a,\ b);}
\DoxyCodeLine{03875\ }
\DoxyCodeLine{03876\ \ \ \ \ \textcolor{comment}{/*\ a3a2\ a1a0\ b3b2\ b1b0\ -\/>\ a3a2\ b3b2\ a1a0\ b1b0\ */}}
\DoxyCodeLine{03877\ \ \ \ \ r\ =\ \_mm\_shuffle\_epi32(r,\ \_MM\_SHUFFLE(3,\ 1,\ 2,\ 0));}
\DoxyCodeLine{03878\ }
\DoxyCodeLine{03879\ \ \ \ \ \textcolor{comment}{/*\ a3a2\ b3b2\ a1a0\ b1b0\ -\/>\ a3b3\ a2b2\ a1b1\ a0b0\ */}}
\DoxyCodeLine{03880\ \ \ \ \ r\ =\ \_mm\_shufflehi\_epi16(r,\ \_MM\_SHUFFLE(3,\ 1,\ 2,\ 0));}
\DoxyCodeLine{03881\ \ \ \ \ r\ =\ \_mm\_shufflelo\_epi16(r,\ \_MM\_SHUFFLE(3,\ 1,\ 2,\ 0));}
\DoxyCodeLine{03882\ }
\DoxyCodeLine{03883\ \ \ \ \ \textcolor{keywordflow}{return}\ r;}
\DoxyCodeLine{03884\ \}}
\DoxyCodeLine{03885\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{03886\ }
\DoxyCodeLine{03887\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE41)}}
\DoxyCodeLine{03888\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \_\_m128i\ drflac\_\_mm\_not\_si128(\_\_m128i\ a)}
\DoxyCodeLine{03889\ \{}
\DoxyCodeLine{03890\ \ \ \ \ \textcolor{keywordflow}{return}\ \_mm\_xor\_si128(a,\ \_mm\_cmpeq\_epi32(\_mm\_setzero\_si128(),\ \_mm\_setzero\_si128()));}
\DoxyCodeLine{03891\ \}}
\DoxyCodeLine{03892\ }
\DoxyCodeLine{03893\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \_\_m128i\ drflac\_\_mm\_hadd\_epi32(\_\_m128i\ x)}
\DoxyCodeLine{03894\ \{}
\DoxyCodeLine{03895\ \ \ \ \ \_\_m128i\ x64\ =\ \_mm\_add\_epi32(x,\ \_mm\_shuffle\_epi32(x,\ \_MM\_SHUFFLE(1,\ 0,\ 3,\ 2)));}
\DoxyCodeLine{03896\ \ \ \ \ \_\_m128i\ x32\ =\ \_mm\_shufflelo\_epi16(x64,\ \_MM\_SHUFFLE(1,\ 0,\ 3,\ 2));}
\DoxyCodeLine{03897\ \ \ \ \ \textcolor{keywordflow}{return}\ \_mm\_add\_epi32(x64,\ x32);}
\DoxyCodeLine{03898\ \}}
\DoxyCodeLine{03899\ }
\DoxyCodeLine{03900\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \_\_m128i\ drflac\_\_mm\_hadd\_epi64(\_\_m128i\ x)}
\DoxyCodeLine{03901\ \{}
\DoxyCodeLine{03902\ \ \ \ \ \textcolor{keywordflow}{return}\ \_mm\_add\_epi64(x,\ \_mm\_shuffle\_epi32(x,\ \_MM\_SHUFFLE(1,\ 0,\ 3,\ 2)));}
\DoxyCodeLine{03903\ \}}
\DoxyCodeLine{03904\ }
\DoxyCodeLine{03905\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \_\_m128i\ drflac\_\_mm\_srai\_epi64(\_\_m128i\ x,\ \textcolor{keywordtype}{int}\ count)}
\DoxyCodeLine{03906\ \{}
\DoxyCodeLine{03907\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{03908\ \textcolor{comment}{\ \ \ \ To\ simplify\ this\ we\ are\ assuming\ count\ <\ 32.\ This\ restriction\ allows\ us\ to\ work\ on\ a\ low\ side\ and\ a\ high\ side.\ The\ low\ side}}
\DoxyCodeLine{03909\ \textcolor{comment}{\ \ \ \ is\ shifted\ with\ zero\ bits,\ whereas\ the\ right\ side\ is\ shifted\ with\ sign\ bits.}}
\DoxyCodeLine{03910\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{03911\ \ \ \ \ \_\_m128i\ lo\ =\ \_mm\_srli\_epi64(x,\ count);}
\DoxyCodeLine{03912\ \ \ \ \ \_\_m128i\ hi\ =\ \_mm\_srai\_epi32(x,\ count);}
\DoxyCodeLine{03913\ }
\DoxyCodeLine{03914\ \ \ \ \ hi\ =\ \_mm\_and\_si128(hi,\ \_mm\_set\_epi32(0xFFFFFFFF,\ 0,\ 0xFFFFFFFF,\ 0));\ \ \ \ \textcolor{comment}{/*\ The\ high\ part\ needs\ to\ have\ the\ low\ part\ cleared.\ */}}
\DoxyCodeLine{03915\ }
\DoxyCodeLine{03916\ \ \ \ \ \textcolor{keywordflow}{return}\ \_mm\_or\_si128(lo,\ hi);}
\DoxyCodeLine{03917\ \}}
\DoxyCodeLine{03918\ }
\DoxyCodeLine{03919\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_sse41\_32(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ count,\ drflac\_uint8\ riceParam,\ drflac\_uint32\ order,\ drflac\_int32\ shift,\ \textcolor{keyword}{const}\ drflac\_int32*\ coefficients,\ drflac\_int32*\ pSamplesOut)}
\DoxyCodeLine{03920\ \{}
\DoxyCodeLine{03921\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{03922\ \ \ \ \ drflac\_uint32\ riceParamMask;}
\DoxyCodeLine{03923\ \ \ \ \ drflac\_int32*\ pDecodedSamples\ \ \ \ =\ pSamplesOut;}
\DoxyCodeLine{03924\ \ \ \ \ drflac\_int32*\ pDecodedSamplesEnd\ =\ pSamplesOut\ +\ (count\ \&\ \string~3);}
\DoxyCodeLine{03925\ \ \ \ \ drflac\_uint32\ zeroCountParts0\ =\ 0;}
\DoxyCodeLine{03926\ \ \ \ \ drflac\_uint32\ zeroCountParts1\ =\ 0;}
\DoxyCodeLine{03927\ \ \ \ \ drflac\_uint32\ zeroCountParts2\ =\ 0;}
\DoxyCodeLine{03928\ \ \ \ \ drflac\_uint32\ zeroCountParts3\ =\ 0;}
\DoxyCodeLine{03929\ \ \ \ \ drflac\_uint32\ riceParamParts0\ =\ 0;}
\DoxyCodeLine{03930\ \ \ \ \ drflac\_uint32\ riceParamParts1\ =\ 0;}
\DoxyCodeLine{03931\ \ \ \ \ drflac\_uint32\ riceParamParts2\ =\ 0;}
\DoxyCodeLine{03932\ \ \ \ \ drflac\_uint32\ riceParamParts3\ =\ 0;}
\DoxyCodeLine{03933\ \ \ \ \ \_\_m128i\ coefficients128\_0;}
\DoxyCodeLine{03934\ \ \ \ \ \_\_m128i\ coefficients128\_4;}
\DoxyCodeLine{03935\ \ \ \ \ \_\_m128i\ coefficients128\_8;}
\DoxyCodeLine{03936\ \ \ \ \ \_\_m128i\ samples128\_0;}
\DoxyCodeLine{03937\ \ \ \ \ \_\_m128i\ samples128\_4;}
\DoxyCodeLine{03938\ \ \ \ \ \_\_m128i\ samples128\_8;}
\DoxyCodeLine{03939\ \ \ \ \ \_\_m128i\ riceParamMask128;}
\DoxyCodeLine{03940\ }
\DoxyCodeLine{03941\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32\ t[2]\ =\ \{0x00000000,\ 0xFFFFFFFF\};}
\DoxyCodeLine{03942\ }
\DoxyCodeLine{03943\ \ \ \ \ riceParamMask\ \ \ \ =\ (drflac\_uint32)\string~((\string~0UL)\ <<\ riceParam);}
\DoxyCodeLine{03944\ \ \ \ \ riceParamMask128\ =\ \_mm\_set1\_epi32(riceParamMask);}
\DoxyCodeLine{03945\ }
\DoxyCodeLine{03946\ \ \ \ \ \textcolor{comment}{/*\ Pre-\/load.\ */}}
\DoxyCodeLine{03947\ \ \ \ \ coefficients128\_0\ =\ \_mm\_setzero\_si128();}
\DoxyCodeLine{03948\ \ \ \ \ coefficients128\_4\ =\ \_mm\_setzero\_si128();}
\DoxyCodeLine{03949\ \ \ \ \ coefficients128\_8\ =\ \_mm\_setzero\_si128();}
\DoxyCodeLine{03950\ }
\DoxyCodeLine{03951\ \ \ \ \ samples128\_0\ =\ \_mm\_setzero\_si128();}
\DoxyCodeLine{03952\ \ \ \ \ samples128\_4\ =\ \_mm\_setzero\_si128();}
\DoxyCodeLine{03953\ \ \ \ \ samples128\_8\ =\ \_mm\_setzero\_si128();}
\DoxyCodeLine{03954\ }
\DoxyCodeLine{03955\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{03956\ \textcolor{comment}{\ \ \ \ Pre-\/loading\ the\ coefficients\ and\ prior\ samples\ is\ annoying\ because\ we\ need\ to\ ensure\ we\ don't\ try\ reading\ more\ than}}
\DoxyCodeLine{03957\ \textcolor{comment}{\ \ \ \ what's\ available\ in\ the\ input\ buffers.\ It\ would\ be\ convenient\ to\ use\ a\ fall-\/through\ switch\ to\ do\ this,\ but\ this\ results}}
\DoxyCodeLine{03958\ \textcolor{comment}{\ \ \ \ in\ strict\ aliasing\ warnings\ with\ GCC.\ To\ work\ around\ this\ I'm\ just\ doing\ something\ hacky.\ This\ feels\ a\ bit\ convoluted}}
\DoxyCodeLine{03959\ \textcolor{comment}{\ \ \ \ so\ I\ think\ there's\ opportunity\ for\ this\ to\ be\ simplified.}}
\DoxyCodeLine{03960\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{03961\ \textcolor{preprocessor}{\#if\ 1}}
\DoxyCodeLine{03962\ \ \ \ \ \{}
\DoxyCodeLine{03963\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ runningOrder\ =\ order;}
\DoxyCodeLine{03964\ }
\DoxyCodeLine{03965\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ 0\ -\/\ 3.\ */}}
\DoxyCodeLine{03966\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (runningOrder\ >=\ 4)\ \{}
\DoxyCodeLine{03967\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_0\ =\ \_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)(coefficients\ +\ 0));}
\DoxyCodeLine{03968\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_0\ \ \ \ \ \ =\ \_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)(pSamplesOut\ \ -\/\ 4));}
\DoxyCodeLine{03969\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ -\/=\ 4;}
\DoxyCodeLine{03970\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03971\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (runningOrder)\ \{}
\DoxyCodeLine{03972\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ coefficients128\_0\ =\ \_mm\_set\_epi32(0,\ coefficients[2],\ coefficients[1],\ coefficients[0]);\ samples128\_0\ =\ \_mm\_set\_epi32(pSamplesOut[-\/1],\ pSamplesOut[-\/2],\ pSamplesOut[-\/3],\ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03973\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ coefficients128\_0\ =\ \_mm\_set\_epi32(0,\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ coefficients[1],\ coefficients[0]);\ samples128\_0\ =\ \_mm\_set\_epi32(pSamplesOut[-\/1],\ pSamplesOut[-\/2],\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03974\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ coefficients128\_0\ =\ \_mm\_set\_epi32(0,\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ coefficients[0]);\ samples128\_0\ =\ \_mm\_set\_epi32(pSamplesOut[-\/1],\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03975\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03976\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ =\ 0;}
\DoxyCodeLine{03977\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03978\ }
\DoxyCodeLine{03979\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ 4\ -\/\ 7\ */}}
\DoxyCodeLine{03980\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (runningOrder\ >=\ 4)\ \{}
\DoxyCodeLine{03981\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_4\ =\ \_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)(coefficients\ +\ 4));}
\DoxyCodeLine{03982\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_4\ \ \ \ \ \ =\ \_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)(pSamplesOut\ \ -\/\ 8));}
\DoxyCodeLine{03983\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ -\/=\ 4;}
\DoxyCodeLine{03984\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03985\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (runningOrder)\ \{}
\DoxyCodeLine{03986\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ coefficients128\_4\ =\ \_mm\_set\_epi32(0,\ coefficients[6],\ coefficients[5],\ coefficients[4]);\ samples128\_4\ =\ \_mm\_set\_epi32(pSamplesOut[-\/5],\ pSamplesOut[-\/6],\ pSamplesOut[-\/7],\ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03987\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ coefficients128\_4\ =\ \_mm\_set\_epi32(0,\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ coefficients[5],\ coefficients[4]);\ samples128\_4\ =\ \_mm\_set\_epi32(pSamplesOut[-\/5],\ pSamplesOut[-\/6],\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03988\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ coefficients128\_4\ =\ \_mm\_set\_epi32(0,\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ coefficients[4]);\ samples128\_4\ =\ \_mm\_set\_epi32(pSamplesOut[-\/5],\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{03989\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03990\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ =\ 0;}
\DoxyCodeLine{03991\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{03992\ }
\DoxyCodeLine{03993\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ 8\ -\/\ 11\ */}}
\DoxyCodeLine{03994\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (runningOrder\ ==\ 4)\ \{}
\DoxyCodeLine{03995\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_8\ =\ \_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)(coefficients\ +\ 8));}
\DoxyCodeLine{03996\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_8\ \ \ \ \ \ =\ \_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)(pSamplesOut\ \ -\/\ 12));}
\DoxyCodeLine{03997\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ -\/=\ 4;}
\DoxyCodeLine{03998\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{03999\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (runningOrder)\ \{}
\DoxyCodeLine{04000\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ coefficients128\_8\ =\ \_mm\_set\_epi32(0,\ coefficients[10],\ coefficients[9],\ coefficients[8]);\ samples128\_8\ =\ \_mm\_set\_epi32(pSamplesOut[-\/9],\ pSamplesOut[-\/10],\ pSamplesOut[-\/11],\ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04001\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ coefficients128\_8\ =\ \_mm\_set\_epi32(0,\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ coefficients[9],\ coefficients[8]);\ samples128\_8\ =\ \_mm\_set\_epi32(pSamplesOut[-\/9],\ pSamplesOut[-\/10],\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04002\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ coefficients128\_8\ =\ \_mm\_set\_epi32(0,\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ coefficients[8]);\ samples128\_8\ =\ \_mm\_set\_epi32(pSamplesOut[-\/9],\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04003\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04004\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ =\ 0;}
\DoxyCodeLine{04005\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04006\ }
\DoxyCodeLine{04007\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Coefficients\ need\ to\ be\ shuffled\ for\ our\ streaming\ algorithm\ below\ to\ work.\ Samples\ are\ already\ in\ the\ correct\ order\ from\ the\ loading\ routine\ above.\ */}}
\DoxyCodeLine{04008\ \ \ \ \ \ \ \ \ coefficients128\_0\ =\ \_mm\_shuffle\_epi32(coefficients128\_0,\ \_MM\_SHUFFLE(0,\ 1,\ 2,\ 3));}
\DoxyCodeLine{04009\ \ \ \ \ \ \ \ \ coefficients128\_4\ =\ \_mm\_shuffle\_epi32(coefficients128\_4,\ \_MM\_SHUFFLE(0,\ 1,\ 2,\ 3));}
\DoxyCodeLine{04010\ \ \ \ \ \ \ \ \ coefficients128\_8\ =\ \_mm\_shuffle\_epi32(coefficients128\_8,\ \_MM\_SHUFFLE(0,\ 1,\ 2,\ 3));}
\DoxyCodeLine{04011\ \ \ \ \ \}}
\DoxyCodeLine{04012\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04013\ \ \ \ \ \textcolor{comment}{/*\ This\ causes\ strict-\/aliasing\ warnings\ with\ GCC.\ */}}
\DoxyCodeLine{04014\ \ \ \ \ \textcolor{keywordflow}{switch}\ (order)}
\DoxyCodeLine{04015\ \ \ \ \ \{}
\DoxyCodeLine{04016\ \ \ \ \ \textcolor{keywordflow}{case}\ 12:\ ((drflac\_int32*)\&coefficients128\_8)[0]\ =\ coefficients[11];\ ((drflac\_int32*)\&samples128\_8)[0]\ =\ pDecodedSamples[-\/12];}
\DoxyCodeLine{04017\ \ \ \ \ \textcolor{keywordflow}{case}\ 11:\ ((drflac\_int32*)\&coefficients128\_8)[1]\ =\ coefficients[10];\ ((drflac\_int32*)\&samples128\_8)[1]\ =\ pDecodedSamples[-\/11];}
\DoxyCodeLine{04018\ \ \ \ \ \textcolor{keywordflow}{case}\ 10:\ ((drflac\_int32*)\&coefficients128\_8)[2]\ =\ coefficients[\ 9];\ ((drflac\_int32*)\&samples128\_8)[2]\ =\ pDecodedSamples[-\/10];}
\DoxyCodeLine{04019\ \ \ \ \ \textcolor{keywordflow}{case}\ 9:\ \ ((drflac\_int32*)\&coefficients128\_8)[3]\ =\ coefficients[\ 8];\ ((drflac\_int32*)\&samples128\_8)[3]\ =\ pDecodedSamples[-\/\ 9];}
\DoxyCodeLine{04020\ \ \ \ \ \textcolor{keywordflow}{case}\ 8:\ \ ((drflac\_int32*)\&coefficients128\_4)[0]\ =\ coefficients[\ 7];\ ((drflac\_int32*)\&samples128\_4)[0]\ =\ pDecodedSamples[-\/\ 8];}
\DoxyCodeLine{04021\ \ \ \ \ \textcolor{keywordflow}{case}\ 7:\ \ ((drflac\_int32*)\&coefficients128\_4)[1]\ =\ coefficients[\ 6];\ ((drflac\_int32*)\&samples128\_4)[1]\ =\ pDecodedSamples[-\/\ 7];}
\DoxyCodeLine{04022\ \ \ \ \ \textcolor{keywordflow}{case}\ 6:\ \ ((drflac\_int32*)\&coefficients128\_4)[2]\ =\ coefficients[\ 5];\ ((drflac\_int32*)\&samples128\_4)[2]\ =\ pDecodedSamples[-\/\ 6];}
\DoxyCodeLine{04023\ \ \ \ \ \textcolor{keywordflow}{case}\ 5:\ \ ((drflac\_int32*)\&coefficients128\_4)[3]\ =\ coefficients[\ 4];\ ((drflac\_int32*)\&samples128\_4)[3]\ =\ pDecodedSamples[-\/\ 5];}
\DoxyCodeLine{04024\ \ \ \ \ \textcolor{keywordflow}{case}\ 4:\ \ ((drflac\_int32*)\&coefficients128\_0)[0]\ =\ coefficients[\ 3];\ ((drflac\_int32*)\&samples128\_0)[0]\ =\ pDecodedSamples[-\/\ 4];}
\DoxyCodeLine{04025\ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ \ ((drflac\_int32*)\&coefficients128\_0)[1]\ =\ coefficients[\ 2];\ ((drflac\_int32*)\&samples128\_0)[1]\ =\ pDecodedSamples[-\/\ 3];}
\DoxyCodeLine{04026\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ \ ((drflac\_int32*)\&coefficients128\_0)[2]\ =\ coefficients[\ 1];\ ((drflac\_int32*)\&samples128\_0)[2]\ =\ pDecodedSamples[-\/\ 2];}
\DoxyCodeLine{04027\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ \ ((drflac\_int32*)\&coefficients128\_0)[3]\ =\ coefficients[\ 0];\ ((drflac\_int32*)\&samples128\_0)[3]\ =\ pDecodedSamples[-\/\ 1];}
\DoxyCodeLine{04028\ \ \ \ \ \}}
\DoxyCodeLine{04029\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{04030\ }
\DoxyCodeLine{04031\ \ \ \ \ \textcolor{comment}{/*\ For\ this\ version\ we\ are\ doing\ one\ sample\ at\ a\ time.\ */}}
\DoxyCodeLine{04032\ \ \ \ \ \textcolor{keywordflow}{while}\ (pDecodedSamples\ <\ pDecodedSamplesEnd)\ \{}
\DoxyCodeLine{04033\ \ \ \ \ \ \ \ \ \_\_m128i\ prediction128;}
\DoxyCodeLine{04034\ \ \ \ \ \ \ \ \ \_\_m128i\ zeroCountPart128;}
\DoxyCodeLine{04035\ \ \ \ \ \ \ \ \ \_\_m128i\ riceParamPart128;}
\DoxyCodeLine{04036\ }
\DoxyCodeLine{04037\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts0,\ \&riceParamParts0)\ ||}
\DoxyCodeLine{04038\ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts1,\ \&riceParamParts1)\ ||}
\DoxyCodeLine{04039\ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts2,\ \&riceParamParts2)\ ||}
\DoxyCodeLine{04040\ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts3,\ \&riceParamParts3))\ \{}
\DoxyCodeLine{04041\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04042\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04043\ }
\DoxyCodeLine{04044\ \ \ \ \ \ \ \ \ zeroCountPart128\ =\ \_mm\_set\_epi32(zeroCountParts3,\ zeroCountParts2,\ zeroCountParts1,\ zeroCountParts0);}
\DoxyCodeLine{04045\ \ \ \ \ \ \ \ \ riceParamPart128\ =\ \_mm\_set\_epi32(riceParamParts3,\ riceParamParts2,\ riceParamParts1,\ riceParamParts0);}
\DoxyCodeLine{04046\ }
\DoxyCodeLine{04047\ \ \ \ \ \ \ \ \ riceParamPart128\ =\ \_mm\_and\_si128(riceParamPart128,\ riceParamMask128);}
\DoxyCodeLine{04048\ \ \ \ \ \ \ \ \ riceParamPart128\ =\ \_mm\_or\_si128(riceParamPart128,\ \_mm\_slli\_epi32(zeroCountPart128,\ riceParam));}
\DoxyCodeLine{04049\ \ \ \ \ \ \ \ \ riceParamPart128\ =\ \_mm\_xor\_si128(\_mm\_srli\_epi32(riceParamPart128,\ 1),\ \_mm\_add\_epi32(drflac\_\_mm\_not\_si128(\_mm\_and\_si128(riceParamPart128,\ \_mm\_set1\_epi32(0x01))),\ \_mm\_set1\_epi32(0x01)));\ \ \textcolor{comment}{/*\ <-\/-\/\ SSE2\ compatible\ */}}
\DoxyCodeLine{04050\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*riceParamPart128\ =\ \_mm\_xor\_si128(\_mm\_srli\_epi32(riceParamPart128,\ 1),\ \_mm\_mullo\_epi32(\_mm\_and\_si128(riceParamPart128,\ \_mm\_set1\_epi32(0x01)),\ \_mm\_set1\_epi32(0xFFFFFFFF)));*/}\ \ \ \textcolor{comment}{/*\ <-\/-\/\ Only\ supported\ from\ SSE4.1\ and\ is\ slower\ in\ my\ testing...\ */}}
\DoxyCodeLine{04051\ }
\DoxyCodeLine{04052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (order\ <=\ 4)\ \{}
\DoxyCodeLine{04053\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ 4;\ i\ +=\ 1)\ \{}
\DoxyCodeLine{04054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ \_mm\_mullo\_epi32(coefficients128\_0,\ samples128\_0);}
\DoxyCodeLine{04055\ }
\DoxyCodeLine{04056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Horizontal\ add\ and\ shift.\ */}}
\DoxyCodeLine{04057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ drflac\_\_mm\_hadd\_epi32(prediction128);}
\DoxyCodeLine{04058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ \_mm\_srai\_epi32(prediction128,\ shift);}
\DoxyCodeLine{04059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ \_mm\_add\_epi32(riceParamPart128,\ prediction128);}
\DoxyCodeLine{04060\ }
\DoxyCodeLine{04061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_0\ =\ \_mm\_alignr\_epi8(prediction128,\ samples128\_0,\ 4);}
\DoxyCodeLine{04062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart128\ =\ \_mm\_alignr\_epi8(\_mm\_setzero\_si128(),\ riceParamPart128,\ 4);}
\DoxyCodeLine{04063\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04064\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (order\ <=\ 8)\ \{}
\DoxyCodeLine{04065\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ 4;\ i\ +=\ 1)\ \{}
\DoxyCodeLine{04066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_mullo\_epi32(coefficients128\_4,\ samples128\_4);}
\DoxyCodeLine{04067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ \_mm\_add\_epi32(prediction128,\ \_mm\_mullo\_epi32(coefficients128\_0,\ samples128\_0));}
\DoxyCodeLine{04068\ }
\DoxyCodeLine{04069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Horizontal\ add\ and\ shift.\ */}}
\DoxyCodeLine{04070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ drflac\_\_mm\_hadd\_epi32(prediction128);}
\DoxyCodeLine{04071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ \_mm\_srai\_epi32(prediction128,\ shift);}
\DoxyCodeLine{04072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ \_mm\_add\_epi32(riceParamPart128,\ prediction128);}
\DoxyCodeLine{04073\ }
\DoxyCodeLine{04074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_4\ =\ \_mm\_alignr\_epi8(samples128\_0,\ \ samples128\_4,\ 4);}
\DoxyCodeLine{04075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_0\ =\ \_mm\_alignr\_epi8(prediction128,\ samples128\_0,\ 4);}
\DoxyCodeLine{04076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart128\ =\ \_mm\_alignr\_epi8(\_mm\_setzero\_si128(),\ riceParamPart128,\ 4);}
\DoxyCodeLine{04077\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04078\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04079\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ 4;\ i\ +=\ 1)\ \{}
\DoxyCodeLine{04080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_mullo\_epi32(coefficients128\_8,\ samples128\_8);}
\DoxyCodeLine{04081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ \_mm\_add\_epi32(prediction128,\ \_mm\_mullo\_epi32(coefficients128\_4,\ samples128\_4));}
\DoxyCodeLine{04082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ \_mm\_add\_epi32(prediction128,\ \_mm\_mullo\_epi32(coefficients128\_0,\ samples128\_0));}
\DoxyCodeLine{04083\ }
\DoxyCodeLine{04084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Horizontal\ add\ and\ shift.\ */}}
\DoxyCodeLine{04085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ drflac\_\_mm\_hadd\_epi32(prediction128);}
\DoxyCodeLine{04086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ \_mm\_srai\_epi32(prediction128,\ shift);}
\DoxyCodeLine{04087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ \_mm\_add\_epi32(riceParamPart128,\ prediction128);}
\DoxyCodeLine{04088\ }
\DoxyCodeLine{04089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_8\ =\ \_mm\_alignr\_epi8(samples128\_4,\ \ samples128\_8,\ 4);}
\DoxyCodeLine{04090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_4\ =\ \_mm\_alignr\_epi8(samples128\_0,\ \ samples128\_4,\ 4);}
\DoxyCodeLine{04091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_0\ =\ \_mm\_alignr\_epi8(prediction128,\ samples128\_0,\ 4);}
\DoxyCodeLine{04092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart128\ =\ \_mm\_alignr\_epi8(\_mm\_setzero\_si128(),\ riceParamPart128,\ 4);}
\DoxyCodeLine{04093\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04094\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04095\ }
\DoxyCodeLine{04096\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ store\ samples\ in\ groups\ of\ 4.\ */}}
\DoxyCodeLine{04097\ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)pDecodedSamples,\ samples128\_0);}
\DoxyCodeLine{04098\ \ \ \ \ \ \ \ \ pDecodedSamples\ +=\ 4;}
\DoxyCodeLine{04099\ \ \ \ \ \}}
\DoxyCodeLine{04100\ }
\DoxyCodeLine{04101\ \ \ \ \ \textcolor{comment}{/*\ Make\ sure\ we\ process\ the\ last\ few\ samples.\ */}}
\DoxyCodeLine{04102\ \ \ \ \ i\ =\ (count\ \&\ \string~3);}
\DoxyCodeLine{04103\ \ \ \ \ \textcolor{keywordflow}{while}\ (i\ <\ (\textcolor{keywordtype}{int})count)\ \{}
\DoxyCodeLine{04104\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Rice\ extraction.\ */}}
\DoxyCodeLine{04105\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts0,\ \&riceParamParts0))\ \{}
\DoxyCodeLine{04106\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04107\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04108\ }
\DoxyCodeLine{04109\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Rice\ reconstruction.\ */}}
\DoxyCodeLine{04110\ \ \ \ \ \ \ \ \ riceParamParts0\ \&=\ riceParamMask;}
\DoxyCodeLine{04111\ \ \ \ \ \ \ \ \ riceParamParts0\ |=\ (zeroCountParts0\ <<\ riceParam);}
\DoxyCodeLine{04112\ \ \ \ \ \ \ \ \ riceParamParts0\ \ =\ (riceParamParts0\ >>\ 1)\ \string^\ t[riceParamParts0\ \&\ 0x01];}
\DoxyCodeLine{04113\ }
\DoxyCodeLine{04114\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Sample\ reconstruction.\ */}}
\DoxyCodeLine{04115\ \ \ \ \ \ \ \ \ pDecodedSamples[0]\ =\ riceParamParts0\ +\ drflac\_\_calculate\_prediction\_32(order,\ shift,\ coefficients,\ pDecodedSamples);}
\DoxyCodeLine{04116\ }
\DoxyCodeLine{04117\ \ \ \ \ \ \ \ \ i\ +=\ 1;}
\DoxyCodeLine{04118\ \ \ \ \ \ \ \ \ pDecodedSamples\ +=\ 1;}
\DoxyCodeLine{04119\ \ \ \ \ \}}
\DoxyCodeLine{04120\ }
\DoxyCodeLine{04121\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{04122\ \}}
\DoxyCodeLine{04123\ }
\DoxyCodeLine{04124\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_sse41\_64(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ count,\ drflac\_uint8\ riceParam,\ drflac\_uint32\ order,\ drflac\_int32\ shift,\ \textcolor{keyword}{const}\ drflac\_int32*\ coefficients,\ drflac\_int32*\ pSamplesOut)}
\DoxyCodeLine{04125\ \{}
\DoxyCodeLine{04126\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{04127\ \ \ \ \ drflac\_uint32\ riceParamMask;}
\DoxyCodeLine{04128\ \ \ \ \ drflac\_int32*\ pDecodedSamples\ \ \ \ =\ pSamplesOut;}
\DoxyCodeLine{04129\ \ \ \ \ drflac\_int32*\ pDecodedSamplesEnd\ =\ pSamplesOut\ +\ (count\ \&\ \string~3);}
\DoxyCodeLine{04130\ \ \ \ \ drflac\_uint32\ zeroCountParts0\ =\ 0;}
\DoxyCodeLine{04131\ \ \ \ \ drflac\_uint32\ zeroCountParts1\ =\ 0;}
\DoxyCodeLine{04132\ \ \ \ \ drflac\_uint32\ zeroCountParts2\ =\ 0;}
\DoxyCodeLine{04133\ \ \ \ \ drflac\_uint32\ zeroCountParts3\ =\ 0;}
\DoxyCodeLine{04134\ \ \ \ \ drflac\_uint32\ riceParamParts0\ =\ 0;}
\DoxyCodeLine{04135\ \ \ \ \ drflac\_uint32\ riceParamParts1\ =\ 0;}
\DoxyCodeLine{04136\ \ \ \ \ drflac\_uint32\ riceParamParts2\ =\ 0;}
\DoxyCodeLine{04137\ \ \ \ \ drflac\_uint32\ riceParamParts3\ =\ 0;}
\DoxyCodeLine{04138\ \ \ \ \ \_\_m128i\ coefficients128\_0;}
\DoxyCodeLine{04139\ \ \ \ \ \_\_m128i\ coefficients128\_4;}
\DoxyCodeLine{04140\ \ \ \ \ \_\_m128i\ coefficients128\_8;}
\DoxyCodeLine{04141\ \ \ \ \ \_\_m128i\ samples128\_0;}
\DoxyCodeLine{04142\ \ \ \ \ \_\_m128i\ samples128\_4;}
\DoxyCodeLine{04143\ \ \ \ \ \_\_m128i\ samples128\_8;}
\DoxyCodeLine{04144\ \ \ \ \ \_\_m128i\ prediction128;}
\DoxyCodeLine{04145\ \ \ \ \ \_\_m128i\ riceParamMask128;}
\DoxyCodeLine{04146\ }
\DoxyCodeLine{04147\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32\ t[2]\ =\ \{0x00000000,\ 0xFFFFFFFF\};}
\DoxyCodeLine{04148\ }
\DoxyCodeLine{04149\ \ \ \ \ DRFLAC\_ASSERT(order\ <=\ 12);}
\DoxyCodeLine{04150\ }
\DoxyCodeLine{04151\ \ \ \ \ riceParamMask\ \ \ \ =\ (drflac\_uint32)\string~((\string~0UL)\ <<\ riceParam);}
\DoxyCodeLine{04152\ \ \ \ \ riceParamMask128\ =\ \_mm\_set1\_epi32(riceParamMask);}
\DoxyCodeLine{04153\ }
\DoxyCodeLine{04154\ \ \ \ \ prediction128\ =\ \_mm\_setzero\_si128();}
\DoxyCodeLine{04155\ }
\DoxyCodeLine{04156\ \ \ \ \ \textcolor{comment}{/*\ Pre-\/load.\ */}}
\DoxyCodeLine{04157\ \ \ \ \ coefficients128\_0\ \ =\ \_mm\_setzero\_si128();}
\DoxyCodeLine{04158\ \ \ \ \ coefficients128\_4\ \ =\ \_mm\_setzero\_si128();}
\DoxyCodeLine{04159\ \ \ \ \ coefficients128\_8\ \ =\ \_mm\_setzero\_si128();}
\DoxyCodeLine{04160\ }
\DoxyCodeLine{04161\ \ \ \ \ samples128\_0\ \ =\ \_mm\_setzero\_si128();}
\DoxyCodeLine{04162\ \ \ \ \ samples128\_4\ \ =\ \_mm\_setzero\_si128();}
\DoxyCodeLine{04163\ \ \ \ \ samples128\_8\ \ =\ \_mm\_setzero\_si128();}
\DoxyCodeLine{04164\ }
\DoxyCodeLine{04165\ \textcolor{preprocessor}{\#if\ 1}}
\DoxyCodeLine{04166\ \ \ \ \ \{}
\DoxyCodeLine{04167\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ runningOrder\ =\ order;}
\DoxyCodeLine{04168\ }
\DoxyCodeLine{04169\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ 0\ -\/\ 3.\ */}}
\DoxyCodeLine{04170\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (runningOrder\ >=\ 4)\ \{}
\DoxyCodeLine{04171\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_0\ =\ \_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)(coefficients\ +\ 0));}
\DoxyCodeLine{04172\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_0\ \ \ \ \ \ =\ \_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)(pSamplesOut\ \ -\/\ 4));}
\DoxyCodeLine{04173\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ -\/=\ 4;}
\DoxyCodeLine{04174\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (runningOrder)\ \{}
\DoxyCodeLine{04176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ coefficients128\_0\ =\ \_mm\_set\_epi32(0,\ coefficients[2],\ coefficients[1],\ coefficients[0]);\ samples128\_0\ =\ \_mm\_set\_epi32(pSamplesOut[-\/1],\ pSamplesOut[-\/2],\ pSamplesOut[-\/3],\ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ coefficients128\_0\ =\ \_mm\_set\_epi32(0,\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ coefficients[1],\ coefficients[0]);\ samples128\_0\ =\ \_mm\_set\_epi32(pSamplesOut[-\/1],\ pSamplesOut[-\/2],\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ coefficients128\_0\ =\ \_mm\_set\_epi32(0,\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ coefficients[0]);\ samples128\_0\ =\ \_mm\_set\_epi32(pSamplesOut[-\/1],\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04179\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04180\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ =\ 0;}
\DoxyCodeLine{04181\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04182\ }
\DoxyCodeLine{04183\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ 4\ -\/\ 7\ */}}
\DoxyCodeLine{04184\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (runningOrder\ >=\ 4)\ \{}
\DoxyCodeLine{04185\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_4\ =\ \_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)(coefficients\ +\ 4));}
\DoxyCodeLine{04186\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_4\ \ \ \ \ \ =\ \_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)(pSamplesOut\ \ -\/\ 8));}
\DoxyCodeLine{04187\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ -\/=\ 4;}
\DoxyCodeLine{04188\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04189\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (runningOrder)\ \{}
\DoxyCodeLine{04190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ coefficients128\_4\ =\ \_mm\_set\_epi32(0,\ coefficients[6],\ coefficients[5],\ coefficients[4]);\ samples128\_4\ =\ \_mm\_set\_epi32(pSamplesOut[-\/5],\ pSamplesOut[-\/6],\ pSamplesOut[-\/7],\ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ coefficients128\_4\ =\ \_mm\_set\_epi32(0,\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ coefficients[5],\ coefficients[4]);\ samples128\_4\ =\ \_mm\_set\_epi32(pSamplesOut[-\/5],\ pSamplesOut[-\/6],\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ coefficients128\_4\ =\ \_mm\_set\_epi32(0,\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ coefficients[4]);\ samples128\_4\ =\ \_mm\_set\_epi32(pSamplesOut[-\/5],\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04193\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04194\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ =\ 0;}
\DoxyCodeLine{04195\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04196\ }
\DoxyCodeLine{04197\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ 8\ -\/\ 11\ */}}
\DoxyCodeLine{04198\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (runningOrder\ ==\ 4)\ \{}
\DoxyCodeLine{04199\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_8\ =\ \_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)(coefficients\ +\ 8));}
\DoxyCodeLine{04200\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_8\ \ \ \ \ \ =\ \_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)(pSamplesOut\ \ -\/\ 12));}
\DoxyCodeLine{04201\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ -\/=\ 4;}
\DoxyCodeLine{04202\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04203\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (runningOrder)\ \{}
\DoxyCodeLine{04204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ coefficients128\_8\ =\ \_mm\_set\_epi32(0,\ coefficients[10],\ coefficients[9],\ coefficients[8]);\ samples128\_8\ =\ \_mm\_set\_epi32(pSamplesOut[-\/9],\ pSamplesOut[-\/10],\ pSamplesOut[-\/11],\ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ coefficients128\_8\ =\ \_mm\_set\_epi32(0,\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ coefficients[9],\ coefficients[8]);\ samples128\_8\ =\ \_mm\_set\_epi32(pSamplesOut[-\/9],\ pSamplesOut[-\/10],\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ coefficients128\_8\ =\ \_mm\_set\_epi32(0,\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ coefficients[8]);\ samples128\_8\ =\ \_mm\_set\_epi32(pSamplesOut[-\/9],\ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0);\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04207\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04208\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ =\ 0;}
\DoxyCodeLine{04209\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04210\ }
\DoxyCodeLine{04211\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Coefficients\ need\ to\ be\ shuffled\ for\ our\ streaming\ algorithm\ below\ to\ work.\ Samples\ are\ already\ in\ the\ correct\ order\ from\ the\ loading\ routine\ above.\ */}}
\DoxyCodeLine{04212\ \ \ \ \ \ \ \ \ coefficients128\_0\ =\ \_mm\_shuffle\_epi32(coefficients128\_0,\ \_MM\_SHUFFLE(0,\ 1,\ 2,\ 3));}
\DoxyCodeLine{04213\ \ \ \ \ \ \ \ \ coefficients128\_4\ =\ \_mm\_shuffle\_epi32(coefficients128\_4,\ \_MM\_SHUFFLE(0,\ 1,\ 2,\ 3));}
\DoxyCodeLine{04214\ \ \ \ \ \ \ \ \ coefficients128\_8\ =\ \_mm\_shuffle\_epi32(coefficients128\_8,\ \_MM\_SHUFFLE(0,\ 1,\ 2,\ 3));}
\DoxyCodeLine{04215\ \ \ \ \ \}}
\DoxyCodeLine{04216\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{04217\ \ \ \ \ \textcolor{keywordflow}{switch}\ (order)}
\DoxyCodeLine{04218\ \ \ \ \ \{}
\DoxyCodeLine{04219\ \ \ \ \ \textcolor{keywordflow}{case}\ 12:\ ((drflac\_int32*)\&coefficients128\_8)[0]\ =\ coefficients[11];\ ((drflac\_int32*)\&samples128\_8)[0]\ =\ pDecodedSamples[-\/12];}
\DoxyCodeLine{04220\ \ \ \ \ \textcolor{keywordflow}{case}\ 11:\ ((drflac\_int32*)\&coefficients128\_8)[1]\ =\ coefficients[10];\ ((drflac\_int32*)\&samples128\_8)[1]\ =\ pDecodedSamples[-\/11];}
\DoxyCodeLine{04221\ \ \ \ \ \textcolor{keywordflow}{case}\ 10:\ ((drflac\_int32*)\&coefficients128\_8)[2]\ =\ coefficients[\ 9];\ ((drflac\_int32*)\&samples128\_8)[2]\ =\ pDecodedSamples[-\/10];}
\DoxyCodeLine{04222\ \ \ \ \ \textcolor{keywordflow}{case}\ 9:\ \ ((drflac\_int32*)\&coefficients128\_8)[3]\ =\ coefficients[\ 8];\ ((drflac\_int32*)\&samples128\_8)[3]\ =\ pDecodedSamples[-\/\ 9];}
\DoxyCodeLine{04223\ \ \ \ \ \textcolor{keywordflow}{case}\ 8:\ \ ((drflac\_int32*)\&coefficients128\_4)[0]\ =\ coefficients[\ 7];\ ((drflac\_int32*)\&samples128\_4)[0]\ =\ pDecodedSamples[-\/\ 8];}
\DoxyCodeLine{04224\ \ \ \ \ \textcolor{keywordflow}{case}\ 7:\ \ ((drflac\_int32*)\&coefficients128\_4)[1]\ =\ coefficients[\ 6];\ ((drflac\_int32*)\&samples128\_4)[1]\ =\ pDecodedSamples[-\/\ 7];}
\DoxyCodeLine{04225\ \ \ \ \ \textcolor{keywordflow}{case}\ 6:\ \ ((drflac\_int32*)\&coefficients128\_4)[2]\ =\ coefficients[\ 5];\ ((drflac\_int32*)\&samples128\_4)[2]\ =\ pDecodedSamples[-\/\ 6];}
\DoxyCodeLine{04226\ \ \ \ \ \textcolor{keywordflow}{case}\ 5:\ \ ((drflac\_int32*)\&coefficients128\_4)[3]\ =\ coefficients[\ 4];\ ((drflac\_int32*)\&samples128\_4)[3]\ =\ pDecodedSamples[-\/\ 5];}
\DoxyCodeLine{04227\ \ \ \ \ \textcolor{keywordflow}{case}\ 4:\ \ ((drflac\_int32*)\&coefficients128\_0)[0]\ =\ coefficients[\ 3];\ ((drflac\_int32*)\&samples128\_0)[0]\ =\ pDecodedSamples[-\/\ 4];}
\DoxyCodeLine{04228\ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ \ ((drflac\_int32*)\&coefficients128\_0)[1]\ =\ coefficients[\ 2];\ ((drflac\_int32*)\&samples128\_0)[1]\ =\ pDecodedSamples[-\/\ 3];}
\DoxyCodeLine{04229\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ \ ((drflac\_int32*)\&coefficients128\_0)[2]\ =\ coefficients[\ 1];\ ((drflac\_int32*)\&samples128\_0)[2]\ =\ pDecodedSamples[-\/\ 2];}
\DoxyCodeLine{04230\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ \ ((drflac\_int32*)\&coefficients128\_0)[3]\ =\ coefficients[\ 0];\ ((drflac\_int32*)\&samples128\_0)[3]\ =\ pDecodedSamples[-\/\ 1];}
\DoxyCodeLine{04231\ \ \ \ \ \}}
\DoxyCodeLine{04232\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{04233\ }
\DoxyCodeLine{04234\ \ \ \ \ \textcolor{comment}{/*\ For\ this\ version\ we\ are\ doing\ one\ sample\ at\ a\ time.\ */}}
\DoxyCodeLine{04235\ \ \ \ \ \textcolor{keywordflow}{while}\ (pDecodedSamples\ <\ pDecodedSamplesEnd)\ \{}
\DoxyCodeLine{04236\ \ \ \ \ \ \ \ \ \_\_m128i\ zeroCountPart128;}
\DoxyCodeLine{04237\ \ \ \ \ \ \ \ \ \_\_m128i\ riceParamPart128;}
\DoxyCodeLine{04238\ }
\DoxyCodeLine{04239\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts0,\ \&riceParamParts0)\ ||}
\DoxyCodeLine{04240\ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts1,\ \&riceParamParts1)\ ||}
\DoxyCodeLine{04241\ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts2,\ \&riceParamParts2)\ ||}
\DoxyCodeLine{04242\ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts3,\ \&riceParamParts3))\ \{}
\DoxyCodeLine{04243\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04244\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04245\ }
\DoxyCodeLine{04246\ \ \ \ \ \ \ \ \ zeroCountPart128\ =\ \_mm\_set\_epi32(zeroCountParts3,\ zeroCountParts2,\ zeroCountParts1,\ zeroCountParts0);}
\DoxyCodeLine{04247\ \ \ \ \ \ \ \ \ riceParamPart128\ =\ \_mm\_set\_epi32(riceParamParts3,\ riceParamParts2,\ riceParamParts1,\ riceParamParts0);}
\DoxyCodeLine{04248\ }
\DoxyCodeLine{04249\ \ \ \ \ \ \ \ \ riceParamPart128\ =\ \_mm\_and\_si128(riceParamPart128,\ riceParamMask128);}
\DoxyCodeLine{04250\ \ \ \ \ \ \ \ \ riceParamPart128\ =\ \_mm\_or\_si128(riceParamPart128,\ \_mm\_slli\_epi32(zeroCountPart128,\ riceParam));}
\DoxyCodeLine{04251\ \ \ \ \ \ \ \ \ riceParamPart128\ =\ \_mm\_xor\_si128(\_mm\_srli\_epi32(riceParamPart128,\ 1),\ \_mm\_add\_epi32(drflac\_\_mm\_not\_si128(\_mm\_and\_si128(riceParamPart128,\ \_mm\_set1\_epi32(1))),\ \_mm\_set1\_epi32(1)));}
\DoxyCodeLine{04252\ }
\DoxyCodeLine{04253\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ 4;\ i\ +=\ 1)\ \{}
\DoxyCodeLine{04254\ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ \_mm\_xor\_si128(prediction128,\ prediction128);\ \ \ \ \textcolor{comment}{/*\ Reset\ to\ 0.\ */}}
\DoxyCodeLine{04255\ }
\DoxyCodeLine{04256\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (order)}
\DoxyCodeLine{04257\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{04258\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 12:}
\DoxyCodeLine{04259\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 11:\ prediction128\ =\ \_mm\_add\_epi64(prediction128,\ \_mm\_mul\_epi32(\_mm\_shuffle\_epi32(coefficients128\_8,\ \_MM\_SHUFFLE(1,\ 1,\ 0,\ 0)),\ \_mm\_shuffle\_epi32(samples128\_8,\ \_MM\_SHUFFLE(1,\ 1,\ 0,\ 0))));}
\DoxyCodeLine{04260\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 10:}
\DoxyCodeLine{04261\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 9:\ prediction128\ =\ \_mm\_add\_epi64(prediction128,\ \_mm\_mul\_epi32(\_mm\_shuffle\_epi32(coefficients128\_8,\ \_MM\_SHUFFLE(3,\ 3,\ 2,\ 2)),\ \_mm\_shuffle\_epi32(samples128\_8,\ \_MM\_SHUFFLE(3,\ 3,\ 2,\ 2))));}
\DoxyCodeLine{04262\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 8:}
\DoxyCodeLine{04263\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 7:\ prediction128\ =\ \_mm\_add\_epi64(prediction128,\ \_mm\_mul\_epi32(\_mm\_shuffle\_epi32(coefficients128\_4,\ \_MM\_SHUFFLE(1,\ 1,\ 0,\ 0)),\ \_mm\_shuffle\_epi32(samples128\_4,\ \_MM\_SHUFFLE(1,\ 1,\ 0,\ 0))));}
\DoxyCodeLine{04264\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 6:}
\DoxyCodeLine{04265\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 5:\ prediction128\ =\ \_mm\_add\_epi64(prediction128,\ \_mm\_mul\_epi32(\_mm\_shuffle\_epi32(coefficients128\_4,\ \_MM\_SHUFFLE(3,\ 3,\ 2,\ 2)),\ \_mm\_shuffle\_epi32(samples128\_4,\ \_MM\_SHUFFLE(3,\ 3,\ 2,\ 2))));}
\DoxyCodeLine{04266\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 4:}
\DoxyCodeLine{04267\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 3:\ prediction128\ =\ \_mm\_add\_epi64(prediction128,\ \_mm\_mul\_epi32(\_mm\_shuffle\_epi32(coefficients128\_0,\ \_MM\_SHUFFLE(1,\ 1,\ 0,\ 0)),\ \_mm\_shuffle\_epi32(samples128\_0,\ \_MM\_SHUFFLE(1,\ 1,\ 0,\ 0))));}
\DoxyCodeLine{04268\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 2:}
\DoxyCodeLine{04269\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 1:\ prediction128\ =\ \_mm\_add\_epi64(prediction128,\ \_mm\_mul\_epi32(\_mm\_shuffle\_epi32(coefficients128\_0,\ \_MM\_SHUFFLE(3,\ 3,\ 2,\ 2)),\ \_mm\_shuffle\_epi32(samples128\_0,\ \_MM\_SHUFFLE(3,\ 3,\ 2,\ 2))));}
\DoxyCodeLine{04270\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04271\ }
\DoxyCodeLine{04272\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Horizontal\ add\ and\ shift.\ */}}
\DoxyCodeLine{04273\ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ drflac\_\_mm\_hadd\_epi64(prediction128);}
\DoxyCodeLine{04274\ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ drflac\_\_mm\_srai\_epi64(prediction128,\ shift);}
\DoxyCodeLine{04275\ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ \_mm\_add\_epi32(riceParamPart128,\ prediction128);}
\DoxyCodeLine{04276\ }
\DoxyCodeLine{04277\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Our\ value\ should\ be\ sitting\ in\ prediction128[0].\ We\ need\ to\ combine\ this\ with\ our\ SSE\ samples.\ */}}
\DoxyCodeLine{04278\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_8\ =\ \_mm\_alignr\_epi8(samples128\_4,\ \ samples128\_8,\ 4);}
\DoxyCodeLine{04279\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_4\ =\ \_mm\_alignr\_epi8(samples128\_0,\ \ samples128\_4,\ 4);}
\DoxyCodeLine{04280\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_0\ =\ \_mm\_alignr\_epi8(prediction128,\ samples128\_0,\ 4);}
\DoxyCodeLine{04281\ }
\DoxyCodeLine{04282\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Slide\ our\ rice\ parameter\ down\ so\ that\ the\ value\ in\ position\ 0\ contains\ the\ next\ one\ to\ process.\ */}}
\DoxyCodeLine{04283\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart128\ =\ \_mm\_alignr\_epi8(\_mm\_setzero\_si128(),\ riceParamPart128,\ 4);}
\DoxyCodeLine{04284\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04285\ }
\DoxyCodeLine{04286\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ store\ samples\ in\ groups\ of\ 4.\ */}}
\DoxyCodeLine{04287\ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)pDecodedSamples,\ samples128\_0);}
\DoxyCodeLine{04288\ \ \ \ \ \ \ \ \ pDecodedSamples\ +=\ 4;}
\DoxyCodeLine{04289\ \ \ \ \ \}}
\DoxyCodeLine{04290\ }
\DoxyCodeLine{04291\ \ \ \ \ \textcolor{comment}{/*\ Make\ sure\ we\ process\ the\ last\ few\ samples.\ */}}
\DoxyCodeLine{04292\ \ \ \ \ i\ =\ (count\ \&\ \string~3);}
\DoxyCodeLine{04293\ \ \ \ \ \textcolor{keywordflow}{while}\ (i\ <\ (\textcolor{keywordtype}{int})count)\ \{}
\DoxyCodeLine{04294\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Rice\ extraction.\ */}}
\DoxyCodeLine{04295\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts0,\ \&riceParamParts0))\ \{}
\DoxyCodeLine{04296\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04297\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04298\ }
\DoxyCodeLine{04299\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Rice\ reconstruction.\ */}}
\DoxyCodeLine{04300\ \ \ \ \ \ \ \ \ riceParamParts0\ \&=\ riceParamMask;}
\DoxyCodeLine{04301\ \ \ \ \ \ \ \ \ riceParamParts0\ |=\ (zeroCountParts0\ <<\ riceParam);}
\DoxyCodeLine{04302\ \ \ \ \ \ \ \ \ riceParamParts0\ \ =\ (riceParamParts0\ >>\ 1)\ \string^\ t[riceParamParts0\ \&\ 0x01];}
\DoxyCodeLine{04303\ }
\DoxyCodeLine{04304\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Sample\ reconstruction.\ */}}
\DoxyCodeLine{04305\ \ \ \ \ \ \ \ \ pDecodedSamples[0]\ =\ riceParamParts0\ +\ drflac\_\_calculate\_prediction\_64(order,\ shift,\ coefficients,\ pDecodedSamples);}
\DoxyCodeLine{04306\ }
\DoxyCodeLine{04307\ \ \ \ \ \ \ \ \ i\ +=\ 1;}
\DoxyCodeLine{04308\ \ \ \ \ \ \ \ \ pDecodedSamples\ +=\ 1;}
\DoxyCodeLine{04309\ \ \ \ \ \}}
\DoxyCodeLine{04310\ }
\DoxyCodeLine{04311\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{04312\ \}}
\DoxyCodeLine{04313\ }
\DoxyCodeLine{04314\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_sse41(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ bitsPerSample,\ drflac\_uint32\ count,\ drflac\_uint8\ riceParam,\ drflac\_uint32\ lpcOrder,\ drflac\_int32\ lpcShift,\ drflac\_uint32\ lpcPrecision,\ \textcolor{keyword}{const}\ drflac\_int32*\ coefficients,\ drflac\_int32*\ pSamplesOut)}
\DoxyCodeLine{04315\ \{}
\DoxyCodeLine{04316\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{04317\ \ \ \ \ DRFLAC\_ASSERT(pSamplesOut\ !=\ NULL);}
\DoxyCodeLine{04318\ }
\DoxyCodeLine{04319\ \ \ \ \ \textcolor{comment}{/*\ In\ my\ testing\ the\ order\ is\ rarely\ >\ 12,\ so\ in\ this\ case\ I'm\ going\ to\ simplify\ the\ SSE\ implementation\ by\ only\ handling\ order\ <=\ 12.\ */}}
\DoxyCodeLine{04320\ \ \ \ \ \textcolor{keywordflow}{if}\ (lpcOrder\ >\ 0\ \&\&\ lpcOrder\ <=\ 12)\ \{}
\DoxyCodeLine{04321\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_use\_64\_bit\_prediction(bitsPerSample,\ lpcOrder,\ lpcPrecision))\ \{}
\DoxyCodeLine{04322\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_sse41\_64(bs,\ count,\ riceParam,\ lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut);}
\DoxyCodeLine{04323\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04324\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_sse41\_32(bs,\ count,\ riceParam,\ lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut);}
\DoxyCodeLine{04325\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04326\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04327\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_scalar(bs,\ bitsPerSample,\ count,\ riceParam,\ lpcOrder,\ lpcShift,\ lpcPrecision,\ coefficients,\ pSamplesOut);}
\DoxyCodeLine{04328\ \ \ \ \ \}}
\DoxyCodeLine{04329\ \}}
\DoxyCodeLine{04330\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{04331\ }
\DoxyCodeLine{04332\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{04333\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_\_vst2q\_s32(drflac\_int32*\ p,\ int32x4x2\_t\ x)}
\DoxyCodeLine{04334\ \{}
\DoxyCodeLine{04335\ \ \ \ \ vst1q\_s32(p+0,\ x.val[0]);}
\DoxyCodeLine{04336\ \ \ \ \ vst1q\_s32(p+4,\ x.val[1]);}
\DoxyCodeLine{04337\ \}}
\DoxyCodeLine{04338\ }
\DoxyCodeLine{04339\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_\_vst2q\_u32(drflac\_uint32*\ p,\ uint32x4x2\_t\ x)}
\DoxyCodeLine{04340\ \{}
\DoxyCodeLine{04341\ \ \ \ \ vst1q\_u32(p+0,\ x.val[0]);}
\DoxyCodeLine{04342\ \ \ \ \ vst1q\_u32(p+4,\ x.val[1]);}
\DoxyCodeLine{04343\ \}}
\DoxyCodeLine{04344\ }
\DoxyCodeLine{04345\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_\_vst2q\_f32(\textcolor{keywordtype}{float}*\ p,\ float32x4x2\_t\ x)}
\DoxyCodeLine{04346\ \{}
\DoxyCodeLine{04347\ \ \ \ \ vst1q\_f32(p+0,\ x.val[0]);}
\DoxyCodeLine{04348\ \ \ \ \ vst1q\_f32(p+4,\ x.val[1]);}
\DoxyCodeLine{04349\ \}}
\DoxyCodeLine{04350\ }
\DoxyCodeLine{04351\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_\_vst2q\_s16(drflac\_int16*\ p,\ int16x4x2\_t\ x)}
\DoxyCodeLine{04352\ \{}
\DoxyCodeLine{04353\ \ \ \ \ vst1q\_s16(p,\ vcombine\_s16(x.val[0],\ x.val[1]));}
\DoxyCodeLine{04354\ \}}
\DoxyCodeLine{04355\ }
\DoxyCodeLine{04356\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_\_vst2q\_u16(drflac\_uint16*\ p,\ uint16x4x2\_t\ x)}
\DoxyCodeLine{04357\ \{}
\DoxyCodeLine{04358\ \ \ \ \ vst1q\_u16(p,\ vcombine\_u16(x.val[0],\ x.val[1]));}
\DoxyCodeLine{04359\ \}}
\DoxyCodeLine{04360\ }
\DoxyCodeLine{04361\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ int32x4\_t\ drflac\_\_vdupq\_n\_s32x4(drflac\_int32\ x3,\ drflac\_int32\ x2,\ drflac\_int32\ x1,\ drflac\_int32\ x0)}
\DoxyCodeLine{04362\ \{}
\DoxyCodeLine{04363\ \ \ \ \ drflac\_int32\ x[4];}
\DoxyCodeLine{04364\ \ \ \ \ x[3]\ =\ x3;}
\DoxyCodeLine{04365\ \ \ \ \ x[2]\ =\ x2;}
\DoxyCodeLine{04366\ \ \ \ \ x[1]\ =\ x1;}
\DoxyCodeLine{04367\ \ \ \ \ x[0]\ =\ x0;}
\DoxyCodeLine{04368\ \ \ \ \ \textcolor{keywordflow}{return}\ vld1q\_s32(x);}
\DoxyCodeLine{04369\ \}}
\DoxyCodeLine{04370\ }
\DoxyCodeLine{04371\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ int32x4\_t\ drflac\_\_valignrq\_s32\_1(int32x4\_t\ a,\ int32x4\_t\ b)}
\DoxyCodeLine{04372\ \{}
\DoxyCodeLine{04373\ \ \ \ \ \textcolor{comment}{/*\ Equivalent\ to\ SSE's\ \_mm\_alignr\_epi8(a,\ b,\ 4)\ */}}
\DoxyCodeLine{04374\ }
\DoxyCodeLine{04375\ \ \ \ \ \textcolor{comment}{/*\ Reference\ */}}
\DoxyCodeLine{04376\ \ \ \ \ \textcolor{comment}{/*return\ drflac\_\_vdupq\_n\_s32x4(}}
\DoxyCodeLine{04377\ \textcolor{comment}{\ \ \ \ \ \ \ \ vgetq\_lane\_s32(a,\ 0),}}
\DoxyCodeLine{04378\ \textcolor{comment}{\ \ \ \ \ \ \ \ vgetq\_lane\_s32(b,\ 3),}}
\DoxyCodeLine{04379\ \textcolor{comment}{\ \ \ \ \ \ \ \ vgetq\_lane\_s32(b,\ 2),}}
\DoxyCodeLine{04380\ \textcolor{comment}{\ \ \ \ \ \ \ \ vgetq\_lane\_s32(b,\ 1)}}
\DoxyCodeLine{04381\ \textcolor{comment}{\ \ \ \ );*/}}
\DoxyCodeLine{04382\ }
\DoxyCodeLine{04383\ \ \ \ \ \textcolor{keywordflow}{return}\ vextq\_s32(b,\ a,\ 1);}
\DoxyCodeLine{04384\ \}}
\DoxyCodeLine{04385\ }
\DoxyCodeLine{04386\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ uint32x4\_t\ drflac\_\_valignrq\_u32\_1(uint32x4\_t\ a,\ uint32x4\_t\ b)}
\DoxyCodeLine{04387\ \{}
\DoxyCodeLine{04388\ \ \ \ \ \textcolor{comment}{/*\ Equivalent\ to\ SSE's\ \_mm\_alignr\_epi8(a,\ b,\ 4)\ */}}
\DoxyCodeLine{04389\ }
\DoxyCodeLine{04390\ \ \ \ \ \textcolor{comment}{/*\ Reference\ */}}
\DoxyCodeLine{04391\ \ \ \ \ \textcolor{comment}{/*return\ drflac\_\_vdupq\_n\_s32x4(}}
\DoxyCodeLine{04392\ \textcolor{comment}{\ \ \ \ \ \ \ \ vgetq\_lane\_s32(a,\ 0),}}
\DoxyCodeLine{04393\ \textcolor{comment}{\ \ \ \ \ \ \ \ vgetq\_lane\_s32(b,\ 3),}}
\DoxyCodeLine{04394\ \textcolor{comment}{\ \ \ \ \ \ \ \ vgetq\_lane\_s32(b,\ 2),}}
\DoxyCodeLine{04395\ \textcolor{comment}{\ \ \ \ \ \ \ \ vgetq\_lane\_s32(b,\ 1)}}
\DoxyCodeLine{04396\ \textcolor{comment}{\ \ \ \ );*/}}
\DoxyCodeLine{04397\ }
\DoxyCodeLine{04398\ \ \ \ \ \textcolor{keywordflow}{return}\ vextq\_u32(b,\ a,\ 1);}
\DoxyCodeLine{04399\ \}}
\DoxyCodeLine{04400\ }
\DoxyCodeLine{04401\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ int32x2\_t\ drflac\_\_vhaddq\_s32(int32x4\_t\ x)}
\DoxyCodeLine{04402\ \{}
\DoxyCodeLine{04403\ \ \ \ \ \textcolor{comment}{/*\ The\ sum\ must\ end\ up\ in\ position\ 0.\ */}}
\DoxyCodeLine{04404\ }
\DoxyCodeLine{04405\ \ \ \ \ \textcolor{comment}{/*\ Reference\ */}}
\DoxyCodeLine{04406\ \ \ \ \ \textcolor{comment}{/*return\ vdupq\_n\_s32(}}
\DoxyCodeLine{04407\ \textcolor{comment}{\ \ \ \ \ \ \ \ vgetq\_lane\_s32(x,\ 3)\ +}}
\DoxyCodeLine{04408\ \textcolor{comment}{\ \ \ \ \ \ \ \ vgetq\_lane\_s32(x,\ 2)\ +}}
\DoxyCodeLine{04409\ \textcolor{comment}{\ \ \ \ \ \ \ \ vgetq\_lane\_s32(x,\ 1)\ +}}
\DoxyCodeLine{04410\ \textcolor{comment}{\ \ \ \ \ \ \ \ vgetq\_lane\_s32(x,\ 0)}}
\DoxyCodeLine{04411\ \textcolor{comment}{\ \ \ \ );*/}}
\DoxyCodeLine{04412\ }
\DoxyCodeLine{04413\ \ \ \ \ int32x2\_t\ r\ =\ vadd\_s32(vget\_high\_s32(x),\ vget\_low\_s32(x));}
\DoxyCodeLine{04414\ \ \ \ \ \textcolor{keywordflow}{return}\ vpadd\_s32(r,\ r);}
\DoxyCodeLine{04415\ \}}
\DoxyCodeLine{04416\ }
\DoxyCodeLine{04417\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ int64x1\_t\ drflac\_\_vhaddq\_s64(int64x2\_t\ x)}
\DoxyCodeLine{04418\ \{}
\DoxyCodeLine{04419\ \ \ \ \ \textcolor{keywordflow}{return}\ vadd\_s64(vget\_high\_s64(x),\ vget\_low\_s64(x));}
\DoxyCodeLine{04420\ \}}
\DoxyCodeLine{04421\ }
\DoxyCodeLine{04422\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ int32x4\_t\ drflac\_\_vrevq\_s32(int32x4\_t\ x)}
\DoxyCodeLine{04423\ \{}
\DoxyCodeLine{04424\ \ \ \ \ \textcolor{comment}{/*\ Reference\ */}}
\DoxyCodeLine{04425\ \ \ \ \ \textcolor{comment}{/*return\ drflac\_\_vdupq\_n\_s32x4(}}
\DoxyCodeLine{04426\ \textcolor{comment}{\ \ \ \ \ \ \ \ vgetq\_lane\_s32(x,\ 0),}}
\DoxyCodeLine{04427\ \textcolor{comment}{\ \ \ \ \ \ \ \ vgetq\_lane\_s32(x,\ 1),}}
\DoxyCodeLine{04428\ \textcolor{comment}{\ \ \ \ \ \ \ \ vgetq\_lane\_s32(x,\ 2),}}
\DoxyCodeLine{04429\ \textcolor{comment}{\ \ \ \ \ \ \ \ vgetq\_lane\_s32(x,\ 3)}}
\DoxyCodeLine{04430\ \textcolor{comment}{\ \ \ \ );*/}}
\DoxyCodeLine{04431\ }
\DoxyCodeLine{04432\ \ \ \ \ \textcolor{keywordflow}{return}\ vrev64q\_s32(vcombine\_s32(vget\_high\_s32(x),\ vget\_low\_s32(x)));}
\DoxyCodeLine{04433\ \}}
\DoxyCodeLine{04434\ }
\DoxyCodeLine{04435\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ int32x4\_t\ drflac\_\_vnotq\_s32(int32x4\_t\ x)}
\DoxyCodeLine{04436\ \{}
\DoxyCodeLine{04437\ \ \ \ \ \textcolor{keywordflow}{return}\ veorq\_s32(x,\ vdupq\_n\_s32(0xFFFFFFFF));}
\DoxyCodeLine{04438\ \}}
\DoxyCodeLine{04439\ }
\DoxyCodeLine{04440\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ uint32x4\_t\ drflac\_\_vnotq\_u32(uint32x4\_t\ x)}
\DoxyCodeLine{04441\ \{}
\DoxyCodeLine{04442\ \ \ \ \ \textcolor{keywordflow}{return}\ veorq\_u32(x,\ vdupq\_n\_u32(0xFFFFFFFF));}
\DoxyCodeLine{04443\ \}}
\DoxyCodeLine{04444\ }
\DoxyCodeLine{04445\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_neon\_32(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ count,\ drflac\_uint8\ riceParam,\ drflac\_uint32\ order,\ drflac\_int32\ shift,\ \textcolor{keyword}{const}\ drflac\_int32*\ coefficients,\ drflac\_int32*\ pSamplesOut)}
\DoxyCodeLine{04446\ \{}
\DoxyCodeLine{04447\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{04448\ \ \ \ \ drflac\_uint32\ riceParamMask;}
\DoxyCodeLine{04449\ \ \ \ \ drflac\_int32*\ pDecodedSamples\ \ \ \ =\ pSamplesOut;}
\DoxyCodeLine{04450\ \ \ \ \ drflac\_int32*\ pDecodedSamplesEnd\ =\ pSamplesOut\ +\ (count\ \&\ \string~3);}
\DoxyCodeLine{04451\ \ \ \ \ drflac\_uint32\ zeroCountParts[4];}
\DoxyCodeLine{04452\ \ \ \ \ drflac\_uint32\ riceParamParts[4];}
\DoxyCodeLine{04453\ \ \ \ \ int32x4\_t\ coefficients128\_0;}
\DoxyCodeLine{04454\ \ \ \ \ int32x4\_t\ coefficients128\_4;}
\DoxyCodeLine{04455\ \ \ \ \ int32x4\_t\ coefficients128\_8;}
\DoxyCodeLine{04456\ \ \ \ \ int32x4\_t\ samples128\_0;}
\DoxyCodeLine{04457\ \ \ \ \ int32x4\_t\ samples128\_4;}
\DoxyCodeLine{04458\ \ \ \ \ int32x4\_t\ samples128\_8;}
\DoxyCodeLine{04459\ \ \ \ \ uint32x4\_t\ riceParamMask128;}
\DoxyCodeLine{04460\ \ \ \ \ int32x4\_t\ riceParam128;}
\DoxyCodeLine{04461\ \ \ \ \ int32x2\_t\ shift64;}
\DoxyCodeLine{04462\ \ \ \ \ uint32x4\_t\ one128;}
\DoxyCodeLine{04463\ }
\DoxyCodeLine{04464\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32\ t[2]\ =\ \{0x00000000,\ 0xFFFFFFFF\};}
\DoxyCodeLine{04465\ }
\DoxyCodeLine{04466\ \ \ \ \ riceParamMask\ \ \ \ =\ (drflac\_uint32)\string~((\string~0UL)\ <<\ riceParam);}
\DoxyCodeLine{04467\ \ \ \ \ riceParamMask128\ =\ vdupq\_n\_u32(riceParamMask);}
\DoxyCodeLine{04468\ }
\DoxyCodeLine{04469\ \ \ \ \ riceParam128\ =\ vdupq\_n\_s32(riceParam);}
\DoxyCodeLine{04470\ \ \ \ \ shift64\ =\ vdup\_n\_s32(-\/shift);\ \textcolor{comment}{/*\ Negate\ the\ shift\ because\ we'll\ be\ doing\ a\ variable\ shift\ using\ vshlq\_s32().\ */}}
\DoxyCodeLine{04471\ \ \ \ \ one128\ =\ vdupq\_n\_u32(1);}
\DoxyCodeLine{04472\ }
\DoxyCodeLine{04473\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{04474\ \textcolor{comment}{\ \ \ \ Pre-\/loading\ the\ coefficients\ and\ prior\ samples\ is\ annoying\ because\ we\ need\ to\ ensure\ we\ don't\ try\ reading\ more\ than}}
\DoxyCodeLine{04475\ \textcolor{comment}{\ \ \ \ what's\ available\ in\ the\ input\ buffers.\ It\ would\ be\ conenient\ to\ use\ a\ fall-\/through\ switch\ to\ do\ this,\ but\ this\ results}}
\DoxyCodeLine{04476\ \textcolor{comment}{\ \ \ \ in\ strict\ aliasing\ warnings\ with\ GCC.\ To\ work\ around\ this\ I'm\ just\ doing\ something\ hacky.\ This\ feels\ a\ bit\ convoluted}}
\DoxyCodeLine{04477\ \textcolor{comment}{\ \ \ \ so\ I\ think\ there's\ opportunity\ for\ this\ to\ be\ simplified.}}
\DoxyCodeLine{04478\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{04479\ \ \ \ \ \{}
\DoxyCodeLine{04480\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ runningOrder\ =\ order;}
\DoxyCodeLine{04481\ \ \ \ \ \ \ \ \ drflac\_int32\ tempC[4]\ =\ \{0,\ 0,\ 0,\ 0\};}
\DoxyCodeLine{04482\ \ \ \ \ \ \ \ \ drflac\_int32\ tempS[4]\ =\ \{0,\ 0,\ 0,\ 0\};}
\DoxyCodeLine{04483\ }
\DoxyCodeLine{04484\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ 0\ -\/\ 3.\ */}}
\DoxyCodeLine{04485\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (runningOrder\ >=\ 4)\ \{}
\DoxyCodeLine{04486\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_0\ =\ vld1q\_s32(coefficients\ +\ 0);}
\DoxyCodeLine{04487\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_0\ \ \ \ \ \ =\ vld1q\_s32(pSamplesOut\ \ -\/\ 4);}
\DoxyCodeLine{04488\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ -\/=\ 4;}
\DoxyCodeLine{04489\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04490\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (runningOrder)\ \{}
\DoxyCodeLine{04491\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ tempC[2]\ =\ coefficients[2];\ tempS[1]\ =\ pSamplesOut[-\/3];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ tempC[1]\ =\ coefficients[1];\ tempS[2]\ =\ pSamplesOut[-\/2];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ tempC[0]\ =\ coefficients[0];\ tempS[3]\ =\ pSamplesOut[-\/1];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04494\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04495\ }
\DoxyCodeLine{04496\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_0\ =\ vld1q\_s32(tempC);}
\DoxyCodeLine{04497\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_0\ \ \ \ \ \ =\ vld1q\_s32(tempS);}
\DoxyCodeLine{04498\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ =\ 0;}
\DoxyCodeLine{04499\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04500\ }
\DoxyCodeLine{04501\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ 4\ -\/\ 7\ */}}
\DoxyCodeLine{04502\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (runningOrder\ >=\ 4)\ \{}
\DoxyCodeLine{04503\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_4\ =\ vld1q\_s32(coefficients\ +\ 4);}
\DoxyCodeLine{04504\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_4\ \ \ \ \ \ =\ vld1q\_s32(pSamplesOut\ \ -\/\ 8);}
\DoxyCodeLine{04505\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ -\/=\ 4;}
\DoxyCodeLine{04506\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04507\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (runningOrder)\ \{}
\DoxyCodeLine{04508\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ tempC[2]\ =\ coefficients[6];\ tempS[1]\ =\ pSamplesOut[-\/7];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04509\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ tempC[1]\ =\ coefficients[5];\ tempS[2]\ =\ pSamplesOut[-\/6];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04510\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ tempC[0]\ =\ coefficients[4];\ tempS[3]\ =\ pSamplesOut[-\/5];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04511\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04512\ }
\DoxyCodeLine{04513\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_4\ =\ vld1q\_s32(tempC);}
\DoxyCodeLine{04514\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_4\ \ \ \ \ \ =\ vld1q\_s32(tempS);}
\DoxyCodeLine{04515\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ =\ 0;}
\DoxyCodeLine{04516\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04517\ }
\DoxyCodeLine{04518\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ 8\ -\/\ 11\ */}}
\DoxyCodeLine{04519\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (runningOrder\ ==\ 4)\ \{}
\DoxyCodeLine{04520\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_8\ =\ vld1q\_s32(coefficients\ +\ 8);}
\DoxyCodeLine{04521\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_8\ \ \ \ \ \ =\ vld1q\_s32(pSamplesOut\ \ -\/\ 12);}
\DoxyCodeLine{04522\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ -\/=\ 4;}
\DoxyCodeLine{04523\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04524\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (runningOrder)\ \{}
\DoxyCodeLine{04525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ tempC[2]\ =\ coefficients[10];\ tempS[1]\ =\ pSamplesOut[-\/11];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04526\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ tempC[1]\ =\ coefficients[\ 9];\ tempS[2]\ =\ pSamplesOut[-\/10];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04527\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ tempC[0]\ =\ coefficients[\ 8];\ tempS[3]\ =\ pSamplesOut[-\/\ 9];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04528\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04529\ }
\DoxyCodeLine{04530\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_8\ =\ vld1q\_s32(tempC);}
\DoxyCodeLine{04531\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_8\ \ \ \ \ \ =\ vld1q\_s32(tempS);}
\DoxyCodeLine{04532\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ =\ 0;}
\DoxyCodeLine{04533\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04534\ }
\DoxyCodeLine{04535\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Coefficients\ need\ to\ be\ shuffled\ for\ our\ streaming\ algorithm\ below\ to\ work.\ Samples\ are\ already\ in\ the\ correct\ order\ from\ the\ loading\ routine\ above.\ */}}
\DoxyCodeLine{04536\ \ \ \ \ \ \ \ \ coefficients128\_0\ =\ drflac\_\_vrevq\_s32(coefficients128\_0);}
\DoxyCodeLine{04537\ \ \ \ \ \ \ \ \ coefficients128\_4\ =\ drflac\_\_vrevq\_s32(coefficients128\_4);}
\DoxyCodeLine{04538\ \ \ \ \ \ \ \ \ coefficients128\_8\ =\ drflac\_\_vrevq\_s32(coefficients128\_8);}
\DoxyCodeLine{04539\ \ \ \ \ \}}
\DoxyCodeLine{04540\ }
\DoxyCodeLine{04541\ \ \ \ \ \textcolor{comment}{/*\ For\ this\ version\ we\ are\ doing\ one\ sample\ at\ a\ time.\ */}}
\DoxyCodeLine{04542\ \ \ \ \ \textcolor{keywordflow}{while}\ (pDecodedSamples\ <\ pDecodedSamplesEnd)\ \{}
\DoxyCodeLine{04543\ \ \ \ \ \ \ \ \ int32x4\_t\ prediction128;}
\DoxyCodeLine{04544\ \ \ \ \ \ \ \ \ int32x2\_t\ prediction64;}
\DoxyCodeLine{04545\ \ \ \ \ \ \ \ \ uint32x4\_t\ zeroCountPart128;}
\DoxyCodeLine{04546\ \ \ \ \ \ \ \ \ uint32x4\_t\ riceParamPart128;}
\DoxyCodeLine{04547\ }
\DoxyCodeLine{04548\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts[0],\ \&riceParamParts[0])\ ||}
\DoxyCodeLine{04549\ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts[1],\ \&riceParamParts[1])\ ||}
\DoxyCodeLine{04550\ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts[2],\ \&riceParamParts[2])\ ||}
\DoxyCodeLine{04551\ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts[3],\ \&riceParamParts[3]))\ \{}
\DoxyCodeLine{04552\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04553\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04554\ }
\DoxyCodeLine{04555\ \ \ \ \ \ \ \ \ zeroCountPart128\ =\ vld1q\_u32(zeroCountParts);}
\DoxyCodeLine{04556\ \ \ \ \ \ \ \ \ riceParamPart128\ =\ vld1q\_u32(riceParamParts);}
\DoxyCodeLine{04557\ }
\DoxyCodeLine{04558\ \ \ \ \ \ \ \ \ riceParamPart128\ =\ vandq\_u32(riceParamPart128,\ riceParamMask128);}
\DoxyCodeLine{04559\ \ \ \ \ \ \ \ \ riceParamPart128\ =\ vorrq\_u32(riceParamPart128,\ vshlq\_u32(zeroCountPart128,\ riceParam128));}
\DoxyCodeLine{04560\ \ \ \ \ \ \ \ \ riceParamPart128\ =\ veorq\_u32(vshrq\_n\_u32(riceParamPart128,\ 1),\ vaddq\_u32(drflac\_\_vnotq\_u32(vandq\_u32(riceParamPart128,\ one128)),\ one128));}
\DoxyCodeLine{04561\ }
\DoxyCodeLine{04562\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (order\ <=\ 4)\ \{}
\DoxyCodeLine{04563\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ 4;\ i\ +=\ 1)\ \{}
\DoxyCodeLine{04564\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ vmulq\_s32(coefficients128\_0,\ samples128\_0);}
\DoxyCodeLine{04565\ }
\DoxyCodeLine{04566\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Horizontal\ add\ and\ shift.\ */}}
\DoxyCodeLine{04567\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction64\ =\ drflac\_\_vhaddq\_s32(prediction128);}
\DoxyCodeLine{04568\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction64\ =\ vshl\_s32(prediction64,\ shift64);}
\DoxyCodeLine{04569\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction64\ =\ vadd\_s32(prediction64,\ vget\_low\_s32(vreinterpretq\_s32\_u32(riceParamPart128)));}
\DoxyCodeLine{04570\ }
\DoxyCodeLine{04571\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_0\ =\ drflac\_\_valignrq\_s32\_1(vcombine\_s32(prediction64,\ vdup\_n\_s32(0)),\ samples128\_0);}
\DoxyCodeLine{04572\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart128\ =\ drflac\_\_valignrq\_u32\_1(vdupq\_n\_u32(0),\ riceParamPart128);}
\DoxyCodeLine{04573\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04574\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (order\ <=\ 8)\ \{}
\DoxyCodeLine{04575\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ 4;\ i\ +=\ 1)\ \{}
\DoxyCodeLine{04576\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vmulq\_s32(coefficients128\_4,\ samples128\_4);}
\DoxyCodeLine{04577\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ vmlaq\_s32(prediction128,\ coefficients128\_0,\ samples128\_0);}
\DoxyCodeLine{04578\ }
\DoxyCodeLine{04579\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Horizontal\ add\ and\ shift.\ */}}
\DoxyCodeLine{04580\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction64\ =\ drflac\_\_vhaddq\_s32(prediction128);}
\DoxyCodeLine{04581\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction64\ =\ vshl\_s32(prediction64,\ shift64);}
\DoxyCodeLine{04582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction64\ =\ vadd\_s32(prediction64,\ vget\_low\_s32(vreinterpretq\_s32\_u32(riceParamPart128)));}
\DoxyCodeLine{04583\ }
\DoxyCodeLine{04584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_4\ =\ drflac\_\_valignrq\_s32\_1(samples128\_0,\ samples128\_4);}
\DoxyCodeLine{04585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_0\ =\ drflac\_\_valignrq\_s32\_1(vcombine\_s32(prediction64,\ vdup\_n\_s32(0)),\ samples128\_0);}
\DoxyCodeLine{04586\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart128\ =\ drflac\_\_valignrq\_u32\_1(vdupq\_n\_u32(0),\ riceParamPart128);}
\DoxyCodeLine{04587\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04588\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04589\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ 4;\ i\ +=\ 1)\ \{}
\DoxyCodeLine{04590\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vmulq\_s32(coefficients128\_8,\ samples128\_8);}
\DoxyCodeLine{04591\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ vmlaq\_s32(prediction128,\ coefficients128\_4,\ samples128\_4);}
\DoxyCodeLine{04592\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ vmlaq\_s32(prediction128,\ coefficients128\_0,\ samples128\_0);}
\DoxyCodeLine{04593\ }
\DoxyCodeLine{04594\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Horizontal\ add\ and\ shift.\ */}}
\DoxyCodeLine{04595\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction64\ =\ drflac\_\_vhaddq\_s32(prediction128);}
\DoxyCodeLine{04596\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction64\ =\ vshl\_s32(prediction64,\ shift64);}
\DoxyCodeLine{04597\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prediction64\ =\ vadd\_s32(prediction64,\ vget\_low\_s32(vreinterpretq\_s32\_u32(riceParamPart128)));}
\DoxyCodeLine{04598\ }
\DoxyCodeLine{04599\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_8\ =\ drflac\_\_valignrq\_s32\_1(samples128\_4,\ samples128\_8);}
\DoxyCodeLine{04600\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_4\ =\ drflac\_\_valignrq\_s32\_1(samples128\_0,\ samples128\_4);}
\DoxyCodeLine{04601\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_0\ =\ drflac\_\_valignrq\_s32\_1(vcombine\_s32(prediction64,\ vdup\_n\_s32(0)),\ samples128\_0);}
\DoxyCodeLine{04602\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart128\ =\ drflac\_\_valignrq\_u32\_1(vdupq\_n\_u32(0),\ riceParamPart128);}
\DoxyCodeLine{04603\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04604\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04605\ }
\DoxyCodeLine{04606\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ store\ samples\ in\ groups\ of\ 4.\ */}}
\DoxyCodeLine{04607\ \ \ \ \ \ \ \ \ vst1q\_s32(pDecodedSamples,\ samples128\_0);}
\DoxyCodeLine{04608\ \ \ \ \ \ \ \ \ pDecodedSamples\ +=\ 4;}
\DoxyCodeLine{04609\ \ \ \ \ \}}
\DoxyCodeLine{04610\ }
\DoxyCodeLine{04611\ \ \ \ \ \textcolor{comment}{/*\ Make\ sure\ we\ process\ the\ last\ few\ samples.\ */}}
\DoxyCodeLine{04612\ \ \ \ \ i\ =\ (count\ \&\ \string~3);}
\DoxyCodeLine{04613\ \ \ \ \ \textcolor{keywordflow}{while}\ (i\ <\ (\textcolor{keywordtype}{int})count)\ \{}
\DoxyCodeLine{04614\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Rice\ extraction.\ */}}
\DoxyCodeLine{04615\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts[0],\ \&riceParamParts[0]))\ \{}
\DoxyCodeLine{04616\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04617\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04618\ }
\DoxyCodeLine{04619\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Rice\ reconstruction.\ */}}
\DoxyCodeLine{04620\ \ \ \ \ \ \ \ \ riceParamParts[0]\ \&=\ riceParamMask;}
\DoxyCodeLine{04621\ \ \ \ \ \ \ \ \ riceParamParts[0]\ |=\ (zeroCountParts[0]\ <<\ riceParam);}
\DoxyCodeLine{04622\ \ \ \ \ \ \ \ \ riceParamParts[0]\ \ =\ (riceParamParts[0]\ >>\ 1)\ \string^\ t[riceParamParts[0]\ \&\ 0x01];}
\DoxyCodeLine{04623\ }
\DoxyCodeLine{04624\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Sample\ reconstruction.\ */}}
\DoxyCodeLine{04625\ \ \ \ \ \ \ \ \ pDecodedSamples[0]\ =\ riceParamParts[0]\ +\ drflac\_\_calculate\_prediction\_32(order,\ shift,\ coefficients,\ pDecodedSamples);}
\DoxyCodeLine{04626\ }
\DoxyCodeLine{04627\ \ \ \ \ \ \ \ \ i\ +=\ 1;}
\DoxyCodeLine{04628\ \ \ \ \ \ \ \ \ pDecodedSamples\ +=\ 1;}
\DoxyCodeLine{04629\ \ \ \ \ \}}
\DoxyCodeLine{04630\ }
\DoxyCodeLine{04631\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{04632\ \}}
\DoxyCodeLine{04633\ }
\DoxyCodeLine{04634\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_neon\_64(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ count,\ drflac\_uint8\ riceParam,\ drflac\_uint32\ order,\ drflac\_int32\ shift,\ \textcolor{keyword}{const}\ drflac\_int32*\ coefficients,\ drflac\_int32*\ pSamplesOut)}
\DoxyCodeLine{04635\ \{}
\DoxyCodeLine{04636\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{04637\ \ \ \ \ drflac\_uint32\ riceParamMask;}
\DoxyCodeLine{04638\ \ \ \ \ drflac\_int32*\ pDecodedSamples\ \ \ \ =\ pSamplesOut;}
\DoxyCodeLine{04639\ \ \ \ \ drflac\_int32*\ pDecodedSamplesEnd\ =\ pSamplesOut\ +\ (count\ \&\ \string~3);}
\DoxyCodeLine{04640\ \ \ \ \ drflac\_uint32\ zeroCountParts[4];}
\DoxyCodeLine{04641\ \ \ \ \ drflac\_uint32\ riceParamParts[4];}
\DoxyCodeLine{04642\ \ \ \ \ int32x4\_t\ coefficients128\_0;}
\DoxyCodeLine{04643\ \ \ \ \ int32x4\_t\ coefficients128\_4;}
\DoxyCodeLine{04644\ \ \ \ \ int32x4\_t\ coefficients128\_8;}
\DoxyCodeLine{04645\ \ \ \ \ int32x4\_t\ samples128\_0;}
\DoxyCodeLine{04646\ \ \ \ \ int32x4\_t\ samples128\_4;}
\DoxyCodeLine{04647\ \ \ \ \ int32x4\_t\ samples128\_8;}
\DoxyCodeLine{04648\ \ \ \ \ uint32x4\_t\ riceParamMask128;}
\DoxyCodeLine{04649\ \ \ \ \ int32x4\_t\ riceParam128;}
\DoxyCodeLine{04650\ \ \ \ \ int64x1\_t\ shift64;}
\DoxyCodeLine{04651\ \ \ \ \ uint32x4\_t\ one128;}
\DoxyCodeLine{04652\ \ \ \ \ int64x2\_t\ prediction128\ =\ \{\ 0\ \};}
\DoxyCodeLine{04653\ \ \ \ \ uint32x4\_t\ zeroCountPart128;}
\DoxyCodeLine{04654\ \ \ \ \ uint32x4\_t\ riceParamPart128;}
\DoxyCodeLine{04655\ }
\DoxyCodeLine{04656\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32\ t[2]\ =\ \{0x00000000,\ 0xFFFFFFFF\};}
\DoxyCodeLine{04657\ }
\DoxyCodeLine{04658\ \ \ \ \ riceParamMask\ \ \ \ =\ (drflac\_uint32)\string~((\string~0UL)\ <<\ riceParam);}
\DoxyCodeLine{04659\ \ \ \ \ riceParamMask128\ =\ vdupq\_n\_u32(riceParamMask);}
\DoxyCodeLine{04660\ }
\DoxyCodeLine{04661\ \ \ \ \ riceParam128\ =\ vdupq\_n\_s32(riceParam);}
\DoxyCodeLine{04662\ \ \ \ \ shift64\ =\ vdup\_n\_s64(-\/shift);\ \textcolor{comment}{/*\ Negate\ the\ shift\ because\ we'll\ be\ doing\ a\ variable\ shift\ using\ vshlq\_s32().\ */}}
\DoxyCodeLine{04663\ \ \ \ \ one128\ =\ vdupq\_n\_u32(1);}
\DoxyCodeLine{04664\ }
\DoxyCodeLine{04665\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{04666\ \textcolor{comment}{\ \ \ \ Pre-\/loading\ the\ coefficients\ and\ prior\ samples\ is\ annoying\ because\ we\ need\ to\ ensure\ we\ don't\ try\ reading\ more\ than}}
\DoxyCodeLine{04667\ \textcolor{comment}{\ \ \ \ what's\ available\ in\ the\ input\ buffers.\ It\ would\ be\ convenient\ to\ use\ a\ fall-\/through\ switch\ to\ do\ this,\ but\ this\ results}}
\DoxyCodeLine{04668\ \textcolor{comment}{\ \ \ \ in\ strict\ aliasing\ warnings\ with\ GCC.\ To\ work\ around\ this\ I'm\ just\ doing\ something\ hacky.\ This\ feels\ a\ bit\ convoluted}}
\DoxyCodeLine{04669\ \textcolor{comment}{\ \ \ \ so\ I\ think\ there's\ opportunity\ for\ this\ to\ be\ simplified.}}
\DoxyCodeLine{04670\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{04671\ \ \ \ \ \{}
\DoxyCodeLine{04672\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ runningOrder\ =\ order;}
\DoxyCodeLine{04673\ \ \ \ \ \ \ \ \ drflac\_int32\ tempC[4]\ =\ \{0,\ 0,\ 0,\ 0\};}
\DoxyCodeLine{04674\ \ \ \ \ \ \ \ \ drflac\_int32\ tempS[4]\ =\ \{0,\ 0,\ 0,\ 0\};}
\DoxyCodeLine{04675\ }
\DoxyCodeLine{04676\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ 0\ -\/\ 3.\ */}}
\DoxyCodeLine{04677\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (runningOrder\ >=\ 4)\ \{}
\DoxyCodeLine{04678\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_0\ =\ vld1q\_s32(coefficients\ +\ 0);}
\DoxyCodeLine{04679\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_0\ \ \ \ \ \ =\ vld1q\_s32(pSamplesOut\ \ -\/\ 4);}
\DoxyCodeLine{04680\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ -\/=\ 4;}
\DoxyCodeLine{04681\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04682\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (runningOrder)\ \{}
\DoxyCodeLine{04683\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ tempC[2]\ =\ coefficients[2];\ tempS[1]\ =\ pSamplesOut[-\/3];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04684\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ tempC[1]\ =\ coefficients[1];\ tempS[2]\ =\ pSamplesOut[-\/2];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04685\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ tempC[0]\ =\ coefficients[0];\ tempS[3]\ =\ pSamplesOut[-\/1];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04686\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04687\ }
\DoxyCodeLine{04688\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_0\ =\ vld1q\_s32(tempC);}
\DoxyCodeLine{04689\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_0\ \ \ \ \ \ =\ vld1q\_s32(tempS);}
\DoxyCodeLine{04690\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ =\ 0;}
\DoxyCodeLine{04691\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04692\ }
\DoxyCodeLine{04693\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ 4\ -\/\ 7\ */}}
\DoxyCodeLine{04694\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (runningOrder\ >=\ 4)\ \{}
\DoxyCodeLine{04695\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_4\ =\ vld1q\_s32(coefficients\ +\ 4);}
\DoxyCodeLine{04696\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_4\ \ \ \ \ \ =\ vld1q\_s32(pSamplesOut\ \ -\/\ 8);}
\DoxyCodeLine{04697\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ -\/=\ 4;}
\DoxyCodeLine{04698\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04699\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (runningOrder)\ \{}
\DoxyCodeLine{04700\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ tempC[2]\ =\ coefficients[6];\ tempS[1]\ =\ pSamplesOut[-\/7];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04701\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ tempC[1]\ =\ coefficients[5];\ tempS[2]\ =\ pSamplesOut[-\/6];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04702\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ tempC[0]\ =\ coefficients[4];\ tempS[3]\ =\ pSamplesOut[-\/5];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04703\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04704\ }
\DoxyCodeLine{04705\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_4\ =\ vld1q\_s32(tempC);}
\DoxyCodeLine{04706\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_4\ \ \ \ \ \ =\ vld1q\_s32(tempS);}
\DoxyCodeLine{04707\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ =\ 0;}
\DoxyCodeLine{04708\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04709\ }
\DoxyCodeLine{04710\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ 8\ -\/\ 11\ */}}
\DoxyCodeLine{04711\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (runningOrder\ ==\ 4)\ \{}
\DoxyCodeLine{04712\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_8\ =\ vld1q\_s32(coefficients\ +\ 8);}
\DoxyCodeLine{04713\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_8\ \ \ \ \ \ =\ vld1q\_s32(pSamplesOut\ \ -\/\ 12);}
\DoxyCodeLine{04714\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ -\/=\ 4;}
\DoxyCodeLine{04715\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04716\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (runningOrder)\ \{}
\DoxyCodeLine{04717\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:\ tempC[2]\ =\ coefficients[10];\ tempS[1]\ =\ pSamplesOut[-\/11];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04718\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ tempC[1]\ =\ coefficients[\ 9];\ tempS[2]\ =\ pSamplesOut[-\/10];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04719\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ tempC[0]\ =\ coefficients[\ 8];\ tempS[3]\ =\ pSamplesOut[-\/\ 9];\ \textcolor{comment}{/*\ fallthrough\ */}}
\DoxyCodeLine{04720\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04721\ }
\DoxyCodeLine{04722\ \ \ \ \ \ \ \ \ \ \ \ \ coefficients128\_8\ =\ vld1q\_s32(tempC);}
\DoxyCodeLine{04723\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_8\ \ \ \ \ \ =\ vld1q\_s32(tempS);}
\DoxyCodeLine{04724\ \ \ \ \ \ \ \ \ \ \ \ \ runningOrder\ =\ 0;}
\DoxyCodeLine{04725\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04726\ }
\DoxyCodeLine{04727\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Coefficients\ need\ to\ be\ shuffled\ for\ our\ streaming\ algorithm\ below\ to\ work.\ Samples\ are\ already\ in\ the\ correct\ order\ from\ the\ loading\ routine\ above.\ */}}
\DoxyCodeLine{04728\ \ \ \ \ \ \ \ \ coefficients128\_0\ =\ drflac\_\_vrevq\_s32(coefficients128\_0);}
\DoxyCodeLine{04729\ \ \ \ \ \ \ \ \ coefficients128\_4\ =\ drflac\_\_vrevq\_s32(coefficients128\_4);}
\DoxyCodeLine{04730\ \ \ \ \ \ \ \ \ coefficients128\_8\ =\ drflac\_\_vrevq\_s32(coefficients128\_8);}
\DoxyCodeLine{04731\ \ \ \ \ \}}
\DoxyCodeLine{04732\ }
\DoxyCodeLine{04733\ \ \ \ \ \textcolor{comment}{/*\ For\ this\ version\ we\ are\ doing\ one\ sample\ at\ a\ time.\ */}}
\DoxyCodeLine{04734\ \ \ \ \ \textcolor{keywordflow}{while}\ (pDecodedSamples\ <\ pDecodedSamplesEnd)\ \{}
\DoxyCodeLine{04735\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts[0],\ \&riceParamParts[0])\ ||}
\DoxyCodeLine{04736\ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts[1],\ \&riceParamParts[1])\ ||}
\DoxyCodeLine{04737\ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts[2],\ \&riceParamParts[2])\ ||}
\DoxyCodeLine{04738\ \ \ \ \ \ \ \ \ \ \ \ \ !drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts[3],\ \&riceParamParts[3]))\ \{}
\DoxyCodeLine{04739\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04740\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04741\ }
\DoxyCodeLine{04742\ \ \ \ \ \ \ \ \ zeroCountPart128\ =\ vld1q\_u32(zeroCountParts);}
\DoxyCodeLine{04743\ \ \ \ \ \ \ \ \ riceParamPart128\ =\ vld1q\_u32(riceParamParts);}
\DoxyCodeLine{04744\ }
\DoxyCodeLine{04745\ \ \ \ \ \ \ \ \ riceParamPart128\ =\ vandq\_u32(riceParamPart128,\ riceParamMask128);}
\DoxyCodeLine{04746\ \ \ \ \ \ \ \ \ riceParamPart128\ =\ vorrq\_u32(riceParamPart128,\ vshlq\_u32(zeroCountPart128,\ riceParam128));}
\DoxyCodeLine{04747\ \ \ \ \ \ \ \ \ riceParamPart128\ =\ veorq\_u32(vshrq\_n\_u32(riceParamPart128,\ 1),\ vaddq\_u32(drflac\_\_vnotq\_u32(vandq\_u32(riceParamPart128,\ one128)),\ one128));}
\DoxyCodeLine{04748\ }
\DoxyCodeLine{04749\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ 4;\ i\ +=\ 1)\ \{}
\DoxyCodeLine{04750\ \ \ \ \ \ \ \ \ \ \ \ \ int64x1\_t\ prediction64;}
\DoxyCodeLine{04751\ }
\DoxyCodeLine{04752\ \ \ \ \ \ \ \ \ \ \ \ \ prediction128\ =\ veorq\_s64(prediction128,\ prediction128);\ \ \ \ \textcolor{comment}{/*\ Reset\ to\ 0.\ */}}
\DoxyCodeLine{04753\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (order)}
\DoxyCodeLine{04754\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{04755\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 12:}
\DoxyCodeLine{04756\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 11:\ prediction128\ =\ vaddq\_s64(prediction128,\ vmull\_s32(vget\_low\_s32(coefficients128\_8),\ vget\_low\_s32(samples128\_8)));}
\DoxyCodeLine{04757\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 10:}
\DoxyCodeLine{04758\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 9:\ prediction128\ =\ vaddq\_s64(prediction128,\ vmull\_s32(vget\_high\_s32(coefficients128\_8),\ vget\_high\_s32(samples128\_8)));}
\DoxyCodeLine{04759\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 8:}
\DoxyCodeLine{04760\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 7:\ prediction128\ =\ vaddq\_s64(prediction128,\ vmull\_s32(vget\_low\_s32(coefficients128\_4),\ vget\_low\_s32(samples128\_4)));}
\DoxyCodeLine{04761\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 6:}
\DoxyCodeLine{04762\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 5:\ prediction128\ =\ vaddq\_s64(prediction128,\ vmull\_s32(vget\_high\_s32(coefficients128\_4),\ vget\_high\_s32(samples128\_4)));}
\DoxyCodeLine{04763\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 4:}
\DoxyCodeLine{04764\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 3:\ prediction128\ =\ vaddq\_s64(prediction128,\ vmull\_s32(vget\_low\_s32(coefficients128\_0),\ vget\_low\_s32(samples128\_0)));}
\DoxyCodeLine{04765\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 2:}
\DoxyCodeLine{04766\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 1:\ prediction128\ =\ vaddq\_s64(prediction128,\ vmull\_s32(vget\_high\_s32(coefficients128\_0),\ vget\_high\_s32(samples128\_0)));}
\DoxyCodeLine{04767\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04768\ }
\DoxyCodeLine{04769\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Horizontal\ add\ and\ shift.\ */}}
\DoxyCodeLine{04770\ \ \ \ \ \ \ \ \ \ \ \ \ prediction64\ =\ drflac\_\_vhaddq\_s64(prediction128);}
\DoxyCodeLine{04771\ \ \ \ \ \ \ \ \ \ \ \ \ prediction64\ =\ vshl\_s64(prediction64,\ shift64);}
\DoxyCodeLine{04772\ \ \ \ \ \ \ \ \ \ \ \ \ prediction64\ =\ vadd\_s64(prediction64,\ vdup\_n\_s64(vgetq\_lane\_u32(riceParamPart128,\ 0)));}
\DoxyCodeLine{04773\ }
\DoxyCodeLine{04774\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Our\ value\ should\ be\ sitting\ in\ prediction64[0].\ We\ need\ to\ combine\ this\ with\ our\ SSE\ samples.\ */}}
\DoxyCodeLine{04775\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_8\ =\ drflac\_\_valignrq\_s32\_1(samples128\_4,\ samples128\_8);}
\DoxyCodeLine{04776\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_4\ =\ drflac\_\_valignrq\_s32\_1(samples128\_0,\ samples128\_4);}
\DoxyCodeLine{04777\ \ \ \ \ \ \ \ \ \ \ \ \ samples128\_0\ =\ drflac\_\_valignrq\_s32\_1(vcombine\_s32(vreinterpret\_s32\_s64(prediction64),\ vdup\_n\_s32(0)),\ samples128\_0);}
\DoxyCodeLine{04778\ }
\DoxyCodeLine{04779\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Slide\ our\ rice\ parameter\ down\ so\ that\ the\ value\ in\ position\ 0\ contains\ the\ next\ one\ to\ process.\ */}}
\DoxyCodeLine{04780\ \ \ \ \ \ \ \ \ \ \ \ \ riceParamPart128\ =\ drflac\_\_valignrq\_u32\_1(vdupq\_n\_u32(0),\ riceParamPart128);}
\DoxyCodeLine{04781\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04782\ }
\DoxyCodeLine{04783\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ store\ samples\ in\ groups\ of\ 4.\ */}}
\DoxyCodeLine{04784\ \ \ \ \ \ \ \ \ vst1q\_s32(pDecodedSamples,\ samples128\_0);}
\DoxyCodeLine{04785\ \ \ \ \ \ \ \ \ pDecodedSamples\ +=\ 4;}
\DoxyCodeLine{04786\ \ \ \ \ \}}
\DoxyCodeLine{04787\ }
\DoxyCodeLine{04788\ \ \ \ \ \textcolor{comment}{/*\ Make\ sure\ we\ process\ the\ last\ few\ samples.\ */}}
\DoxyCodeLine{04789\ \ \ \ \ i\ =\ (count\ \&\ \string~3);}
\DoxyCodeLine{04790\ \ \ \ \ \textcolor{keywordflow}{while}\ (i\ <\ (\textcolor{keywordtype}{int})count)\ \{}
\DoxyCodeLine{04791\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Rice\ extraction.\ */}}
\DoxyCodeLine{04792\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_rice\_parts\_x1(bs,\ riceParam,\ \&zeroCountParts[0],\ \&riceParamParts[0]))\ \{}
\DoxyCodeLine{04793\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04794\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04795\ }
\DoxyCodeLine{04796\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Rice\ reconstruction.\ */}}
\DoxyCodeLine{04797\ \ \ \ \ \ \ \ \ riceParamParts[0]\ \&=\ riceParamMask;}
\DoxyCodeLine{04798\ \ \ \ \ \ \ \ \ riceParamParts[0]\ |=\ (zeroCountParts[0]\ <<\ riceParam);}
\DoxyCodeLine{04799\ \ \ \ \ \ \ \ \ riceParamParts[0]\ \ =\ (riceParamParts[0]\ >>\ 1)\ \string^\ t[riceParamParts[0]\ \&\ 0x01];}
\DoxyCodeLine{04800\ }
\DoxyCodeLine{04801\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Sample\ reconstruction.\ */}}
\DoxyCodeLine{04802\ \ \ \ \ \ \ \ \ pDecodedSamples[0]\ =\ riceParamParts[0]\ +\ drflac\_\_calculate\_prediction\_64(order,\ shift,\ coefficients,\ pDecodedSamples);}
\DoxyCodeLine{04803\ }
\DoxyCodeLine{04804\ \ \ \ \ \ \ \ \ i\ +=\ 1;}
\DoxyCodeLine{04805\ \ \ \ \ \ \ \ \ pDecodedSamples\ +=\ 1;}
\DoxyCodeLine{04806\ \ \ \ \ \}}
\DoxyCodeLine{04807\ }
\DoxyCodeLine{04808\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{04809\ \}}
\DoxyCodeLine{04810\ }
\DoxyCodeLine{04811\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_neon(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ bitsPerSample,\ drflac\_uint32\ count,\ drflac\_uint8\ riceParam,\ drflac\_uint32\ lpcOrder,\ drflac\_int32\ lpcShift,\ drflac\_uint32\ lpcPrecision,\ \textcolor{keyword}{const}\ drflac\_int32*\ coefficients,\ drflac\_int32*\ pSamplesOut)}
\DoxyCodeLine{04812\ \{}
\DoxyCodeLine{04813\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{04814\ \ \ \ \ DRFLAC\_ASSERT(pSamplesOut\ !=\ NULL);}
\DoxyCodeLine{04815\ }
\DoxyCodeLine{04816\ \ \ \ \ \textcolor{comment}{/*\ In\ my\ testing\ the\ order\ is\ rarely\ >\ 12,\ so\ in\ this\ case\ I'm\ going\ to\ simplify\ the\ NEON\ implementation\ by\ only\ handling\ order\ <=\ 12.\ */}}
\DoxyCodeLine{04817\ \ \ \ \ \textcolor{keywordflow}{if}\ (lpcOrder\ >\ 0\ \&\&\ lpcOrder\ <=\ 12)\ \{}
\DoxyCodeLine{04818\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_use\_64\_bit\_prediction(bitsPerSample,\ lpcOrder,\ lpcPrecision))\ \{}
\DoxyCodeLine{04819\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_neon\_64(bs,\ count,\ riceParam,\ lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut);}
\DoxyCodeLine{04820\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04821\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_neon\_32(bs,\ count,\ riceParam,\ lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut);}
\DoxyCodeLine{04822\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04823\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04824\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_scalar(bs,\ bitsPerSample,\ count,\ riceParam,\ lpcOrder,\ lpcShift,\ lpcPrecision,\ coefficients,\ pSamplesOut);}
\DoxyCodeLine{04825\ \ \ \ \ \}}
\DoxyCodeLine{04826\ \}}
\DoxyCodeLine{04827\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{04828\ }
\DoxyCodeLine{04829\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_samples\_with\_residual\_\_rice(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ bitsPerSample,\ drflac\_uint32\ count,\ drflac\_uint8\ riceParam,\ drflac\_uint32\ lpcOrder,\ drflac\_int32\ lpcShift,\ drflac\_uint32\ lpcPrecision,\ \textcolor{keyword}{const}\ drflac\_int32*\ coefficients,\ drflac\_int32*\ pSamplesOut)}
\DoxyCodeLine{04830\ \{}
\DoxyCodeLine{04831\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE41)}}
\DoxyCodeLine{04832\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsSSE41Supported)\ \{}
\DoxyCodeLine{04833\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_sse41(bs,\ bitsPerSample,\ count,\ riceParam,\ lpcOrder,\ lpcShift,\ lpcPrecision,\ coefficients,\ pSamplesOut);}
\DoxyCodeLine{04834\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{04835\ \textcolor{preprocessor}{\#elif\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{04836\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsNEONSupported)\ \{}
\DoxyCodeLine{04837\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_neon(bs,\ bitsPerSample,\ count,\ riceParam,\ lpcOrder,\ lpcShift,\ lpcPrecision,\ coefficients,\ pSamplesOut);}
\DoxyCodeLine{04838\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{04839\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{04840\ \ \ \ \ \{}
\DoxyCodeLine{04841\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Scalar\ fallback.\ */}}
\DoxyCodeLine{04842\ \textcolor{preprocessor}{\ \ \ \ \#if\ 0}}
\DoxyCodeLine{04843\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_reference(bs,\ bitsPerSample,\ count,\ riceParam,\ lpcOrder,\ lpcShift,\ lpcPrecision,\ coefficients,\ pSamplesOut);}
\DoxyCodeLine{04844\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{04845\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_decode\_samples\_with\_residual\_\_rice\_\_scalar(bs,\ bitsPerSample,\ count,\ riceParam,\ lpcOrder,\ lpcShift,\ lpcPrecision,\ coefficients,\ pSamplesOut);}
\DoxyCodeLine{04846\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{04847\ \ \ \ \ \}}
\DoxyCodeLine{04848\ \}}
\DoxyCodeLine{04849\ }
\DoxyCodeLine{04850\ \textcolor{comment}{/*\ Reads\ and\ seeks\ past\ a\ string\ of\ residual\ values\ as\ Rice\ codes.\ The\ decoder\ should\ be\ sitting\ on\ the\ first\ bit\ of\ the\ Rice\ codes.\ */}}
\DoxyCodeLine{04851\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_read\_and\_seek\_residual\_\_rice(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ count,\ drflac\_uint8\ riceParam)}
\DoxyCodeLine{04852\ \{}
\DoxyCodeLine{04853\ \ \ \ \ drflac\_uint32\ i;}
\DoxyCodeLine{04854\ }
\DoxyCodeLine{04855\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{04856\ }
\DoxyCodeLine{04857\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ count;\ ++i)\ \{}
\DoxyCodeLine{04858\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_rice\_parts(bs,\ riceParam))\ \{}
\DoxyCodeLine{04859\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04860\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04861\ \ \ \ \ \}}
\DoxyCodeLine{04862\ }
\DoxyCodeLine{04863\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{04864\ \}}
\DoxyCodeLine{04865\ }
\DoxyCodeLine{04866\ \textcolor{preprocessor}{\#if\ defined(\_\_clang\_\_)}}
\DoxyCodeLine{04867\ \_\_attribute\_\_((no\_sanitize(\textcolor{stringliteral}{"{}signed-\/integer-\/overflow"{}})))}
\DoxyCodeLine{04868\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{04869\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_samples\_with\_residual\_\_unencoded(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ bitsPerSample,\ drflac\_uint32\ count,\ drflac\_uint8\ unencodedBitsPerSample,\ drflac\_uint32\ lpcOrder,\ drflac\_int32\ lpcShift,\ drflac\_uint32\ lpcPrecision,\ \textcolor{keyword}{const}\ drflac\_int32*\ coefficients,\ drflac\_int32*\ pSamplesOut)}
\DoxyCodeLine{04870\ \{}
\DoxyCodeLine{04871\ \ \ \ \ drflac\_uint32\ i;}
\DoxyCodeLine{04872\ }
\DoxyCodeLine{04873\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{04874\ \ \ \ \ DRFLAC\_ASSERT(unencodedBitsPerSample\ <=\ 31);\ \ \ \ \textcolor{comment}{/*\ <-\/-\/\ unencodedBitsPerSample\ is\ a\ 5\ bit\ number,\ so\ cannot\ exceed\ 31.\ */}}
\DoxyCodeLine{04875\ \ \ \ \ DRFLAC\_ASSERT(pSamplesOut\ !=\ NULL);}
\DoxyCodeLine{04876\ }
\DoxyCodeLine{04877\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ count;\ ++i)\ \{}
\DoxyCodeLine{04878\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (unencodedBitsPerSample\ >\ 0)\ \{}
\DoxyCodeLine{04879\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_int32(bs,\ unencodedBitsPerSample,\ pSamplesOut\ +\ i))\ \{}
\DoxyCodeLine{04880\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04881\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04882\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04883\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut[i]\ =\ 0;}
\DoxyCodeLine{04884\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04885\ }
\DoxyCodeLine{04886\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_use\_64\_bit\_prediction(bitsPerSample,\ lpcOrder,\ lpcPrecision))\ \{}
\DoxyCodeLine{04887\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut[i]\ +=\ drflac\_\_calculate\_prediction\_64(lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut\ +\ i);}
\DoxyCodeLine{04888\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04889\ \ \ \ \ \ \ \ \ \ \ \ \ pSamplesOut[i]\ +=\ drflac\_\_calculate\_prediction\_32(lpcOrder,\ lpcShift,\ coefficients,\ pSamplesOut\ +\ i);}
\DoxyCodeLine{04890\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04891\ \ \ \ \ \}}
\DoxyCodeLine{04892\ }
\DoxyCodeLine{04893\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{04894\ \}}
\DoxyCodeLine{04895\ }
\DoxyCodeLine{04896\ }
\DoxyCodeLine{04897\ \textcolor{comment}{/*}}
\DoxyCodeLine{04898\ \textcolor{comment}{Reads\ and\ decodes\ the\ residual\ for\ the\ sub-\/frame\ the\ decoder\ is\ currently\ sitting\ on.\ This\ function\ should\ be\ called}}
\DoxyCodeLine{04899\ \textcolor{comment}{when\ the\ decoder\ is\ sitting\ at\ the\ very\ start\ of\ the\ RESIDUAL\ block.\ The\ first\ <order>\ residuals\ will\ be\ ignored.\ The}}
\DoxyCodeLine{04900\ \textcolor{comment}{<blockSize>\ and\ <order>\ parameters\ are\ used\ to\ determine\ how\ many\ residual\ values\ need\ to\ be\ decoded.}}
\DoxyCodeLine{04901\ \textcolor{comment}{*/}}
\DoxyCodeLine{04902\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_samples\_with\_residual(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ bitsPerSample,\ drflac\_uint32\ blockSize,\ drflac\_uint32\ lpcOrder,\ drflac\_int32\ lpcShift,\ drflac\_uint32\ lpcPrecision,\ \textcolor{keyword}{const}\ drflac\_int32*\ coefficients,\ drflac\_int32*\ pDecodedSamples)}
\DoxyCodeLine{04903\ \{}
\DoxyCodeLine{04904\ \ \ \ \ drflac\_uint8\ residualMethod;}
\DoxyCodeLine{04905\ \ \ \ \ drflac\_uint8\ partitionOrder;}
\DoxyCodeLine{04906\ \ \ \ \ drflac\_uint32\ samplesInPartition;}
\DoxyCodeLine{04907\ \ \ \ \ drflac\_uint32\ partitionsRemaining;}
\DoxyCodeLine{04908\ }
\DoxyCodeLine{04909\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{04910\ \ \ \ \ DRFLAC\_ASSERT(blockSize\ !=\ 0);}
\DoxyCodeLine{04911\ \ \ \ \ DRFLAC\_ASSERT(pDecodedSamples\ !=\ NULL);\ \ \ \ \ \ \ \textcolor{comment}{/*\ <-\/-\/\ Should\ we\ allow\ NULL,\ in\ which\ case\ we\ just\ seek\ past\ the\ residual\ rather\ than\ do\ a\ full\ decode?\ */}}
\DoxyCodeLine{04912\ }
\DoxyCodeLine{04913\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 2,\ \&residualMethod))\ \{}
\DoxyCodeLine{04914\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04915\ \ \ \ \ \}}
\DoxyCodeLine{04916\ }
\DoxyCodeLine{04917\ \ \ \ \ \textcolor{keywordflow}{if}\ (residualMethod\ !=\ DRFLAC\_RESIDUAL\_CODING\_METHOD\_PARTITIONED\_RICE\ \&\&\ residualMethod\ !=\ DRFLAC\_RESIDUAL\_CODING\_METHOD\_PARTITIONED\_RICE2)\ \{}
\DoxyCodeLine{04918\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \textcolor{comment}{/*\ Unknown\ or\ unsupported\ residual\ coding\ method.\ */}}
\DoxyCodeLine{04919\ \ \ \ \ \}}
\DoxyCodeLine{04920\ }
\DoxyCodeLine{04921\ \ \ \ \ \textcolor{comment}{/*\ Ignore\ the\ first\ <order>\ values.\ */}}
\DoxyCodeLine{04922\ \ \ \ \ pDecodedSamples\ +=\ lpcOrder;}
\DoxyCodeLine{04923\ }
\DoxyCodeLine{04924\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 4,\ \&partitionOrder))\ \{}
\DoxyCodeLine{04925\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04926\ \ \ \ \ \}}
\DoxyCodeLine{04927\ }
\DoxyCodeLine{04928\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{04929\ \textcolor{comment}{\ \ \ \ From\ the\ FLAC\ spec:}}
\DoxyCodeLine{04930\ \textcolor{comment}{\ \ \ \ \ \ The\ Rice\ partition\ order\ in\ a\ Rice-\/coded\ residual\ section\ must\ be\ less\ than\ or\ equal\ to\ 8.}}
\DoxyCodeLine{04931\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{04932\ \ \ \ \ \textcolor{keywordflow}{if}\ (partitionOrder\ >\ 8)\ \{}
\DoxyCodeLine{04933\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04934\ \ \ \ \ \}}
\DoxyCodeLine{04935\ }
\DoxyCodeLine{04936\ \ \ \ \ \textcolor{comment}{/*\ Validation\ check.\ */}}
\DoxyCodeLine{04937\ \ \ \ \ \textcolor{keywordflow}{if}\ ((blockSize\ /\ (1\ <<\ partitionOrder))\ <\ lpcOrder)\ \{}
\DoxyCodeLine{04938\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04939\ \ \ \ \ \}}
\DoxyCodeLine{04940\ }
\DoxyCodeLine{04941\ \ \ \ \ samplesInPartition\ =\ (blockSize\ /\ (1\ <<\ partitionOrder))\ -\/\ lpcOrder;}
\DoxyCodeLine{04942\ \ \ \ \ partitionsRemaining\ =\ (1\ <<\ partitionOrder);}
\DoxyCodeLine{04943\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{04944\ \ \ \ \ \ \ \ \ drflac\_uint8\ riceParam\ =\ 0;}
\DoxyCodeLine{04945\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (residualMethod\ ==\ DRFLAC\_RESIDUAL\_CODING\_METHOD\_PARTITIONED\_RICE)\ \{}
\DoxyCodeLine{04946\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 4,\ \&riceParam))\ \{}
\DoxyCodeLine{04947\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04948\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04949\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (riceParam\ ==\ 15)\ \{}
\DoxyCodeLine{04950\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ riceParam\ =\ 0xFF;}
\DoxyCodeLine{04951\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04952\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (residualMethod\ ==\ DRFLAC\_RESIDUAL\_CODING\_METHOD\_PARTITIONED\_RICE2)\ \{}
\DoxyCodeLine{04953\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 5,\ \&riceParam))\ \{}
\DoxyCodeLine{04954\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04955\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04956\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (riceParam\ ==\ 31)\ \{}
\DoxyCodeLine{04957\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ riceParam\ =\ 0xFF;}
\DoxyCodeLine{04958\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04959\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04960\ }
\DoxyCodeLine{04961\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (riceParam\ !=\ 0xFF)\ \{}
\DoxyCodeLine{04962\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_decode\_samples\_with\_residual\_\_rice(bs,\ bitsPerSample,\ samplesInPartition,\ riceParam,\ lpcOrder,\ lpcShift,\ lpcPrecision,\ coefficients,\ pDecodedSamples))\ \{}
\DoxyCodeLine{04963\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04964\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04965\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{04966\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ unencodedBitsPerSample\ =\ 0;}
\DoxyCodeLine{04967\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 5,\ \&unencodedBitsPerSample))\ \{}
\DoxyCodeLine{04968\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04969\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04970\ }
\DoxyCodeLine{04971\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_decode\_samples\_with\_residual\_\_unencoded(bs,\ bitsPerSample,\ samplesInPartition,\ unencodedBitsPerSample,\ lpcOrder,\ lpcShift,\ lpcPrecision,\ coefficients,\ pDecodedSamples))\ \{}
\DoxyCodeLine{04972\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{04973\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04974\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04975\ }
\DoxyCodeLine{04976\ \ \ \ \ \ \ \ \ pDecodedSamples\ +=\ samplesInPartition;}
\DoxyCodeLine{04977\ }
\DoxyCodeLine{04978\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (partitionsRemaining\ ==\ 1)\ \{}
\DoxyCodeLine{04979\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{04980\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04981\ }
\DoxyCodeLine{04982\ \ \ \ \ \ \ \ \ partitionsRemaining\ -\/=\ 1;}
\DoxyCodeLine{04983\ }
\DoxyCodeLine{04984\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (partitionOrder\ !=\ 0)\ \{}
\DoxyCodeLine{04985\ \ \ \ \ \ \ \ \ \ \ \ \ samplesInPartition\ =\ blockSize\ /\ (1\ <<\ partitionOrder);}
\DoxyCodeLine{04986\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{04987\ \ \ \ \ \}}
\DoxyCodeLine{04988\ }
\DoxyCodeLine{04989\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{04990\ \}}
\DoxyCodeLine{04991\ }
\DoxyCodeLine{04992\ \textcolor{comment}{/*}}
\DoxyCodeLine{04993\ \textcolor{comment}{Reads\ and\ seeks\ past\ the\ residual\ for\ the\ sub-\/frame\ the\ decoder\ is\ currently\ sitting\ on.\ This\ function\ should\ be\ called}}
\DoxyCodeLine{04994\ \textcolor{comment}{when\ the\ decoder\ is\ sitting\ at\ the\ very\ start\ of\ the\ RESIDUAL\ block.\ The\ first\ <order>\ residuals\ will\ be\ set\ to\ 0.\ The}}
\DoxyCodeLine{04995\ \textcolor{comment}{<blockSize>\ and\ <order>\ parameters\ are\ used\ to\ determine\ how\ many\ residual\ values\ need\ to\ be\ decoded.}}
\DoxyCodeLine{04996\ \textcolor{comment}{*/}}
\DoxyCodeLine{04997\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_read\_and\_seek\_residual(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ blockSize,\ drflac\_uint32\ order)}
\DoxyCodeLine{04998\ \{}
\DoxyCodeLine{04999\ \ \ \ \ drflac\_uint8\ residualMethod;}
\DoxyCodeLine{05000\ \ \ \ \ drflac\_uint8\ partitionOrder;}
\DoxyCodeLine{05001\ \ \ \ \ drflac\_uint32\ samplesInPartition;}
\DoxyCodeLine{05002\ \ \ \ \ drflac\_uint32\ partitionsRemaining;}
\DoxyCodeLine{05003\ }
\DoxyCodeLine{05004\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{05005\ \ \ \ \ DRFLAC\_ASSERT(blockSize\ !=\ 0);}
\DoxyCodeLine{05006\ }
\DoxyCodeLine{05007\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 2,\ \&residualMethod))\ \{}
\DoxyCodeLine{05008\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05009\ \ \ \ \ \}}
\DoxyCodeLine{05010\ }
\DoxyCodeLine{05011\ \ \ \ \ \textcolor{keywordflow}{if}\ (residualMethod\ !=\ DRFLAC\_RESIDUAL\_CODING\_METHOD\_PARTITIONED\_RICE\ \&\&\ residualMethod\ !=\ DRFLAC\_RESIDUAL\_CODING\_METHOD\_PARTITIONED\_RICE2)\ \{}
\DoxyCodeLine{05012\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \textcolor{comment}{/*\ Unknown\ or\ unsupported\ residual\ coding\ method.\ */}}
\DoxyCodeLine{05013\ \ \ \ \ \}}
\DoxyCodeLine{05014\ }
\DoxyCodeLine{05015\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 4,\ \&partitionOrder))\ \{}
\DoxyCodeLine{05016\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05017\ \ \ \ \ \}}
\DoxyCodeLine{05018\ }
\DoxyCodeLine{05019\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{05020\ \textcolor{comment}{\ \ \ \ From\ the\ FLAC\ spec:}}
\DoxyCodeLine{05021\ \textcolor{comment}{\ \ \ \ \ \ The\ Rice\ partition\ order\ in\ a\ Rice-\/coded\ residual\ section\ must\ be\ less\ than\ or\ equal\ to\ 8.}}
\DoxyCodeLine{05022\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{05023\ \ \ \ \ \textcolor{keywordflow}{if}\ (partitionOrder\ >\ 8)\ \{}
\DoxyCodeLine{05024\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05025\ \ \ \ \ \}}
\DoxyCodeLine{05026\ }
\DoxyCodeLine{05027\ \ \ \ \ \textcolor{comment}{/*\ Validation\ check.\ */}}
\DoxyCodeLine{05028\ \ \ \ \ \textcolor{keywordflow}{if}\ ((blockSize\ /\ (1\ <<\ partitionOrder))\ <=\ order)\ \{}
\DoxyCodeLine{05029\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05030\ \ \ \ \ \}}
\DoxyCodeLine{05031\ }
\DoxyCodeLine{05032\ \ \ \ \ samplesInPartition\ =\ (blockSize\ /\ (1\ <<\ partitionOrder))\ -\/\ order;}
\DoxyCodeLine{05033\ \ \ \ \ partitionsRemaining\ =\ (1\ <<\ partitionOrder);}
\DoxyCodeLine{05034\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)}
\DoxyCodeLine{05035\ \ \ \ \ \{}
\DoxyCodeLine{05036\ \ \ \ \ \ \ \ \ drflac\_uint8\ riceParam\ =\ 0;}
\DoxyCodeLine{05037\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (residualMethod\ ==\ DRFLAC\_RESIDUAL\_CODING\_METHOD\_PARTITIONED\_RICE)\ \{}
\DoxyCodeLine{05038\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 4,\ \&riceParam))\ \{}
\DoxyCodeLine{05039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05040\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05041\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (riceParam\ ==\ 15)\ \{}
\DoxyCodeLine{05042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ riceParam\ =\ 0xFF;}
\DoxyCodeLine{05043\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05044\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (residualMethod\ ==\ DRFLAC\_RESIDUAL\_CODING\_METHOD\_PARTITIONED\_RICE2)\ \{}
\DoxyCodeLine{05045\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 5,\ \&riceParam))\ \{}
\DoxyCodeLine{05046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05047\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05048\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (riceParam\ ==\ 31)\ \{}
\DoxyCodeLine{05049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ riceParam\ =\ 0xFF;}
\DoxyCodeLine{05050\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05051\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05052\ }
\DoxyCodeLine{05053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (riceParam\ !=\ 0xFF)\ \{}
\DoxyCodeLine{05054\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_and\_seek\_residual\_\_rice(bs,\ samplesInPartition,\ riceParam))\ \{}
\DoxyCodeLine{05055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05056\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05057\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05058\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ unencodedBitsPerSample\ =\ 0;}
\DoxyCodeLine{05059\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 5,\ \&unencodedBitsPerSample))\ \{}
\DoxyCodeLine{05060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05061\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05062\ }
\DoxyCodeLine{05063\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_bits(bs,\ unencodedBitsPerSample\ *\ samplesInPartition))\ \{}
\DoxyCodeLine{05064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05065\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05066\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05067\ }
\DoxyCodeLine{05068\ }
\DoxyCodeLine{05069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (partitionsRemaining\ ==\ 1)\ \{}
\DoxyCodeLine{05070\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{05071\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05072\ }
\DoxyCodeLine{05073\ \ \ \ \ \ \ \ \ partitionsRemaining\ -\/=\ 1;}
\DoxyCodeLine{05074\ \ \ \ \ \ \ \ \ samplesInPartition\ =\ blockSize\ /\ (1\ <<\ partitionOrder);}
\DoxyCodeLine{05075\ \ \ \ \ \}}
\DoxyCodeLine{05076\ }
\DoxyCodeLine{05077\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{05078\ \}}
\DoxyCodeLine{05079\ }
\DoxyCodeLine{05080\ }
\DoxyCodeLine{05081\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_samples\_\_constant(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ blockSize,\ drflac\_uint32\ subframeBitsPerSample,\ drflac\_int32*\ pDecodedSamples)}
\DoxyCodeLine{05082\ \{}
\DoxyCodeLine{05083\ \ \ \ \ drflac\_uint32\ i;}
\DoxyCodeLine{05084\ }
\DoxyCodeLine{05085\ \ \ \ \ \textcolor{comment}{/*\ Only\ a\ single\ sample\ needs\ to\ be\ decoded\ here.\ */}}
\DoxyCodeLine{05086\ \ \ \ \ drflac\_int32\ \mbox{\hyperlink{structsample}{sample}};}
\DoxyCodeLine{05087\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_int32(bs,\ subframeBitsPerSample,\ \&\mbox{\hyperlink{structsample}{sample}}))\ \{}
\DoxyCodeLine{05088\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05089\ \ \ \ \ \}}
\DoxyCodeLine{05090\ }
\DoxyCodeLine{05091\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{05092\ \textcolor{comment}{\ \ \ \ We\ don't\ really\ need\ to\ expand\ this,\ but\ it\ does\ simplify\ the\ process\ of\ reading\ samples.\ If\ this\ becomes\ a\ performance\ issue\ (unlikely)}}
\DoxyCodeLine{05093\ \textcolor{comment}{\ \ \ \ we'll\ want\ to\ look\ at\ a\ more\ efficient\ way.}}
\DoxyCodeLine{05094\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{05095\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ blockSize;\ ++i)\ \{}
\DoxyCodeLine{05096\ \ \ \ \ \ \ \ \ pDecodedSamples[i]\ =\ \mbox{\hyperlink{structsample}{sample}};}
\DoxyCodeLine{05097\ \ \ \ \ \}}
\DoxyCodeLine{05098\ }
\DoxyCodeLine{05099\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{05100\ \}}
\DoxyCodeLine{05101\ }
\DoxyCodeLine{05102\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_samples\_\_verbatim(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ blockSize,\ drflac\_uint32\ subframeBitsPerSample,\ drflac\_int32*\ pDecodedSamples)}
\DoxyCodeLine{05103\ \{}
\DoxyCodeLine{05104\ \ \ \ \ drflac\_uint32\ i;}
\DoxyCodeLine{05105\ }
\DoxyCodeLine{05106\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ blockSize;\ ++i)\ \{}
\DoxyCodeLine{05107\ \ \ \ \ \ \ \ \ drflac\_int32\ \mbox{\hyperlink{structsample}{sample}};}
\DoxyCodeLine{05108\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_int32(bs,\ subframeBitsPerSample,\ \&\mbox{\hyperlink{structsample}{sample}}))\ \{}
\DoxyCodeLine{05109\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05110\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05111\ }
\DoxyCodeLine{05112\ \ \ \ \ \ \ \ \ pDecodedSamples[i]\ =\ \mbox{\hyperlink{structsample}{sample}};}
\DoxyCodeLine{05113\ \ \ \ \ \}}
\DoxyCodeLine{05114\ }
\DoxyCodeLine{05115\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{05116\ \}}
\DoxyCodeLine{05117\ }
\DoxyCodeLine{05118\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_samples\_\_fixed(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ blockSize,\ drflac\_uint32\ subframeBitsPerSample,\ drflac\_uint8\ lpcOrder,\ drflac\_int32*\ pDecodedSamples)}
\DoxyCodeLine{05119\ \{}
\DoxyCodeLine{05120\ \ \ \ \ drflac\_uint32\ i;}
\DoxyCodeLine{05121\ }
\DoxyCodeLine{05122\ \ \ \ \ \textcolor{keyword}{static}\ drflac\_int32\ lpcCoefficientsTable[5][4]\ =\ \{}
\DoxyCodeLine{05123\ \ \ \ \ \ \ \ \ \{0,\ \ 0,\ 0,\ \ 0\},}
\DoxyCodeLine{05124\ \ \ \ \ \ \ \ \ \{1,\ \ 0,\ 0,\ \ 0\},}
\DoxyCodeLine{05125\ \ \ \ \ \ \ \ \ \{2,\ -\/1,\ 0,\ \ 0\},}
\DoxyCodeLine{05126\ \ \ \ \ \ \ \ \ \{3,\ -\/3,\ 1,\ \ 0\},}
\DoxyCodeLine{05127\ \ \ \ \ \ \ \ \ \{4,\ -\/6,\ 4,\ -\/1\}}
\DoxyCodeLine{05128\ \ \ \ \ \};}
\DoxyCodeLine{05129\ }
\DoxyCodeLine{05130\ \ \ \ \ \textcolor{comment}{/*\ Warm\ up\ samples\ and\ coefficients.\ */}}
\DoxyCodeLine{05131\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ lpcOrder;\ ++i)\ \{}
\DoxyCodeLine{05132\ \ \ \ \ \ \ \ \ drflac\_int32\ \mbox{\hyperlink{structsample}{sample}};}
\DoxyCodeLine{05133\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_int32(bs,\ subframeBitsPerSample,\ \&\mbox{\hyperlink{structsample}{sample}}))\ \{}
\DoxyCodeLine{05134\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05135\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05136\ }
\DoxyCodeLine{05137\ \ \ \ \ \ \ \ \ pDecodedSamples[i]\ =\ \mbox{\hyperlink{structsample}{sample}};}
\DoxyCodeLine{05138\ \ \ \ \ \}}
\DoxyCodeLine{05139\ }
\DoxyCodeLine{05140\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_decode\_samples\_with\_residual(bs,\ subframeBitsPerSample,\ blockSize,\ lpcOrder,\ 0,\ 4,\ lpcCoefficientsTable[lpcOrder],\ pDecodedSamples))\ \{}
\DoxyCodeLine{05141\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05142\ \ \ \ \ \}}
\DoxyCodeLine{05143\ }
\DoxyCodeLine{05144\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{05145\ \}}
\DoxyCodeLine{05146\ }
\DoxyCodeLine{05147\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_samples\_\_lpc(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint32\ blockSize,\ drflac\_uint32\ bitsPerSample,\ drflac\_uint8\ lpcOrder,\ drflac\_int32*\ pDecodedSamples)}
\DoxyCodeLine{05148\ \{}
\DoxyCodeLine{05149\ \ \ \ \ drflac\_uint8\ i;}
\DoxyCodeLine{05150\ \ \ \ \ drflac\_uint8\ lpcPrecision;}
\DoxyCodeLine{05151\ \ \ \ \ drflac\_int8\ lpcShift;}
\DoxyCodeLine{05152\ \ \ \ \ drflac\_int32\ coefficients[32];}
\DoxyCodeLine{05153\ }
\DoxyCodeLine{05154\ \ \ \ \ \textcolor{comment}{/*\ Warm\ up\ samples.\ */}}
\DoxyCodeLine{05155\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ lpcOrder;\ ++i)\ \{}
\DoxyCodeLine{05156\ \ \ \ \ \ \ \ \ drflac\_int32\ \mbox{\hyperlink{structsample}{sample}};}
\DoxyCodeLine{05157\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_int32(bs,\ bitsPerSample,\ \&\mbox{\hyperlink{structsample}{sample}}))\ \{}
\DoxyCodeLine{05158\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05159\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05160\ }
\DoxyCodeLine{05161\ \ \ \ \ \ \ \ \ pDecodedSamples[i]\ =\ \mbox{\hyperlink{structsample}{sample}};}
\DoxyCodeLine{05162\ \ \ \ \ \}}
\DoxyCodeLine{05163\ }
\DoxyCodeLine{05164\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 4,\ \&lpcPrecision))\ \{}
\DoxyCodeLine{05165\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05166\ \ \ \ \ \}}
\DoxyCodeLine{05167\ \ \ \ \ \textcolor{keywordflow}{if}\ (lpcPrecision\ ==\ 15)\ \{}
\DoxyCodeLine{05168\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \textcolor{comment}{/*\ Invalid.\ */}}
\DoxyCodeLine{05169\ \ \ \ \ \}}
\DoxyCodeLine{05170\ \ \ \ \ lpcPrecision\ +=\ 1;}
\DoxyCodeLine{05171\ }
\DoxyCodeLine{05172\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_int8(bs,\ 5,\ \&lpcShift))\ \{}
\DoxyCodeLine{05173\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05174\ \ \ \ \ \}}
\DoxyCodeLine{05175\ }
\DoxyCodeLine{05176\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{05177\ \textcolor{comment}{\ \ \ \ From\ the\ FLAC\ specification:}}
\DoxyCodeLine{05178\ \textcolor{comment}{}}
\DoxyCodeLine{05179\ \textcolor{comment}{\ \ \ \ \ \ \ \ Quantized\ linear\ predictor\ coefficient\ shift\ needed\ in\ bits\ (NOTE:\ this\ number\ is\ signed\ two's-\/complement)}}
\DoxyCodeLine{05180\ \textcolor{comment}{}}
\DoxyCodeLine{05181\ \textcolor{comment}{\ \ \ \ Emphasis\ on\ the\ "{}signed\ two's-\/complement"{}.\ In\ practice\ there\ does\ not\ seem\ to\ be\ any\ encoders\ nor\ decoders\ supporting\ negative\ shifts.\ For\ now\ dr\_flac\ is}}
\DoxyCodeLine{05182\ \textcolor{comment}{\ \ \ \ not\ going\ to\ support\ negative\ shifts\ as\ I\ don't\ have\ any\ reference\ files.\ However,\ when\ a\ reference\ file\ comes\ through\ I\ will\ consider\ adding\ support.}}
\DoxyCodeLine{05183\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{05184\ \ \ \ \ \textcolor{keywordflow}{if}\ (lpcShift\ <\ 0)\ \{}
\DoxyCodeLine{05185\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05186\ \ \ \ \ \}}
\DoxyCodeLine{05187\ }
\DoxyCodeLine{05188\ \ \ \ \ DRFLAC\_ZERO\_MEMORY(coefficients,\ \textcolor{keyword}{sizeof}(coefficients));}
\DoxyCodeLine{05189\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ lpcOrder;\ ++i)\ \{}
\DoxyCodeLine{05190\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_int32(bs,\ lpcPrecision,\ coefficients\ +\ i))\ \{}
\DoxyCodeLine{05191\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05192\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05193\ \ \ \ \ \}}
\DoxyCodeLine{05194\ }
\DoxyCodeLine{05195\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_decode\_samples\_with\_residual(bs,\ bitsPerSample,\ blockSize,\ lpcOrder,\ lpcShift,\ lpcPrecision,\ coefficients,\ pDecodedSamples))\ \{}
\DoxyCodeLine{05196\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05197\ \ \ \ \ \}}
\DoxyCodeLine{05198\ }
\DoxyCodeLine{05199\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{05200\ \}}
\DoxyCodeLine{05201\ }
\DoxyCodeLine{05202\ }
\DoxyCodeLine{05203\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_read\_next\_flac\_frame\_header(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ drflac\_uint8\ streaminfoBitsPerSample,\ \mbox{\hyperlink{structdrflac__frame__header}{drflac\_frame\_header}}*\ header)}
\DoxyCodeLine{05204\ \{}
\DoxyCodeLine{05205\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32\ sampleRateTable[12]\ \ =\ \{0,\ 88200,\ 176400,\ 192000,\ 8000,\ 16000,\ 22050,\ 24000,\ 32000,\ 44100,\ 48000,\ 96000\};}
\DoxyCodeLine{05206\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint8\ bitsPerSampleTable[8]\ =\ \{0,\ 8,\ 12,\ (drflac\_uint8)-\/1,\ 16,\ 20,\ 24,\ (drflac\_uint8)-\/1\};\ \ \ \textcolor{comment}{/*\ -\/1\ =\ reserved.\ */}}
\DoxyCodeLine{05207\ }
\DoxyCodeLine{05208\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{05209\ \ \ \ \ DRFLAC\_ASSERT(header\ !=\ NULL);}
\DoxyCodeLine{05210\ }
\DoxyCodeLine{05211\ \ \ \ \ \textcolor{comment}{/*\ Keep\ looping\ until\ we\ find\ a\ valid\ sync\ code.\ */}}
\DoxyCodeLine{05212\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{05213\ \ \ \ \ \ \ \ \ drflac\_uint8\ crc8\ =\ 0xCE;\ \textcolor{comment}{/*\ 0xCE\ =\ drflac\_crc8(0,\ 0x3FFE,\ 14);\ */}}
\DoxyCodeLine{05214\ \ \ \ \ \ \ \ \ drflac\_uint8\ reserved\ =\ 0;}
\DoxyCodeLine{05215\ \ \ \ \ \ \ \ \ drflac\_uint8\ blockingStrategy\ =\ 0;}
\DoxyCodeLine{05216\ \ \ \ \ \ \ \ \ drflac\_uint8\ blockSize\ =\ 0;}
\DoxyCodeLine{05217\ \ \ \ \ \ \ \ \ drflac\_uint8\ sampleRate\ =\ 0;}
\DoxyCodeLine{05218\ \ \ \ \ \ \ \ \ drflac\_uint8\ channelAssignment\ =\ 0;}
\DoxyCodeLine{05219\ \ \ \ \ \ \ \ \ drflac\_uint8\ bitsPerSample\ =\ 0;}
\DoxyCodeLine{05220\ \ \ \ \ \ \ \ \ drflac\_bool32\ isVariableBlockSize;}
\DoxyCodeLine{05221\ }
\DoxyCodeLine{05222\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_find\_and\_seek\_to\_next\_sync\_code(bs))\ \{}
\DoxyCodeLine{05223\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05224\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05225\ }
\DoxyCodeLine{05226\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 1,\ \&reserved))\ \{}
\DoxyCodeLine{05227\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05228\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05229\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (reserved\ ==\ 1)\ \{}
\DoxyCodeLine{05230\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{05231\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05232\ \ \ \ \ \ \ \ \ crc8\ =\ drflac\_crc8(crc8,\ reserved,\ 1);}
\DoxyCodeLine{05233\ }
\DoxyCodeLine{05234\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 1,\ \&blockingStrategy))\ \{}
\DoxyCodeLine{05235\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05236\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05237\ \ \ \ \ \ \ \ \ crc8\ =\ drflac\_crc8(crc8,\ blockingStrategy,\ 1);}
\DoxyCodeLine{05238\ }
\DoxyCodeLine{05239\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 4,\ \&blockSize))\ \{}
\DoxyCodeLine{05240\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05241\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05242\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (blockSize\ ==\ 0)\ \{}
\DoxyCodeLine{05243\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{05244\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05245\ \ \ \ \ \ \ \ \ crc8\ =\ drflac\_crc8(crc8,\ blockSize,\ 4);}
\DoxyCodeLine{05246\ }
\DoxyCodeLine{05247\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 4,\ \&sampleRate))\ \{}
\DoxyCodeLine{05248\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05249\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05250\ \ \ \ \ \ \ \ \ crc8\ =\ drflac\_crc8(crc8,\ sampleRate,\ 4);}
\DoxyCodeLine{05251\ }
\DoxyCodeLine{05252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 4,\ \&channelAssignment))\ \{}
\DoxyCodeLine{05253\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05254\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05255\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (channelAssignment\ >\ 10)\ \{}
\DoxyCodeLine{05256\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{05257\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05258\ \ \ \ \ \ \ \ \ crc8\ =\ drflac\_crc8(crc8,\ channelAssignment,\ 4);}
\DoxyCodeLine{05259\ }
\DoxyCodeLine{05260\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 3,\ \&bitsPerSample))\ \{}
\DoxyCodeLine{05261\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05262\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05263\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bitsPerSample\ ==\ 3\ ||\ bitsPerSample\ ==\ 7)\ \{}
\DoxyCodeLine{05264\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{05265\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05266\ \ \ \ \ \ \ \ \ crc8\ =\ drflac\_crc8(crc8,\ bitsPerSample,\ 3);}
\DoxyCodeLine{05267\ }
\DoxyCodeLine{05268\ }
\DoxyCodeLine{05269\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 1,\ \&reserved))\ \{}
\DoxyCodeLine{05270\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05271\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05272\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (reserved\ ==\ 1)\ \{}
\DoxyCodeLine{05273\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{05274\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05275\ \ \ \ \ \ \ \ \ crc8\ =\ drflac\_crc8(crc8,\ reserved,\ 1);}
\DoxyCodeLine{05276\ }
\DoxyCodeLine{05277\ }
\DoxyCodeLine{05278\ \ \ \ \ \ \ \ \ isVariableBlockSize\ =\ blockingStrategy\ ==\ 1;}
\DoxyCodeLine{05279\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isVariableBlockSize)\ \{}
\DoxyCodeLine{05280\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ pcmFrameNumber;}
\DoxyCodeLine{05281\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_result\ result\ =\ drflac\_\_read\_utf8\_coded\_number(bs,\ \&pcmFrameNumber,\ \&crc8);}
\DoxyCodeLine{05282\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ !=\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{05283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_AT\_END)\ \{}
\DoxyCodeLine{05284\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05286\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{05287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05288\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05289\ \ \ \ \ \ \ \ \ \ \ \ \ header-\/>flacFrameNumber\ \ =\ 0;}
\DoxyCodeLine{05290\ \ \ \ \ \ \ \ \ \ \ \ \ header-\/>pcmFrameNumber\ =\ pcmFrameNumber;}
\DoxyCodeLine{05291\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05292\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ flacFrameNumber\ =\ 0;}
\DoxyCodeLine{05293\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_result\ result\ =\ drflac\_\_read\_utf8\_coded\_number(bs,\ \&flacFrameNumber,\ \&crc8);}
\DoxyCodeLine{05294\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ !=\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{05295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_AT\_END)\ \{}
\DoxyCodeLine{05296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05297\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{05299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05300\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05301\ \ \ \ \ \ \ \ \ \ \ \ \ header-\/>flacFrameNumber\ \ =\ (drflac\_uint32)flacFrameNumber;\ \ \ \textcolor{comment}{/*\ <-\/-\/\ Safe\ cast.\ */}}
\DoxyCodeLine{05302\ \ \ \ \ \ \ \ \ \ \ \ \ header-\/>pcmFrameNumber\ =\ 0;}
\DoxyCodeLine{05303\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05304\ }
\DoxyCodeLine{05305\ }
\DoxyCodeLine{05306\ \ \ \ \ \ \ \ \ DRFLAC\_ASSERT(blockSize\ >\ 0);}
\DoxyCodeLine{05307\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (blockSize\ ==\ 1)\ \{}
\DoxyCodeLine{05308\ \ \ \ \ \ \ \ \ \ \ \ \ header-\/>blockSizeInPCMFrames\ =\ 192;}
\DoxyCodeLine{05309\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (blockSize\ <=\ 5)\ \{}
\DoxyCodeLine{05310\ \ \ \ \ \ \ \ \ \ \ \ \ DRFLAC\_ASSERT(blockSize\ >=\ 2);}
\DoxyCodeLine{05311\ \ \ \ \ \ \ \ \ \ \ \ \ header-\/>blockSizeInPCMFrames\ =\ 576\ *\ (1\ <<\ (blockSize\ -\/\ 2));}
\DoxyCodeLine{05312\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (blockSize\ ==\ 6)\ \{}
\DoxyCodeLine{05313\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint16(bs,\ 8,\ \&header-\/>blockSizeInPCMFrames))\ \{}
\DoxyCodeLine{05314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05315\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05316\ \ \ \ \ \ \ \ \ \ \ \ \ crc8\ =\ drflac\_crc8(crc8,\ header-\/>blockSizeInPCMFrames,\ 8);}
\DoxyCodeLine{05317\ \ \ \ \ \ \ \ \ \ \ \ \ header-\/>blockSizeInPCMFrames\ +=\ 1;}
\DoxyCodeLine{05318\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (blockSize\ ==\ 7)\ \{}
\DoxyCodeLine{05319\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint16(bs,\ 16,\ \&header-\/>blockSizeInPCMFrames))\ \{}
\DoxyCodeLine{05320\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05321\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05322\ \ \ \ \ \ \ \ \ \ \ \ \ crc8\ =\ drflac\_crc8(crc8,\ header-\/>blockSizeInPCMFrames,\ 16);}
\DoxyCodeLine{05323\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (header-\/>blockSizeInPCMFrames\ ==\ 0xFFFF)\ \{}
\DoxyCodeLine{05324\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \textcolor{comment}{/*\ Frame\ is\ too\ big.\ This\ is\ the\ size\ of\ the\ frame\ minus\ 1.\ The\ STREAMINFO\ block\ defines\ the\ max\ block\ size\ which\ is\ 16-\/bits.\ Adding\ one\ will\ make\ it\ 17\ bits\ and\ therefore\ too\ big.\ */}}
\DoxyCodeLine{05325\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05326\ \ \ \ \ \ \ \ \ \ \ \ \ header-\/>blockSizeInPCMFrames\ +=\ 1;}
\DoxyCodeLine{05327\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05328\ \ \ \ \ \ \ \ \ \ \ \ \ DRFLAC\_ASSERT(blockSize\ >=\ 8);}
\DoxyCodeLine{05329\ \ \ \ \ \ \ \ \ \ \ \ \ header-\/>blockSizeInPCMFrames\ =\ 256\ *\ (1\ <<\ (blockSize\ -\/\ 8));}
\DoxyCodeLine{05330\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05331\ }
\DoxyCodeLine{05332\ }
\DoxyCodeLine{05333\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sampleRate\ <=\ 11)\ \{}
\DoxyCodeLine{05334\ \ \ \ \ \ \ \ \ \ \ \ \ header-\/>sampleRate\ =\ sampleRateTable[sampleRate];}
\DoxyCodeLine{05335\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sampleRate\ ==\ 12)\ \{}
\DoxyCodeLine{05336\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint32(bs,\ 8,\ \&header-\/>sampleRate))\ \{}
\DoxyCodeLine{05337\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05338\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05339\ \ \ \ \ \ \ \ \ \ \ \ \ crc8\ =\ drflac\_crc8(crc8,\ header-\/>sampleRate,\ 8);}
\DoxyCodeLine{05340\ \ \ \ \ \ \ \ \ \ \ \ \ header-\/>sampleRate\ *=\ 1000;}
\DoxyCodeLine{05341\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sampleRate\ ==\ 13)\ \{}
\DoxyCodeLine{05342\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint32(bs,\ 16,\ \&header-\/>sampleRate))\ \{}
\DoxyCodeLine{05343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05344\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05345\ \ \ \ \ \ \ \ \ \ \ \ \ crc8\ =\ drflac\_crc8(crc8,\ header-\/>sampleRate,\ 16);}
\DoxyCodeLine{05346\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (sampleRate\ ==\ 14)\ \{}
\DoxyCodeLine{05347\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint32(bs,\ 16,\ \&header-\/>sampleRate))\ \{}
\DoxyCodeLine{05348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05349\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05350\ \ \ \ \ \ \ \ \ \ \ \ \ crc8\ =\ drflac\_crc8(crc8,\ header-\/>sampleRate,\ 16);}
\DoxyCodeLine{05351\ \ \ \ \ \ \ \ \ \ \ \ \ header-\/>sampleRate\ *=\ 10;}
\DoxyCodeLine{05352\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05353\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};\ \ \textcolor{comment}{/*\ Invalid.\ Assume\ an\ invalid\ block.\ */}}
\DoxyCodeLine{05354\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05355\ }
\DoxyCodeLine{05356\ }
\DoxyCodeLine{05357\ \ \ \ \ \ \ \ \ header-\/>channelAssignment\ =\ channelAssignment;}
\DoxyCodeLine{05358\ }
\DoxyCodeLine{05359\ \ \ \ \ \ \ \ \ header-\/>bitsPerSample\ =\ bitsPerSampleTable[bitsPerSample];}
\DoxyCodeLine{05360\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (header-\/>bitsPerSample\ ==\ 0)\ \{}
\DoxyCodeLine{05361\ \ \ \ \ \ \ \ \ \ \ \ \ header-\/>bitsPerSample\ =\ streaminfoBitsPerSample;}
\DoxyCodeLine{05362\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05363\ }
\DoxyCodeLine{05364\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (header-\/>bitsPerSample\ !=\ streaminfoBitsPerSample)\ \{}
\DoxyCodeLine{05365\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ this\ subframe\ has\ a\ different\ bitsPerSample\ then\ streaminfo\ or\ the\ first\ frame,\ reject\ it\ */}}
\DoxyCodeLine{05366\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05367\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05368\ }
\DoxyCodeLine{05369\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 8,\ \&header-\/>crc8))\ \{}
\DoxyCodeLine{05370\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05371\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05372\ }
\DoxyCodeLine{05373\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{05374\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (header-\/>crc8\ !=\ crc8)\ \{}
\DoxyCodeLine{05375\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};\ \ \ \ \textcolor{comment}{/*\ CRC\ mismatch.\ Loop\ back\ to\ the\ top\ and\ find\ the\ next\ sync\ code.\ */}}
\DoxyCodeLine{05376\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05377\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{05378\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{05379\ \ \ \ \ \}}
\DoxyCodeLine{05380\ \}}
\DoxyCodeLine{05381\ }
\DoxyCodeLine{05382\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_read\_subframe\_header(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ \mbox{\hyperlink{structdrflac__subframe}{drflac\_subframe}}*\ pSubframe)}
\DoxyCodeLine{05383\ \{}
\DoxyCodeLine{05384\ \ \ \ \ drflac\_uint8\ header;}
\DoxyCodeLine{05385\ \ \ \ \ \textcolor{keywordtype}{int}\ type;}
\DoxyCodeLine{05386\ }
\DoxyCodeLine{05387\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 8,\ \&header))\ \{}
\DoxyCodeLine{05388\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05389\ \ \ \ \ \}}
\DoxyCodeLine{05390\ }
\DoxyCodeLine{05391\ \ \ \ \ \textcolor{comment}{/*\ First\ bit\ should\ always\ be\ 0.\ */}}
\DoxyCodeLine{05392\ \ \ \ \ \textcolor{keywordflow}{if}\ ((header\ \&\ 0x80)\ !=\ 0)\ \{}
\DoxyCodeLine{05393\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05394\ \ \ \ \ \}}
\DoxyCodeLine{05395\ }
\DoxyCodeLine{05396\ \ \ \ \ type\ =\ (header\ \&\ 0x7E)\ >>\ 1;}
\DoxyCodeLine{05397\ \ \ \ \ \textcolor{keywordflow}{if}\ (type\ ==\ 0)\ \{}
\DoxyCodeLine{05398\ \ \ \ \ \ \ \ \ pSubframe-\/>subframeType\ =\ DRFLAC\_SUBFRAME\_CONSTANT;}
\DoxyCodeLine{05399\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (type\ ==\ 1)\ \{}
\DoxyCodeLine{05400\ \ \ \ \ \ \ \ \ pSubframe-\/>subframeType\ =\ DRFLAC\_SUBFRAME\_VERBATIM;}
\DoxyCodeLine{05401\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05402\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((type\ \&\ 0x20)\ !=\ 0)\ \{}
\DoxyCodeLine{05403\ \ \ \ \ \ \ \ \ \ \ \ \ pSubframe-\/>subframeType\ =\ DRFLAC\_SUBFRAME\_LPC;}
\DoxyCodeLine{05404\ \ \ \ \ \ \ \ \ \ \ \ \ pSubframe-\/>lpcOrder\ =\ (drflac\_uint8)(type\ \&\ 0x1F)\ +\ 1;}
\DoxyCodeLine{05405\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((type\ \&\ 0x08)\ !=\ 0)\ \{}
\DoxyCodeLine{05406\ \ \ \ \ \ \ \ \ \ \ \ \ pSubframe-\/>subframeType\ =\ DRFLAC\_SUBFRAME\_FIXED;}
\DoxyCodeLine{05407\ \ \ \ \ \ \ \ \ \ \ \ \ pSubframe-\/>lpcOrder\ =\ (drflac\_uint8)(type\ \&\ 0x07);}
\DoxyCodeLine{05408\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pSubframe-\/>lpcOrder\ >\ 4)\ \{}
\DoxyCodeLine{05409\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pSubframe-\/>subframeType\ =\ DRFLAC\_SUBFRAME\_RESERVED;}
\DoxyCodeLine{05410\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pSubframe-\/>lpcOrder\ =\ 0;}
\DoxyCodeLine{05411\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05412\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05413\ \ \ \ \ \ \ \ \ \ \ \ \ pSubframe-\/>subframeType\ =\ DRFLAC\_SUBFRAME\_RESERVED;}
\DoxyCodeLine{05414\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05415\ \ \ \ \ \}}
\DoxyCodeLine{05416\ }
\DoxyCodeLine{05417\ \ \ \ \ \textcolor{keywordflow}{if}\ (pSubframe-\/>subframeType\ ==\ DRFLAC\_SUBFRAME\_RESERVED)\ \{}
\DoxyCodeLine{05418\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05419\ \ \ \ \ \}}
\DoxyCodeLine{05420\ }
\DoxyCodeLine{05421\ \ \ \ \ \textcolor{comment}{/*\ Wasted\ bits\ per\ sample.\ */}}
\DoxyCodeLine{05422\ \ \ \ \ pSubframe-\/>wastedBitsPerSample\ =\ 0;}
\DoxyCodeLine{05423\ \ \ \ \ \textcolor{keywordflow}{if}\ ((header\ \&\ 0x01)\ ==\ 1)\ \{}
\DoxyCodeLine{05424\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ wastedBitsPerSample;}
\DoxyCodeLine{05425\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_past\_next\_set\_bit(bs,\ \&wastedBitsPerSample))\ \{}
\DoxyCodeLine{05426\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05427\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05428\ \ \ \ \ \ \ \ \ pSubframe-\/>wastedBitsPerSample\ =\ (drflac\_uint8)wastedBitsPerSample\ +\ 1;}
\DoxyCodeLine{05429\ \ \ \ \ \}}
\DoxyCodeLine{05430\ }
\DoxyCodeLine{05431\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{05432\ \}}
\DoxyCodeLine{05433\ }
\DoxyCodeLine{05434\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_subframe(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ \mbox{\hyperlink{structdrflac__frame}{drflac\_frame}}*\ frame,\ \textcolor{keywordtype}{int}\ subframeIndex,\ drflac\_int32*\ pDecodedSamplesOut)}
\DoxyCodeLine{05435\ \{}
\DoxyCodeLine{05436\ \ \ \ \ \mbox{\hyperlink{structdrflac__subframe}{drflac\_subframe}}*\ pSubframe;}
\DoxyCodeLine{05437\ \ \ \ \ drflac\_uint32\ subframeBitsPerSample;}
\DoxyCodeLine{05438\ }
\DoxyCodeLine{05439\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{05440\ \ \ \ \ DRFLAC\_ASSERT(frame\ !=\ NULL);}
\DoxyCodeLine{05441\ }
\DoxyCodeLine{05442\ \ \ \ \ pSubframe\ =\ frame-\/>subframes\ +\ subframeIndex;}
\DoxyCodeLine{05443\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_subframe\_header(bs,\ pSubframe))\ \{}
\DoxyCodeLine{05444\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05445\ \ \ \ \ \}}
\DoxyCodeLine{05446\ }
\DoxyCodeLine{05447\ \ \ \ \ \textcolor{comment}{/*\ Side\ channels\ require\ an\ extra\ bit\ per\ sample.\ Took\ a\ while\ to\ figure\ that\ one\ out...\ */}}
\DoxyCodeLine{05448\ \ \ \ \ subframeBitsPerSample\ =\ frame-\/>header.bitsPerSample;}
\DoxyCodeLine{05449\ \ \ \ \ \textcolor{keywordflow}{if}\ ((frame-\/>header.channelAssignment\ ==\ DRFLAC\_CHANNEL\_ASSIGNMENT\_LEFT\_SIDE\ ||\ frame-\/>header.channelAssignment\ ==\ DRFLAC\_CHANNEL\_ASSIGNMENT\_MID\_SIDE)\ \&\&\ subframeIndex\ ==\ 1)\ \{}
\DoxyCodeLine{05450\ \ \ \ \ \ \ \ \ subframeBitsPerSample\ +=\ 1;}
\DoxyCodeLine{05451\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (frame-\/>header.channelAssignment\ ==\ DRFLAC\_CHANNEL\_ASSIGNMENT\_RIGHT\_SIDE\ \&\&\ subframeIndex\ ==\ 0)\ \{}
\DoxyCodeLine{05452\ \ \ \ \ \ \ \ \ subframeBitsPerSample\ +=\ 1;}
\DoxyCodeLine{05453\ \ \ \ \ \}}
\DoxyCodeLine{05454\ }
\DoxyCodeLine{05455\ \ \ \ \ \textcolor{keywordflow}{if}\ (subframeBitsPerSample\ >\ 32)\ \{}
\DoxyCodeLine{05456\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ libFLAC\ and\ ffmpeg\ reject\ 33-\/bit\ subframes\ as\ well\ */}}
\DoxyCodeLine{05457\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05458\ \ \ \ \ \}}
\DoxyCodeLine{05459\ }
\DoxyCodeLine{05460\ \ \ \ \ \textcolor{comment}{/*\ Need\ to\ handle\ wasted\ bits\ per\ sample.\ */}}
\DoxyCodeLine{05461\ \ \ \ \ \textcolor{keywordflow}{if}\ (pSubframe-\/>wastedBitsPerSample\ >=\ subframeBitsPerSample)\ \{}
\DoxyCodeLine{05462\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05463\ \ \ \ \ \}}
\DoxyCodeLine{05464\ \ \ \ \ subframeBitsPerSample\ -\/=\ pSubframe-\/>wastedBitsPerSample;}
\DoxyCodeLine{05465\ }
\DoxyCodeLine{05466\ \ \ \ \ pSubframe-\/>pSamplesS32\ =\ pDecodedSamplesOut;}
\DoxyCodeLine{05467\ }
\DoxyCodeLine{05468\ \ \ \ \ \textcolor{keywordflow}{switch}\ (pSubframe-\/>subframeType)}
\DoxyCodeLine{05469\ \ \ \ \ \{}
\DoxyCodeLine{05470\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_SUBFRAME\_CONSTANT:}
\DoxyCodeLine{05471\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{05472\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_decode\_samples\_\_constant(bs,\ frame-\/>header.blockSizeInPCMFrames,\ subframeBitsPerSample,\ pSubframe-\/>pSamplesS32);}
\DoxyCodeLine{05473\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{05474\ }
\DoxyCodeLine{05475\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_SUBFRAME\_VERBATIM:}
\DoxyCodeLine{05476\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{05477\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_decode\_samples\_\_verbatim(bs,\ frame-\/>header.blockSizeInPCMFrames,\ subframeBitsPerSample,\ pSubframe-\/>pSamplesS32);}
\DoxyCodeLine{05478\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{05479\ }
\DoxyCodeLine{05480\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_SUBFRAME\_FIXED:}
\DoxyCodeLine{05481\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{05482\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_decode\_samples\_\_fixed(bs,\ frame-\/>header.blockSizeInPCMFrames,\ subframeBitsPerSample,\ pSubframe-\/>lpcOrder,\ pSubframe-\/>pSamplesS32);}
\DoxyCodeLine{05483\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{05484\ }
\DoxyCodeLine{05485\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_SUBFRAME\_LPC:}
\DoxyCodeLine{05486\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{05487\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_decode\_samples\_\_lpc(bs,\ frame-\/>header.blockSizeInPCMFrames,\ subframeBitsPerSample,\ pSubframe-\/>lpcOrder,\ pSubframe-\/>pSamplesS32);}
\DoxyCodeLine{05488\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{05489\ }
\DoxyCodeLine{05490\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05491\ \ \ \ \ \}}
\DoxyCodeLine{05492\ }
\DoxyCodeLine{05493\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{05494\ \}}
\DoxyCodeLine{05495\ }
\DoxyCodeLine{05496\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_seek\_subframe(\mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}*\ bs,\ \mbox{\hyperlink{structdrflac__frame}{drflac\_frame}}*\ frame,\ \textcolor{keywordtype}{int}\ subframeIndex)}
\DoxyCodeLine{05497\ \{}
\DoxyCodeLine{05498\ \ \ \ \ \mbox{\hyperlink{structdrflac__subframe}{drflac\_subframe}}*\ pSubframe;}
\DoxyCodeLine{05499\ \ \ \ \ drflac\_uint32\ subframeBitsPerSample;}
\DoxyCodeLine{05500\ }
\DoxyCodeLine{05501\ \ \ \ \ DRFLAC\_ASSERT(bs\ !=\ NULL);}
\DoxyCodeLine{05502\ \ \ \ \ DRFLAC\_ASSERT(frame\ !=\ NULL);}
\DoxyCodeLine{05503\ }
\DoxyCodeLine{05504\ \ \ \ \ pSubframe\ =\ frame-\/>subframes\ +\ subframeIndex;}
\DoxyCodeLine{05505\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_subframe\_header(bs,\ pSubframe))\ \{}
\DoxyCodeLine{05506\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05507\ \ \ \ \ \}}
\DoxyCodeLine{05508\ }
\DoxyCodeLine{05509\ \ \ \ \ \textcolor{comment}{/*\ Side\ channels\ require\ an\ extra\ bit\ per\ sample.\ Took\ a\ while\ to\ figure\ that\ one\ out...\ */}}
\DoxyCodeLine{05510\ \ \ \ \ subframeBitsPerSample\ =\ frame-\/>header.bitsPerSample;}
\DoxyCodeLine{05511\ \ \ \ \ \textcolor{keywordflow}{if}\ ((frame-\/>header.channelAssignment\ ==\ DRFLAC\_CHANNEL\_ASSIGNMENT\_LEFT\_SIDE\ ||\ frame-\/>header.channelAssignment\ ==\ DRFLAC\_CHANNEL\_ASSIGNMENT\_MID\_SIDE)\ \&\&\ subframeIndex\ ==\ 1)\ \{}
\DoxyCodeLine{05512\ \ \ \ \ \ \ \ \ subframeBitsPerSample\ +=\ 1;}
\DoxyCodeLine{05513\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (frame-\/>header.channelAssignment\ ==\ DRFLAC\_CHANNEL\_ASSIGNMENT\_RIGHT\_SIDE\ \&\&\ subframeIndex\ ==\ 0)\ \{}
\DoxyCodeLine{05514\ \ \ \ \ \ \ \ \ subframeBitsPerSample\ +=\ 1;}
\DoxyCodeLine{05515\ \ \ \ \ \}}
\DoxyCodeLine{05516\ }
\DoxyCodeLine{05517\ \ \ \ \ \textcolor{comment}{/*\ Need\ to\ handle\ wasted\ bits\ per\ sample.\ */}}
\DoxyCodeLine{05518\ \ \ \ \ \textcolor{keywordflow}{if}\ (pSubframe-\/>wastedBitsPerSample\ >=\ subframeBitsPerSample)\ \{}
\DoxyCodeLine{05519\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05520\ \ \ \ \ \}}
\DoxyCodeLine{05521\ \ \ \ \ subframeBitsPerSample\ -\/=\ pSubframe-\/>wastedBitsPerSample;}
\DoxyCodeLine{05522\ }
\DoxyCodeLine{05523\ \ \ \ \ pSubframe-\/>pSamplesS32\ =\ NULL;}
\DoxyCodeLine{05524\ }
\DoxyCodeLine{05525\ \ \ \ \ \textcolor{keywordflow}{switch}\ (pSubframe-\/>subframeType)}
\DoxyCodeLine{05526\ \ \ \ \ \{}
\DoxyCodeLine{05527\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_SUBFRAME\_CONSTANT:}
\DoxyCodeLine{05528\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{05529\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_bits(bs,\ subframeBitsPerSample))\ \{}
\DoxyCodeLine{05530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05531\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05532\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{05533\ }
\DoxyCodeLine{05534\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_SUBFRAME\_VERBATIM:}
\DoxyCodeLine{05535\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{05536\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bitsToSeek\ =\ frame-\/>header.blockSizeInPCMFrames\ *\ subframeBitsPerSample;}
\DoxyCodeLine{05537\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_bits(bs,\ bitsToSeek))\ \{}
\DoxyCodeLine{05538\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05539\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05540\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{05541\ }
\DoxyCodeLine{05542\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_SUBFRAME\_FIXED:}
\DoxyCodeLine{05543\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{05544\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bitsToSeek\ =\ pSubframe-\/>lpcOrder\ *\ subframeBitsPerSample;}
\DoxyCodeLine{05545\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_bits(bs,\ bitsToSeek))\ \{}
\DoxyCodeLine{05546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05547\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05548\ }
\DoxyCodeLine{05549\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_and\_seek\_residual(bs,\ frame-\/>header.blockSizeInPCMFrames,\ pSubframe-\/>lpcOrder))\ \{}
\DoxyCodeLine{05550\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05551\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05552\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{05553\ }
\DoxyCodeLine{05554\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_SUBFRAME\_LPC:}
\DoxyCodeLine{05555\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{05556\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ lpcPrecision;}
\DoxyCodeLine{05557\ }
\DoxyCodeLine{05558\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bitsToSeek\ =\ pSubframe-\/>lpcOrder\ *\ subframeBitsPerSample;}
\DoxyCodeLine{05559\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_bits(bs,\ bitsToSeek))\ \{}
\DoxyCodeLine{05560\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05561\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05562\ }
\DoxyCodeLine{05563\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(bs,\ 4,\ \&lpcPrecision))\ \{}
\DoxyCodeLine{05564\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05565\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05566\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (lpcPrecision\ ==\ 15)\ \{}
\DoxyCodeLine{05567\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \textcolor{comment}{/*\ Invalid.\ */}}
\DoxyCodeLine{05568\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05569\ \ \ \ \ \ \ \ \ \ \ \ \ lpcPrecision\ +=\ 1;}
\DoxyCodeLine{05570\ }
\DoxyCodeLine{05571\ }
\DoxyCodeLine{05572\ \ \ \ \ \ \ \ \ \ \ \ \ bitsToSeek\ =\ (pSubframe-\/>lpcOrder\ *\ lpcPrecision)\ +\ 5;\ \ \ \ \textcolor{comment}{/*\ +5\ for\ shift.\ */}}
\DoxyCodeLine{05573\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_bits(bs,\ bitsToSeek))\ \{}
\DoxyCodeLine{05574\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05575\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05576\ }
\DoxyCodeLine{05577\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_and\_seek\_residual(bs,\ frame-\/>header.blockSizeInPCMFrames,\ pSubframe-\/>lpcOrder))\ \{}
\DoxyCodeLine{05578\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05579\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05580\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{05581\ }
\DoxyCodeLine{05582\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05583\ \ \ \ \ \}}
\DoxyCodeLine{05584\ }
\DoxyCodeLine{05585\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{05586\ \}}
\DoxyCodeLine{05587\ }
\DoxyCodeLine{05588\ }
\DoxyCodeLine{05589\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint8\ drflac\_\_get\_channel\_count\_from\_channel\_assignment(drflac\_int8\ channelAssignment)}
\DoxyCodeLine{05590\ \{}
\DoxyCodeLine{05591\ \ \ \ \ drflac\_uint8\ lookup[]\ =\ \{1,\ 2,\ 3,\ 4,\ 5,\ 6,\ 7,\ 8,\ 2,\ 2,\ 2\};}
\DoxyCodeLine{05592\ }
\DoxyCodeLine{05593\ \ \ \ \ DRFLAC\_ASSERT(channelAssignment\ <=\ 10);}
\DoxyCodeLine{05594\ \ \ \ \ \textcolor{keywordflow}{return}\ lookup[channelAssignment];}
\DoxyCodeLine{05595\ \}}
\DoxyCodeLine{05596\ }
\DoxyCodeLine{05597\ \textcolor{keyword}{static}\ drflac\_result\ drflac\_\_decode\_flac\_frame(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac)}
\DoxyCodeLine{05598\ \{}
\DoxyCodeLine{05599\ \ \ \ \ \textcolor{keywordtype}{int}\ channelCount;}
\DoxyCodeLine{05600\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{05601\ \ \ \ \ drflac\_uint8\ paddingSizeInBits;}
\DoxyCodeLine{05602\ \ \ \ \ drflac\_uint16\ desiredCRC16;}
\DoxyCodeLine{05603\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{05604\ \ \ \ \ drflac\_uint16\ actualCRC16;}
\DoxyCodeLine{05605\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{05606\ }
\DoxyCodeLine{05607\ \ \ \ \ \textcolor{comment}{/*\ This\ function\ should\ be\ called\ while\ the\ stream\ is\ sitting\ on\ the\ first\ byte\ after\ the\ frame\ header.\ */}}
\DoxyCodeLine{05608\ \ \ \ \ DRFLAC\_ZERO\_MEMORY(pFlac-\/>currentFLACFrame.subframes,\ \textcolor{keyword}{sizeof}(pFlac-\/>currentFLACFrame.subframes));}
\DoxyCodeLine{05609\ }
\DoxyCodeLine{05610\ \ \ \ \ \textcolor{comment}{/*\ The\ frame\ block\ size\ must\ never\ be\ larger\ than\ the\ maximum\ block\ size\ defined\ by\ the\ FLAC\ stream.\ */}}
\DoxyCodeLine{05611\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>currentFLACFrame.header.blockSizeInPCMFrames\ >\ pFlac-\/>maxBlockSizeInPCMFrames)\ \{}
\DoxyCodeLine{05612\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{05613\ \ \ \ \ \}}
\DoxyCodeLine{05614\ }
\DoxyCodeLine{05615\ \ \ \ \ \textcolor{comment}{/*\ The\ number\ of\ channels\ in\ the\ frame\ must\ match\ the\ channel\ count\ from\ the\ STREAMINFO\ block.\ */}}
\DoxyCodeLine{05616\ \ \ \ \ channelCount\ =\ drflac\_\_get\_channel\_count\_from\_channel\_assignment(pFlac-\/>currentFLACFrame.header.channelAssignment);}
\DoxyCodeLine{05617\ \ \ \ \ \textcolor{keywordflow}{if}\ (channelCount\ !=\ (\textcolor{keywordtype}{int})pFlac-\/>channels)\ \{}
\DoxyCodeLine{05618\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{05619\ \ \ \ \ \}}
\DoxyCodeLine{05620\ }
\DoxyCodeLine{05621\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ channelCount;\ ++i)\ \{}
\DoxyCodeLine{05622\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_decode\_subframe(\&pFlac-\/>bs,\ \&pFlac-\/>currentFLACFrame,\ i,\ pFlac-\/>pDecodedSamples\ +\ (pFlac-\/>currentFLACFrame.header.blockSizeInPCMFrames\ *\ i)))\ \{}
\DoxyCodeLine{05623\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{05624\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05625\ \ \ \ \ \}}
\DoxyCodeLine{05626\ }
\DoxyCodeLine{05627\ \ \ \ \ paddingSizeInBits\ =\ (drflac\_uint8)(DRFLAC\_CACHE\_L1\_BITS\_REMAINING(\&pFlac-\/>bs)\ \&\ 7);}
\DoxyCodeLine{05628\ \ \ \ \ \textcolor{keywordflow}{if}\ (paddingSizeInBits\ >\ 0)\ \{}
\DoxyCodeLine{05629\ \ \ \ \ \ \ \ \ drflac\_uint8\ padding\ =\ 0;}
\DoxyCodeLine{05630\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint8(\&pFlac-\/>bs,\ paddingSizeInBits,\ \&padding))\ \{}
\DoxyCodeLine{05631\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_AT\_END;}
\DoxyCodeLine{05632\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05633\ \ \ \ \ \}}
\DoxyCodeLine{05634\ }
\DoxyCodeLine{05635\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{05636\ \ \ \ \ actualCRC16\ =\ drflac\_\_flush\_crc16(\&pFlac-\/>bs);}
\DoxyCodeLine{05637\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{05638\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint16(\&pFlac-\/>bs,\ 16,\ \&desiredCRC16))\ \{}
\DoxyCodeLine{05639\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_AT\_END;}
\DoxyCodeLine{05640\ \ \ \ \ \}}
\DoxyCodeLine{05641\ }
\DoxyCodeLine{05642\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{05643\ \ \ \ \ \textcolor{keywordflow}{if}\ (actualCRC16\ !=\ desiredCRC16)\ \{}
\DoxyCodeLine{05644\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_CRC\_MISMATCH;\ \ \ \ \textcolor{comment}{/*\ CRC\ mismatch.\ */}}
\DoxyCodeLine{05645\ \ \ \ \ \}}
\DoxyCodeLine{05646\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{05647\ }
\DoxyCodeLine{05648\ \ \ \ \ pFlac-\/>currentFLACFrame.pcmFramesRemaining\ =\ pFlac-\/>currentFLACFrame.header.blockSizeInPCMFrames;}
\DoxyCodeLine{05649\ }
\DoxyCodeLine{05650\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_SUCCESS;}
\DoxyCodeLine{05651\ \}}
\DoxyCodeLine{05652\ }
\DoxyCodeLine{05653\ \textcolor{keyword}{static}\ drflac\_result\ drflac\_\_seek\_flac\_frame(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac)}
\DoxyCodeLine{05654\ \{}
\DoxyCodeLine{05655\ \ \ \ \ \textcolor{keywordtype}{int}\ channelCount;}
\DoxyCodeLine{05656\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{05657\ \ \ \ \ drflac\_uint16\ desiredCRC16;}
\DoxyCodeLine{05658\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{05659\ \ \ \ \ drflac\_uint16\ actualCRC16;}
\DoxyCodeLine{05660\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{05661\ }
\DoxyCodeLine{05662\ \ \ \ \ channelCount\ =\ drflac\_\_get\_channel\_count\_from\_channel\_assignment(pFlac-\/>currentFLACFrame.header.channelAssignment);}
\DoxyCodeLine{05663\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ channelCount;\ ++i)\ \{}
\DoxyCodeLine{05664\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_subframe(\&pFlac-\/>bs,\ \&pFlac-\/>currentFLACFrame,\ i))\ \{}
\DoxyCodeLine{05665\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{05666\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05667\ \ \ \ \ \}}
\DoxyCodeLine{05668\ }
\DoxyCodeLine{05669\ \ \ \ \ \textcolor{comment}{/*\ Padding.\ */}}
\DoxyCodeLine{05670\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_bits(\&pFlac-\/>bs,\ DRFLAC\_CACHE\_L1\_BITS\_REMAINING(\&pFlac-\/>bs)\ \&\ 7))\ \{}
\DoxyCodeLine{05671\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{05672\ \ \ \ \ \}}
\DoxyCodeLine{05673\ }
\DoxyCodeLine{05674\ \ \ \ \ \textcolor{comment}{/*\ CRC.\ */}}
\DoxyCodeLine{05675\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{05676\ \ \ \ \ actualCRC16\ =\ drflac\_\_flush\_crc16(\&pFlac-\/>bs);}
\DoxyCodeLine{05677\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{05678\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_uint16(\&pFlac-\/>bs,\ 16,\ \&desiredCRC16))\ \{}
\DoxyCodeLine{05679\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_AT\_END;}
\DoxyCodeLine{05680\ \ \ \ \ \}}
\DoxyCodeLine{05681\ }
\DoxyCodeLine{05682\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{05683\ \ \ \ \ \textcolor{keywordflow}{if}\ (actualCRC16\ !=\ desiredCRC16)\ \{}
\DoxyCodeLine{05684\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_CRC\_MISMATCH;\ \ \ \ \textcolor{comment}{/*\ CRC\ mismatch.\ */}}
\DoxyCodeLine{05685\ \ \ \ \ \}}
\DoxyCodeLine{05686\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{05687\ }
\DoxyCodeLine{05688\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_SUCCESS;}
\DoxyCodeLine{05689\ \}}
\DoxyCodeLine{05690\ }
\DoxyCodeLine{05691\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_read\_and\_decode\_next\_flac\_frame(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac)}
\DoxyCodeLine{05692\ \{}
\DoxyCodeLine{05693\ \ \ \ \ DRFLAC\_ASSERT(pFlac\ !=\ NULL);}
\DoxyCodeLine{05694\ }
\DoxyCodeLine{05695\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{05696\ \ \ \ \ \ \ \ \ drflac\_result\ result;}
\DoxyCodeLine{05697\ }
\DoxyCodeLine{05698\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_next\_flac\_frame\_header(\&pFlac-\/>bs,\ pFlac-\/>bitsPerSample,\ \&pFlac-\/>currentFLACFrame.header))\ \{}
\DoxyCodeLine{05699\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05700\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05701\ }
\DoxyCodeLine{05702\ \ \ \ \ \ \ \ \ result\ =\ drflac\_\_decode\_flac\_frame(pFlac);}
\DoxyCodeLine{05703\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ !=\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{05704\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_CRC\_MISMATCH)\ \{}
\DoxyCodeLine{05705\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};\ \ \ \textcolor{comment}{/*\ CRC\ mismatch.\ Skip\ to\ the\ next\ frame.\ */}}
\DoxyCodeLine{05706\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05707\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05708\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05709\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05710\ }
\DoxyCodeLine{05711\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{05712\ \ \ \ \ \}}
\DoxyCodeLine{05713\ \}}
\DoxyCodeLine{05714\ }
\DoxyCodeLine{05715\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ drflac\_\_get\_pcm\_frame\_range\_of\_current\_flac\_frame(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64*\ pFirstPCMFrame,\ drflac\_uint64*\ pLastPCMFrame)}
\DoxyCodeLine{05716\ \{}
\DoxyCodeLine{05717\ \ \ \ \ drflac\_uint64\ firstPCMFrame;}
\DoxyCodeLine{05718\ \ \ \ \ drflac\_uint64\ lastPCMFrame;}
\DoxyCodeLine{05719\ }
\DoxyCodeLine{05720\ \ \ \ \ DRFLAC\_ASSERT(pFlac\ !=\ NULL);}
\DoxyCodeLine{05721\ }
\DoxyCodeLine{05722\ \ \ \ \ firstPCMFrame\ =\ pFlac-\/>currentFLACFrame.header.pcmFrameNumber;}
\DoxyCodeLine{05723\ \ \ \ \ \textcolor{keywordflow}{if}\ (firstPCMFrame\ ==\ 0)\ \{}
\DoxyCodeLine{05724\ \ \ \ \ \ \ \ \ firstPCMFrame\ =\ ((drflac\_uint64)pFlac-\/>currentFLACFrame.header.flacFrameNumber)\ *\ pFlac-\/>maxBlockSizeInPCMFrames;}
\DoxyCodeLine{05725\ \ \ \ \ \}}
\DoxyCodeLine{05726\ }
\DoxyCodeLine{05727\ \ \ \ \ lastPCMFrame\ =\ firstPCMFrame\ +\ pFlac-\/>currentFLACFrame.header.blockSizeInPCMFrames;}
\DoxyCodeLine{05728\ \ \ \ \ \textcolor{keywordflow}{if}\ (lastPCMFrame\ >\ 0)\ \{}
\DoxyCodeLine{05729\ \ \ \ \ \ \ \ \ lastPCMFrame\ -\/=\ 1;\ \textcolor{comment}{/*\ Needs\ to\ be\ zero\ based.\ */}}
\DoxyCodeLine{05730\ \ \ \ \ \}}
\DoxyCodeLine{05731\ }
\DoxyCodeLine{05732\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFirstPCMFrame)\ \{}
\DoxyCodeLine{05733\ \ \ \ \ \ \ \ \ *pFirstPCMFrame\ =\ firstPCMFrame;}
\DoxyCodeLine{05734\ \ \ \ \ \}}
\DoxyCodeLine{05735\ \ \ \ \ \textcolor{keywordflow}{if}\ (pLastPCMFrame)\ \{}
\DoxyCodeLine{05736\ \ \ \ \ \ \ \ \ *pLastPCMFrame\ =\ lastPCMFrame;}
\DoxyCodeLine{05737\ \ \ \ \ \}}
\DoxyCodeLine{05738\ \}}
\DoxyCodeLine{05739\ }
\DoxyCodeLine{05740\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_seek\_to\_first\_frame(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac)}
\DoxyCodeLine{05741\ \{}
\DoxyCodeLine{05742\ \ \ \ \ drflac\_bool32\ result;}
\DoxyCodeLine{05743\ }
\DoxyCodeLine{05744\ \ \ \ \ DRFLAC\_ASSERT(pFlac\ !=\ NULL);}
\DoxyCodeLine{05745\ }
\DoxyCodeLine{05746\ \ \ \ \ result\ =\ drflac\_\_seek\_to\_byte(\&pFlac-\/>bs,\ pFlac-\/>firstFLACFramePosInBytes);}
\DoxyCodeLine{05747\ }
\DoxyCodeLine{05748\ \ \ \ \ DRFLAC\_ZERO\_MEMORY(\&pFlac-\/>currentFLACFrame,\ \textcolor{keyword}{sizeof}(pFlac-\/>currentFLACFrame));}
\DoxyCodeLine{05749\ \ \ \ \ pFlac-\/>currentPCMFrame\ =\ 0;}
\DoxyCodeLine{05750\ }
\DoxyCodeLine{05751\ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{05752\ \}}
\DoxyCodeLine{05753\ }
\DoxyCodeLine{05754\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_result\ drflac\_\_seek\_to\_next\_flac\_frame(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac)}
\DoxyCodeLine{05755\ \{}
\DoxyCodeLine{05756\ \ \ \ \ \textcolor{comment}{/*\ This\ function\ should\ only\ ever\ be\ called\ while\ the\ decoder\ is\ sitting\ on\ the\ first\ byte\ past\ the\ FRAME\_HEADER\ section.\ */}}
\DoxyCodeLine{05757\ \ \ \ \ DRFLAC\_ASSERT(pFlac\ !=\ NULL);}
\DoxyCodeLine{05758\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_seek\_flac\_frame(pFlac);}
\DoxyCodeLine{05759\ \}}
\DoxyCodeLine{05760\ }
\DoxyCodeLine{05761\ }
\DoxyCodeLine{05762\ \textcolor{keyword}{static}\ drflac\_uint64\ drflac\_\_seek\_forward\_by\_pcm\_frames(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ pcmFramesToSeek)}
\DoxyCodeLine{05763\ \{}
\DoxyCodeLine{05764\ \ \ \ \ drflac\_uint64\ pcmFramesRead\ =\ 0;}
\DoxyCodeLine{05765\ \ \ \ \ \textcolor{keywordflow}{while}\ (pcmFramesToSeek\ >\ 0)\ \{}
\DoxyCodeLine{05766\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>currentFLACFrame.pcmFramesRemaining\ ==\ 0)\ \{}
\DoxyCodeLine{05767\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_and\_decode\_next\_flac\_frame(pFlac))\ \{}
\DoxyCodeLine{05768\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \ \textcolor{comment}{/*\ Couldn't\ read\ the\ next\ frame,\ so\ just\ break\ from\ the\ loop\ and\ return.\ */}}
\DoxyCodeLine{05769\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05770\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05771\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>currentFLACFrame.pcmFramesRemaining\ >\ pcmFramesToSeek)\ \{}
\DoxyCodeLine{05772\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pcmFramesRead\ \ \ +=\ pcmFramesToSeek;}
\DoxyCodeLine{05773\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentFLACFrame.pcmFramesRemaining\ -\/=\ (drflac\_uint32)pcmFramesToSeek;\ \ \ \textcolor{comment}{/*\ <-\/-\/\ Safe\ cast.\ Will\ always\ be\ <\ currentFrame.pcmFramesRemaining\ <\ 65536.\ */}}
\DoxyCodeLine{05774\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pcmFramesToSeek\ \ =\ 0;}
\DoxyCodeLine{05775\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05776\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pcmFramesRead\ \ \ +=\ pFlac-\/>currentFLACFrame.pcmFramesRemaining;}
\DoxyCodeLine{05777\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pcmFramesToSeek\ -\/=\ pFlac-\/>currentFLACFrame.pcmFramesRemaining;}
\DoxyCodeLine{05778\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentFLACFrame.pcmFramesRemaining\ =\ 0;}
\DoxyCodeLine{05779\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05780\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05781\ \ \ \ \ \}}
\DoxyCodeLine{05782\ }
\DoxyCodeLine{05783\ \ \ \ \ pFlac-\/>currentPCMFrame\ +=\ pcmFramesRead;}
\DoxyCodeLine{05784\ \ \ \ \ \textcolor{keywordflow}{return}\ pcmFramesRead;}
\DoxyCodeLine{05785\ \}}
\DoxyCodeLine{05786\ }
\DoxyCodeLine{05787\ }
\DoxyCodeLine{05788\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_seek\_to\_pcm\_frame\_\_brute\_force(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ pcmFrameIndex)}
\DoxyCodeLine{05789\ \{}
\DoxyCodeLine{05790\ \ \ \ \ drflac\_bool32\ isMidFrame\ =\ DRFLAC\_FALSE;}
\DoxyCodeLine{05791\ \ \ \ \ drflac\_uint64\ runningPCMFrameCount;}
\DoxyCodeLine{05792\ }
\DoxyCodeLine{05793\ \ \ \ \ DRFLAC\_ASSERT(pFlac\ !=\ NULL);}
\DoxyCodeLine{05794\ }
\DoxyCodeLine{05795\ \ \ \ \ \textcolor{comment}{/*\ If\ we\ are\ seeking\ forward\ we\ start\ from\ the\ current\ position.\ Otherwise\ we\ need\ to\ start\ all\ the\ way\ from\ the\ start\ of\ the\ file.\ */}}
\DoxyCodeLine{05796\ \ \ \ \ \textcolor{keywordflow}{if}\ (pcmFrameIndex\ >=\ pFlac-\/>currentPCMFrame)\ \{}
\DoxyCodeLine{05797\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Seeking\ forward.\ Need\ to\ seek\ from\ the\ current\ position.\ */}}
\DoxyCodeLine{05798\ \ \ \ \ \ \ \ \ runningPCMFrameCount\ =\ pFlac-\/>currentPCMFrame;}
\DoxyCodeLine{05799\ }
\DoxyCodeLine{05800\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ frame\ header\ for\ the\ first\ frame\ may\ not\ yet\ have\ been\ read.\ We\ need\ to\ do\ that\ if\ necessary.\ */}}
\DoxyCodeLine{05801\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>currentPCMFrame\ ==\ 0\ \&\&\ pFlac-\/>currentFLACFrame.pcmFramesRemaining\ ==\ 0)\ \{}
\DoxyCodeLine{05802\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_next\_flac\_frame\_header(\&pFlac-\/>bs,\ pFlac-\/>bitsPerSample,\ \&pFlac-\/>currentFLACFrame.header))\ \{}
\DoxyCodeLine{05803\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05804\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05805\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05806\ \ \ \ \ \ \ \ \ \ \ \ \ isMidFrame\ =\ DRFLAC\_TRUE;}
\DoxyCodeLine{05807\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05808\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05809\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Seeking\ backwards.\ Need\ to\ seek\ from\ the\ start\ of\ the\ file.\ */}}
\DoxyCodeLine{05810\ \ \ \ \ \ \ \ \ runningPCMFrameCount\ =\ 0;}
\DoxyCodeLine{05811\ }
\DoxyCodeLine{05812\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Move\ back\ to\ the\ start.\ */}}
\DoxyCodeLine{05813\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_to\_first\_frame(pFlac))\ \{}
\DoxyCodeLine{05814\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05815\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05816\ }
\DoxyCodeLine{05817\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Decode\ the\ first\ frame\ in\ preparation\ for\ sample-\/exact\ seeking\ below.\ */}}
\DoxyCodeLine{05818\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_next\_flac\_frame\_header(\&pFlac-\/>bs,\ pFlac-\/>bitsPerSample,\ \&pFlac-\/>currentFLACFrame.header))\ \{}
\DoxyCodeLine{05819\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05820\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05821\ \ \ \ \ \}}
\DoxyCodeLine{05822\ }
\DoxyCodeLine{05823\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{05824\ \textcolor{comment}{\ \ \ \ We\ need\ to\ as\ quickly\ as\ possible\ find\ the\ frame\ that\ contains\ the\ target\ sample.\ To\ do\ this,\ we\ iterate\ over\ each\ frame\ and\ inspect\ its}}
\DoxyCodeLine{05825\ \textcolor{comment}{\ \ \ \ header.\ If\ based\ on\ the\ header\ we\ can\ determine\ that\ the\ frame\ contains\ the\ sample,\ we\ do\ a\ full\ decode\ of\ that\ frame.}}
\DoxyCodeLine{05826\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{05827\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{05828\ \ \ \ \ \ \ \ \ drflac\_uint64\ pcmFrameCountInThisFLACFrame;}
\DoxyCodeLine{05829\ \ \ \ \ \ \ \ \ drflac\_uint64\ firstPCMFrameInFLACFrame\ =\ 0;}
\DoxyCodeLine{05830\ \ \ \ \ \ \ \ \ drflac\_uint64\ lastPCMFrameInFLACFrame\ =\ 0;}
\DoxyCodeLine{05831\ }
\DoxyCodeLine{05832\ \ \ \ \ \ \ \ \ drflac\_\_get\_pcm\_frame\_range\_of\_current\_flac\_frame(pFlac,\ \&firstPCMFrameInFLACFrame,\ \&lastPCMFrameInFLACFrame);}
\DoxyCodeLine{05833\ }
\DoxyCodeLine{05834\ \ \ \ \ \ \ \ \ pcmFrameCountInThisFLACFrame\ =\ (lastPCMFrameInFLACFrame\ -\/\ firstPCMFrameInFLACFrame)\ +\ 1;}
\DoxyCodeLine{05835\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pcmFrameIndex\ <\ (runningPCMFrameCount\ +\ pcmFrameCountInThisFLACFrame))\ \{}
\DoxyCodeLine{05836\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{05837\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ The\ sample\ should\ be\ in\ this\ frame.\ We\ need\ to\ fully\ decode\ it,\ however\ if\ it's\ an\ invalid\ frame\ (a\ CRC\ mismatch),\ we\ need\ to\ pretend}}
\DoxyCodeLine{05838\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ it\ never\ existed\ and\ keep\ iterating.}}
\DoxyCodeLine{05839\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{05840\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ pcmFramesToDecode\ =\ pcmFrameIndex\ -\/\ runningPCMFrameCount;}
\DoxyCodeLine{05841\ }
\DoxyCodeLine{05842\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!isMidFrame)\ \{}
\DoxyCodeLine{05843\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_result\ result\ =\ drflac\_\_decode\_flac\_frame(pFlac);}
\DoxyCodeLine{05844\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{05845\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ frame\ is\ valid.\ We\ just\ need\ to\ skip\ over\ some\ samples\ to\ ensure\ it's\ sample-\/exact.\ */}}
\DoxyCodeLine{05846\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_seek\_forward\_by\_pcm\_frames(pFlac,\ pcmFramesToDecode)\ ==\ pcmFramesToDecode;\ \ \textcolor{comment}{/*\ <-\/-\/\ If\ this\ fails,\ something\ bad\ has\ happened\ (it\ should\ never\ fail).\ */}}
\DoxyCodeLine{05847\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05848\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_CRC\_MISMATCH)\ \{}
\DoxyCodeLine{05849\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ next\_iteration;\ \ \ \textcolor{comment}{/*\ CRC\ mismatch.\ Pretend\ this\ frame\ never\ existed.\ */}}
\DoxyCodeLine{05850\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05851\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05852\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05853\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05854\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05855\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ started\ seeking\ mid-\/frame\ which\ means\ we\ need\ to\ skip\ the\ frame\ decoding\ part.\ */}}
\DoxyCodeLine{05856\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_seek\_forward\_by\_pcm\_frames(pFlac,\ pcmFramesToDecode)\ ==\ pcmFramesToDecode;}
\DoxyCodeLine{05857\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05858\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05859\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{05860\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ It's\ not\ in\ this\ frame.\ We\ need\ to\ seek\ past\ the\ frame,\ but\ check\ if\ there\ was\ a\ CRC\ mismatch.\ If\ so,\ we\ pretend\ this}}
\DoxyCodeLine{05861\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ frame\ never\ existed\ and\ leave\ the\ running\ sample\ count\ untouched.}}
\DoxyCodeLine{05862\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{05863\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!isMidFrame)\ \{}
\DoxyCodeLine{05864\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_result\ result\ =\ drflac\_\_seek\_to\_next\_flac\_frame(pFlac);}
\DoxyCodeLine{05865\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{05866\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ runningPCMFrameCount\ +=\ pcmFrameCountInThisFLACFrame;}
\DoxyCodeLine{05867\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05868\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_CRC\_MISMATCH)\ \{}
\DoxyCodeLine{05869\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ next\_iteration;\ \ \ \textcolor{comment}{/*\ CRC\ mismatch.\ Pretend\ this\ frame\ never\ existed.\ */}}
\DoxyCodeLine{05870\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05871\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05872\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05873\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05874\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05875\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{05876\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ We\ started\ seeking\ mid-\/frame\ which\ means\ we\ need\ to\ seek\ by\ reading\ to\ the\ end\ of\ the\ frame\ instead\ of\ with}}
\DoxyCodeLine{05877\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_seek\_to\_next\_flac\_frame()\ which\ only\ works\ if\ the\ decoder\ is\ sitting\ on\ the\ byte\ just\ after\ the\ frame\ header.}}
\DoxyCodeLine{05878\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{05879\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ runningPCMFrameCount\ +=\ pFlac-\/>currentFLACFrame.pcmFramesRemaining;}
\DoxyCodeLine{05880\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentFLACFrame.pcmFramesRemaining\ =\ 0;}
\DoxyCodeLine{05881\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ isMidFrame\ =\ DRFLAC\_FALSE;}
\DoxyCodeLine{05882\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05883\ }
\DoxyCodeLine{05884\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ we\ are\ seeking\ to\ the\ end\ of\ the\ file\ and\ we've\ just\ hit\ it,\ we're\ done.\ */}}
\DoxyCodeLine{05885\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pcmFrameIndex\ ==\ pFlac-\/>totalPCMFrameCount\ \&\&\ runningPCMFrameCount\ ==\ pFlac-\/>totalPCMFrameCount)\ \{}
\DoxyCodeLine{05886\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{05887\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05888\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05889\ }
\DoxyCodeLine{05890\ \ \ \ \ next\_iteration:}
\DoxyCodeLine{05891\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Grab\ the\ next\ frame\ in\ preparation\ for\ the\ next\ iteration.\ */}}
\DoxyCodeLine{05892\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_next\_flac\_frame\_header(\&pFlac-\/>bs,\ pFlac-\/>bitsPerSample,\ \&pFlac-\/>currentFLACFrame.header))\ \{}
\DoxyCodeLine{05893\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05894\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05895\ \ \ \ \ \}}
\DoxyCodeLine{05896\ \}}
\DoxyCodeLine{05897\ }
\DoxyCodeLine{05898\ }
\DoxyCodeLine{05899\ \textcolor{preprocessor}{\#if\ !defined(DR\_FLAC\_NO\_CRC)}}
\DoxyCodeLine{05900\ \textcolor{comment}{/*}}
\DoxyCodeLine{05901\ \textcolor{comment}{We\ use\ an\ average\ compression\ ratio\ to\ determine\ our\ approximate\ start\ location.\ FLAC\ files\ are\ generally\ about\ 50\%-\/70\%\ the\ size\ of\ their}}
\DoxyCodeLine{05902\ \textcolor{comment}{uncompressed\ counterparts\ so\ we'll\ use\ this\ as\ a\ basis.\ I'm\ going\ to\ split\ the\ middle\ and\ use\ a\ factor\ of\ 0.6\ to\ determine\ the\ starting}}
\DoxyCodeLine{05903\ \textcolor{comment}{location.}}
\DoxyCodeLine{05904\ \textcolor{comment}{*/}}
\DoxyCodeLine{05905\ \textcolor{preprocessor}{\#define\ DRFLAC\_BINARY\_SEARCH\_APPROX\_COMPRESSION\_RATIO\ 0.6f}}
\DoxyCodeLine{05906\ }
\DoxyCodeLine{05907\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_seek\_to\_approximate\_flac\_frame\_to\_byte(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ targetByte,\ drflac\_uint64\ rangeLo,\ drflac\_uint64\ rangeHi,\ drflac\_uint64*\ pLastSuccessfulSeekOffset)}
\DoxyCodeLine{05908\ \{}
\DoxyCodeLine{05909\ \ \ \ \ DRFLAC\_ASSERT(pFlac\ !=\ NULL);}
\DoxyCodeLine{05910\ \ \ \ \ DRFLAC\_ASSERT(pLastSuccessfulSeekOffset\ !=\ NULL);}
\DoxyCodeLine{05911\ \ \ \ \ DRFLAC\_ASSERT(targetByte\ >=\ rangeLo);}
\DoxyCodeLine{05912\ \ \ \ \ DRFLAC\_ASSERT(targetByte\ <=\ rangeHi);}
\DoxyCodeLine{05913\ }
\DoxyCodeLine{05914\ \ \ \ \ *pLastSuccessfulSeekOffset\ =\ pFlac-\/>firstFLACFramePosInBytes;}
\DoxyCodeLine{05915\ }
\DoxyCodeLine{05916\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{05917\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ After\ rangeLo\ ==\ rangeHi\ ==\ targetByte\ fails,\ we\ need\ to\ break\ out.\ */}}
\DoxyCodeLine{05918\ \ \ \ \ \ \ \ \ drflac\_uint64\ lastTargetByte\ =\ targetByte;}
\DoxyCodeLine{05919\ }
\DoxyCodeLine{05920\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ When\ seeking\ to\ a\ byte,\ failure\ probably\ means\ we've\ attempted\ to\ seek\ beyond\ the\ end\ of\ the\ stream.\ To\ counter\ this\ we\ just\ halve\ it\ each\ attempt.\ */}}
\DoxyCodeLine{05921\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_to\_byte(\&pFlac-\/>bs,\ targetByte))\ \{}
\DoxyCodeLine{05922\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ we\ couldn't\ even\ seek\ to\ the\ first\ byte\ in\ the\ stream\ we\ have\ a\ problem.\ Just\ abandon\ the\ whole\ thing.\ */}}
\DoxyCodeLine{05923\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (targetByte\ ==\ 0)\ \{}
\DoxyCodeLine{05924\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_seek\_to\_first\_frame(pFlac);\ \textcolor{comment}{/*\ Try\ to\ recover.\ */}}
\DoxyCodeLine{05925\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05926\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05927\ }
\DoxyCodeLine{05928\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Halve\ the\ byte\ location\ and\ continue.\ */}}
\DoxyCodeLine{05929\ \ \ \ \ \ \ \ \ \ \ \ \ targetByte\ =\ rangeLo\ +\ ((rangeHi\ -\/\ rangeLo)/2);}
\DoxyCodeLine{05930\ \ \ \ \ \ \ \ \ \ \ \ \ rangeHi\ =\ targetByte;}
\DoxyCodeLine{05931\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05932\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Getting\ here\ should\ mean\ that\ we\ have\ seeked\ to\ an\ appropriate\ byte.\ */}}
\DoxyCodeLine{05933\ }
\DoxyCodeLine{05934\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Clear\ the\ details\ of\ the\ FLAC\ frame\ so\ we\ don't\ misreport\ data.\ */}}
\DoxyCodeLine{05935\ \ \ \ \ \ \ \ \ \ \ \ \ DRFLAC\_ZERO\_MEMORY(\&pFlac-\/>currentFLACFrame,\ \textcolor{keyword}{sizeof}(pFlac-\/>currentFLACFrame));}
\DoxyCodeLine{05936\ }
\DoxyCodeLine{05937\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{05938\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ Now\ seek\ to\ the\ next\ FLAC\ frame.\ We\ need\ to\ decode\ the\ entire\ frame\ (not\ just\ the\ header)\ because\ it's\ possible\ for\ the\ header\ to\ incorrectly\ pass\ the}}
\DoxyCodeLine{05939\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ CRC\ check\ and\ return\ bad\ data.\ We\ need\ to\ decode\ the\ entire\ frame\ to\ be\ more\ certain.\ Although\ this\ seems\ unlikely,\ this\ has\ happened\ to\ me\ in\ testing}}
\DoxyCodeLine{05940\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ so\ it\ needs\ to\ stay\ this\ way\ for\ now.}}
\DoxyCodeLine{05941\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{05942\ \textcolor{preprocessor}{\#if\ 1}}
\DoxyCodeLine{05943\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_and\_decode\_next\_flac\_frame(pFlac))\ \{}
\DoxyCodeLine{05944\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Halve\ the\ byte\ location\ and\ continue.\ */}}
\DoxyCodeLine{05945\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ targetByte\ =\ rangeLo\ +\ ((rangeHi\ -\/\ rangeLo)/2);}
\DoxyCodeLine{05946\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rangeHi\ =\ targetByte;}
\DoxyCodeLine{05947\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05948\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{05949\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05950\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{05951\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_next\_flac\_frame\_header(\&pFlac-\/>bs,\ pFlac-\/>bitsPerSample,\ \&pFlac-\/>currentFLACFrame.header))\ \{}
\DoxyCodeLine{05952\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Halve\ the\ byte\ location\ and\ continue.\ */}}
\DoxyCodeLine{05953\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ targetByte\ =\ rangeLo\ +\ ((rangeHi\ -\/\ rangeLo)/2);}
\DoxyCodeLine{05954\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rangeHi\ =\ targetByte;}
\DoxyCodeLine{05955\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{05956\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{05957\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05958\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{05959\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05960\ }
\DoxyCodeLine{05961\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ already\ tried\ this\ byte\ and\ there\ are\ no\ more\ to\ try,\ break\ out.\ */}}
\DoxyCodeLine{05962\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(targetByte\ ==\ lastTargetByte)\ \{}
\DoxyCodeLine{05963\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05964\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05965\ \ \ \ \ \}}
\DoxyCodeLine{05966\ }
\DoxyCodeLine{05967\ \ \ \ \ \textcolor{comment}{/*\ The\ current\ PCM\ frame\ needs\ to\ be\ updated\ based\ on\ the\ frame\ we\ just\ seeked\ to.\ */}}
\DoxyCodeLine{05968\ \ \ \ \ drflac\_\_get\_pcm\_frame\_range\_of\_current\_flac\_frame(pFlac,\ \&pFlac-\/>currentPCMFrame,\ NULL);}
\DoxyCodeLine{05969\ }
\DoxyCodeLine{05970\ \ \ \ \ DRFLAC\_ASSERT(targetByte\ <=\ rangeHi);}
\DoxyCodeLine{05971\ }
\DoxyCodeLine{05972\ \ \ \ \ *pLastSuccessfulSeekOffset\ =\ targetByte;}
\DoxyCodeLine{05973\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{05974\ \}}
\DoxyCodeLine{05975\ }
\DoxyCodeLine{05976\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_decode\_flac\_frame\_and\_seek\_forward\_by\_pcm\_frames(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ \mbox{\hyperlink{structoffset}{offset}})}
\DoxyCodeLine{05977\ \{}
\DoxyCodeLine{05978\ \ \ \ \ \textcolor{comment}{/*\ This\ section\ of\ code\ would\ be\ used\ if\ we\ were\ only\ decoding\ the\ FLAC\ frame\ header\ when\ calling\ drflac\_\_seek\_to\_approximate\_flac\_frame\_to\_byte().\ */}}
\DoxyCodeLine{05979\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{05980\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_decode\_flac\_frame(pFlac)\ !=\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{05981\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ failed\ to\ decode\ this\ frame\ which\ may\ be\ due\ to\ it\ being\ corrupt.\ We'll\ just\ use\ the\ next\ valid\ FLAC\ frame.\ */}}
\DoxyCodeLine{05982\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_read\_and\_decode\_next\_flac\_frame(pFlac)\ ==\ DRFLAC\_FALSE)\ \{}
\DoxyCodeLine{05983\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{05984\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{05985\ \ \ \ \ \}}
\DoxyCodeLine{05986\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{05987\ }
\DoxyCodeLine{05988\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_seek\_forward\_by\_pcm\_frames(pFlac,\ \mbox{\hyperlink{structoffset}{offset}})\ ==\ \mbox{\hyperlink{structoffset}{offset}};}
\DoxyCodeLine{05989\ \}}
\DoxyCodeLine{05990\ }
\DoxyCodeLine{05991\ }
\DoxyCodeLine{05992\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_seek\_to\_pcm\_frame\_\_binary\_search\_internal(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ pcmFrameIndex,\ drflac\_uint64\ byteRangeLo,\ drflac\_uint64\ byteRangeHi)}
\DoxyCodeLine{05993\ \{}
\DoxyCodeLine{05994\ \ \ \ \ \textcolor{comment}{/*\ This\ assumes\ pFlac-\/>currentPCMFrame\ is\ sitting\ on\ byteRangeLo\ upon\ entry.\ */}}
\DoxyCodeLine{05995\ }
\DoxyCodeLine{05996\ \ \ \ \ drflac\_uint64\ targetByte;}
\DoxyCodeLine{05997\ \ \ \ \ drflac\_uint64\ pcmRangeLo\ =\ pFlac-\/>totalPCMFrameCount;}
\DoxyCodeLine{05998\ \ \ \ \ drflac\_uint64\ pcmRangeHi\ =\ 0;}
\DoxyCodeLine{05999\ \ \ \ \ drflac\_uint64\ lastSuccessfulSeekOffset\ =\ (drflac\_uint64)-\/1;}
\DoxyCodeLine{06000\ \ \ \ \ drflac\_uint64\ closestSeekOffsetBeforeTargetPCMFrame\ =\ byteRangeLo;}
\DoxyCodeLine{06001\ \ \ \ \ drflac\_uint32\ seekForwardThreshold\ =\ (pFlac-\/>maxBlockSizeInPCMFrames\ !=\ 0)\ ?\ pFlac-\/>maxBlockSizeInPCMFrames*2\ :\ 4096;}
\DoxyCodeLine{06002\ }
\DoxyCodeLine{06003\ \ \ \ \ targetByte\ =\ byteRangeLo\ +\ (drflac\_uint64)(((drflac\_int64)((pcmFrameIndex\ -\/\ pFlac-\/>currentPCMFrame)\ *\ pFlac-\/>channels\ *\ pFlac-\/>bitsPerSample)/8.0f)\ *\ DRFLAC\_BINARY\_SEARCH\_APPROX\_COMPRESSION\_RATIO);}
\DoxyCodeLine{06004\ \ \ \ \ \textcolor{keywordflow}{if}\ (targetByte\ >\ byteRangeHi)\ \{}
\DoxyCodeLine{06005\ \ \ \ \ \ \ \ \ targetByte\ =\ byteRangeHi;}
\DoxyCodeLine{06006\ \ \ \ \ \}}
\DoxyCodeLine{06007\ }
\DoxyCodeLine{06008\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{06009\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_seek\_to\_approximate\_flac\_frame\_to\_byte(pFlac,\ targetByte,\ byteRangeLo,\ byteRangeHi,\ \&lastSuccessfulSeekOffset))\ \{}
\DoxyCodeLine{06010\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ found\ a\ FLAC\ frame.\ We\ need\ to\ check\ if\ it\ contains\ the\ sample\ we're\ looking\ for.\ */}}
\DoxyCodeLine{06011\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ newPCMRangeLo;}
\DoxyCodeLine{06012\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ newPCMRangeHi;}
\DoxyCodeLine{06013\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_get\_pcm\_frame\_range\_of\_current\_flac\_frame(pFlac,\ \&newPCMRangeLo,\ \&newPCMRangeHi);}
\DoxyCodeLine{06014\ }
\DoxyCodeLine{06015\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ we\ selected\ the\ same\ frame,\ it\ means\ we\ should\ be\ pretty\ close.\ Just\ decode\ the\ rest.\ */}}
\DoxyCodeLine{06016\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pcmRangeLo\ ==\ newPCMRangeLo)\ \{}
\DoxyCodeLine{06017\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_to\_approximate\_flac\_frame\_to\_byte(pFlac,\ closestSeekOffsetBeforeTargetPCMFrame,\ closestSeekOffsetBeforeTargetPCMFrame,\ byteRangeHi,\ \&lastSuccessfulSeekOffset))\ \{}
\DoxyCodeLine{06018\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \ \textcolor{comment}{/*\ Failed\ to\ seek\ to\ closest\ frame.\ */}}
\DoxyCodeLine{06019\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06020\ }
\DoxyCodeLine{06021\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_decode\_flac\_frame\_and\_seek\_forward\_by\_pcm\_frames(pFlac,\ pcmFrameIndex\ -\/\ pFlac-\/>currentPCMFrame))\ \{}
\DoxyCodeLine{06022\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{06023\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06024\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \ \textcolor{comment}{/*\ Failed\ to\ seek\ forward.\ */}}
\DoxyCodeLine{06025\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06026\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06027\ }
\DoxyCodeLine{06028\ \ \ \ \ \ \ \ \ \ \ \ \ pcmRangeLo\ =\ newPCMRangeLo;}
\DoxyCodeLine{06029\ \ \ \ \ \ \ \ \ \ \ \ \ pcmRangeHi\ =\ newPCMRangeHi;}
\DoxyCodeLine{06030\ }
\DoxyCodeLine{06031\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pcmRangeLo\ <=\ pcmFrameIndex\ \&\&\ pcmRangeHi\ >=\ pcmFrameIndex)\ \{}
\DoxyCodeLine{06032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ target\ PCM\ frame\ is\ in\ this\ FLAC\ frame.\ */}}
\DoxyCodeLine{06033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_decode\_flac\_frame\_and\_seek\_forward\_by\_pcm\_frames(pFlac,\ pcmFrameIndex\ -\/\ pFlac-\/>currentPCMFrame)\ )\ \{}
\DoxyCodeLine{06034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{06035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \ \textcolor{comment}{/*\ Failed\ to\ seek\ to\ FLAC\ frame.\ */}}
\DoxyCodeLine{06037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06038\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ approxCompressionRatio\ =\ (drflac\_int64)(lastSuccessfulSeekOffset\ -\/\ pFlac-\/>firstFLACFramePosInBytes)\ /\ ((drflac\_int64)(pcmRangeLo\ *\ pFlac-\/>channels\ *\ pFlac-\/>bitsPerSample)/8.0f);}
\DoxyCodeLine{06040\ }
\DoxyCodeLine{06041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pcmRangeLo\ >\ pcmFrameIndex)\ \{}
\DoxyCodeLine{06042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ seeked\ too\ far\ forward.\ We\ need\ to\ move\ our\ target\ byte\ backward\ and\ try\ again.\ */}}
\DoxyCodeLine{06043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ byteRangeHi\ =\ lastSuccessfulSeekOffset;}
\DoxyCodeLine{06044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (byteRangeLo\ >\ byteRangeHi)\ \{}
\DoxyCodeLine{06045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ byteRangeLo\ =\ byteRangeHi;}
\DoxyCodeLine{06046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06047\ }
\DoxyCodeLine{06048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ targetByte\ =\ byteRangeLo\ +\ ((byteRangeHi\ -\/\ byteRangeLo)\ /\ 2);}
\DoxyCodeLine{06049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (targetByte\ <\ byteRangeLo)\ \{}
\DoxyCodeLine{06050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ targetByte\ =\ byteRangeLo;}
\DoxyCodeLine{06051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{comment}{/*if\ (pcmRangeHi\ <\ pcmFrameIndex)*/}\ \{}
\DoxyCodeLine{06053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ didn't\ seek\ far\ enough.\ We\ need\ to\ move\ our\ target\ byte\ forward\ and\ try\ again.\ */}}
\DoxyCodeLine{06054\ }
\DoxyCodeLine{06055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ we're\ close\ enough\ we\ can\ just\ seek\ forward.\ */}}
\DoxyCodeLine{06056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((pcmFrameIndex\ -\/\ pcmRangeLo)\ <\ seekForwardThreshold)\ \{}
\DoxyCodeLine{06057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_decode\_flac\_frame\_and\_seek\_forward\_by\_pcm\_frames(pFlac,\ pcmFrameIndex\ -\/\ pFlac-\/>currentPCMFrame))\ \{}
\DoxyCodeLine{06058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{06059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \ \textcolor{comment}{/*\ Failed\ to\ seek\ to\ FLAC\ frame.\ */}}
\DoxyCodeLine{06061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ byteRangeLo\ =\ lastSuccessfulSeekOffset;}
\DoxyCodeLine{06064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (byteRangeHi\ <\ byteRangeLo)\ \{}
\DoxyCodeLine{06065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ byteRangeHi\ =\ byteRangeLo;}
\DoxyCodeLine{06066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06067\ }
\DoxyCodeLine{06068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ targetByte\ =\ lastSuccessfulSeekOffset\ +\ (drflac\_uint64)(((drflac\_int64)((pcmFrameIndex-\/pcmRangeLo)\ *\ pFlac-\/>channels\ *\ pFlac-\/>bitsPerSample)/8.0f)\ *\ approxCompressionRatio);}
\DoxyCodeLine{06069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (targetByte\ >\ byteRangeHi)\ \{}
\DoxyCodeLine{06070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ targetByte\ =\ byteRangeHi;}
\DoxyCodeLine{06071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06072\ }
\DoxyCodeLine{06073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (closestSeekOffsetBeforeTargetPCMFrame\ <\ lastSuccessfulSeekOffset)\ \{}
\DoxyCodeLine{06074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ closestSeekOffsetBeforeTargetPCMFrame\ =\ lastSuccessfulSeekOffset;}
\DoxyCodeLine{06075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06078\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06079\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06080\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Getting\ here\ is\ really\ bad.\ We\ just\ recover\ as\ best\ we\ can,\ but\ moving\ to\ the\ first\ frame\ in\ the\ stream,\ and\ then\ abort.\ */}}
\DoxyCodeLine{06081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{06082\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06083\ \ \ \ \ \}}
\DoxyCodeLine{06084\ }
\DoxyCodeLine{06085\ \ \ \ \ drflac\_\_seek\_to\_first\_frame(pFlac);\ \textcolor{comment}{/*\ <-\/-\/\ Try\ to\ recover.\ */}}
\DoxyCodeLine{06086\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06087\ \}}
\DoxyCodeLine{06088\ }
\DoxyCodeLine{06089\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_seek\_to\_pcm\_frame\_\_binary\_search(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ pcmFrameIndex)}
\DoxyCodeLine{06090\ \{}
\DoxyCodeLine{06091\ \ \ \ \ drflac\_uint64\ byteRangeLo;}
\DoxyCodeLine{06092\ \ \ \ \ drflac\_uint64\ byteRangeHi;}
\DoxyCodeLine{06093\ \ \ \ \ drflac\_uint32\ seekForwardThreshold\ =\ (pFlac-\/>maxBlockSizeInPCMFrames\ !=\ 0)\ ?\ pFlac-\/>maxBlockSizeInPCMFrames*2\ :\ 4096;}
\DoxyCodeLine{06094\ }
\DoxyCodeLine{06095\ \ \ \ \ \textcolor{comment}{/*\ Our\ algorithm\ currently\ assumes\ the\ FLAC\ stream\ is\ currently\ sitting\ at\ the\ start.\ */}}
\DoxyCodeLine{06096\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_seek\_to\_first\_frame(pFlac)\ ==\ DRFLAC\_FALSE)\ \{}
\DoxyCodeLine{06097\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06098\ \ \ \ \ \}}
\DoxyCodeLine{06099\ }
\DoxyCodeLine{06100\ \ \ \ \ \textcolor{comment}{/*\ If\ we're\ close\ enough\ to\ the\ start,\ just\ move\ to\ the\ start\ and\ seek\ forward.\ */}}
\DoxyCodeLine{06101\ \ \ \ \ \textcolor{keywordflow}{if}\ (pcmFrameIndex\ <\ seekForwardThreshold)\ \{}
\DoxyCodeLine{06102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_seek\_forward\_by\_pcm\_frames(pFlac,\ pcmFrameIndex)\ ==\ pcmFrameIndex;}
\DoxyCodeLine{06103\ \ \ \ \ \}}
\DoxyCodeLine{06104\ }
\DoxyCodeLine{06105\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{06106\ \textcolor{comment}{\ \ \ \ Our\ starting\ byte\ range\ is\ the\ byte\ position\ of\ the\ first\ FLAC\ frame\ and\ the\ approximate\ end\ of\ the\ file\ as\ if\ it\ were\ completely\ uncompressed.\ This\ ensures}}
\DoxyCodeLine{06107\ \textcolor{comment}{\ \ \ \ the\ entire\ file\ is\ included,\ even\ though\ most\ of\ the\ time\ it'll\ exceed\ the\ end\ of\ the\ actual\ stream.\ This\ is\ OK\ as\ the\ frame\ searching\ logic\ will\ handle\ it.}}
\DoxyCodeLine{06108\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{06109\ \ \ \ \ byteRangeLo\ =\ pFlac-\/>firstFLACFramePosInBytes;}
\DoxyCodeLine{06110\ \ \ \ \ byteRangeHi\ =\ pFlac-\/>firstFLACFramePosInBytes\ +\ (drflac\_uint64)((drflac\_int64)(pFlac-\/>totalPCMFrameCount\ *\ pFlac-\/>channels\ *\ pFlac-\/>bitsPerSample)/8.0f);}
\DoxyCodeLine{06111\ }
\DoxyCodeLine{06112\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_seek\_to\_pcm\_frame\_\_binary\_search\_internal(pFlac,\ pcmFrameIndex,\ byteRangeLo,\ byteRangeHi);}
\DoxyCodeLine{06113\ \}}
\DoxyCodeLine{06114\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{/*\ !DR\_FLAC\_NO\_CRC\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{06115\ }
\DoxyCodeLine{06116\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_seek\_to\_pcm\_frame\_\_seek\_table(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ pcmFrameIndex)}
\DoxyCodeLine{06117\ \{}
\DoxyCodeLine{06118\ \ \ \ \ drflac\_uint32\ iClosestSeekpoint\ =\ 0;}
\DoxyCodeLine{06119\ \ \ \ \ drflac\_bool32\ isMidFrame\ =\ DRFLAC\_FALSE;}
\DoxyCodeLine{06120\ \ \ \ \ drflac\_uint64\ runningPCMFrameCount;}
\DoxyCodeLine{06121\ \ \ \ \ drflac\_uint32\ iSeekpoint;}
\DoxyCodeLine{06122\ }
\DoxyCodeLine{06123\ }
\DoxyCodeLine{06124\ \ \ \ \ DRFLAC\_ASSERT(pFlac\ !=\ NULL);}
\DoxyCodeLine{06125\ }
\DoxyCodeLine{06126\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>pSeekpoints\ ==\ NULL\ ||\ pFlac-\/>seekpointCount\ ==\ 0)\ \{}
\DoxyCodeLine{06127\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06128\ \ \ \ \ \}}
\DoxyCodeLine{06129\ }
\DoxyCodeLine{06130\ \ \ \ \ \textcolor{comment}{/*\ Do\ not\ use\ the\ seektable\ if\ pcmFramIndex\ is\ not\ coverd\ by\ it.\ */}}
\DoxyCodeLine{06131\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>pSeekpoints[0].firstPCMFrame\ >\ pcmFrameIndex)\ \{}
\DoxyCodeLine{06132\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06133\ \ \ \ \ \}}
\DoxyCodeLine{06134\ }
\DoxyCodeLine{06135\ \ \ \ \ \textcolor{keywordflow}{for}\ (iSeekpoint\ =\ 0;\ iSeekpoint\ <\ pFlac-\/>seekpointCount;\ ++iSeekpoint)\ \{}
\DoxyCodeLine{06136\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>pSeekpoints[iSeekpoint].firstPCMFrame\ >=\ pcmFrameIndex)\ \{}
\DoxyCodeLine{06137\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{06138\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06139\ }
\DoxyCodeLine{06140\ \ \ \ \ \ \ \ \ iClosestSeekpoint\ =\ iSeekpoint;}
\DoxyCodeLine{06141\ \ \ \ \ \}}
\DoxyCodeLine{06142\ }
\DoxyCodeLine{06143\ \ \ \ \ \textcolor{comment}{/*\ There's\ been\ cases\ where\ the\ seek\ table\ contains\ only\ zeros.\ We\ need\ to\ do\ some\ basic\ validation\ on\ the\ closest\ seekpoint.\ */}}
\DoxyCodeLine{06144\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>pSeekpoints[iClosestSeekpoint].pcmFrameCount\ ==\ 0\ ||\ pFlac-\/>pSeekpoints[iClosestSeekpoint].pcmFrameCount\ >\ pFlac-\/>maxBlockSizeInPCMFrames)\ \{}
\DoxyCodeLine{06145\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06146\ \ \ \ \ \}}
\DoxyCodeLine{06147\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>pSeekpoints[iClosestSeekpoint].firstPCMFrame\ >\ pFlac-\/>totalPCMFrameCount\ \&\&\ pFlac-\/>totalPCMFrameCount\ >\ 0)\ \{}
\DoxyCodeLine{06148\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06149\ \ \ \ \ \}}
\DoxyCodeLine{06150\ }
\DoxyCodeLine{06151\ \textcolor{preprocessor}{\#if\ !defined(DR\_FLAC\_NO\_CRC)}}
\DoxyCodeLine{06152\ \ \ \ \ \textcolor{comment}{/*\ At\ this\ point\ we\ should\ know\ the\ closest\ seek\ point.\ We\ can\ use\ a\ binary\ search\ for\ this.\ We\ need\ to\ know\ the\ total\ sample\ count\ for\ this.\ */}}
\DoxyCodeLine{06153\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>totalPCMFrameCount\ >\ 0)\ \{}
\DoxyCodeLine{06154\ \ \ \ \ \ \ \ \ drflac\_uint64\ byteRangeLo;}
\DoxyCodeLine{06155\ \ \ \ \ \ \ \ \ drflac\_uint64\ byteRangeHi;}
\DoxyCodeLine{06156\ }
\DoxyCodeLine{06157\ \ \ \ \ \ \ \ \ byteRangeHi\ =\ pFlac-\/>firstFLACFramePosInBytes\ +\ (drflac\_uint64)((drflac\_int64)(pFlac-\/>totalPCMFrameCount\ *\ pFlac-\/>channels\ *\ pFlac-\/>bitsPerSample)/8.0f);}
\DoxyCodeLine{06158\ \ \ \ \ \ \ \ \ byteRangeLo\ =\ pFlac-\/>firstFLACFramePosInBytes\ +\ pFlac-\/>pSeekpoints[iClosestSeekpoint].flacFrameOffset;}
\DoxyCodeLine{06159\ }
\DoxyCodeLine{06160\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{06161\ \textcolor{comment}{\ \ \ \ \ \ \ \ If\ our\ closest\ seek\ point\ is\ not\ the\ last\ one,\ we\ only\ need\ to\ search\ between\ it\ and\ the\ next\ one.\ The\ section\ below\ calculates\ an\ appropriate\ starting}}
\DoxyCodeLine{06162\ \textcolor{comment}{\ \ \ \ \ \ \ \ value\ for\ byteRangeHi\ which\ will\ clamp\ it\ appropriately.}}
\DoxyCodeLine{06163\ \textcolor{comment}{}}
\DoxyCodeLine{06164\ \textcolor{comment}{\ \ \ \ \ \ \ \ Note\ that\ the\ next\ seekpoint\ must\ have\ an\ offset\ greater\ than\ the\ closest\ seekpoint\ because\ otherwise\ our\ binary\ search\ algorithm\ will\ break\ down.\ There}}
\DoxyCodeLine{06165\ \textcolor{comment}{\ \ \ \ \ \ \ \ have\ been\ cases\ where\ a\ seektable\ consists\ of\ seek\ points\ where\ every\ byte\ offset\ is\ set\ to\ 0\ which\ causes\ problems.\ If\ this\ happens\ we\ need\ to\ abort.}}
\DoxyCodeLine{06166\ \textcolor{comment}{\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{06167\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (iClosestSeekpoint\ <\ pFlac-\/>seekpointCount-\/1)\ \{}
\DoxyCodeLine{06168\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ iNextSeekpoint\ =\ iClosestSeekpoint\ +\ 1;}
\DoxyCodeLine{06169\ }
\DoxyCodeLine{06170\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Basic\ validation\ on\ the\ seekpoints\ to\ ensure\ they're\ usable.\ */}}
\DoxyCodeLine{06171\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>pSeekpoints[iClosestSeekpoint].flacFrameOffset\ >=\ pFlac-\/>pSeekpoints[iNextSeekpoint].flacFrameOffset\ ||\ pFlac-\/>pSeekpoints[iNextSeekpoint].pcmFrameCount\ ==\ 0)\ \{}
\DoxyCodeLine{06172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \textcolor{comment}{/*\ The\ next\ seekpoint\ doesn't\ look\ right.\ The\ seek\ table\ cannot\ be\ trusted\ from\ here.\ Abort.\ */}}
\DoxyCodeLine{06173\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06174\ }
\DoxyCodeLine{06175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>pSeekpoints[iNextSeekpoint].firstPCMFrame\ !=\ (((drflac\_uint64)0xFFFFFFFF\ <<\ 32)\ |\ 0xFFFFFFFF))\ \{\ \textcolor{comment}{/*\ Make\ sure\ it's\ not\ a\ placeholder\ seekpoint.\ */}}
\DoxyCodeLine{06176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ byteRangeHi\ =\ pFlac-\/>firstFLACFramePosInBytes\ +\ pFlac-\/>pSeekpoints[iNextSeekpoint].flacFrameOffset\ -\/\ 1;\ \textcolor{comment}{/*\ byteRangeHi\ must\ be\ zero\ based.\ */}}
\DoxyCodeLine{06177\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06178\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06179\ }
\DoxyCodeLine{06180\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_seek\_to\_byte(\&pFlac-\/>bs,\ pFlac-\/>firstFLACFramePosInBytes\ +\ pFlac-\/>pSeekpoints[iClosestSeekpoint].flacFrameOffset))\ \{}
\DoxyCodeLine{06181\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_read\_next\_flac\_frame\_header(\&pFlac-\/>bs,\ pFlac-\/>bitsPerSample,\ \&pFlac-\/>currentFLACFrame.header))\ \{}
\DoxyCodeLine{06182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_get\_pcm\_frame\_range\_of\_current\_flac\_frame(pFlac,\ \&pFlac-\/>currentPCMFrame,\ NULL);}
\DoxyCodeLine{06183\ }
\DoxyCodeLine{06184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_seek\_to\_pcm\_frame\_\_binary\_search\_internal(pFlac,\ pcmFrameIndex,\ byteRangeLo,\ byteRangeHi))\ \{}
\DoxyCodeLine{06185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{06186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06187\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06188\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06189\ \ \ \ \ \}}
\DoxyCodeLine{06190\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{/*\ !DR\_FLAC\_NO\_CRC\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{06191\ }
\DoxyCodeLine{06192\ \ \ \ \ \textcolor{comment}{/*\ Getting\ here\ means\ we\ need\ to\ use\ a\ slower\ algorithm\ because\ the\ binary\ search\ method\ failed\ or\ cannot\ be\ used.\ */}}
\DoxyCodeLine{06193\ }
\DoxyCodeLine{06194\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{06195\ \textcolor{comment}{\ \ \ \ If\ we\ are\ seeking\ forward\ and\ the\ closest\ seekpoint\ is\ \_before\_\ the\ current\ sample,\ we\ just\ seek\ forward\ from\ where\ we\ are.\ Otherwise\ we\ start\ seeking}}
\DoxyCodeLine{06196\ \textcolor{comment}{\ \ \ \ from\ the\ seekpoint's\ first\ sample.}}
\DoxyCodeLine{06197\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{06198\ \ \ \ \ \textcolor{keywordflow}{if}\ (pcmFrameIndex\ >=\ pFlac-\/>currentPCMFrame\ \&\&\ pFlac-\/>pSeekpoints[iClosestSeekpoint].firstPCMFrame\ <=\ pFlac-\/>currentPCMFrame)\ \{}
\DoxyCodeLine{06199\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Optimized\ case.\ Just\ seek\ forward\ from\ where\ we\ are.\ */}}
\DoxyCodeLine{06200\ \ \ \ \ \ \ \ \ runningPCMFrameCount\ =\ pFlac-\/>currentPCMFrame;}
\DoxyCodeLine{06201\ }
\DoxyCodeLine{06202\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ frame\ header\ for\ the\ first\ frame\ may\ not\ yet\ have\ been\ read.\ We\ need\ to\ do\ that\ if\ necessary.\ */}}
\DoxyCodeLine{06203\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>currentPCMFrame\ ==\ 0\ \&\&\ pFlac-\/>currentFLACFrame.pcmFramesRemaining\ ==\ 0)\ \{}
\DoxyCodeLine{06204\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_next\_flac\_frame\_header(\&pFlac-\/>bs,\ pFlac-\/>bitsPerSample,\ \&pFlac-\/>currentFLACFrame.header))\ \{}
\DoxyCodeLine{06205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06206\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06207\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06208\ \ \ \ \ \ \ \ \ \ \ \ \ isMidFrame\ =\ DRFLAC\_TRUE;}
\DoxyCodeLine{06209\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06210\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06211\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Slower\ case.\ Seek\ to\ the\ start\ of\ the\ seekpoint\ and\ then\ seek\ forward\ from\ there.\ */}}
\DoxyCodeLine{06212\ \ \ \ \ \ \ \ \ runningPCMFrameCount\ =\ pFlac-\/>pSeekpoints[iClosestSeekpoint].firstPCMFrame;}
\DoxyCodeLine{06213\ }
\DoxyCodeLine{06214\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_to\_byte(\&pFlac-\/>bs,\ pFlac-\/>firstFLACFramePosInBytes\ +\ pFlac-\/>pSeekpoints[iClosestSeekpoint].flacFrameOffset))\ \{}
\DoxyCodeLine{06215\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06216\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06217\ }
\DoxyCodeLine{06218\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Grab\ the\ frame\ the\ seekpoint\ is\ sitting\ on\ in\ preparation\ for\ the\ sample-\/exact\ seeking\ below.\ */}}
\DoxyCodeLine{06219\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_next\_flac\_frame\_header(\&pFlac-\/>bs,\ pFlac-\/>bitsPerSample,\ \&pFlac-\/>currentFLACFrame.header))\ \{}
\DoxyCodeLine{06220\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06221\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06222\ \ \ \ \ \}}
\DoxyCodeLine{06223\ }
\DoxyCodeLine{06224\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{06225\ \ \ \ \ \ \ \ \ drflac\_uint64\ pcmFrameCountInThisFLACFrame;}
\DoxyCodeLine{06226\ \ \ \ \ \ \ \ \ drflac\_uint64\ firstPCMFrameInFLACFrame\ =\ 0;}
\DoxyCodeLine{06227\ \ \ \ \ \ \ \ \ drflac\_uint64\ lastPCMFrameInFLACFrame\ =\ 0;}
\DoxyCodeLine{06228\ }
\DoxyCodeLine{06229\ \ \ \ \ \ \ \ \ drflac\_\_get\_pcm\_frame\_range\_of\_current\_flac\_frame(pFlac,\ \&firstPCMFrameInFLACFrame,\ \&lastPCMFrameInFLACFrame);}
\DoxyCodeLine{06230\ }
\DoxyCodeLine{06231\ \ \ \ \ \ \ \ \ pcmFrameCountInThisFLACFrame\ =\ (lastPCMFrameInFLACFrame\ -\/\ firstPCMFrameInFLACFrame)\ +\ 1;}
\DoxyCodeLine{06232\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pcmFrameIndex\ <\ (runningPCMFrameCount\ +\ pcmFrameCountInThisFLACFrame))\ \{}
\DoxyCodeLine{06233\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{06234\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ The\ sample\ should\ be\ in\ this\ frame.\ We\ need\ to\ fully\ decode\ it,\ but\ if\ it's\ an\ invalid\ frame\ (a\ CRC\ mismatch)\ we\ need\ to\ pretend}}
\DoxyCodeLine{06235\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ it\ never\ existed\ and\ keep\ iterating.}}
\DoxyCodeLine{06236\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{06237\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ pcmFramesToDecode\ =\ pcmFrameIndex\ -\/\ runningPCMFrameCount;}
\DoxyCodeLine{06238\ }
\DoxyCodeLine{06239\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!isMidFrame)\ \{}
\DoxyCodeLine{06240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_result\ result\ =\ drflac\_\_decode\_flac\_frame(pFlac);}
\DoxyCodeLine{06241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{06242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ frame\ is\ valid.\ We\ just\ need\ to\ skip\ over\ some\ samples\ to\ ensure\ it's\ sample-\/exact.\ */}}
\DoxyCodeLine{06243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_seek\_forward\_by\_pcm\_frames(pFlac,\ pcmFramesToDecode)\ ==\ pcmFramesToDecode;\ \ \textcolor{comment}{/*\ <-\/-\/\ If\ this\ fails,\ something\ bad\ has\ happened\ (it\ should\ never\ fail).\ */}}
\DoxyCodeLine{06244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_CRC\_MISMATCH)\ \{}
\DoxyCodeLine{06246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ next\_iteration;\ \ \ \textcolor{comment}{/*\ CRC\ mismatch.\ Pretend\ this\ frame\ never\ existed.\ */}}
\DoxyCodeLine{06247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06251\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ started\ seeking\ mid-\/frame\ which\ means\ we\ need\ to\ skip\ the\ frame\ decoding\ part.\ */}}
\DoxyCodeLine{06253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_seek\_forward\_by\_pcm\_frames(pFlac,\ pcmFramesToDecode)\ ==\ pcmFramesToDecode;}
\DoxyCodeLine{06254\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06255\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06256\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{06257\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ It's\ not\ in\ this\ frame.\ We\ need\ to\ seek\ past\ the\ frame,\ but\ check\ if\ there\ was\ a\ CRC\ mismatch.\ If\ so,\ we\ pretend\ this}}
\DoxyCodeLine{06258\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ frame\ never\ existed\ and\ leave\ the\ running\ sample\ count\ untouched.}}
\DoxyCodeLine{06259\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{06260\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!isMidFrame)\ \{}
\DoxyCodeLine{06261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_result\ result\ =\ drflac\_\_seek\_to\_next\_flac\_frame(pFlac);}
\DoxyCodeLine{06262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{06263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ runningPCMFrameCount\ +=\ pcmFrameCountInThisFLACFrame;}
\DoxyCodeLine{06264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_CRC\_MISMATCH)\ \{}
\DoxyCodeLine{06266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ next\_iteration;\ \ \ \textcolor{comment}{/*\ CRC\ mismatch.\ Pretend\ this\ frame\ never\ existed.\ */}}
\DoxyCodeLine{06267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06270\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06271\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{06273\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ We\ started\ seeking\ mid-\/frame\ which\ means\ we\ need\ to\ seek\ by\ reading\ to\ the\ end\ of\ the\ frame\ instead\ of\ with}}
\DoxyCodeLine{06274\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_seek\_to\_next\_flac\_frame()\ which\ only\ works\ if\ the\ decoder\ is\ sitting\ on\ the\ byte\ just\ after\ the\ frame\ header.}}
\DoxyCodeLine{06275\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{06276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ runningPCMFrameCount\ +=\ pFlac-\/>currentFLACFrame.pcmFramesRemaining;}
\DoxyCodeLine{06277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentFLACFrame.pcmFramesRemaining\ =\ 0;}
\DoxyCodeLine{06278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ isMidFrame\ =\ DRFLAC\_FALSE;}
\DoxyCodeLine{06279\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06280\ }
\DoxyCodeLine{06281\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ we\ are\ seeking\ to\ the\ end\ of\ the\ file\ and\ we've\ just\ hit\ it,\ we're\ done.\ */}}
\DoxyCodeLine{06282\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pcmFrameIndex\ ==\ pFlac-\/>totalPCMFrameCount\ \&\&\ runningPCMFrameCount\ ==\ pFlac-\/>totalPCMFrameCount)\ \{}
\DoxyCodeLine{06283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{06284\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06285\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06286\ }
\DoxyCodeLine{06287\ \ \ \ \ next\_iteration:}
\DoxyCodeLine{06288\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Grab\ the\ next\ frame\ in\ preparation\ for\ the\ next\ iteration.\ */}}
\DoxyCodeLine{06289\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_next\_flac\_frame\_header(\&pFlac-\/>bs,\ pFlac-\/>bitsPerSample,\ \&pFlac-\/>currentFLACFrame.header))\ \{}
\DoxyCodeLine{06290\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06291\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06292\ \ \ \ \ \}}
\DoxyCodeLine{06293\ \}}
\DoxyCodeLine{06294\ }
\DoxyCodeLine{06295\ }
\DoxyCodeLine{06296\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{06297\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{06298\ \{}
\DoxyCodeLine{06299\ \ \ \ \ drflac\_uint8\ capturePattern[4];\ \ \textcolor{comment}{/*\ Should\ be\ "{}OggS"{}\ */}}
\DoxyCodeLine{06300\ \ \ \ \ drflac\_uint8\ structureVersion;\ \ \ \textcolor{comment}{/*\ Always\ 0.\ */}}
\DoxyCodeLine{06301\ \ \ \ \ drflac\_uint8\ headerType;}
\DoxyCodeLine{06302\ \ \ \ \ drflac\_uint64\ granulePosition;}
\DoxyCodeLine{06303\ \ \ \ \ drflac\_uint32\ serialNumber;}
\DoxyCodeLine{06304\ \ \ \ \ drflac\_uint32\ sequenceNumber;}
\DoxyCodeLine{06305\ \ \ \ \ drflac\_uint32\ checksum;}
\DoxyCodeLine{06306\ \ \ \ \ drflac\_uint8\ segmentCount;}
\DoxyCodeLine{06307\ \ \ \ \ drflac\_uint8\ segmentTable[255];}
\DoxyCodeLine{06308\ \}\ drflac\_ogg\_page\_header;}
\DoxyCodeLine{06309\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{06310\ }
\DoxyCodeLine{06311\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{06312\ \{}
\DoxyCodeLine{06313\ \ \ \ \ drflac\_read\_proc\ onRead;}
\DoxyCodeLine{06314\ \ \ \ \ drflac\_seek\_proc\ onSeek;}
\DoxyCodeLine{06315\ \ \ \ \ drflac\_meta\_proc\ onMeta;}
\DoxyCodeLine{06316\ \ \ \ \ drflac\_container\ container;}
\DoxyCodeLine{06317\ \ \ \ \ \textcolor{keywordtype}{void}*\ pUserData;}
\DoxyCodeLine{06318\ \ \ \ \ \textcolor{keywordtype}{void}*\ pUserDataMD;}
\DoxyCodeLine{06319\ \ \ \ \ drflac\_uint32\ sampleRate;}
\DoxyCodeLine{06320\ \ \ \ \ drflac\_uint8\ \ channels;}
\DoxyCodeLine{06321\ \ \ \ \ drflac\_uint8\ \ bitsPerSample;}
\DoxyCodeLine{06322\ \ \ \ \ drflac\_uint64\ totalPCMFrameCount;}
\DoxyCodeLine{06323\ \ \ \ \ drflac\_uint16\ maxBlockSizeInPCMFrames;}
\DoxyCodeLine{06324\ \ \ \ \ drflac\_uint64\ runningFilePos;}
\DoxyCodeLine{06325\ \ \ \ \ drflac\_bool32\ hasStreamInfoBlock;}
\DoxyCodeLine{06326\ \ \ \ \ drflac\_bool32\ hasMetadataBlocks;}
\DoxyCodeLine{06327\ \ \ \ \ \mbox{\hyperlink{structdrflac__bs}{drflac\_bs}}\ bs;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ <-\/-\/\ A\ bit\ streamer\ is\ required\ for\ loading\ data\ during\ initialization.\ */}}
\DoxyCodeLine{06328\ \ \ \ \ \mbox{\hyperlink{structdrflac__frame__header}{drflac\_frame\_header}}\ firstFrameHeader;\ \ \ \textcolor{comment}{/*\ <-\/-\/\ The\ header\ of\ the\ first\ frame\ that\ was\ read\ during\ relaxed\ initalization.\ Only\ set\ if\ there\ is\ no\ STREAMINFO\ block.\ */}}
\DoxyCodeLine{06329\ }
\DoxyCodeLine{06330\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{06331\ \ \ \ \ drflac\_uint32\ oggSerial;}
\DoxyCodeLine{06332\ \ \ \ \ drflac\_uint64\ oggFirstBytePos;}
\DoxyCodeLine{06333\ \ \ \ \ drflac\_ogg\_page\_header\ oggBosHeader;}
\DoxyCodeLine{06334\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{06335\ \}\ drflac\_init\_info;}
\DoxyCodeLine{06336\ }
\DoxyCodeLine{06337\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_\_decode\_block\_header(drflac\_uint32\ blockHeader,\ drflac\_uint8*\ isLastBlock,\ drflac\_uint8*\ blockType,\ drflac\_uint32*\ blockSize)}
\DoxyCodeLine{06338\ \{}
\DoxyCodeLine{06339\ \ \ \ \ blockHeader\ =\ drflac\_\_be2host\_32(blockHeader);}
\DoxyCodeLine{06340\ \ \ \ \ *isLastBlock\ =\ (drflac\_uint8)((blockHeader\ \&\ 0x80000000UL)\ >>\ 31);}
\DoxyCodeLine{06341\ \ \ \ \ *blockType\ \ \ =\ (drflac\_uint8)((blockHeader\ \&\ 0x7F000000UL)\ >>\ 24);}
\DoxyCodeLine{06342\ \ \ \ \ *blockSize\ \ \ =\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (blockHeader\ \&\ 0x00FFFFFFUL);}
\DoxyCodeLine{06343\ \}}
\DoxyCodeLine{06344\ }
\DoxyCodeLine{06345\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_bool32\ drflac\_\_read\_and\_decode\_block\_header(drflac\_read\_proc\ onRead,\ \textcolor{keywordtype}{void}*\ pUserData,\ drflac\_uint8*\ isLastBlock,\ drflac\_uint8*\ blockType,\ drflac\_uint32*\ blockSize)}
\DoxyCodeLine{06346\ \{}
\DoxyCodeLine{06347\ \ \ \ \ drflac\_uint32\ blockHeader;}
\DoxyCodeLine{06348\ }
\DoxyCodeLine{06349\ \ \ \ \ *blockSize\ =\ 0;}
\DoxyCodeLine{06350\ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ \&blockHeader,\ 4)\ !=\ 4)\ \{}
\DoxyCodeLine{06351\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06352\ \ \ \ \ \}}
\DoxyCodeLine{06353\ }
\DoxyCodeLine{06354\ \ \ \ \ drflac\_\_decode\_block\_header(blockHeader,\ isLastBlock,\ blockType,\ blockSize);}
\DoxyCodeLine{06355\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{06356\ \}}
\DoxyCodeLine{06357\ }
\DoxyCodeLine{06358\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_read\_streaminfo(drflac\_read\_proc\ onRead,\ \textcolor{keywordtype}{void}*\ pUserData,\ \mbox{\hyperlink{structdrflac__streaminfo}{drflac\_streaminfo}}*\ pStreamInfo)}
\DoxyCodeLine{06359\ \{}
\DoxyCodeLine{06360\ \ \ \ \ drflac\_uint32\ blockSizes;}
\DoxyCodeLine{06361\ \ \ \ \ drflac\_uint64\ frameSizes\ =\ 0;}
\DoxyCodeLine{06362\ \ \ \ \ drflac\_uint64\ importantProps;}
\DoxyCodeLine{06363\ \ \ \ \ drflac\_uint8\ md5[16];}
\DoxyCodeLine{06364\ }
\DoxyCodeLine{06365\ \ \ \ \ \textcolor{comment}{/*\ min/max\ block\ size.\ */}}
\DoxyCodeLine{06366\ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ \&blockSizes,\ 4)\ !=\ 4)\ \{}
\DoxyCodeLine{06367\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06368\ \ \ \ \ \}}
\DoxyCodeLine{06369\ }
\DoxyCodeLine{06370\ \ \ \ \ \textcolor{comment}{/*\ min/max\ frame\ size.\ */}}
\DoxyCodeLine{06371\ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ \&frameSizes,\ 6)\ !=\ 6)\ \{}
\DoxyCodeLine{06372\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06373\ \ \ \ \ \}}
\DoxyCodeLine{06374\ }
\DoxyCodeLine{06375\ \ \ \ \ \textcolor{comment}{/*\ Sample\ rate,\ channels,\ bits\ per\ sample\ and\ total\ sample\ count.\ */}}
\DoxyCodeLine{06376\ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ \&importantProps,\ 8)\ !=\ 8)\ \{}
\DoxyCodeLine{06377\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06378\ \ \ \ \ \}}
\DoxyCodeLine{06379\ }
\DoxyCodeLine{06380\ \ \ \ \ \textcolor{comment}{/*\ MD5\ */}}
\DoxyCodeLine{06381\ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ md5,\ \textcolor{keyword}{sizeof}(md5))\ !=\ \textcolor{keyword}{sizeof}(md5))\ \{}
\DoxyCodeLine{06382\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06383\ \ \ \ \ \}}
\DoxyCodeLine{06384\ }
\DoxyCodeLine{06385\ \ \ \ \ blockSizes\ \ \ \ \ =\ drflac\_\_be2host\_32(blockSizes);}
\DoxyCodeLine{06386\ \ \ \ \ frameSizes\ \ \ \ \ =\ drflac\_\_be2host\_64(frameSizes);}
\DoxyCodeLine{06387\ \ \ \ \ importantProps\ =\ drflac\_\_be2host\_64(importantProps);}
\DoxyCodeLine{06388\ }
\DoxyCodeLine{06389\ \ \ \ \ pStreamInfo-\/>minBlockSizeInPCMFrames\ =\ (drflac\_uint16)((blockSizes\ \&\ 0xFFFF0000)\ >>\ 16);}
\DoxyCodeLine{06390\ \ \ \ \ pStreamInfo-\/>maxBlockSizeInPCMFrames\ =\ (drflac\_uint16)\ (blockSizes\ \&\ 0x0000FFFF);}
\DoxyCodeLine{06391\ \ \ \ \ pStreamInfo-\/>minFrameSizeInPCMFrames\ =\ (drflac\_uint32)((frameSizes\ \ \ \ \ \&\ \ (((drflac\_uint64)0x00FFFFFF\ <<\ 16)\ <<\ 24))\ >>\ 40);}
\DoxyCodeLine{06392\ \ \ \ \ pStreamInfo-\/>maxFrameSizeInPCMFrames\ =\ (drflac\_uint32)((frameSizes\ \ \ \ \ \&\ \ (((drflac\_uint64)0x00FFFFFF\ <<\ 16)\ <<\ \ 0))\ >>\ 16);}
\DoxyCodeLine{06393\ \ \ \ \ pStreamInfo-\/>sampleRate\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ (drflac\_uint32)((importantProps\ \&\ \ (((drflac\_uint64)0x000FFFFF\ <<\ 16)\ <<\ 28))\ >>\ 44);}
\DoxyCodeLine{06394\ \ \ \ \ pStreamInfo-\/>channels\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ (drflac\_uint8\ )((importantProps\ \&\ \ (((drflac\_uint64)0x0000000E\ <<\ 16)\ <<\ 24))\ >>\ 41)\ +\ 1;}
\DoxyCodeLine{06395\ \ \ \ \ pStreamInfo-\/>bitsPerSample\ \ \ \ \ \ \ \ \ \ \ =\ (drflac\_uint8\ )((importantProps\ \&\ \ (((drflac\_uint64)0x0000001F\ <<\ 16)\ <<\ 20))\ >>\ 36)\ +\ 1;}
\DoxyCodeLine{06396\ \ \ \ \ pStreamInfo-\/>totalPCMFrameCount\ \ \ \ \ \ =\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((importantProps\ \&\ ((((drflac\_uint64)0x0000000F\ <<\ 16)\ <<\ 16)\ |\ 0xFFFFFFFF)));}
\DoxyCodeLine{06397\ \ \ \ \ DRFLAC\_COPY\_MEMORY(pStreamInfo-\/>md5,\ md5,\ \textcolor{keyword}{sizeof}(md5));}
\DoxyCodeLine{06398\ }
\DoxyCodeLine{06399\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{06400\ \}}
\DoxyCodeLine{06401\ }
\DoxyCodeLine{06402\ }
\DoxyCodeLine{06403\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}*\ drflac\_\_malloc\_default(\textcolor{keywordtype}{size\_t}\ sz,\ \textcolor{keywordtype}{void}*\ pUserData)}
\DoxyCodeLine{06404\ \{}
\DoxyCodeLine{06405\ \ \ \ \ (void)pUserData;}
\DoxyCodeLine{06406\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_MALLOC(sz);}
\DoxyCodeLine{06407\ \}}
\DoxyCodeLine{06408\ }
\DoxyCodeLine{06409\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}*\ drflac\_\_realloc\_default(\textcolor{keywordtype}{void}*\ p,\ \textcolor{keywordtype}{size\_t}\ sz,\ \textcolor{keywordtype}{void}*\ pUserData)}
\DoxyCodeLine{06410\ \{}
\DoxyCodeLine{06411\ \ \ \ \ (void)pUserData;}
\DoxyCodeLine{06412\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_REALLOC(p,\ sz);}
\DoxyCodeLine{06413\ \}}
\DoxyCodeLine{06414\ }
\DoxyCodeLine{06415\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ drflac\_\_free\_default(\textcolor{keywordtype}{void}*\ p,\ \textcolor{keywordtype}{void}*\ pUserData)}
\DoxyCodeLine{06416\ \{}
\DoxyCodeLine{06417\ \ \ \ \ (void)pUserData;}
\DoxyCodeLine{06418\ \ \ \ \ DRFLAC\_FREE(p);}
\DoxyCodeLine{06419\ \}}
\DoxyCodeLine{06420\ }
\DoxyCodeLine{06421\ }
\DoxyCodeLine{06422\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}*\ drflac\_\_malloc\_from\_callbacks(\textcolor{keywordtype}{size\_t}\ sz,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{06423\ \{}
\DoxyCodeLine{06424\ \ \ \ \ \textcolor{keywordflow}{if}\ (pAllocationCallbacks\ ==\ NULL)\ \{}
\DoxyCodeLine{06425\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{06426\ \ \ \ \ \}}
\DoxyCodeLine{06427\ }
\DoxyCodeLine{06428\ \ \ \ \ \textcolor{keywordflow}{if}\ (pAllocationCallbacks-\/>onMalloc\ !=\ NULL)\ \{}
\DoxyCodeLine{06429\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pAllocationCallbacks-\/>onMalloc(sz,\ pAllocationCallbacks-\/>pUserData);}
\DoxyCodeLine{06430\ \ \ \ \ \}}
\DoxyCodeLine{06431\ }
\DoxyCodeLine{06432\ \ \ \ \ \textcolor{comment}{/*\ Try\ using\ realloc().\ */}}
\DoxyCodeLine{06433\ \ \ \ \ \textcolor{keywordflow}{if}\ (pAllocationCallbacks-\/>onRealloc\ !=\ NULL)\ \{}
\DoxyCodeLine{06434\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pAllocationCallbacks-\/>onRealloc(NULL,\ sz,\ pAllocationCallbacks-\/>pUserData);}
\DoxyCodeLine{06435\ \ \ \ \ \}}
\DoxyCodeLine{06436\ }
\DoxyCodeLine{06437\ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{06438\ \}}
\DoxyCodeLine{06439\ }
\DoxyCodeLine{06440\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}*\ drflac\_\_realloc\_from\_callbacks(\textcolor{keywordtype}{void}*\ p,\ \textcolor{keywordtype}{size\_t}\ szNew,\ \textcolor{keywordtype}{size\_t}\ szOld,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{06441\ \{}
\DoxyCodeLine{06442\ \ \ \ \ \textcolor{keywordflow}{if}\ (pAllocationCallbacks\ ==\ NULL)\ \{}
\DoxyCodeLine{06443\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{06444\ \ \ \ \ \}}
\DoxyCodeLine{06445\ }
\DoxyCodeLine{06446\ \ \ \ \ \textcolor{keywordflow}{if}\ (pAllocationCallbacks-\/>onRealloc\ !=\ NULL)\ \{}
\DoxyCodeLine{06447\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pAllocationCallbacks-\/>onRealloc(p,\ szNew,\ pAllocationCallbacks-\/>pUserData);}
\DoxyCodeLine{06448\ \ \ \ \ \}}
\DoxyCodeLine{06449\ }
\DoxyCodeLine{06450\ \ \ \ \ \textcolor{comment}{/*\ Try\ emulating\ realloc()\ in\ terms\ of\ malloc()/free().\ */}}
\DoxyCodeLine{06451\ \ \ \ \ \textcolor{keywordflow}{if}\ (pAllocationCallbacks-\/>onMalloc\ !=\ NULL\ \&\&\ pAllocationCallbacks-\/>onFree\ !=\ NULL)\ \{}
\DoxyCodeLine{06452\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ p2;}
\DoxyCodeLine{06453\ }
\DoxyCodeLine{06454\ \ \ \ \ \ \ \ \ p2\ =\ pAllocationCallbacks-\/>onMalloc(szNew,\ pAllocationCallbacks-\/>pUserData);}
\DoxyCodeLine{06455\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (p2\ ==\ NULL)\ \{}
\DoxyCodeLine{06456\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{06457\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06458\ }
\DoxyCodeLine{06459\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (p\ !=\ NULL)\ \{}
\DoxyCodeLine{06460\ \ \ \ \ \ \ \ \ \ \ \ \ DRFLAC\_COPY\_MEMORY(p2,\ p,\ szOld);}
\DoxyCodeLine{06461\ \ \ \ \ \ \ \ \ \ \ \ \ pAllocationCallbacks-\/>onFree(p,\ pAllocationCallbacks-\/>pUserData);}
\DoxyCodeLine{06462\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06463\ }
\DoxyCodeLine{06464\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ p2;}
\DoxyCodeLine{06465\ \ \ \ \ \}}
\DoxyCodeLine{06466\ }
\DoxyCodeLine{06467\ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{06468\ \}}
\DoxyCodeLine{06469\ }
\DoxyCodeLine{06470\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ drflac\_\_free\_from\_callbacks(\textcolor{keywordtype}{void}*\ p,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{06471\ \{}
\DoxyCodeLine{06472\ \ \ \ \ \textcolor{keywordflow}{if}\ (p\ ==\ NULL\ ||\ pAllocationCallbacks\ ==\ NULL)\ \{}
\DoxyCodeLine{06473\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{06474\ \ \ \ \ \}}
\DoxyCodeLine{06475\ }
\DoxyCodeLine{06476\ \ \ \ \ \textcolor{keywordflow}{if}\ (pAllocationCallbacks-\/>onFree\ !=\ NULL)\ \{}
\DoxyCodeLine{06477\ \ \ \ \ \ \ \ \ pAllocationCallbacks-\/>onFree(p,\ pAllocationCallbacks-\/>pUserData);}
\DoxyCodeLine{06478\ \ \ \ \ \}}
\DoxyCodeLine{06479\ \}}
\DoxyCodeLine{06480\ }
\DoxyCodeLine{06481\ }
\DoxyCodeLine{06482\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_read\_and\_decode\_metadata(drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ drflac\_meta\_proc\ onMeta,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{void}*\ pUserDataMD,\ drflac\_uint64*\ pFirstFramePos,\ drflac\_uint64*\ pSeektablePos,\ drflac\_uint32*\ pSeekpointCount,\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{06483\ \{}
\DoxyCodeLine{06484\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{06485\ \textcolor{comment}{\ \ \ \ We\ want\ to\ keep\ track\ of\ the\ byte\ position\ in\ the\ stream\ of\ the\ seektable.\ At\ the\ time\ of\ calling\ this\ function\ we\ know\ that}}
\DoxyCodeLine{06486\ \textcolor{comment}{\ \ \ \ we'll\ be\ sitting\ on\ byte\ 42.}}
\DoxyCodeLine{06487\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{06488\ \ \ \ \ drflac\_uint64\ runningFilePos\ =\ 42;}
\DoxyCodeLine{06489\ \ \ \ \ drflac\_uint64\ seektablePos\ \ \ =\ 0;}
\DoxyCodeLine{06490\ \ \ \ \ drflac\_uint32\ seektableSize\ \ =\ 0;}
\DoxyCodeLine{06491\ }
\DoxyCodeLine{06492\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{06493\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdrflac__metadata}{drflac\_metadata}}\ metadata;}
\DoxyCodeLine{06494\ \ \ \ \ \ \ \ \ drflac\_uint8\ isLastBlock\ =\ 0;}
\DoxyCodeLine{06495\ \ \ \ \ \ \ \ \ drflac\_uint8\ blockType\ =\ 0;}
\DoxyCodeLine{06496\ \ \ \ \ \ \ \ \ drflac\_uint32\ blockSize;}
\DoxyCodeLine{06497\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_read\_and\_decode\_block\_header(onRead,\ pUserData,\ \&isLastBlock,\ \&blockType,\ \&blockSize)\ ==\ DRFLAC\_FALSE)\ \{}
\DoxyCodeLine{06498\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06499\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06500\ \ \ \ \ \ \ \ \ runningFilePos\ +=\ 4;}
\DoxyCodeLine{06501\ }
\DoxyCodeLine{06502\ \ \ \ \ \ \ \ \ metadata.type\ =\ blockType;}
\DoxyCodeLine{06503\ \ \ \ \ \ \ \ \ metadata.pRawData\ =\ NULL;}
\DoxyCodeLine{06504\ \ \ \ \ \ \ \ \ metadata.rawDataSize\ =\ 0;}
\DoxyCodeLine{06505\ }
\DoxyCodeLine{06506\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (blockType)}
\DoxyCodeLine{06507\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{06508\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_METADATA\_BLOCK\_TYPE\_APPLICATION:}
\DoxyCodeLine{06509\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{06510\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (blockSize\ <\ 4)\ \{}
\DoxyCodeLine{06511\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06513\ }
\DoxyCodeLine{06514\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onMeta)\ \{}
\DoxyCodeLine{06515\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ pRawData\ =\ drflac\_\_malloc\_from\_callbacks(blockSize,\ pAllocationCallbacks);}
\DoxyCodeLine{06516\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pRawData\ ==\ NULL)\ \{}
\DoxyCodeLine{06517\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06518\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06519\ }
\DoxyCodeLine{06520\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ pRawData,\ blockSize)\ !=\ blockSize)\ \{}
\DoxyCodeLine{06521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06523\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06524\ }
\DoxyCodeLine{06525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.pRawData\ =\ pRawData;}
\DoxyCodeLine{06526\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.rawDataSize\ =\ blockSize;}
\DoxyCodeLine{06527\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.application.id\ \ \ \ \ \ \ =\ drflac\_\_be2host\_32(*(drflac\_uint32*)pRawData);}
\DoxyCodeLine{06528\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.application.pData\ \ \ \ =\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*)((drflac\_uint8*)pRawData\ +\ \textcolor{keyword}{sizeof}(drflac\_uint32));}
\DoxyCodeLine{06529\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.application.dataSize\ =\ blockSize\ -\/\ \textcolor{keyword}{sizeof}(drflac\_uint32);}
\DoxyCodeLine{06530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ onMeta(pUserDataMD,\ \&metadata);}
\DoxyCodeLine{06531\ }
\DoxyCodeLine{06532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06533\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06534\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{06535\ }
\DoxyCodeLine{06536\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_METADATA\_BLOCK\_TYPE\_SEEKTABLE:}
\DoxyCodeLine{06537\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{06538\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ seektablePos\ \ =\ runningFilePos;}
\DoxyCodeLine{06539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ seektableSize\ =\ blockSize;}
\DoxyCodeLine{06540\ }
\DoxyCodeLine{06541\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onMeta)\ \{}
\DoxyCodeLine{06542\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ seekpointCount;}
\DoxyCodeLine{06543\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ iSeekpoint;}
\DoxyCodeLine{06544\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ pRawData;}
\DoxyCodeLine{06545\ }
\DoxyCodeLine{06546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ seekpointCount\ =\ blockSize/DRFLAC\_SEEKPOINT\_SIZE\_IN\_BYTES;}
\DoxyCodeLine{06547\ }
\DoxyCodeLine{06548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRawData\ =\ drflac\_\_malloc\_from\_callbacks(seekpointCount\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structdrflac__seekpoint}{drflac\_seekpoint}}),\ pAllocationCallbacks);}
\DoxyCodeLine{06549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pRawData\ ==\ NULL)\ \{}
\DoxyCodeLine{06550\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06551\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06552\ }
\DoxyCodeLine{06553\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ need\ to\ read\ seekpoint\ by\ seekpoint\ and\ do\ some\ processing.\ */}}
\DoxyCodeLine{06554\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (iSeekpoint\ =\ 0;\ iSeekpoint\ <\ seekpointCount;\ ++iSeekpoint)\ \{}
\DoxyCodeLine{06555\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdrflac__seekpoint}{drflac\_seekpoint}}*\ pSeekpoint\ =\ (\mbox{\hyperlink{structdrflac__seekpoint}{drflac\_seekpoint}}*)pRawData\ +\ iSeekpoint;}
\DoxyCodeLine{06556\ }
\DoxyCodeLine{06557\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ pSeekpoint,\ DRFLAC\_SEEKPOINT\_SIZE\_IN\_BYTES)\ !=\ DRFLAC\_SEEKPOINT\_SIZE\_IN\_BYTES)\ \{}
\DoxyCodeLine{06558\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06559\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06560\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06561\ }
\DoxyCodeLine{06562\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Endian\ swap.\ */}}
\DoxyCodeLine{06563\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pSeekpoint-\/>firstPCMFrame\ \ \ =\ drflac\_\_be2host\_64(pSeekpoint-\/>firstPCMFrame);}
\DoxyCodeLine{06564\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pSeekpoint-\/>flacFrameOffset\ =\ drflac\_\_be2host\_64(pSeekpoint-\/>flacFrameOffset);}
\DoxyCodeLine{06565\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pSeekpoint-\/>pcmFrameCount\ \ \ =\ drflac\_\_be2host\_16(pSeekpoint-\/>pcmFrameCount);}
\DoxyCodeLine{06566\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06567\ }
\DoxyCodeLine{06568\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.pRawData\ =\ pRawData;}
\DoxyCodeLine{06569\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.rawDataSize\ =\ blockSize;}
\DoxyCodeLine{06570\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.seektable.seekpointCount\ =\ seekpointCount;}
\DoxyCodeLine{06571\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.seektable.pSeekpoints\ =\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__seekpoint}{drflac\_seekpoint}}*)pRawData;}
\DoxyCodeLine{06572\ }
\DoxyCodeLine{06573\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ onMeta(pUserDataMD,\ \&metadata);}
\DoxyCodeLine{06574\ }
\DoxyCodeLine{06575\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06576\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06577\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{06578\ }
\DoxyCodeLine{06579\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_METADATA\_BLOCK\_TYPE\_VORBIS\_COMMENT:}
\DoxyCodeLine{06580\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{06581\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (blockSize\ <\ 8)\ \{}
\DoxyCodeLine{06582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06583\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06584\ }
\DoxyCodeLine{06585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onMeta)\ \{}
\DoxyCodeLine{06586\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ pRawData;}
\DoxyCodeLine{06587\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pRunningData;}
\DoxyCodeLine{06588\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pRunningDataEnd;}
\DoxyCodeLine{06589\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ i;}
\DoxyCodeLine{06590\ }
\DoxyCodeLine{06591\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRawData\ =\ drflac\_\_malloc\_from\_callbacks(blockSize,\ pAllocationCallbacks);}
\DoxyCodeLine{06592\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pRawData\ ==\ NULL)\ \{}
\DoxyCodeLine{06593\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06594\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06595\ }
\DoxyCodeLine{06596\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ pRawData,\ blockSize)\ !=\ blockSize)\ \{}
\DoxyCodeLine{06597\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06598\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06599\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06600\ }
\DoxyCodeLine{06601\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.pRawData\ =\ pRawData;}
\DoxyCodeLine{06602\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.rawDataSize\ =\ blockSize;}
\DoxyCodeLine{06603\ }
\DoxyCodeLine{06604\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ \ \ \ =\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)pRawData;}
\DoxyCodeLine{06605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningDataEnd\ =\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)pRawData\ +\ blockSize;}
\DoxyCodeLine{06606\ }
\DoxyCodeLine{06607\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.vorbis\_comment.vendorLength\ =\ drflac\_\_le2host\_32\_ptr\_unaligned(pRunningData);\ pRunningData\ +=\ 4;}
\DoxyCodeLine{06608\ }
\DoxyCodeLine{06609\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Need\ space\ for\ the\ rest\ of\ the\ block\ */}}
\DoxyCodeLine{06610\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((pRunningDataEnd\ -\/\ pRunningData)\ -\/\ 4\ <\ (drflac\_int64)metadata.data.vorbis\_comment.vendorLength)\ \{\ \textcolor{comment}{/*\ <-\/-\/\ Note\ the\ order\ of\ operations\ to\ avoid\ overflow\ to\ a\ valid\ value\ */}}
\DoxyCodeLine{06611\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06612\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06613\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06614\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.vorbis\_comment.vendor\ \ \ \ \ \ \ =\ pRunningData;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ +=\ metadata.data.vorbis\_comment.vendorLength;}
\DoxyCodeLine{06615\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.vorbis\_comment.commentCount\ =\ drflac\_\_le2host\_32\_ptr\_unaligned(pRunningData);\ pRunningData\ +=\ 4;}
\DoxyCodeLine{06616\ }
\DoxyCodeLine{06617\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Need\ space\ for\ 'commentCount'\ comments\ after\ the\ block,\ which\ at\ minimum\ is\ a\ drflac\_uint32\ per\ comment\ */}}
\DoxyCodeLine{06618\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((pRunningDataEnd\ -\/\ pRunningData)\ /\ \textcolor{keyword}{sizeof}(drflac\_uint32)\ <\ metadata.data.vorbis\_comment.commentCount)\ \{\ \textcolor{comment}{/*\ <-\/-\/\ Note\ the\ order\ of\ operations\ to\ avoid\ overflow\ to\ a\ valid\ value\ */}}
\DoxyCodeLine{06619\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06620\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06621\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06622\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.vorbis\_comment.pComments\ \ \ \ =\ pRunningData;}
\DoxyCodeLine{06623\ }
\DoxyCodeLine{06624\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Check\ that\ the\ comments\ section\ is\ valid\ before\ passing\ it\ to\ the\ callback\ */}}
\DoxyCodeLine{06625\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ metadata.data.vorbis\_comment.commentCount;\ ++i)\ \{}
\DoxyCodeLine{06626\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ commentLength;}
\DoxyCodeLine{06627\ }
\DoxyCodeLine{06628\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pRunningDataEnd\ -\/\ pRunningData\ <\ 4)\ \{}
\DoxyCodeLine{06629\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06630\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06631\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06632\ }
\DoxyCodeLine{06633\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ commentLength\ =\ drflac\_\_le2host\_32\_ptr\_unaligned(pRunningData);\ pRunningData\ +=\ 4;}
\DoxyCodeLine{06634\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pRunningDataEnd\ -\/\ pRunningData\ <\ (drflac\_int64)commentLength)\ \{\ \textcolor{comment}{/*\ <-\/-\/\ Note\ the\ order\ of\ operations\ to\ avoid\ overflow\ to\ a\ valid\ value\ */}}
\DoxyCodeLine{06635\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06636\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06637\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06638\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ +=\ commentLength;}
\DoxyCodeLine{06639\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06640\ }
\DoxyCodeLine{06641\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ onMeta(pUserDataMD,\ \&metadata);}
\DoxyCodeLine{06642\ }
\DoxyCodeLine{06643\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06644\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06645\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{06646\ }
\DoxyCodeLine{06647\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_METADATA\_BLOCK\_TYPE\_CUESHEET:}
\DoxyCodeLine{06648\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{06649\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (blockSize\ <\ 396)\ \{}
\DoxyCodeLine{06650\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06651\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06652\ }
\DoxyCodeLine{06653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onMeta)\ \{}
\DoxyCodeLine{06654\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ pRawData;}
\DoxyCodeLine{06655\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pRunningData;}
\DoxyCodeLine{06656\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pRunningDataEnd;}
\DoxyCodeLine{06657\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ bufferSize;}
\DoxyCodeLine{06658\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ iTrack;}
\DoxyCodeLine{06659\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ iIndex;}
\DoxyCodeLine{06660\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ pTrackData;}
\DoxyCodeLine{06661\ }
\DoxyCodeLine{06662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{06663\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ This\ needs\ to\ be\ loaded\ in\ two\ passes.\ The\ first\ pass\ is\ used\ to\ calculate\ the\ size\ of\ the\ memory\ allocation}}
\DoxyCodeLine{06664\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ we\ need\ for\ storing\ the\ necessary\ data.\ The\ second\ pass\ will\ fill\ that\ buffer\ with\ usable\ data.}}
\DoxyCodeLine{06665\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{06666\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRawData\ =\ drflac\_\_malloc\_from\_callbacks(blockSize,\ pAllocationCallbacks);}
\DoxyCodeLine{06667\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pRawData\ ==\ NULL)\ \{}
\DoxyCodeLine{06668\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06669\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06670\ }
\DoxyCodeLine{06671\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ pRawData,\ blockSize)\ !=\ blockSize)\ \{}
\DoxyCodeLine{06672\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06673\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06674\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06675\ }
\DoxyCodeLine{06676\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.pRawData\ =\ pRawData;}
\DoxyCodeLine{06677\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.rawDataSize\ =\ blockSize;}
\DoxyCodeLine{06678\ }
\DoxyCodeLine{06679\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ \ \ \ =\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)pRawData;}
\DoxyCodeLine{06680\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningDataEnd\ =\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)pRawData\ +\ blockSize;}
\DoxyCodeLine{06681\ }
\DoxyCodeLine{06682\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DRFLAC\_COPY\_MEMORY(metadata.data.cuesheet.catalog,\ pRunningData,\ 128);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ +=\ 128;}
\DoxyCodeLine{06683\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.cuesheet.leadInSampleCount\ =\ drflac\_\_be2host\_64(*(\textcolor{keyword}{const}\ drflac\_uint64*)pRunningData);\ pRunningData\ +=\ 8;}
\DoxyCodeLine{06684\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.cuesheet.isCD\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ (pRunningData[0]\ \&\ 0x80)\ !=\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ +=\ 259;}
\DoxyCodeLine{06685\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.cuesheet.trackCount\ \ \ \ \ \ \ \ =\ pRunningData[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ +=\ 1;}
\DoxyCodeLine{06686\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.cuesheet.pTrackData\ \ \ \ \ \ \ \ =\ NULL;\ \ \ \ \textcolor{comment}{/*\ Will\ be\ filled\ later.\ */}}
\DoxyCodeLine{06687\ }
\DoxyCodeLine{06688\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Pass\ 1:\ Calculate\ the\ size\ of\ the\ buffer\ for\ the\ track\ data.\ */}}
\DoxyCodeLine{06689\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{06690\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pRunningDataSaved\ =\ pRunningData;\ \ \ \textcolor{comment}{/*\ Will\ be\ restored\ at\ the\ end\ in\ preparation\ for\ the\ second\ pass.\ */}}
\DoxyCodeLine{06691\ }
\DoxyCodeLine{06692\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bufferSize\ =\ metadata.data.cuesheet.trackCount\ *\ DRFLAC\_CUESHEET\_TRACK\_SIZE\_IN\_BYTES;}
\DoxyCodeLine{06693\ }
\DoxyCodeLine{06694\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (iTrack\ =\ 0;\ iTrack\ <\ metadata.data.cuesheet.trackCount;\ ++iTrack)\ \{}
\DoxyCodeLine{06695\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ indexCount;}
\DoxyCodeLine{06696\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ indexPointSize;}
\DoxyCodeLine{06697\ }
\DoxyCodeLine{06698\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pRunningDataEnd\ -\/\ pRunningData\ <\ DRFLAC\_CUESHEET\_TRACK\_SIZE\_IN\_BYTES)\ \{}
\DoxyCodeLine{06699\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06700\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06701\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06702\ }
\DoxyCodeLine{06703\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Skip\ to\ the\ index\ point\ count\ */}}
\DoxyCodeLine{06704\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ +=\ 35;}
\DoxyCodeLine{06705\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{06706\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ indexCount\ =\ pRunningData[0];}
\DoxyCodeLine{06707\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ +=\ 1;}
\DoxyCodeLine{06708\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{06709\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bufferSize\ +=\ indexCount\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structdrflac__cuesheet__track__index}{drflac\_cuesheet\_track\_index}});}
\DoxyCodeLine{06710\ }
\DoxyCodeLine{06711\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Quick\ validation\ check.\ */}}
\DoxyCodeLine{06712\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ indexPointSize\ =\ indexCount\ *\ DRFLAC\_CUESHEET\_TRACK\_INDEX\_SIZE\_IN\_BYTES;}
\DoxyCodeLine{06713\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pRunningDataEnd\ -\/\ pRunningData\ <\ (drflac\_int64)indexPointSize)\ \{}
\DoxyCodeLine{06714\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06715\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06716\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06717\ }
\DoxyCodeLine{06718\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ +=\ indexPointSize;}
\DoxyCodeLine{06719\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06720\ }
\DoxyCodeLine{06721\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ =\ pRunningDataSaved;}
\DoxyCodeLine{06722\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06723\ }
\DoxyCodeLine{06724\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Pass\ 2:\ Allocate\ a\ buffer\ and\ fill\ the\ data.\ Validation\ was\ done\ in\ the\ step\ above\ so\ can\ be\ skipped.\ */}}
\DoxyCodeLine{06725\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{06726\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}*\ pRunningTrackData;}
\DoxyCodeLine{06727\ }
\DoxyCodeLine{06728\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pTrackData\ =\ drflac\_\_malloc\_from\_callbacks(bufferSize,\ pAllocationCallbacks);}
\DoxyCodeLine{06729\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pTrackData\ ==\ NULL)\ \{}
\DoxyCodeLine{06730\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06731\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06732\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06733\ }
\DoxyCodeLine{06734\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningTrackData\ =\ (\textcolor{keywordtype}{char}*)pTrackData;}
\DoxyCodeLine{06735\ }
\DoxyCodeLine{06736\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (iTrack\ =\ 0;\ iTrack\ <\ metadata.data.cuesheet.trackCount;\ ++iTrack)\ \{}
\DoxyCodeLine{06737\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ indexCount;}
\DoxyCodeLine{06738\ }
\DoxyCodeLine{06739\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DRFLAC\_COPY\_MEMORY(pRunningTrackData,\ pRunningData,\ DRFLAC\_CUESHEET\_TRACK\_SIZE\_IN\_BYTES);}
\DoxyCodeLine{06740\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ \ \ \ \ \ +=\ DRFLAC\_CUESHEET\_TRACK\_SIZE\_IN\_BYTES-\/1;\ \textcolor{comment}{/*\ Skip\ forward,\ but\ not\ beyond\ the\ last\ byte\ in\ the\ CUESHEET\_TRACK\ block\ which\ is\ the\ index\ count.\ */}}
\DoxyCodeLine{06741\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningTrackData\ +=\ DRFLAC\_CUESHEET\_TRACK\_SIZE\_IN\_BYTES-\/1;}
\DoxyCodeLine{06742\ }
\DoxyCodeLine{06743\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Grab\ the\ index\ count\ for\ the\ next\ part.\ */}}
\DoxyCodeLine{06744\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ indexCount\ =\ pRunningData[0];}
\DoxyCodeLine{06745\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ \ \ \ \ \ +=\ 1;}
\DoxyCodeLine{06746\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningTrackData\ +=\ 1;}
\DoxyCodeLine{06747\ }
\DoxyCodeLine{06748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Extract\ each\ track\ index.\ */}}
\DoxyCodeLine{06749\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (iIndex\ =\ 0;\ iIndex\ <\ indexCount;\ ++iIndex)\ \{}
\DoxyCodeLine{06750\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdrflac__cuesheet__track__index}{drflac\_cuesheet\_track\_index}}*\ pTrackIndex\ =\ (\mbox{\hyperlink{structdrflac__cuesheet__track__index}{drflac\_cuesheet\_track\_index}}*)pRunningTrackData;}
\DoxyCodeLine{06751\ }
\DoxyCodeLine{06752\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DRFLAC\_COPY\_MEMORY(pRunningTrackData,\ pRunningData,\ DRFLAC\_CUESHEET\_TRACK\_INDEX\_SIZE\_IN\_BYTES);}
\DoxyCodeLine{06753\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ \ \ \ \ \ +=\ DRFLAC\_CUESHEET\_TRACK\_INDEX\_SIZE\_IN\_BYTES;}
\DoxyCodeLine{06754\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningTrackData\ +=\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structdrflac__cuesheet__track__index}{drflac\_cuesheet\_track\_index}});}
\DoxyCodeLine{06755\ }
\DoxyCodeLine{06756\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pTrackIndex-\/>offset\ =\ drflac\_\_be2host\_64(pTrackIndex-\/>offset);}
\DoxyCodeLine{06757\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06758\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06759\ }
\DoxyCodeLine{06760\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.cuesheet.pTrackData\ =\ pTrackData;}
\DoxyCodeLine{06761\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06762\ }
\DoxyCodeLine{06763\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ original\ data\ is\ no\ longer\ needed.\ */}}
\DoxyCodeLine{06764\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06765\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRawData\ =\ NULL;}
\DoxyCodeLine{06766\ }
\DoxyCodeLine{06767\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ onMeta(pUserDataMD,\ \&metadata);}
\DoxyCodeLine{06768\ }
\DoxyCodeLine{06769\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pTrackData,\ pAllocationCallbacks);}
\DoxyCodeLine{06770\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pTrackData\ =\ NULL;}
\DoxyCodeLine{06771\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06772\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{06773\ }
\DoxyCodeLine{06774\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_METADATA\_BLOCK\_TYPE\_PICTURE:}
\DoxyCodeLine{06775\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{06776\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (blockSize\ <\ 32)\ \{}
\DoxyCodeLine{06777\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06778\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06779\ }
\DoxyCodeLine{06780\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onMeta)\ \{}
\DoxyCodeLine{06781\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ pRawData;}
\DoxyCodeLine{06782\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pRunningData;}
\DoxyCodeLine{06783\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pRunningDataEnd;}
\DoxyCodeLine{06784\ }
\DoxyCodeLine{06785\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRawData\ =\ drflac\_\_malloc\_from\_callbacks(blockSize,\ pAllocationCallbacks);}
\DoxyCodeLine{06786\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pRawData\ ==\ NULL)\ \{}
\DoxyCodeLine{06787\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06788\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06789\ }
\DoxyCodeLine{06790\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ pRawData,\ blockSize)\ !=\ blockSize)\ \{}
\DoxyCodeLine{06791\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06792\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06793\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06794\ }
\DoxyCodeLine{06795\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.pRawData\ =\ pRawData;}
\DoxyCodeLine{06796\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.rawDataSize\ =\ blockSize;}
\DoxyCodeLine{06797\ }
\DoxyCodeLine{06798\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ \ \ \ =\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)pRawData;}
\DoxyCodeLine{06799\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningDataEnd\ =\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)pRawData\ +\ blockSize;}
\DoxyCodeLine{06800\ }
\DoxyCodeLine{06801\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.picture.type\ \ \ \ \ \ \ =\ drflac\_\_be2host\_32\_ptr\_unaligned(pRunningData);\ pRunningData\ +=\ 4;}
\DoxyCodeLine{06802\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.picture.mimeLength\ =\ drflac\_\_be2host\_32\_ptr\_unaligned(pRunningData);\ pRunningData\ +=\ 4;}
\DoxyCodeLine{06803\ }
\DoxyCodeLine{06804\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Need\ space\ for\ the\ rest\ of\ the\ block\ */}}
\DoxyCodeLine{06805\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((pRunningDataEnd\ -\/\ pRunningData)\ -\/\ 24\ <\ (drflac\_int64)metadata.data.picture.mimeLength)\ \{\ \textcolor{comment}{/*\ <-\/-\/\ Note\ the\ order\ of\ operations\ to\ avoid\ overflow\ to\ a\ valid\ value\ */}}
\DoxyCodeLine{06806\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06807\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06808\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06809\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.picture.mime\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pRunningData;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ +=\ metadata.data.picture.mimeLength;}
\DoxyCodeLine{06810\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.picture.descriptionLength\ =\ drflac\_\_be2host\_32\_ptr\_unaligned(pRunningData);\ pRunningData\ +=\ 4;}
\DoxyCodeLine{06811\ }
\DoxyCodeLine{06812\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Need\ space\ for\ the\ rest\ of\ the\ block\ */}}
\DoxyCodeLine{06813\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((pRunningDataEnd\ -\/\ pRunningData)\ -\/\ 20\ <\ (drflac\_int64)metadata.data.picture.descriptionLength)\ \{\ \textcolor{comment}{/*\ <-\/-\/\ Note\ the\ order\ of\ operations\ to\ avoid\ overflow\ to\ a\ valid\ value\ */}}
\DoxyCodeLine{06814\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06815\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06816\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06817\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.picture.description\ \ \ \ \ =\ pRunningData;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ +=\ metadata.data.picture.descriptionLength;}
\DoxyCodeLine{06818\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.picture.width\ \ \ \ \ \ \ \ \ \ \ =\ drflac\_\_be2host\_32\_ptr\_unaligned(pRunningData);\ pRunningData\ +=\ 4;}
\DoxyCodeLine{06819\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.picture.height\ \ \ \ \ \ \ \ \ \ =\ drflac\_\_be2host\_32\_ptr\_unaligned(pRunningData);\ pRunningData\ +=\ 4;}
\DoxyCodeLine{06820\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.picture.colorDepth\ \ \ \ \ \ =\ drflac\_\_be2host\_32\_ptr\_unaligned(pRunningData);\ pRunningData\ +=\ 4;}
\DoxyCodeLine{06821\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.picture.indexColorCount\ =\ drflac\_\_be2host\_32\_ptr\_unaligned(pRunningData);\ pRunningData\ +=\ 4;}
\DoxyCodeLine{06822\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.picture.pictureDataSize\ =\ drflac\_\_be2host\_32\_ptr\_unaligned(pRunningData);\ pRunningData\ +=\ 4;}
\DoxyCodeLine{06823\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.picture.pPictureData\ \ \ \ =\ (\textcolor{keyword}{const}\ drflac\_uint8*)pRunningData;}
\DoxyCodeLine{06824\ }
\DoxyCodeLine{06825\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Need\ space\ for\ the\ picture\ after\ the\ block\ */}}
\DoxyCodeLine{06826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pRunningDataEnd\ -\/\ pRunningData\ <\ (drflac\_int64)metadata.data.picture.pictureDataSize)\ \{\ \textcolor{comment}{/*\ <-\/-\/\ Note\ the\ order\ of\ operations\ to\ avoid\ overflow\ to\ a\ valid\ value\ */}}
\DoxyCodeLine{06827\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06828\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06829\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06830\ }
\DoxyCodeLine{06831\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ onMeta(pUserDataMD,\ \&metadata);}
\DoxyCodeLine{06832\ }
\DoxyCodeLine{06833\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06834\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06835\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{06836\ }
\DoxyCodeLine{06837\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_METADATA\_BLOCK\_TYPE\_PADDING:}
\DoxyCodeLine{06838\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{06839\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onMeta)\ \{}
\DoxyCodeLine{06840\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.padding.unused\ =\ 0;}
\DoxyCodeLine{06841\ }
\DoxyCodeLine{06842\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Padding\ doesn't\ have\ anything\ meaningful\ in\ it,\ so\ just\ skip\ over\ it,\ but\ make\ sure\ the\ caller\ is\ aware\ of\ it\ by\ firing\ the\ callback.\ */}}
\DoxyCodeLine{06843\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!onSeek(pUserData,\ blockSize,\ drflac\_seek\_origin\_current))\ \{}
\DoxyCodeLine{06844\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ isLastBlock\ =\ DRFLAC\_TRUE;\ \ \textcolor{comment}{/*\ An\ error\ occurred\ while\ seeking.\ Attempt\ to\ recover\ by\ treating\ this\ as\ the\ last\ block\ which\ will\ in\ turn\ terminate\ the\ loop.\ */}}
\DoxyCodeLine{06845\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06846\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ onMeta(pUserDataMD,\ \&metadata);}
\DoxyCodeLine{06847\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06848\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06849\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{06850\ }
\DoxyCodeLine{06851\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_METADATA\_BLOCK\_TYPE\_INVALID:}
\DoxyCodeLine{06852\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{06853\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Invalid\ chunk.\ Just\ skip\ over\ this\ one.\ */}}
\DoxyCodeLine{06854\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onMeta)\ \{}
\DoxyCodeLine{06855\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!onSeek(pUserData,\ blockSize,\ drflac\_seek\_origin\_current))\ \{}
\DoxyCodeLine{06856\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ isLastBlock\ =\ DRFLAC\_TRUE;\ \ \textcolor{comment}{/*\ An\ error\ occurred\ while\ seeking.\ Attempt\ to\ recover\ by\ treating\ this\ as\ the\ last\ block\ which\ will\ in\ turn\ terminate\ the\ loop.\ */}}
\DoxyCodeLine{06857\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06858\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06859\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{06860\ }
\DoxyCodeLine{06861\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{06862\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{06863\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{06864\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ It's\ an\ unknown\ chunk,\ but\ not\ necessarily\ invalid.\ There's\ a\ chance\ more\ metadata\ blocks\ might\ be\ defined\ later\ on,\ so\ we}}
\DoxyCodeLine{06865\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ can\ at\ the\ very\ least\ report\ the\ chunk\ to\ the\ application\ and\ let\ it\ look\ at\ the\ raw\ data.}}
\DoxyCodeLine{06866\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{06867\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onMeta)\ \{}
\DoxyCodeLine{06868\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ pRawData\ =\ drflac\_\_malloc\_from\_callbacks(blockSize,\ pAllocationCallbacks);}
\DoxyCodeLine{06869\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pRawData\ ==\ NULL)\ \{}
\DoxyCodeLine{06870\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06871\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06872\ }
\DoxyCodeLine{06873\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ pRawData,\ blockSize)\ !=\ blockSize)\ \{}
\DoxyCodeLine{06874\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06875\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06876\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06877\ }
\DoxyCodeLine{06878\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.pRawData\ =\ pRawData;}
\DoxyCodeLine{06879\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.rawDataSize\ =\ blockSize;}
\DoxyCodeLine{06880\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ onMeta(pUserDataMD,\ \&metadata);}
\DoxyCodeLine{06881\ }
\DoxyCodeLine{06882\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pRawData,\ pAllocationCallbacks);}
\DoxyCodeLine{06883\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06884\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{06885\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06886\ }
\DoxyCodeLine{06887\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ we're\ not\ handling\ metadata,\ just\ skip\ over\ the\ block.\ If\ we\ are,\ it\ will\ have\ been\ handled\ earlier\ in\ the\ switch\ statement\ above.\ */}}
\DoxyCodeLine{06888\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onMeta\ ==\ NULL\ \&\&\ blockSize\ >\ 0)\ \{}
\DoxyCodeLine{06889\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!onSeek(pUserData,\ blockSize,\ drflac\_seek\_origin\_current))\ \{}
\DoxyCodeLine{06890\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ isLastBlock\ =\ DRFLAC\_TRUE;}
\DoxyCodeLine{06891\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06892\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06893\ }
\DoxyCodeLine{06894\ \ \ \ \ \ \ \ \ runningFilePos\ +=\ blockSize;}
\DoxyCodeLine{06895\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isLastBlock)\ \{}
\DoxyCodeLine{06896\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{06897\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06898\ \ \ \ \ \}}
\DoxyCodeLine{06899\ }
\DoxyCodeLine{06900\ \ \ \ \ *pSeektablePos\ \ \ =\ seektablePos;}
\DoxyCodeLine{06901\ \ \ \ \ *pSeekpointCount\ =\ seektableSize\ /\ DRFLAC\_SEEKPOINT\_SIZE\_IN\_BYTES;}
\DoxyCodeLine{06902\ \ \ \ \ *pFirstFramePos\ \ =\ runningFilePos;}
\DoxyCodeLine{06903\ }
\DoxyCodeLine{06904\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{06905\ \}}
\DoxyCodeLine{06906\ }
\DoxyCodeLine{06907\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_init\_private\_\_native(drflac\_init\_info*\ pInit,\ drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ drflac\_meta\_proc\ onMeta,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{void}*\ pUserDataMD,\ drflac\_bool32\ relaxed)}
\DoxyCodeLine{06908\ \{}
\DoxyCodeLine{06909\ \ \ \ \ \textcolor{comment}{/*\ Pre\ Condition:\ The\ bit\ stream\ should\ be\ sitting\ just\ past\ the\ 4-\/byte\ id\ header.\ */}}
\DoxyCodeLine{06910\ }
\DoxyCodeLine{06911\ \ \ \ \ drflac\_uint8\ isLastBlock;}
\DoxyCodeLine{06912\ \ \ \ \ drflac\_uint8\ blockType;}
\DoxyCodeLine{06913\ \ \ \ \ drflac\_uint32\ blockSize;}
\DoxyCodeLine{06914\ }
\DoxyCodeLine{06915\ \ \ \ \ (void)onSeek;}
\DoxyCodeLine{06916\ }
\DoxyCodeLine{06917\ \ \ \ \ pInit-\/>container\ =\ drflac\_container\_native;}
\DoxyCodeLine{06918\ }
\DoxyCodeLine{06919\ \ \ \ \ \textcolor{comment}{/*\ The\ first\ metadata\ block\ should\ be\ the\ STREAMINFO\ block.\ */}}
\DoxyCodeLine{06920\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_and\_decode\_block\_header(onRead,\ pUserData,\ \&isLastBlock,\ \&blockType,\ \&blockSize))\ \{}
\DoxyCodeLine{06921\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06922\ \ \ \ \ \}}
\DoxyCodeLine{06923\ }
\DoxyCodeLine{06924\ \ \ \ \ \textcolor{keywordflow}{if}\ (blockType\ !=\ DRFLAC\_METADATA\_BLOCK\_TYPE\_STREAMINFO\ ||\ blockSize\ !=\ 34)\ \{}
\DoxyCodeLine{06925\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!relaxed)\ \{}
\DoxyCodeLine{06926\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We're\ opening\ in\ strict\ mode\ and\ the\ first\ block\ is\ not\ the\ STREAMINFO\ block.\ Error.\ */}}
\DoxyCodeLine{06927\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06928\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06929\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{06930\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ Relaxed\ mode.\ To\ open\ from\ here\ we\ need\ to\ just\ find\ the\ first\ frame\ and\ set\ the\ sample\ rate,\ etc.\ to\ whatever\ is\ defined}}
\DoxyCodeLine{06931\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ for\ that\ frame.}}
\DoxyCodeLine{06932\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{06933\ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>hasStreamInfoBlock\ =\ DRFLAC\_FALSE;}
\DoxyCodeLine{06934\ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>hasMetadataBlocks\ \ =\ DRFLAC\_FALSE;}
\DoxyCodeLine{06935\ }
\DoxyCodeLine{06936\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_next\_flac\_frame\_header(\&pInit-\/>bs,\ 0,\ \&pInit-\/>firstFrameHeader))\ \{}
\DoxyCodeLine{06937\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \textcolor{comment}{/*\ Couldn't\ find\ a\ frame.\ */}}
\DoxyCodeLine{06938\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06939\ }
\DoxyCodeLine{06940\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pInit-\/>firstFrameHeader.bitsPerSample\ ==\ 0)\ \{}
\DoxyCodeLine{06941\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \textcolor{comment}{/*\ Failed\ to\ initialize\ because\ the\ first\ frame\ depends\ on\ the\ STREAMINFO\ block,\ which\ does\ not\ exist.\ */}}
\DoxyCodeLine{06942\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06943\ }
\DoxyCodeLine{06944\ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>sampleRate\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pInit-\/>firstFrameHeader.sampleRate;}
\DoxyCodeLine{06945\ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>channels\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ drflac\_\_get\_channel\_count\_from\_channel\_assignment(pInit-\/>firstFrameHeader.channelAssignment);}
\DoxyCodeLine{06946\ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>bitsPerSample\ \ \ \ \ \ \ \ \ \ \ =\ pInit-\/>firstFrameHeader.bitsPerSample;}
\DoxyCodeLine{06947\ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>maxBlockSizeInPCMFrames\ =\ 65535;\ \ \ \textcolor{comment}{/*\ <-\/-\/\ See\ notes\ here:\ https://xiph.org/flac/format.html\#metadata\_block\_streaminfo\ */}}
\DoxyCodeLine{06948\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{06949\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06950\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{06951\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdrflac__streaminfo}{drflac\_streaminfo}}\ streaminfo;}
\DoxyCodeLine{06952\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_streaminfo(onRead,\ pUserData,\ \&streaminfo))\ \{}
\DoxyCodeLine{06953\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{06954\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06955\ }
\DoxyCodeLine{06956\ \ \ \ \ \ \ \ \ pInit-\/>hasStreamInfoBlock\ \ \ \ \ \ =\ DRFLAC\_TRUE;}
\DoxyCodeLine{06957\ \ \ \ \ \ \ \ \ pInit-\/>sampleRate\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ streaminfo.sampleRate;}
\DoxyCodeLine{06958\ \ \ \ \ \ \ \ \ pInit-\/>channels\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ streaminfo.channels;}
\DoxyCodeLine{06959\ \ \ \ \ \ \ \ \ pInit-\/>bitsPerSample\ \ \ \ \ \ \ \ \ \ \ =\ streaminfo.bitsPerSample;}
\DoxyCodeLine{06960\ \ \ \ \ \ \ \ \ pInit-\/>totalPCMFrameCount\ \ \ \ \ \ =\ streaminfo.totalPCMFrameCount;}
\DoxyCodeLine{06961\ \ \ \ \ \ \ \ \ pInit-\/>maxBlockSizeInPCMFrames\ =\ streaminfo.maxBlockSizeInPCMFrames;\ \ \ \ \textcolor{comment}{/*\ Don't\ care\ about\ the\ min\ block\ size\ -\/\ only\ the\ max\ (used\ for\ determining\ the\ size\ of\ the\ memory\ allocation).\ */}}
\DoxyCodeLine{06962\ \ \ \ \ \ \ \ \ pInit-\/>hasMetadataBlocks\ \ \ \ \ \ \ =\ !isLastBlock;}
\DoxyCodeLine{06963\ }
\DoxyCodeLine{06964\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onMeta)\ \{}
\DoxyCodeLine{06965\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdrflac__metadata}{drflac\_metadata}}\ metadata;}
\DoxyCodeLine{06966\ \ \ \ \ \ \ \ \ \ \ \ \ metadata.type\ =\ DRFLAC\_METADATA\_BLOCK\_TYPE\_STREAMINFO;}
\DoxyCodeLine{06967\ \ \ \ \ \ \ \ \ \ \ \ \ metadata.pRawData\ =\ NULL;}
\DoxyCodeLine{06968\ \ \ \ \ \ \ \ \ \ \ \ \ metadata.rawDataSize\ =\ 0;}
\DoxyCodeLine{06969\ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.streaminfo\ =\ streaminfo;}
\DoxyCodeLine{06970\ \ \ \ \ \ \ \ \ \ \ \ \ onMeta(pUserDataMD,\ \&metadata);}
\DoxyCodeLine{06971\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{06972\ }
\DoxyCodeLine{06973\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{06974\ \ \ \ \ \}}
\DoxyCodeLine{06975\ \}}
\DoxyCodeLine{06976\ }
\DoxyCodeLine{06977\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{06978\ \textcolor{preprocessor}{\#define\ DRFLAC\_OGG\_MAX\_PAGE\_SIZE\ \ \ \ \ \ \ \ \ \ \ \ 65307}}
\DoxyCodeLine{06979\ \textcolor{preprocessor}{\#define\ DRFLAC\_OGG\_CAPTURE\_PATTERN\_CRC32\ \ \ \ 1605413199\ \ }\textcolor{comment}{/*\ CRC-\/32\ of\ "{}OggS"{}.\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{06980\ }
\DoxyCodeLine{06981\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}}
\DoxyCodeLine{06982\ \{}
\DoxyCodeLine{06983\ \ \ \ \ drflac\_ogg\_recover\_on\_crc\_mismatch,}
\DoxyCodeLine{06984\ \ \ \ \ drflac\_ogg\_fail\_on\_crc\_mismatch}
\DoxyCodeLine{06985\ \}\ drflac\_ogg\_crc\_mismatch\_recovery;}
\DoxyCodeLine{06986\ }
\DoxyCodeLine{06987\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{06988\ \textcolor{keyword}{static}\ drflac\_uint32\ drflac\_\_crc32\_table[]\ =\ \{}
\DoxyCodeLine{06989\ \ \ \ \ 0x00000000L,\ 0x04C11DB7L,\ 0x09823B6EL,\ 0x0D4326D9L,}
\DoxyCodeLine{06990\ \ \ \ \ 0x130476DCL,\ 0x17C56B6BL,\ 0x1A864DB2L,\ 0x1E475005L,}
\DoxyCodeLine{06991\ \ \ \ \ 0x2608EDB8L,\ 0x22C9F00FL,\ 0x2F8AD6D6L,\ 0x2B4BCB61L,}
\DoxyCodeLine{06992\ \ \ \ \ 0x350C9B64L,\ 0x31CD86D3L,\ 0x3C8EA00AL,\ 0x384FBDBDL,}
\DoxyCodeLine{06993\ \ \ \ \ 0x4C11DB70L,\ 0x48D0C6C7L,\ 0x4593E01EL,\ 0x4152FDA9L,}
\DoxyCodeLine{06994\ \ \ \ \ 0x5F15ADACL,\ 0x5BD4B01BL,\ 0x569796C2L,\ 0x52568B75L,}
\DoxyCodeLine{06995\ \ \ \ \ 0x6A1936C8L,\ 0x6ED82B7FL,\ 0x639B0DA6L,\ 0x675A1011L,}
\DoxyCodeLine{06996\ \ \ \ \ 0x791D4014L,\ 0x7DDC5DA3L,\ 0x709F7B7AL,\ 0x745E66CDL,}
\DoxyCodeLine{06997\ \ \ \ \ 0x9823B6E0L,\ 0x9CE2AB57L,\ 0x91A18D8EL,\ 0x95609039L,}
\DoxyCodeLine{06998\ \ \ \ \ 0x8B27C03CL,\ 0x8FE6DD8BL,\ 0x82A5FB52L,\ 0x8664E6E5L,}
\DoxyCodeLine{06999\ \ \ \ \ 0xBE2B5B58L,\ 0xBAEA46EFL,\ 0xB7A96036L,\ 0xB3687D81L,}
\DoxyCodeLine{07000\ \ \ \ \ 0xAD2F2D84L,\ 0xA9EE3033L,\ 0xA4AD16EAL,\ 0xA06C0B5DL,}
\DoxyCodeLine{07001\ \ \ \ \ 0xD4326D90L,\ 0xD0F37027L,\ 0xDDB056FEL,\ 0xD9714B49L,}
\DoxyCodeLine{07002\ \ \ \ \ 0xC7361B4CL,\ 0xC3F706FBL,\ 0xCEB42022L,\ 0xCA753D95L,}
\DoxyCodeLine{07003\ \ \ \ \ 0xF23A8028L,\ 0xF6FB9D9FL,\ 0xFBB8BB46L,\ 0xFF79A6F1L,}
\DoxyCodeLine{07004\ \ \ \ \ 0xE13EF6F4L,\ 0xE5FFEB43L,\ 0xE8BCCD9AL,\ 0xEC7DD02DL,}
\DoxyCodeLine{07005\ \ \ \ \ 0x34867077L,\ 0x30476DC0L,\ 0x3D044B19L,\ 0x39C556AEL,}
\DoxyCodeLine{07006\ \ \ \ \ 0x278206ABL,\ 0x23431B1CL,\ 0x2E003DC5L,\ 0x2AC12072L,}
\DoxyCodeLine{07007\ \ \ \ \ 0x128E9DCFL,\ 0x164F8078L,\ 0x1B0CA6A1L,\ 0x1FCDBB16L,}
\DoxyCodeLine{07008\ \ \ \ \ 0x018AEB13L,\ 0x054BF6A4L,\ 0x0808D07DL,\ 0x0CC9CDCAL,}
\DoxyCodeLine{07009\ \ \ \ \ 0x7897AB07L,\ 0x7C56B6B0L,\ 0x71159069L,\ 0x75D48DDEL,}
\DoxyCodeLine{07010\ \ \ \ \ 0x6B93DDDBL,\ 0x6F52C06CL,\ 0x6211E6B5L,\ 0x66D0FB02L,}
\DoxyCodeLine{07011\ \ \ \ \ 0x5E9F46BFL,\ 0x5A5E5B08L,\ 0x571D7DD1L,\ 0x53DC6066L,}
\DoxyCodeLine{07012\ \ \ \ \ 0x4D9B3063L,\ 0x495A2DD4L,\ 0x44190B0DL,\ 0x40D816BAL,}
\DoxyCodeLine{07013\ \ \ \ \ 0xACA5C697L,\ 0xA864DB20L,\ 0xA527FDF9L,\ 0xA1E6E04EL,}
\DoxyCodeLine{07014\ \ \ \ \ 0xBFA1B04BL,\ 0xBB60ADFCL,\ 0xB6238B25L,\ 0xB2E29692L,}
\DoxyCodeLine{07015\ \ \ \ \ 0x8AAD2B2FL,\ 0x8E6C3698L,\ 0x832F1041L,\ 0x87EE0DF6L,}
\DoxyCodeLine{07016\ \ \ \ \ 0x99A95DF3L,\ 0x9D684044L,\ 0x902B669DL,\ 0x94EA7B2AL,}
\DoxyCodeLine{07017\ \ \ \ \ 0xE0B41DE7L,\ 0xE4750050L,\ 0xE9362689L,\ 0xEDF73B3EL,}
\DoxyCodeLine{07018\ \ \ \ \ 0xF3B06B3BL,\ 0xF771768CL,\ 0xFA325055L,\ 0xFEF34DE2L,}
\DoxyCodeLine{07019\ \ \ \ \ 0xC6BCF05FL,\ 0xC27DEDE8L,\ 0xCF3ECB31L,\ 0xCBFFD686L,}
\DoxyCodeLine{07020\ \ \ \ \ 0xD5B88683L,\ 0xD1799B34L,\ 0xDC3ABDEDL,\ 0xD8FBA05AL,}
\DoxyCodeLine{07021\ \ \ \ \ 0x690CE0EEL,\ 0x6DCDFD59L,\ 0x608EDB80L,\ 0x644FC637L,}
\DoxyCodeLine{07022\ \ \ \ \ 0x7A089632L,\ 0x7EC98B85L,\ 0x738AAD5CL,\ 0x774BB0EBL,}
\DoxyCodeLine{07023\ \ \ \ \ 0x4F040D56L,\ 0x4BC510E1L,\ 0x46863638L,\ 0x42472B8FL,}
\DoxyCodeLine{07024\ \ \ \ \ 0x5C007B8AL,\ 0x58C1663DL,\ 0x558240E4L,\ 0x51435D53L,}
\DoxyCodeLine{07025\ \ \ \ \ 0x251D3B9EL,\ 0x21DC2629L,\ 0x2C9F00F0L,\ 0x285E1D47L,}
\DoxyCodeLine{07026\ \ \ \ \ 0x36194D42L,\ 0x32D850F5L,\ 0x3F9B762CL,\ 0x3B5A6B9BL,}
\DoxyCodeLine{07027\ \ \ \ \ 0x0315D626L,\ 0x07D4CB91L,\ 0x0A97ED48L,\ 0x0E56F0FFL,}
\DoxyCodeLine{07028\ \ \ \ \ 0x1011A0FAL,\ 0x14D0BD4DL,\ 0x19939B94L,\ 0x1D528623L,}
\DoxyCodeLine{07029\ \ \ \ \ 0xF12F560EL,\ 0xF5EE4BB9L,\ 0xF8AD6D60L,\ 0xFC6C70D7L,}
\DoxyCodeLine{07030\ \ \ \ \ 0xE22B20D2L,\ 0xE6EA3D65L,\ 0xEBA91BBCL,\ 0xEF68060BL,}
\DoxyCodeLine{07031\ \ \ \ \ 0xD727BBB6L,\ 0xD3E6A601L,\ 0xDEA580D8L,\ 0xDA649D6FL,}
\DoxyCodeLine{07032\ \ \ \ \ 0xC423CD6AL,\ 0xC0E2D0DDL,\ 0xCDA1F604L,\ 0xC960EBB3L,}
\DoxyCodeLine{07033\ \ \ \ \ 0xBD3E8D7EL,\ 0xB9FF90C9L,\ 0xB4BCB610L,\ 0xB07DABA7L,}
\DoxyCodeLine{07034\ \ \ \ \ 0xAE3AFBA2L,\ 0xAAFBE615L,\ 0xA7B8C0CCL,\ 0xA379DD7BL,}
\DoxyCodeLine{07035\ \ \ \ \ 0x9B3660C6L,\ 0x9FF77D71L,\ 0x92B45BA8L,\ 0x9675461FL,}
\DoxyCodeLine{07036\ \ \ \ \ 0x8832161AL,\ 0x8CF30BADL,\ 0x81B02D74L,\ 0x857130C3L,}
\DoxyCodeLine{07037\ \ \ \ \ 0x5D8A9099L,\ 0x594B8D2EL,\ 0x5408ABF7L,\ 0x50C9B640L,}
\DoxyCodeLine{07038\ \ \ \ \ 0x4E8EE645L,\ 0x4A4FFBF2L,\ 0x470CDD2BL,\ 0x43CDC09CL,}
\DoxyCodeLine{07039\ \ \ \ \ 0x7B827D21L,\ 0x7F436096L,\ 0x7200464FL,\ 0x76C15BF8L,}
\DoxyCodeLine{07040\ \ \ \ \ 0x68860BFDL,\ 0x6C47164AL,\ 0x61043093L,\ 0x65C52D24L,}
\DoxyCodeLine{07041\ \ \ \ \ 0x119B4BE9L,\ 0x155A565EL,\ 0x18197087L,\ 0x1CD86D30L,}
\DoxyCodeLine{07042\ \ \ \ \ 0x029F3D35L,\ 0x065E2082L,\ 0x0B1D065BL,\ 0x0FDC1BECL,}
\DoxyCodeLine{07043\ \ \ \ \ 0x3793A651L,\ 0x3352BBE6L,\ 0x3E119D3FL,\ 0x3AD08088L,}
\DoxyCodeLine{07044\ \ \ \ \ 0x2497D08DL,\ 0x2056CD3AL,\ 0x2D15EBE3L,\ 0x29D4F654L,}
\DoxyCodeLine{07045\ \ \ \ \ 0xC5A92679L,\ 0xC1683BCEL,\ 0xCC2B1D17L,\ 0xC8EA00A0L,}
\DoxyCodeLine{07046\ \ \ \ \ 0xD6AD50A5L,\ 0xD26C4D12L,\ 0xDF2F6BCBL,\ 0xDBEE767CL,}
\DoxyCodeLine{07047\ \ \ \ \ 0xE3A1CBC1L,\ 0xE760D676L,\ 0xEA23F0AFL,\ 0xEEE2ED18L,}
\DoxyCodeLine{07048\ \ \ \ \ 0xF0A5BD1DL,\ 0xF464A0AAL,\ 0xF9278673L,\ 0xFDE69BC4L,}
\DoxyCodeLine{07049\ \ \ \ \ 0x89B8FD09L,\ 0x8D79E0BEL,\ 0x803AC667L,\ 0x84FBDBD0L,}
\DoxyCodeLine{07050\ \ \ \ \ 0x9ABC8BD5L,\ 0x9E7D9662L,\ 0x933EB0BBL,\ 0x97FFAD0CL,}
\DoxyCodeLine{07051\ \ \ \ \ 0xAFB010B1L,\ 0xAB710D06L,\ 0xA6322BDFL,\ 0xA2F33668L,}
\DoxyCodeLine{07052\ \ \ \ \ 0xBCB4666DL,\ 0xB8757BDAL,\ 0xB5365D03L,\ 0xB1F740B4L}
\DoxyCodeLine{07053\ \};}
\DoxyCodeLine{07054\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{07055\ }
\DoxyCodeLine{07056\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_crc32\_byte(drflac\_uint32\ crc32,\ drflac\_uint8\ data)}
\DoxyCodeLine{07057\ \{}
\DoxyCodeLine{07058\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{07059\ \ \ \ \ \textcolor{keywordflow}{return}\ (crc32\ <<\ 8)\ \string^\ drflac\_\_crc32\_table[(drflac\_uint8)((crc32\ >>\ 24)\ \&\ 0xFF)\ \string^\ data];}
\DoxyCodeLine{07060\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{07061\ \ \ \ \ (void)data;}
\DoxyCodeLine{07062\ \ \ \ \ \textcolor{keywordflow}{return}\ crc32;}
\DoxyCodeLine{07063\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{07064\ \}}
\DoxyCodeLine{07065\ }
\DoxyCodeLine{07066\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{07067\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_crc32\_uint32(drflac\_uint32\ crc32,\ drflac\_uint32\ data)}
\DoxyCodeLine{07068\ \{}
\DoxyCodeLine{07069\ \ \ \ \ crc32\ =\ drflac\_crc32\_byte(crc32,\ (drflac\_uint8)((data\ >>\ 24)\ \&\ 0xFF));}
\DoxyCodeLine{07070\ \ \ \ \ crc32\ =\ drflac\_crc32\_byte(crc32,\ (drflac\_uint8)((data\ >>\ 16)\ \&\ 0xFF));}
\DoxyCodeLine{07071\ \ \ \ \ crc32\ =\ drflac\_crc32\_byte(crc32,\ (drflac\_uint8)((data\ >>\ \ 8)\ \&\ 0xFF));}
\DoxyCodeLine{07072\ \ \ \ \ crc32\ =\ drflac\_crc32\_byte(crc32,\ (drflac\_uint8)((data\ >>\ \ 0)\ \&\ 0xFF));}
\DoxyCodeLine{07073\ \ \ \ \ \textcolor{keywordflow}{return}\ crc32;}
\DoxyCodeLine{07074\ \}}
\DoxyCodeLine{07075\ }
\DoxyCodeLine{07076\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_crc32\_uint64(drflac\_uint32\ crc32,\ drflac\_uint64\ data)}
\DoxyCodeLine{07077\ \{}
\DoxyCodeLine{07078\ \ \ \ \ crc32\ =\ drflac\_crc32\_uint32(crc32,\ (drflac\_uint32)((data\ >>\ 32)\ \&\ 0xFFFFFFFF));}
\DoxyCodeLine{07079\ \ \ \ \ crc32\ =\ drflac\_crc32\_uint32(crc32,\ (drflac\_uint32)((data\ >>\ \ 0)\ \&\ 0xFFFFFFFF));}
\DoxyCodeLine{07080\ \ \ \ \ \textcolor{keywordflow}{return}\ crc32;}
\DoxyCodeLine{07081\ \}}
\DoxyCodeLine{07082\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{07083\ }
\DoxyCodeLine{07084\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_crc32\_buffer(drflac\_uint32\ crc32,\ drflac\_uint8*\ pData,\ drflac\_uint32\ dataSize)}
\DoxyCodeLine{07085\ \{}
\DoxyCodeLine{07086\ \ \ \ \ \textcolor{comment}{/*\ This\ can\ be\ optimized.\ */}}
\DoxyCodeLine{07087\ \ \ \ \ drflac\_uint32\ i;}
\DoxyCodeLine{07088\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ dataSize;\ ++i)\ \{}
\DoxyCodeLine{07089\ \ \ \ \ \ \ \ \ crc32\ =\ drflac\_crc32\_byte(crc32,\ pData[i]);}
\DoxyCodeLine{07090\ \ \ \ \ \}}
\DoxyCodeLine{07091\ \ \ \ \ \textcolor{keywordflow}{return}\ crc32;}
\DoxyCodeLine{07092\ \}}
\DoxyCodeLine{07093\ }
\DoxyCodeLine{07094\ }
\DoxyCodeLine{07095\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_bool32\ drflac\_ogg\_\_is\_capture\_pattern(drflac\_uint8\ pattern[4])}
\DoxyCodeLine{07096\ \{}
\DoxyCodeLine{07097\ \ \ \ \ \textcolor{keywordflow}{return}\ pattern[0]\ ==\ \textcolor{charliteral}{'O'}\ \&\&\ pattern[1]\ ==\ \textcolor{charliteral}{'g'}\ \&\&\ pattern[2]\ ==\ \textcolor{charliteral}{'g'}\ \&\&\ pattern[3]\ ==\ \textcolor{charliteral}{'S'};}
\DoxyCodeLine{07098\ \}}
\DoxyCodeLine{07099\ }
\DoxyCodeLine{07100\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_ogg\_\_get\_page\_header\_size(drflac\_ogg\_page\_header*\ pHeader)}
\DoxyCodeLine{07101\ \{}
\DoxyCodeLine{07102\ \ \ \ \ \textcolor{keywordflow}{return}\ 27\ +\ pHeader-\/>segmentCount;}
\DoxyCodeLine{07103\ \}}
\DoxyCodeLine{07104\ }
\DoxyCodeLine{07105\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ drflac\_uint32\ drflac\_ogg\_\_get\_page\_body\_size(drflac\_ogg\_page\_header*\ pHeader)}
\DoxyCodeLine{07106\ \{}
\DoxyCodeLine{07107\ \ \ \ \ drflac\_uint32\ pageBodySize\ =\ 0;}
\DoxyCodeLine{07108\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{07109\ }
\DoxyCodeLine{07110\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ pHeader-\/>segmentCount;\ ++i)\ \{}
\DoxyCodeLine{07111\ \ \ \ \ \ \ \ \ pageBodySize\ +=\ pHeader-\/>segmentTable[i];}
\DoxyCodeLine{07112\ \ \ \ \ \}}
\DoxyCodeLine{07113\ }
\DoxyCodeLine{07114\ \ \ \ \ \textcolor{keywordflow}{return}\ pageBodySize;}
\DoxyCodeLine{07115\ \}}
\DoxyCodeLine{07116\ }
\DoxyCodeLine{07117\ \textcolor{keyword}{static}\ drflac\_result\ drflac\_ogg\_\_read\_page\_header\_after\_capture\_pattern(drflac\_read\_proc\ onRead,\ \textcolor{keywordtype}{void}*\ pUserData,\ drflac\_ogg\_page\_header*\ pHeader,\ drflac\_uint32*\ pBytesRead,\ drflac\_uint32*\ pCRC32)}
\DoxyCodeLine{07118\ \{}
\DoxyCodeLine{07119\ \ \ \ \ drflac\_uint8\ data[23];}
\DoxyCodeLine{07120\ \ \ \ \ drflac\_uint32\ i;}
\DoxyCodeLine{07121\ }
\DoxyCodeLine{07122\ \ \ \ \ DRFLAC\_ASSERT(*pCRC32\ ==\ DRFLAC\_OGG\_CAPTURE\_PATTERN\_CRC32);}
\DoxyCodeLine{07123\ }
\DoxyCodeLine{07124\ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ data,\ 23)\ !=\ 23)\ \{}
\DoxyCodeLine{07125\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_AT\_END;}
\DoxyCodeLine{07126\ \ \ \ \ \}}
\DoxyCodeLine{07127\ \ \ \ \ *pBytesRead\ +=\ 23;}
\DoxyCodeLine{07128\ }
\DoxyCodeLine{07129\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{07130\ \textcolor{comment}{\ \ \ \ It's\ not\ actually\ used,\ but\ set\ the\ capture\ pattern\ to\ 'OggS'\ for\ completeness.\ Not\ doing\ this\ will\ cause\ static\ analysers\ to\ complain\ about}}
\DoxyCodeLine{07131\ \textcolor{comment}{\ \ \ \ us\ trying\ to\ access\ uninitialized\ data.\ We\ could\ alternatively\ just\ comment\ out\ this\ member\ of\ the\ drflac\_ogg\_page\_header\ structure,\ but\ I}}
\DoxyCodeLine{07132\ \textcolor{comment}{\ \ \ \ like\ to\ have\ it\ map\ to\ the\ structure\ of\ the\ underlying\ data.}}
\DoxyCodeLine{07133\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{07134\ \ \ \ \ pHeader-\/>capturePattern[0]\ =\ \textcolor{charliteral}{'O'};}
\DoxyCodeLine{07135\ \ \ \ \ pHeader-\/>capturePattern[1]\ =\ \textcolor{charliteral}{'g'};}
\DoxyCodeLine{07136\ \ \ \ \ pHeader-\/>capturePattern[2]\ =\ \textcolor{charliteral}{'g'};}
\DoxyCodeLine{07137\ \ \ \ \ pHeader-\/>capturePattern[3]\ =\ \textcolor{charliteral}{'S'};}
\DoxyCodeLine{07138\ }
\DoxyCodeLine{07139\ \ \ \ \ pHeader-\/>structureVersion\ =\ data[0];}
\DoxyCodeLine{07140\ \ \ \ \ pHeader-\/>headerType\ \ \ \ \ \ \ =\ data[1];}
\DoxyCodeLine{07141\ \ \ \ \ DRFLAC\_COPY\_MEMORY(\&pHeader-\/>granulePosition,\ \&data[\ 2],\ 8);}
\DoxyCodeLine{07142\ \ \ \ \ DRFLAC\_COPY\_MEMORY(\&pHeader-\/>serialNumber,\ \ \ \ \&data[10],\ 4);}
\DoxyCodeLine{07143\ \ \ \ \ DRFLAC\_COPY\_MEMORY(\&pHeader-\/>sequenceNumber,\ \ \&data[14],\ 4);}
\DoxyCodeLine{07144\ \ \ \ \ DRFLAC\_COPY\_MEMORY(\&pHeader-\/>checksum,\ \ \ \ \ \ \ \ \&data[18],\ 4);}
\DoxyCodeLine{07145\ \ \ \ \ pHeader-\/>segmentCount\ \ \ \ \ =\ data[22];}
\DoxyCodeLine{07146\ }
\DoxyCodeLine{07147\ \ \ \ \ \textcolor{comment}{/*\ Calculate\ the\ CRC.\ Note\ that\ for\ the\ calculation\ the\ checksum\ part\ of\ the\ page\ needs\ to\ be\ set\ to\ 0.\ */}}
\DoxyCodeLine{07148\ \ \ \ \ data[18]\ =\ 0;}
\DoxyCodeLine{07149\ \ \ \ \ data[19]\ =\ 0;}
\DoxyCodeLine{07150\ \ \ \ \ data[20]\ =\ 0;}
\DoxyCodeLine{07151\ \ \ \ \ data[21]\ =\ 0;}
\DoxyCodeLine{07152\ }
\DoxyCodeLine{07153\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ 23;\ ++i)\ \{}
\DoxyCodeLine{07154\ \ \ \ \ \ \ \ \ *pCRC32\ =\ drflac\_crc32\_byte(*pCRC32,\ data[i]);}
\DoxyCodeLine{07155\ \ \ \ \ \}}
\DoxyCodeLine{07156\ }
\DoxyCodeLine{07157\ }
\DoxyCodeLine{07158\ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ pHeader-\/>segmentTable,\ pHeader-\/>segmentCount)\ !=\ pHeader-\/>segmentCount)\ \{}
\DoxyCodeLine{07159\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_AT\_END;}
\DoxyCodeLine{07160\ \ \ \ \ \}}
\DoxyCodeLine{07161\ \ \ \ \ *pBytesRead\ +=\ pHeader-\/>segmentCount;}
\DoxyCodeLine{07162\ }
\DoxyCodeLine{07163\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ pHeader-\/>segmentCount;\ ++i)\ \{}
\DoxyCodeLine{07164\ \ \ \ \ \ \ \ \ *pCRC32\ =\ drflac\_crc32\_byte(*pCRC32,\ pHeader-\/>segmentTable[i]);}
\DoxyCodeLine{07165\ \ \ \ \ \}}
\DoxyCodeLine{07166\ }
\DoxyCodeLine{07167\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_SUCCESS;}
\DoxyCodeLine{07168\ \}}
\DoxyCodeLine{07169\ }
\DoxyCodeLine{07170\ \textcolor{keyword}{static}\ drflac\_result\ drflac\_ogg\_\_read\_page\_header(drflac\_read\_proc\ onRead,\ \textcolor{keywordtype}{void}*\ pUserData,\ drflac\_ogg\_page\_header*\ pHeader,\ drflac\_uint32*\ pBytesRead,\ drflac\_uint32*\ pCRC32)}
\DoxyCodeLine{07171\ \{}
\DoxyCodeLine{07172\ \ \ \ \ drflac\_uint8\ \textcolor{keywordtype}{id}[4];}
\DoxyCodeLine{07173\ }
\DoxyCodeLine{07174\ \ \ \ \ *pBytesRead\ =\ 0;}
\DoxyCodeLine{07175\ }
\DoxyCodeLine{07176\ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ \textcolor{keywordtype}{id},\ 4)\ !=\ 4)\ \{}
\DoxyCodeLine{07177\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_AT\_END;}
\DoxyCodeLine{07178\ \ \ \ \ \}}
\DoxyCodeLine{07179\ \ \ \ \ *pBytesRead\ +=\ 4;}
\DoxyCodeLine{07180\ }
\DoxyCodeLine{07181\ \ \ \ \ \textcolor{comment}{/*\ We\ need\ to\ read\ byte-\/by-\/byte\ until\ we\ find\ the\ OggS\ capture\ pattern.\ */}}
\DoxyCodeLine{07182\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{07183\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_ogg\_\_is\_capture\_pattern(\textcolor{keywordtype}{id}))\ \{}
\DoxyCodeLine{07184\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_result\ result;}
\DoxyCodeLine{07185\ }
\DoxyCodeLine{07186\ \ \ \ \ \ \ \ \ \ \ \ \ *pCRC32\ =\ DRFLAC\_OGG\_CAPTURE\_PATTERN\_CRC32;}
\DoxyCodeLine{07187\ }
\DoxyCodeLine{07188\ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ drflac\_ogg\_\_read\_page\_header\_after\_capture\_pattern(onRead,\ pUserData,\ pHeader,\ pBytesRead,\ pCRC32);}
\DoxyCodeLine{07189\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{07190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_SUCCESS;}
\DoxyCodeLine{07191\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_CRC\_MISMATCH)\ \{}
\DoxyCodeLine{07193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{07194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{07196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07197\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07198\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ first\ 4\ bytes\ did\ not\ equal\ the\ capture\ pattern.\ Read\ the\ next\ byte\ and\ try\ again.\ */}}
\DoxyCodeLine{07200\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{id}[0]\ =\ \textcolor{keywordtype}{id}[1];}
\DoxyCodeLine{07201\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{id}[1]\ =\ \textcolor{keywordtype}{id}[2];}
\DoxyCodeLine{07202\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{id}[2]\ =\ \textcolor{keywordtype}{id}[3];}
\DoxyCodeLine{07203\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ \&\textcolor{keywordtype}{id}[3],\ 1)\ !=\ 1)\ \{}
\DoxyCodeLine{07204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_AT\_END;}
\DoxyCodeLine{07205\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07206\ \ \ \ \ \ \ \ \ \ \ \ \ *pBytesRead\ +=\ 1;}
\DoxyCodeLine{07207\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07208\ \ \ \ \ \}}
\DoxyCodeLine{07209\ \}}
\DoxyCodeLine{07210\ }
\DoxyCodeLine{07211\ }
\DoxyCodeLine{07212\ \textcolor{comment}{/*}}
\DoxyCodeLine{07213\ \textcolor{comment}{The\ main\ part\ of\ the\ Ogg\ encapsulation\ is\ the\ conversion\ from\ the\ physical\ Ogg\ bitstream\ to\ the\ native\ FLAC\ bitstream.\ It\ works}}
\DoxyCodeLine{07214\ \textcolor{comment}{in\ three\ general\ stages:\ Ogg\ Physical\ Bitstream\ -\/>\ Ogg/FLAC\ Logical\ Bitstream\ -\/>\ FLAC\ Native\ Bitstream.\ dr\_flac\ is\ designed}}
\DoxyCodeLine{07215\ \textcolor{comment}{in\ such\ a\ way\ that\ the\ core\ sections\ assume\ everything\ is\ delivered\ in\ native\ format.\ Therefore,\ for\ each\ encapsulation\ type}}
\DoxyCodeLine{07216\ \textcolor{comment}{dr\_flac\ is\ supporting\ there\ needs\ to\ be\ a\ layer\ sitting\ on\ top\ of\ the\ onRead\ and\ onSeek\ callbacks\ that\ ensures\ the\ bits\ read\ from}}
\DoxyCodeLine{07217\ \textcolor{comment}{the\ physical\ Ogg\ bitstream\ are\ converted\ and\ delivered\ in\ native\ FLAC\ format.}}
\DoxyCodeLine{07218\ \textcolor{comment}{*/}}
\DoxyCodeLine{07219\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{07220\ \{}
\DoxyCodeLine{07221\ \ \ \ \ drflac\_read\_proc\ onRead;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ original\ onRead\ callback\ from\ drflac\_open()\ and\ family.\ */}}
\DoxyCodeLine{07222\ \ \ \ \ drflac\_seek\_proc\ onSeek;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ original\ onSeek\ callback\ from\ drflac\_open()\ and\ family.\ */}}
\DoxyCodeLine{07223\ \ \ \ \ \textcolor{keywordtype}{void}*\ pUserData;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ user\ data\ passed\ on\ onRead\ and\ onSeek.\ This\ is\ the\ user\ data\ that\ was\ passed\ on\ drflac\_open()\ and\ family.\ */}}
\DoxyCodeLine{07224\ \ \ \ \ drflac\_uint64\ currentBytePos;\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ position\ of\ the\ byte\ we\ are\ sitting\ on\ in\ the\ physical\ byte\ stream.\ Used\ for\ efficient\ seeking.\ */}}
\DoxyCodeLine{07225\ \ \ \ \ drflac\_uint64\ firstBytePos;\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ position\ of\ the\ first\ byte\ in\ the\ physical\ bitstream.\ Points\ to\ the\ start\ of\ the\ "{}OggS"{}\ identifier\ of\ the\ FLAC\ bos\ page.\ */}}
\DoxyCodeLine{07226\ \ \ \ \ drflac\_uint32\ serialNumber;\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ serial\ number\ of\ the\ FLAC\ audio\ pages.\ This\ is\ determined\ by\ the\ initial\ header\ page\ that\ was\ read\ during\ initialization.\ */}}
\DoxyCodeLine{07227\ \ \ \ \ drflac\_ogg\_page\_header\ bosPageHeader;\ \ \ \textcolor{comment}{/*\ Used\ for\ seeking.\ */}}
\DoxyCodeLine{07228\ \ \ \ \ drflac\_ogg\_page\_header\ currentPageHeader;}
\DoxyCodeLine{07229\ \ \ \ \ drflac\_uint32\ bytesRemainingInPage;}
\DoxyCodeLine{07230\ \ \ \ \ drflac\_uint32\ pageDataSize;}
\DoxyCodeLine{07231\ \ \ \ \ drflac\_uint8\ pageData[DRFLAC\_OGG\_MAX\_PAGE\_SIZE];}
\DoxyCodeLine{07232\ \}\ drflac\_oggbs;\ \textcolor{comment}{/*\ oggbs\ =\ Ogg\ Bitstream\ */}}
\DoxyCodeLine{07233\ }
\DoxyCodeLine{07234\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ drflac\_oggbs\_\_read\_physical(drflac\_oggbs*\ oggbs,\ \textcolor{keywordtype}{void}*\ bufferOut,\ \textcolor{keywordtype}{size\_t}\ bytesToRead)}
\DoxyCodeLine{07235\ \{}
\DoxyCodeLine{07236\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ bytesActuallyRead\ =\ oggbs-\/>onRead(oggbs-\/>pUserData,\ bufferOut,\ bytesToRead);}
\DoxyCodeLine{07237\ \ \ \ \ oggbs-\/>currentBytePos\ +=\ bytesActuallyRead;}
\DoxyCodeLine{07238\ }
\DoxyCodeLine{07239\ \ \ \ \ \textcolor{keywordflow}{return}\ bytesActuallyRead;}
\DoxyCodeLine{07240\ \}}
\DoxyCodeLine{07241\ }
\DoxyCodeLine{07242\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_oggbs\_\_seek\_physical(drflac\_oggbs*\ oggbs,\ drflac\_uint64\ \mbox{\hyperlink{structoffset}{offset}},\ drflac\_seek\_origin\ origin)}
\DoxyCodeLine{07243\ \{}
\DoxyCodeLine{07244\ \ \ \ \ \textcolor{keywordflow}{if}\ (origin\ ==\ drflac\_seek\_origin\_start)\ \{}
\DoxyCodeLine{07245\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structoffset}{offset}}\ <=\ 0x7FFFFFFF)\ \{}
\DoxyCodeLine{07246\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!oggbs-\/>onSeek(oggbs-\/>pUserData,\ (\textcolor{keywordtype}{int})\mbox{\hyperlink{structoffset}{offset}},\ drflac\_seek\_origin\_start))\ \{}
\DoxyCodeLine{07247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07248\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07249\ \ \ \ \ \ \ \ \ \ \ \ \ oggbs-\/>currentBytePos\ =\ \mbox{\hyperlink{structoffset}{offset}};}
\DoxyCodeLine{07250\ }
\DoxyCodeLine{07251\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{07252\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07253\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!oggbs-\/>onSeek(oggbs-\/>pUserData,\ 0x7FFFFFFF,\ drflac\_seek\_origin\_start))\ \{}
\DoxyCodeLine{07254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07255\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07256\ \ \ \ \ \ \ \ \ \ \ \ \ oggbs-\/>currentBytePos\ =\ \mbox{\hyperlink{structoffset}{offset}};}
\DoxyCodeLine{07257\ }
\DoxyCodeLine{07258\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_oggbs\_\_seek\_physical(oggbs,\ \mbox{\hyperlink{structoffset}{offset}}\ -\/\ 0x7FFFFFFF,\ drflac\_seek\_origin\_current);}
\DoxyCodeLine{07259\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07260\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07261\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{structoffset}{offset}}\ >\ 0x7FFFFFFF)\ \{}
\DoxyCodeLine{07262\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!oggbs-\/>onSeek(oggbs-\/>pUserData,\ 0x7FFFFFFF,\ drflac\_seek\_origin\_current))\ \{}
\DoxyCodeLine{07263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07264\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07265\ \ \ \ \ \ \ \ \ \ \ \ \ oggbs-\/>currentBytePos\ +=\ 0x7FFFFFFF;}
\DoxyCodeLine{07266\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structoffset}{offset}}\ -\/=\ 0x7FFFFFFF;}
\DoxyCodeLine{07267\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07268\ }
\DoxyCodeLine{07269\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!oggbs-\/>onSeek(oggbs-\/>pUserData,\ (\textcolor{keywordtype}{int})\mbox{\hyperlink{structoffset}{offset}},\ drflac\_seek\_origin\_current))\ \{\ \ \ \ \textcolor{comment}{/*\ <-\/-\/\ Safe\ cast\ thanks\ to\ the\ loop\ above.\ */}}
\DoxyCodeLine{07270\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07271\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07272\ \ \ \ \ \ \ \ \ oggbs-\/>currentBytePos\ +=\ \mbox{\hyperlink{structoffset}{offset}};}
\DoxyCodeLine{07273\ }
\DoxyCodeLine{07274\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{07275\ \ \ \ \ \}}
\DoxyCodeLine{07276\ \}}
\DoxyCodeLine{07277\ }
\DoxyCodeLine{07278\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_oggbs\_\_goto\_next\_page(drflac\_oggbs*\ oggbs,\ drflac\_ogg\_crc\_mismatch\_recovery\ recoveryMethod)}
\DoxyCodeLine{07279\ \{}
\DoxyCodeLine{07280\ \ \ \ \ drflac\_ogg\_page\_header\ header;}
\DoxyCodeLine{07281\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{07282\ \ \ \ \ \ \ \ \ drflac\_uint32\ crc32\ =\ 0;}
\DoxyCodeLine{07283\ \ \ \ \ \ \ \ \ drflac\_uint32\ bytesRead;}
\DoxyCodeLine{07284\ \ \ \ \ \ \ \ \ drflac\_uint32\ pageBodySize;}
\DoxyCodeLine{07285\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{07286\ \ \ \ \ \ \ \ \ drflac\_uint32\ actualCRC32;}
\DoxyCodeLine{07287\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{07288\ }
\DoxyCodeLine{07289\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_ogg\_\_read\_page\_header(oggbs-\/>onRead,\ oggbs-\/>pUserData,\ \&header,\ \&bytesRead,\ \&crc32)\ !=\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{07290\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07291\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07292\ \ \ \ \ \ \ \ \ oggbs-\/>currentBytePos\ +=\ bytesRead;}
\DoxyCodeLine{07293\ }
\DoxyCodeLine{07294\ \ \ \ \ \ \ \ \ pageBodySize\ =\ drflac\_ogg\_\_get\_page\_body\_size(\&header);}
\DoxyCodeLine{07295\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pageBodySize\ >\ DRFLAC\_OGG\_MAX\_PAGE\_SIZE)\ \{}
\DoxyCodeLine{07296\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};\ \ \ \textcolor{comment}{/*\ Invalid\ page\ size.\ Assume\ it's\ corrupted\ and\ just\ move\ to\ the\ next\ page.\ */}}
\DoxyCodeLine{07297\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07298\ }
\DoxyCodeLine{07299\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (header.serialNumber\ !=\ oggbs-\/>serialNumber)\ \{}
\DoxyCodeLine{07300\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ It's\ not\ a\ FLAC\ page.\ Skip\ it.\ */}}
\DoxyCodeLine{07301\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pageBodySize\ >\ 0\ \&\&\ !drflac\_oggbs\_\_seek\_physical(oggbs,\ pageBodySize,\ drflac\_seek\_origin\_current))\ \{}
\DoxyCodeLine{07302\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07303\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07304\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{07305\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07306\ }
\DoxyCodeLine{07307\ }
\DoxyCodeLine{07308\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ need\ to\ read\ the\ entire\ page\ and\ then\ do\ a\ CRC\ check\ on\ it.\ If\ there's\ a\ CRC\ mismatch\ we\ need\ to\ skip\ this\ page.\ */}}
\DoxyCodeLine{07309\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_oggbs\_\_read\_physical(oggbs,\ oggbs-\/>pageData,\ pageBodySize)\ !=\ pageBodySize)\ \{}
\DoxyCodeLine{07310\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07311\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07312\ \ \ \ \ \ \ \ \ oggbs-\/>pageDataSize\ =\ pageBodySize;}
\DoxyCodeLine{07313\ }
\DoxyCodeLine{07314\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_CRC}}
\DoxyCodeLine{07315\ \ \ \ \ \ \ \ \ actualCRC32\ =\ drflac\_crc32\_buffer(crc32,\ oggbs-\/>pageData,\ oggbs-\/>pageDataSize);}
\DoxyCodeLine{07316\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (actualCRC32\ !=\ header.checksum)\ \{}
\DoxyCodeLine{07317\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (recoveryMethod\ ==\ drflac\_ogg\_recover\_on\_crc\_mismatch)\ \{}
\DoxyCodeLine{07318\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};\ \ \ \textcolor{comment}{/*\ CRC\ mismatch.\ Skip\ this\ page.\ */}}
\DoxyCodeLine{07319\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07320\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{07321\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Even\ though\ we\ are\ failing\ on\ a\ CRC\ mismatch,\ we\ still\ want\ our\ stream\ to\ be\ in\ a\ good\ state.\ Therefore\ we}}
\DoxyCodeLine{07322\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ go\ to\ the\ next\ valid\ page\ to\ ensure\ we're\ in\ a\ good\ state,\ but\ return\ false\ to\ let\ the\ caller\ know\ that\ the}}
\DoxyCodeLine{07323\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ seek\ did\ not\ fully\ complete.}}
\DoxyCodeLine{07324\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{07325\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_oggbs\_\_goto\_next\_page(oggbs,\ drflac\_ogg\_recover\_on\_crc\_mismatch);}
\DoxyCodeLine{07326\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07327\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07328\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07329\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{07330\ \ \ \ \ \ \ \ \ (void)recoveryMethod;\ \ \ \textcolor{comment}{/*\ <-\/-\/\ Silence\ a\ warning.\ */}}
\DoxyCodeLine{07331\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{07332\ }
\DoxyCodeLine{07333\ \ \ \ \ \ \ \ \ oggbs-\/>currentPageHeader\ =\ header;}
\DoxyCodeLine{07334\ \ \ \ \ \ \ \ \ oggbs-\/>bytesRemainingInPage\ =\ pageBodySize;}
\DoxyCodeLine{07335\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{07336\ \ \ \ \ \}}
\DoxyCodeLine{07337\ \}}
\DoxyCodeLine{07338\ }
\DoxyCodeLine{07339\ \textcolor{comment}{/*\ Function\ below\ is\ unused\ at\ the\ moment,\ but\ I\ might\ be\ re-\/adding\ it\ later.\ */}}
\DoxyCodeLine{07340\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{07341\ \textcolor{keyword}{static}\ drflac\_uint8\ drflac\_oggbs\_\_get\_current\_segment\_index(drflac\_oggbs*\ oggbs,\ drflac\_uint8*\ pBytesRemainingInSeg)}
\DoxyCodeLine{07342\ \{}
\DoxyCodeLine{07343\ \ \ \ \ drflac\_uint32\ bytesConsumedInPage\ =\ drflac\_ogg\_\_get\_page\_body\_size(\&oggbs-\/>currentPageHeader)\ -\/\ oggbs-\/>bytesRemainingInPage;}
\DoxyCodeLine{07344\ \ \ \ \ drflac\_uint8\ iSeg\ =\ 0;}
\DoxyCodeLine{07345\ \ \ \ \ drflac\_uint32\ iByte\ =\ 0;}
\DoxyCodeLine{07346\ \ \ \ \ \textcolor{keywordflow}{while}\ (iByte\ <\ bytesConsumedInPage)\ \{}
\DoxyCodeLine{07347\ \ \ \ \ \ \ \ \ drflac\_uint8\ segmentSize\ =\ oggbs-\/>currentPageHeader.segmentTable[iSeg];}
\DoxyCodeLine{07348\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (iByte\ +\ segmentSize\ >\ bytesConsumedInPage)\ \{}
\DoxyCodeLine{07349\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{07350\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07351\ \ \ \ \ \ \ \ \ \ \ \ \ iSeg\ +=\ 1;}
\DoxyCodeLine{07352\ \ \ \ \ \ \ \ \ \ \ \ \ iByte\ +=\ segmentSize;}
\DoxyCodeLine{07353\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07354\ \ \ \ \ \}}
\DoxyCodeLine{07355\ }
\DoxyCodeLine{07356\ \ \ \ \ *pBytesRemainingInSeg\ =\ oggbs-\/>currentPageHeader.segmentTable[iSeg]\ -\/\ (drflac\_uint8)(bytesConsumedInPage\ -\/\ iByte);}
\DoxyCodeLine{07357\ \ \ \ \ \textcolor{keywordflow}{return}\ iSeg;}
\DoxyCodeLine{07358\ \}}
\DoxyCodeLine{07359\ }
\DoxyCodeLine{07360\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_oggbs\_\_seek\_to\_next\_packet(drflac\_oggbs*\ oggbs)}
\DoxyCodeLine{07361\ \{}
\DoxyCodeLine{07362\ \ \ \ \ \textcolor{comment}{/*\ The\ current\ packet\ ends\ when\ we\ get\ to\ the\ segment\ with\ a\ lacing\ value\ of\ <\ 255\ which\ is\ not\ at\ the\ end\ of\ a\ page.\ */}}
\DoxyCodeLine{07363\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{07364\ \ \ \ \ \ \ \ \ drflac\_bool32\ atEndOfPage\ =\ DRFLAC\_FALSE;}
\DoxyCodeLine{07365\ }
\DoxyCodeLine{07366\ \ \ \ \ \ \ \ \ drflac\_uint8\ bytesRemainingInSeg;}
\DoxyCodeLine{07367\ \ \ \ \ \ \ \ \ drflac\_uint8\ iFirstSeg\ =\ drflac\_oggbs\_\_get\_current\_segment\_index(oggbs,\ \&bytesRemainingInSeg);}
\DoxyCodeLine{07368\ }
\DoxyCodeLine{07369\ \ \ \ \ \ \ \ \ drflac\_uint32\ bytesToEndOfPacketOrPage\ =\ bytesRemainingInSeg;}
\DoxyCodeLine{07370\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (drflac\_uint8\ iSeg\ =\ iFirstSeg;\ iSeg\ <\ oggbs-\/>currentPageHeader.segmentCount;\ ++iSeg)\ \{}
\DoxyCodeLine{07371\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ segmentSize\ =\ oggbs-\/>currentPageHeader.segmentTable[iSeg];}
\DoxyCodeLine{07372\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (segmentSize\ <\ 255)\ \{}
\DoxyCodeLine{07373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (iSeg\ ==\ oggbs-\/>currentPageHeader.segmentCount-\/1)\ \{}
\DoxyCodeLine{07374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ atEndOfPage\ =\ DRFLAC\_TRUE;}
\DoxyCodeLine{07375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07376\ }
\DoxyCodeLine{07377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{07378\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07379\ }
\DoxyCodeLine{07380\ \ \ \ \ \ \ \ \ \ \ \ \ bytesToEndOfPacketOrPage\ +=\ segmentSize;}
\DoxyCodeLine{07381\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07382\ }
\DoxyCodeLine{07383\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{07384\ \textcolor{comment}{\ \ \ \ \ \ \ \ At\ this\ point\ we\ will\ have\ found\ either\ the\ packet\ or\ the\ end\ of\ the\ page.\ If\ were\ at\ the\ end\ of\ the\ page\ we'll}}
\DoxyCodeLine{07385\ \textcolor{comment}{\ \ \ \ \ \ \ \ want\ to\ load\ the\ next\ page\ and\ keep\ searching\ for\ the\ end\ of\ the\ packet.}}
\DoxyCodeLine{07386\ \textcolor{comment}{\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{07387\ \ \ \ \ \ \ \ \ drflac\_oggbs\_\_seek\_physical(oggbs,\ bytesToEndOfPacketOrPage,\ drflac\_seek\_origin\_current);}
\DoxyCodeLine{07388\ \ \ \ \ \ \ \ \ oggbs-\/>bytesRemainingInPage\ -\/=\ bytesToEndOfPacketOrPage;}
\DoxyCodeLine{07389\ }
\DoxyCodeLine{07390\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (atEndOfPage)\ \{}
\DoxyCodeLine{07391\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{07392\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ We're\ potentially\ at\ the\ next\ packet,\ but\ we\ need\ to\ check\ the\ next\ page\ first\ to\ be\ sure\ because\ the\ packet\ may}}
\DoxyCodeLine{07393\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ straddle\ pages.}}
\DoxyCodeLine{07394\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{07395\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_oggbs\_\_goto\_next\_page(oggbs))\ \{}
\DoxyCodeLine{07396\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07397\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07398\ }
\DoxyCodeLine{07399\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ it's\ a\ fresh\ packet\ it\ most\ likely\ means\ we're\ at\ the\ next\ packet.\ */}}
\DoxyCodeLine{07400\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((oggbs-\/>currentPageHeader.headerType\ \&\ 0x01)\ ==\ 0)\ \{}
\DoxyCodeLine{07401\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{07402\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07403\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07404\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We're\ at\ the\ next\ packet.\ */}}
\DoxyCodeLine{07405\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{07406\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07407\ \ \ \ \ \}}
\DoxyCodeLine{07408\ \}}
\DoxyCodeLine{07409\ }
\DoxyCodeLine{07410\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_oggbs\_\_seek\_to\_next\_frame(drflac\_oggbs*\ oggbs)}
\DoxyCodeLine{07411\ \{}
\DoxyCodeLine{07412\ \ \ \ \ \textcolor{comment}{/*\ The\ bitstream\ should\ be\ sitting\ on\ the\ first\ byte\ just\ after\ the\ header\ of\ the\ frame.\ */}}
\DoxyCodeLine{07413\ }
\DoxyCodeLine{07414\ \ \ \ \ \textcolor{comment}{/*\ What\ we're\ actually\ doing\ here\ is\ seeking\ to\ the\ start\ of\ the\ next\ packet.\ */}}
\DoxyCodeLine{07415\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_oggbs\_\_seek\_to\_next\_packet(oggbs);}
\DoxyCodeLine{07416\ \}}
\DoxyCodeLine{07417\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{07418\ }
\DoxyCodeLine{07419\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ drflac\_\_on\_read\_ogg(\textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{void}*\ bufferOut,\ \textcolor{keywordtype}{size\_t}\ bytesToRead)}
\DoxyCodeLine{07420\ \{}
\DoxyCodeLine{07421\ \ \ \ \ drflac\_oggbs*\ oggbs\ =\ (drflac\_oggbs*)pUserData;}
\DoxyCodeLine{07422\ \ \ \ \ drflac\_uint8*\ pRunningBufferOut\ =\ (drflac\_uint8*)bufferOut;}
\DoxyCodeLine{07423\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ bytesRead\ =\ 0;}
\DoxyCodeLine{07424\ }
\DoxyCodeLine{07425\ \ \ \ \ DRFLAC\_ASSERT(oggbs\ !=\ NULL);}
\DoxyCodeLine{07426\ \ \ \ \ DRFLAC\_ASSERT(pRunningBufferOut\ !=\ NULL);}
\DoxyCodeLine{07427\ }
\DoxyCodeLine{07428\ \ \ \ \ \textcolor{comment}{/*\ Reading\ is\ done\ page-\/by-\/page.\ If\ we've\ run\ out\ of\ bytes\ in\ the\ page\ we\ need\ to\ move\ to\ the\ next\ one.\ */}}
\DoxyCodeLine{07429\ \ \ \ \ \textcolor{keywordflow}{while}\ (bytesRead\ <\ bytesToRead)\ \{}
\DoxyCodeLine{07430\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ bytesRemainingToRead\ =\ bytesToRead\ -\/\ bytesRead;}
\DoxyCodeLine{07431\ }
\DoxyCodeLine{07432\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (oggbs-\/>bytesRemainingInPage\ >=\ bytesRemainingToRead)\ \{}
\DoxyCodeLine{07433\ \ \ \ \ \ \ \ \ \ \ \ \ DRFLAC\_COPY\_MEMORY(pRunningBufferOut,\ oggbs-\/>pageData\ +\ (oggbs-\/>pageDataSize\ -\/\ oggbs-\/>bytesRemainingInPage),\ bytesRemainingToRead);}
\DoxyCodeLine{07434\ \ \ \ \ \ \ \ \ \ \ \ \ bytesRead\ +=\ bytesRemainingToRead;}
\DoxyCodeLine{07435\ \ \ \ \ \ \ \ \ \ \ \ \ oggbs-\/>bytesRemainingInPage\ -\/=\ (drflac\_uint32)bytesRemainingToRead;}
\DoxyCodeLine{07436\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{07437\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07438\ }
\DoxyCodeLine{07439\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ we\ get\ here\ it\ means\ some\ of\ the\ requested\ data\ is\ contained\ in\ the\ next\ pages.\ */}}
\DoxyCodeLine{07440\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (oggbs-\/>bytesRemainingInPage\ >\ 0)\ \{}
\DoxyCodeLine{07441\ \ \ \ \ \ \ \ \ \ \ \ \ DRFLAC\_COPY\_MEMORY(pRunningBufferOut,\ oggbs-\/>pageData\ +\ (oggbs-\/>pageDataSize\ -\/\ oggbs-\/>bytesRemainingInPage),\ oggbs-\/>bytesRemainingInPage);}
\DoxyCodeLine{07442\ \ \ \ \ \ \ \ \ \ \ \ \ bytesRead\ +=\ oggbs-\/>bytesRemainingInPage;}
\DoxyCodeLine{07443\ \ \ \ \ \ \ \ \ \ \ \ \ pRunningBufferOut\ +=\ oggbs-\/>bytesRemainingInPage;}
\DoxyCodeLine{07444\ \ \ \ \ \ \ \ \ \ \ \ \ oggbs-\/>bytesRemainingInPage\ =\ 0;}
\DoxyCodeLine{07445\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07446\ }
\DoxyCodeLine{07447\ \ \ \ \ \ \ \ \ DRFLAC\_ASSERT(bytesRemainingToRead\ >\ 0);}
\DoxyCodeLine{07448\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_oggbs\_\_goto\_next\_page(oggbs,\ drflac\_ogg\_recover\_on\_crc\_mismatch))\ \{}
\DoxyCodeLine{07449\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \ \textcolor{comment}{/*\ Failed\ to\ go\ to\ the\ next\ page.\ Might\ have\ simply\ hit\ the\ end\ of\ the\ stream.\ */}}
\DoxyCodeLine{07450\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07451\ \ \ \ \ \}}
\DoxyCodeLine{07452\ }
\DoxyCodeLine{07453\ \ \ \ \ \textcolor{keywordflow}{return}\ bytesRead;}
\DoxyCodeLine{07454\ \}}
\DoxyCodeLine{07455\ }
\DoxyCodeLine{07456\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_on\_seek\_ogg(\textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structoffset}{offset}},\ drflac\_seek\_origin\ origin)}
\DoxyCodeLine{07457\ \{}
\DoxyCodeLine{07458\ \ \ \ \ drflac\_oggbs*\ oggbs\ =\ (drflac\_oggbs*)pUserData;}
\DoxyCodeLine{07459\ \ \ \ \ \textcolor{keywordtype}{int}\ bytesSeeked\ =\ 0;}
\DoxyCodeLine{07460\ }
\DoxyCodeLine{07461\ \ \ \ \ DRFLAC\_ASSERT(oggbs\ !=\ NULL);}
\DoxyCodeLine{07462\ \ \ \ \ DRFLAC\_ASSERT(\mbox{\hyperlink{structoffset}{offset}}\ >=\ 0);\ \ \textcolor{comment}{/*\ <-\/-\/\ Never\ seek\ backwards.\ */}}
\DoxyCodeLine{07463\ }
\DoxyCodeLine{07464\ \ \ \ \ \textcolor{comment}{/*\ Seeking\ is\ always\ forward\ which\ makes\ things\ a\ lot\ simpler.\ */}}
\DoxyCodeLine{07465\ \ \ \ \ \textcolor{keywordflow}{if}\ (origin\ ==\ drflac\_seek\_origin\_start)\ \{}
\DoxyCodeLine{07466\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_oggbs\_\_seek\_physical(oggbs,\ (\textcolor{keywordtype}{int})oggbs-\/>firstBytePos,\ drflac\_seek\_origin\_start))\ \{}
\DoxyCodeLine{07467\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07468\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07469\ }
\DoxyCodeLine{07470\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_oggbs\_\_goto\_next\_page(oggbs,\ drflac\_ogg\_fail\_on\_crc\_mismatch))\ \{}
\DoxyCodeLine{07471\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07472\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07473\ }
\DoxyCodeLine{07474\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_on\_seek\_ogg(pUserData,\ \mbox{\hyperlink{structoffset}{offset}},\ drflac\_seek\_origin\_current);}
\DoxyCodeLine{07475\ \ \ \ \ \}}
\DoxyCodeLine{07476\ }
\DoxyCodeLine{07477\ \ \ \ \ DRFLAC\_ASSERT(origin\ ==\ drflac\_seek\_origin\_current);}
\DoxyCodeLine{07478\ }
\DoxyCodeLine{07479\ \ \ \ \ \textcolor{keywordflow}{while}\ (bytesSeeked\ <\ \mbox{\hyperlink{structoffset}{offset}})\ \{}
\DoxyCodeLine{07480\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bytesRemainingToSeek\ =\ \mbox{\hyperlink{structoffset}{offset}}\ -\/\ bytesSeeked;}
\DoxyCodeLine{07481\ \ \ \ \ \ \ \ \ DRFLAC\_ASSERT(bytesRemainingToSeek\ >=\ 0);}
\DoxyCodeLine{07482\ }
\DoxyCodeLine{07483\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (oggbs-\/>bytesRemainingInPage\ >=\ (\textcolor{keywordtype}{size\_t})bytesRemainingToSeek)\ \{}
\DoxyCodeLine{07484\ \ \ \ \ \ \ \ \ \ \ \ \ bytesSeeked\ +=\ bytesRemainingToSeek;}
\DoxyCodeLine{07485\ \ \ \ \ \ \ \ \ \ \ \ \ (void)bytesSeeked;\ \ \textcolor{comment}{/*\ <-\/-\/\ Silence\ a\ dead\ store\ warning\ emitted\ by\ Clang\ Static\ Analyzer.\ */}}
\DoxyCodeLine{07486\ \ \ \ \ \ \ \ \ \ \ \ \ oggbs-\/>bytesRemainingInPage\ -\/=\ bytesRemainingToSeek;}
\DoxyCodeLine{07487\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{07488\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07489\ }
\DoxyCodeLine{07490\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ we\ get\ here\ it\ means\ some\ of\ the\ requested\ data\ is\ contained\ in\ the\ next\ pages.\ */}}
\DoxyCodeLine{07491\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (oggbs-\/>bytesRemainingInPage\ >\ 0)\ \{}
\DoxyCodeLine{07492\ \ \ \ \ \ \ \ \ \ \ \ \ bytesSeeked\ +=\ (int)oggbs-\/>bytesRemainingInPage;}
\DoxyCodeLine{07493\ \ \ \ \ \ \ \ \ \ \ \ \ oggbs-\/>bytesRemainingInPage\ =\ 0;}
\DoxyCodeLine{07494\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07495\ }
\DoxyCodeLine{07496\ \ \ \ \ \ \ \ \ DRFLAC\_ASSERT(bytesRemainingToSeek\ >\ 0);}
\DoxyCodeLine{07497\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_oggbs\_\_goto\_next\_page(oggbs,\ drflac\_ogg\_fail\_on\_crc\_mismatch))\ \{}
\DoxyCodeLine{07498\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Failed\ to\ go\ to\ the\ next\ page.\ We\ either\ hit\ the\ end\ of\ the\ stream\ or\ had\ a\ CRC\ mismatch.\ */}}
\DoxyCodeLine{07499\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07500\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07501\ \ \ \ \ \}}
\DoxyCodeLine{07502\ }
\DoxyCodeLine{07503\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{07504\ \}}
\DoxyCodeLine{07505\ }
\DoxyCodeLine{07506\ }
\DoxyCodeLine{07507\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_ogg\_\_seek\_to\_pcm\_frame(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ pcmFrameIndex)}
\DoxyCodeLine{07508\ \{}
\DoxyCodeLine{07509\ \ \ \ \ drflac\_oggbs*\ oggbs\ =\ (drflac\_oggbs*)pFlac-\/>\_oggbs;}
\DoxyCodeLine{07510\ \ \ \ \ drflac\_uint64\ originalBytePos;}
\DoxyCodeLine{07511\ \ \ \ \ drflac\_uint64\ runningGranulePosition;}
\DoxyCodeLine{07512\ \ \ \ \ drflac\_uint64\ runningFrameBytePos;}
\DoxyCodeLine{07513\ \ \ \ \ drflac\_uint64\ runningPCMFrameCount;}
\DoxyCodeLine{07514\ }
\DoxyCodeLine{07515\ \ \ \ \ DRFLAC\_ASSERT(oggbs\ !=\ NULL);}
\DoxyCodeLine{07516\ }
\DoxyCodeLine{07517\ \ \ \ \ originalBytePos\ =\ oggbs-\/>currentBytePos;\ \ \ \textcolor{comment}{/*\ For\ recovery.\ Points\ to\ the\ OggS\ identifier.\ */}}
\DoxyCodeLine{07518\ }
\DoxyCodeLine{07519\ \ \ \ \ \textcolor{comment}{/*\ First\ seek\ to\ the\ first\ frame.\ */}}
\DoxyCodeLine{07520\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_seek\_to\_byte(\&pFlac-\/>bs,\ pFlac-\/>firstFLACFramePosInBytes))\ \{}
\DoxyCodeLine{07521\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07522\ \ \ \ \ \}}
\DoxyCodeLine{07523\ \ \ \ \ oggbs-\/>bytesRemainingInPage\ =\ 0;}
\DoxyCodeLine{07524\ }
\DoxyCodeLine{07525\ \ \ \ \ runningGranulePosition\ =\ 0;}
\DoxyCodeLine{07526\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{07527\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_oggbs\_\_goto\_next\_page(oggbs,\ drflac\_ogg\_recover\_on\_crc\_mismatch))\ \{}
\DoxyCodeLine{07528\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_oggbs\_\_seek\_physical(oggbs,\ originalBytePos,\ drflac\_seek\_origin\_start);}
\DoxyCodeLine{07529\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \textcolor{comment}{/*\ Never\ did\ find\ that\ sample...\ */}}
\DoxyCodeLine{07530\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07531\ }
\DoxyCodeLine{07532\ \ \ \ \ \ \ \ \ runningFrameBytePos\ =\ oggbs-\/>currentBytePos\ -\/\ drflac\_ogg\_\_get\_page\_header\_size(\&oggbs-\/>currentPageHeader)\ -\/\ oggbs-\/>pageDataSize;}
\DoxyCodeLine{07533\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (oggbs-\/>currentPageHeader.granulePosition\ >=\ pcmFrameIndex)\ \{}
\DoxyCodeLine{07534\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \textcolor{comment}{/*\ The\ sample\ is\ somewhere\ in\ the\ previous\ page.\ */}}
\DoxyCodeLine{07535\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07536\ }
\DoxyCodeLine{07537\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{07538\ \textcolor{comment}{\ \ \ \ \ \ \ \ At\ this\ point\ we\ know\ the\ sample\ is\ not\ in\ the\ previous\ page.\ It\ could\ possibly\ be\ in\ this\ page.\ For\ simplicity\ we}}
\DoxyCodeLine{07539\ \textcolor{comment}{\ \ \ \ \ \ \ \ disregard\ any\ pages\ that\ do\ not\ begin\ a\ fresh\ packet.}}
\DoxyCodeLine{07540\ \textcolor{comment}{\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{07541\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((oggbs-\/>currentPageHeader.headerType\ \&\ 0x01)\ ==\ 0)\ \{\ \ \ \ \textcolor{comment}{/*\ <-\/-\/\ Is\ it\ a\ fresh\ page?\ */}}
\DoxyCodeLine{07542\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (oggbs-\/>currentPageHeader.segmentTable[0]\ >=\ 2)\ \{}
\DoxyCodeLine{07543\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ firstBytesInPage[2];}
\DoxyCodeLine{07544\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ firstBytesInPage[0]\ =\ oggbs-\/>pageData[0];}
\DoxyCodeLine{07545\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ firstBytesInPage[1]\ =\ oggbs-\/>pageData[1];}
\DoxyCodeLine{07546\ }
\DoxyCodeLine{07547\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((firstBytesInPage[0]\ ==\ 0xFF)\ \&\&\ (firstBytesInPage[1]\ \&\ 0xFC)\ ==\ 0xF8)\ \{\ \ \ \ \textcolor{comment}{/*\ <-\/-\/\ Does\ the\ page\ begin\ with\ a\ frame's\ sync\ code?\ */}}
\DoxyCodeLine{07548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ runningGranulePosition\ =\ oggbs-\/>currentPageHeader.granulePosition;}
\DoxyCodeLine{07549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07550\ }
\DoxyCodeLine{07551\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{07552\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07553\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07554\ \ \ \ \ \}}
\DoxyCodeLine{07555\ }
\DoxyCodeLine{07556\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{07557\ \textcolor{comment}{\ \ \ \ We\ found\ the\ page\ that\ that\ is\ closest\ to\ the\ sample,\ so\ now\ we\ need\ to\ find\ it.\ The\ first\ thing\ to\ do\ is\ seek\ to\ the}}
\DoxyCodeLine{07558\ \textcolor{comment}{\ \ \ \ start\ of\ that\ page.\ In\ the\ loop\ above\ we\ checked\ that\ it\ was\ a\ fresh\ page\ which\ means\ this\ page\ is\ also\ the\ start\ of}}
\DoxyCodeLine{07559\ \textcolor{comment}{\ \ \ \ a\ new\ frame.\ This\ property\ means\ that\ after\ we've\ seeked\ to\ the\ page\ we\ can\ immediately\ start\ looping\ over\ frames\ until}}
\DoxyCodeLine{07560\ \textcolor{comment}{\ \ \ \ we\ find\ the\ one\ containing\ the\ target\ sample.}}
\DoxyCodeLine{07561\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{07562\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_oggbs\_\_seek\_physical(oggbs,\ runningFrameBytePos,\ drflac\_seek\_origin\_start))\ \{}
\DoxyCodeLine{07563\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07564\ \ \ \ \ \}}
\DoxyCodeLine{07565\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_oggbs\_\_goto\_next\_page(oggbs,\ drflac\_ogg\_recover\_on\_crc\_mismatch))\ \{}
\DoxyCodeLine{07566\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07567\ \ \ \ \ \}}
\DoxyCodeLine{07568\ }
\DoxyCodeLine{07569\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{07570\ \textcolor{comment}{\ \ \ \ At\ this\ point\ we'll\ be\ sitting\ on\ the\ first\ byte\ of\ the\ frame\ header\ of\ the\ first\ frame\ in\ the\ page.\ We\ just\ keep}}
\DoxyCodeLine{07571\ \textcolor{comment}{\ \ \ \ looping\ over\ these\ frames\ until\ we\ find\ the\ one\ containing\ the\ sample\ we're\ after.}}
\DoxyCodeLine{07572\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{07573\ \ \ \ \ runningPCMFrameCount\ =\ runningGranulePosition;}
\DoxyCodeLine{07574\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{07575\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{07576\ \textcolor{comment}{\ \ \ \ \ \ \ \ There\ are\ two\ ways\ to\ find\ the\ sample\ and\ seek\ past\ irrelevant\ frames:}}
\DoxyCodeLine{07577\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ 1)\ Use\ the\ native\ FLAC\ decoder.}}
\DoxyCodeLine{07578\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ 2)\ Use\ Ogg's\ framing\ system.}}
\DoxyCodeLine{07579\ \textcolor{comment}{}}
\DoxyCodeLine{07580\ \textcolor{comment}{\ \ \ \ \ \ \ \ Both\ of\ these\ options\ have\ their\ own\ pros\ and\ cons.\ Using\ the\ native\ FLAC\ decoder\ is\ slower\ because\ it\ needs\ to}}
\DoxyCodeLine{07581\ \textcolor{comment}{\ \ \ \ \ \ \ \ do\ a\ full\ decode\ of\ the\ frame.\ Using\ Ogg's\ framing\ system\ is\ faster,\ but\ more\ complicated\ and\ involves\ some\ code}}
\DoxyCodeLine{07582\ \textcolor{comment}{\ \ \ \ \ \ \ \ duplication\ for\ the\ decoding\ of\ frame\ headers.}}
\DoxyCodeLine{07583\ \textcolor{comment}{}}
\DoxyCodeLine{07584\ \textcolor{comment}{\ \ \ \ \ \ \ \ Another\ thing\ to\ consider\ is\ that\ using\ the\ Ogg\ framing\ system\ will\ perform\ direct\ seeking\ of\ the\ physical\ Ogg}}
\DoxyCodeLine{07585\ \textcolor{comment}{\ \ \ \ \ \ \ \ bitstream.\ This\ is\ important\ to\ consider\ because\ it\ means\ we\ cannot\ read\ data\ from\ the\ drflac\_bs\ object\ using\ the}}
\DoxyCodeLine{07586\ \textcolor{comment}{\ \ \ \ \ \ \ \ standard\ drflac\_\_*()\ APIs\ because\ that\ will\ read\ in\ extra\ data\ for\ its\ own\ internal\ caching\ which\ in\ turn\ breaks}}
\DoxyCodeLine{07587\ \textcolor{comment}{\ \ \ \ \ \ \ \ the\ positioning\ of\ the\ read\ pointer\ of\ the\ physical\ Ogg\ bitstream.\ Therefore,\ anything\ that\ would\ normally\ be\ read}}
\DoxyCodeLine{07588\ \textcolor{comment}{\ \ \ \ \ \ \ \ using\ the\ native\ FLAC\ decoding\ APIs,\ such\ as\ drflac\_\_read\_next\_flac\_frame\_header(),\ need\ to\ be\ re-\/implemented\ so\ as\ to}}
\DoxyCodeLine{07589\ \textcolor{comment}{\ \ \ \ \ \ \ \ avoid\ the\ use\ of\ the\ drflac\_bs\ object.}}
\DoxyCodeLine{07590\ \textcolor{comment}{}}
\DoxyCodeLine{07591\ \textcolor{comment}{\ \ \ \ \ \ \ \ Considering\ these\ issues,\ I\ have\ decided\ to\ use\ the\ slower\ native\ FLAC\ decoding\ method\ for\ the\ following\ reasons:}}
\DoxyCodeLine{07592\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ 1)\ Seeking\ is\ already\ partially\ accelerated\ using\ Ogg's\ paging\ system\ in\ the\ code\ block\ above.}}
\DoxyCodeLine{07593\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ 2)\ Seeking\ in\ an\ Ogg\ encapsulated\ FLAC\ stream\ is\ probably\ quite\ uncommon.}}
\DoxyCodeLine{07594\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ 3)\ Simplicity.}}
\DoxyCodeLine{07595\ \textcolor{comment}{\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{07596\ \ \ \ \ \ \ \ \ drflac\_uint64\ firstPCMFrameInFLACFrame\ =\ 0;}
\DoxyCodeLine{07597\ \ \ \ \ \ \ \ \ drflac\_uint64\ lastPCMFrameInFLACFrame\ =\ 0;}
\DoxyCodeLine{07598\ \ \ \ \ \ \ \ \ drflac\_uint64\ pcmFrameCountInThisFrame;}
\DoxyCodeLine{07599\ }
\DoxyCodeLine{07600\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_next\_flac\_frame\_header(\&pFlac-\/>bs,\ pFlac-\/>bitsPerSample,\ \&pFlac-\/>currentFLACFrame.header))\ \{}
\DoxyCodeLine{07601\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07602\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07603\ }
\DoxyCodeLine{07604\ \ \ \ \ \ \ \ \ drflac\_\_get\_pcm\_frame\_range\_of\_current\_flac\_frame(pFlac,\ \&firstPCMFrameInFLACFrame,\ \&lastPCMFrameInFLACFrame);}
\DoxyCodeLine{07605\ }
\DoxyCodeLine{07606\ \ \ \ \ \ \ \ \ pcmFrameCountInThisFrame\ =\ (lastPCMFrameInFLACFrame\ -\/\ firstPCMFrameInFLACFrame)\ +\ 1;}
\DoxyCodeLine{07607\ }
\DoxyCodeLine{07608\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ we\ are\ seeking\ to\ the\ end\ of\ the\ file\ and\ we've\ just\ hit\ it,\ we're\ done.\ */}}
\DoxyCodeLine{07609\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pcmFrameIndex\ ==\ pFlac-\/>totalPCMFrameCount\ \&\&\ (runningPCMFrameCount\ +\ pcmFrameCountInThisFrame)\ ==\ pFlac-\/>totalPCMFrameCount)\ \{}
\DoxyCodeLine{07610\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_result\ result\ =\ drflac\_\_decode\_flac\_frame(pFlac);}
\DoxyCodeLine{07611\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{07612\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentPCMFrame\ =\ pcmFrameIndex;}
\DoxyCodeLine{07613\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentFLACFrame.pcmFramesRemaining\ =\ 0;}
\DoxyCodeLine{07614\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{07615\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07616\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07617\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07618\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07619\ }
\DoxyCodeLine{07620\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pcmFrameIndex\ <\ (runningPCMFrameCount\ +\ pcmFrameCountInThisFrame))\ \{}
\DoxyCodeLine{07621\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{07622\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ The\ sample\ should\ be\ in\ this\ FLAC\ frame.\ We\ need\ to\ fully\ decode\ it,\ however\ if\ it's\ an\ invalid\ frame\ (a\ CRC\ mismatch),\ we\ need\ to\ pretend}}
\DoxyCodeLine{07623\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ it\ never\ existed\ and\ keep\ iterating.}}
\DoxyCodeLine{07624\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{07625\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_result\ result\ =\ drflac\_\_decode\_flac\_frame(pFlac);}
\DoxyCodeLine{07626\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{07627\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ frame\ is\ valid.\ We\ just\ need\ to\ skip\ over\ some\ samples\ to\ ensure\ it's\ sample-\/exact.\ */}}
\DoxyCodeLine{07628\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ pcmFramesToDecode\ =\ (size\_t)(pcmFrameIndex\ -\/\ runningPCMFrameCount);\ \ \ \ \textcolor{comment}{/*\ <-\/-\/\ Safe\ cast\ because\ the\ maximum\ number\ of\ samples\ in\ a\ frame\ is\ 65535.\ */}}
\DoxyCodeLine{07629\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pcmFramesToDecode\ ==\ 0)\ \{}
\DoxyCodeLine{07630\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{07631\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07632\ }
\DoxyCodeLine{07633\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentPCMFrame\ =\ runningPCMFrameCount;}
\DoxyCodeLine{07634\ }
\DoxyCodeLine{07635\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_seek\_forward\_by\_pcm\_frames(pFlac,\ pcmFramesToDecode)\ ==\ pcmFramesToDecode;\ \ \textcolor{comment}{/*\ <-\/-\/\ If\ this\ fails,\ something\ bad\ has\ happened\ (it\ should\ never\ fail).\ */}}
\DoxyCodeLine{07636\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07637\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_CRC\_MISMATCH)\ \{}
\DoxyCodeLine{07638\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};\ \ \ \textcolor{comment}{/*\ CRC\ mismatch.\ Pretend\ this\ frame\ never\ existed.\ */}}
\DoxyCodeLine{07639\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07640\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07641\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07642\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07643\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07644\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{07645\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ It's\ not\ in\ this\ frame.\ We\ need\ to\ seek\ past\ the\ frame,\ but\ check\ if\ there\ was\ a\ CRC\ mismatch.\ If\ so,\ we\ pretend\ this}}
\DoxyCodeLine{07646\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ frame\ never\ existed\ and\ leave\ the\ running\ sample\ count\ untouched.}}
\DoxyCodeLine{07647\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{07648\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_result\ result\ =\ drflac\_\_seek\_to\_next\_flac\_frame(pFlac);}
\DoxyCodeLine{07649\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{07650\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ runningPCMFrameCount\ +=\ pcmFrameCountInThisFrame;}
\DoxyCodeLine{07651\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07652\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_CRC\_MISMATCH)\ \{}
\DoxyCodeLine{07653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};\ \ \ \textcolor{comment}{/*\ CRC\ mismatch.\ Pretend\ this\ frame\ never\ existed.\ */}}
\DoxyCodeLine{07654\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07655\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07656\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07657\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07658\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07659\ \ \ \ \ \}}
\DoxyCodeLine{07660\ \}}
\DoxyCodeLine{07661\ }
\DoxyCodeLine{07662\ }
\DoxyCodeLine{07663\ }
\DoxyCodeLine{07664\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_init\_private\_\_ogg(drflac\_init\_info*\ pInit,\ drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ drflac\_meta\_proc\ onMeta,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{void}*\ pUserDataMD,\ drflac\_bool32\ relaxed)}
\DoxyCodeLine{07665\ \{}
\DoxyCodeLine{07666\ \ \ \ \ drflac\_ogg\_page\_header\ header;}
\DoxyCodeLine{07667\ \ \ \ \ drflac\_uint32\ crc32\ =\ DRFLAC\_OGG\_CAPTURE\_PATTERN\_CRC32;}
\DoxyCodeLine{07668\ \ \ \ \ drflac\_uint32\ bytesRead\ =\ 0;}
\DoxyCodeLine{07669\ }
\DoxyCodeLine{07670\ \ \ \ \ \textcolor{comment}{/*\ Pre\ Condition:\ The\ bit\ stream\ should\ be\ sitting\ just\ past\ the\ 4-\/byte\ OggS\ capture\ pattern.\ */}}
\DoxyCodeLine{07671\ \ \ \ \ (void)relaxed;}
\DoxyCodeLine{07672\ }
\DoxyCodeLine{07673\ \ \ \ \ pInit-\/>container\ =\ drflac\_container\_ogg;}
\DoxyCodeLine{07674\ \ \ \ \ pInit-\/>oggFirstBytePos\ =\ 0;}
\DoxyCodeLine{07675\ }
\DoxyCodeLine{07676\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{07677\ \textcolor{comment}{\ \ \ \ We'll\ get\ here\ if\ the\ first\ 4\ bytes\ of\ the\ stream\ were\ the\ OggS\ capture\ pattern,\ however\ it\ doesn't\ necessarily\ mean\ the}}
\DoxyCodeLine{07678\ \textcolor{comment}{\ \ \ \ stream\ includes\ FLAC\ encoded\ audio.\ To\ check\ for\ this\ we\ need\ to\ scan\ the\ beginning-\/of-\/stream\ page\ markers\ and\ check\ if}}
\DoxyCodeLine{07679\ \textcolor{comment}{\ \ \ \ any\ match\ the\ FLAC\ specification.\ Important\ to\ keep\ in\ mind\ that\ the\ stream\ may\ be\ multiplexed.}}
\DoxyCodeLine{07680\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{07681\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_ogg\_\_read\_page\_header\_after\_capture\_pattern(onRead,\ pUserData,\ \&header,\ \&bytesRead,\ \&crc32)\ !=\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{07682\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07683\ \ \ \ \ \}}
\DoxyCodeLine{07684\ \ \ \ \ pInit-\/>runningFilePos\ +=\ bytesRead;}
\DoxyCodeLine{07685\ }
\DoxyCodeLine{07686\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{07687\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pageBodySize;}
\DoxyCodeLine{07688\ }
\DoxyCodeLine{07689\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Break\ if\ we're\ past\ the\ beginning\ of\ stream\ page.\ */}}
\DoxyCodeLine{07690\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((header.headerType\ \&\ 0x02)\ ==\ 0)\ \{}
\DoxyCodeLine{07691\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07692\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07693\ }
\DoxyCodeLine{07694\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Check\ if\ it's\ a\ FLAC\ header.\ */}}
\DoxyCodeLine{07695\ \ \ \ \ \ \ \ \ pageBodySize\ =\ drflac\_ogg\_\_get\_page\_body\_size(\&header);}
\DoxyCodeLine{07696\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pageBodySize\ ==\ 51)\ \{\ \ \ \textcolor{comment}{/*\ 51\ =\ the\ lacing\ value\ of\ the\ FLAC\ header\ packet.\ */}}
\DoxyCodeLine{07697\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ It\ could\ be\ a\ FLAC\ page...\ */}}
\DoxyCodeLine{07698\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ bytesRemainingInPage\ =\ pageBodySize;}
\DoxyCodeLine{07699\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ packetType;}
\DoxyCodeLine{07700\ }
\DoxyCodeLine{07701\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ \&packetType,\ 1)\ !=\ 1)\ \{}
\DoxyCodeLine{07702\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07703\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07704\ }
\DoxyCodeLine{07705\ \ \ \ \ \ \ \ \ \ \ \ \ bytesRemainingInPage\ -\/=\ 1;}
\DoxyCodeLine{07706\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (packetType\ ==\ 0x7F)\ \{}
\DoxyCodeLine{07707\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Increasingly\ more\ likely\ to\ be\ a\ FLAC\ page...\ */}}
\DoxyCodeLine{07708\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ sig[4];}
\DoxyCodeLine{07709\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ sig,\ 4)\ !=\ 4)\ \{}
\DoxyCodeLine{07710\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07711\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07712\ }
\DoxyCodeLine{07713\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bytesRemainingInPage\ -\/=\ 4;}
\DoxyCodeLine{07714\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sig[0]\ ==\ \textcolor{charliteral}{'F'}\ \&\&\ sig[1]\ ==\ \textcolor{charliteral}{'L'}\ \&\&\ sig[2]\ ==\ \textcolor{charliteral}{'A'}\ \&\&\ sig[3]\ ==\ \textcolor{charliteral}{'C'})\ \{}
\DoxyCodeLine{07715\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Almost\ certainly\ a\ FLAC\ page...\ */}}
\DoxyCodeLine{07716\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ mappingVersion[2];}
\DoxyCodeLine{07717\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ mappingVersion,\ 2)\ !=\ 2)\ \{}
\DoxyCodeLine{07718\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07719\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07720\ }
\DoxyCodeLine{07721\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (mappingVersion[0]\ !=\ 1)\ \{}
\DoxyCodeLine{07722\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \textcolor{comment}{/*\ Only\ supporting\ version\ 1.x\ of\ the\ Ogg\ mapping.\ */}}
\DoxyCodeLine{07723\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07724\ }
\DoxyCodeLine{07725\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{07726\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ The\ next\ 2\ bytes\ are\ the\ non-\/audio\ packets,\ not\ including\ this\ one.\ We\ don't\ care\ about\ this\ because\ we're\ going\ to}}
\DoxyCodeLine{07727\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ be\ handling\ it\ in\ a\ generic\ way\ based\ on\ the\ serial\ number\ and\ packet\ types.}}
\DoxyCodeLine{07728\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{07729\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!onSeek(pUserData,\ 2,\ drflac\_seek\_origin\_current))\ \{}
\DoxyCodeLine{07730\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07731\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07732\ }
\DoxyCodeLine{07733\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Expecting\ the\ native\ FLAC\ signature\ "{}fLaC"{}.\ */}}
\DoxyCodeLine{07734\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ sig,\ 4)\ !=\ 4)\ \{}
\DoxyCodeLine{07735\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07736\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07737\ }
\DoxyCodeLine{07738\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sig[0]\ ==\ \textcolor{charliteral}{'f'}\ \&\&\ sig[1]\ ==\ \textcolor{charliteral}{'L'}\ \&\&\ sig[2]\ ==\ \textcolor{charliteral}{'a'}\ \&\&\ sig[3]\ ==\ \textcolor{charliteral}{'C'})\ \{}
\DoxyCodeLine{07739\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ remaining\ data\ in\ the\ page\ should\ be\ the\ STREAMINFO\ block.\ */}}
\DoxyCodeLine{07740\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdrflac__streaminfo}{drflac\_streaminfo}}\ streaminfo;}
\DoxyCodeLine{07741\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ isLastBlock;}
\DoxyCodeLine{07742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ blockType;}
\DoxyCodeLine{07743\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ blockSize;}
\DoxyCodeLine{07744\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_and\_decode\_block\_header(onRead,\ pUserData,\ \&isLastBlock,\ \&blockType,\ \&blockSize))\ \{}
\DoxyCodeLine{07745\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07746\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07747\ }
\DoxyCodeLine{07748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (blockType\ !=\ DRFLAC\_METADATA\_BLOCK\_TYPE\_STREAMINFO\ ||\ blockSize\ !=\ 34)\ \{}
\DoxyCodeLine{07749\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \textcolor{comment}{/*\ Invalid\ block\ type.\ First\ block\ must\ be\ the\ STREAMINFO\ block.\ */}}
\DoxyCodeLine{07750\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07751\ }
\DoxyCodeLine{07752\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_read\_streaminfo(onRead,\ pUserData,\ \&streaminfo))\ \{}
\DoxyCodeLine{07753\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Success!\ */}}
\DoxyCodeLine{07754\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>hasStreamInfoBlock\ \ \ \ \ \ =\ DRFLAC\_TRUE;}
\DoxyCodeLine{07755\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>sampleRate\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ streaminfo.sampleRate;}
\DoxyCodeLine{07756\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>channels\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ streaminfo.channels;}
\DoxyCodeLine{07757\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>bitsPerSample\ \ \ \ \ \ \ \ \ \ \ =\ streaminfo.bitsPerSample;}
\DoxyCodeLine{07758\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>totalPCMFrameCount\ \ \ \ \ \ =\ streaminfo.totalPCMFrameCount;}
\DoxyCodeLine{07759\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>maxBlockSizeInPCMFrames\ =\ streaminfo.maxBlockSizeInPCMFrames;}
\DoxyCodeLine{07760\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>hasMetadataBlocks\ \ \ \ \ \ \ =\ !isLastBlock;}
\DoxyCodeLine{07761\ }
\DoxyCodeLine{07762\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onMeta)\ \{}
\DoxyCodeLine{07763\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdrflac__metadata}{drflac\_metadata}}\ metadata;}
\DoxyCodeLine{07764\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.type\ =\ DRFLAC\_METADATA\_BLOCK\_TYPE\_STREAMINFO;}
\DoxyCodeLine{07765\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.pRawData\ =\ NULL;}
\DoxyCodeLine{07766\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.rawDataSize\ =\ 0;}
\DoxyCodeLine{07767\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ metadata.data.streaminfo\ =\ streaminfo;}
\DoxyCodeLine{07768\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ onMeta(pUserDataMD,\ \&metadata);}
\DoxyCodeLine{07769\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07770\ }
\DoxyCodeLine{07771\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>runningFilePos\ \ +=\ pageBodySize;}
\DoxyCodeLine{07772\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>oggFirstBytePos\ \ =\ pInit-\/>runningFilePos\ -\/\ 79;\ \ \ \textcolor{comment}{/*\ Subtracting\ 79\ will\ place\ us\ right\ on\ top\ of\ the\ "{}OggS"{}\ identifier\ of\ the\ FLAC\ bos\ page.\ */}}
\DoxyCodeLine{07773\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>oggSerial\ \ \ \ \ \ \ \ =\ header.serialNumber;}
\DoxyCodeLine{07774\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>oggBosHeader\ \ \ \ \ =\ header;}
\DoxyCodeLine{07775\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{07776\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07777\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Failed\ to\ read\ STREAMINFO\ block.\ Aww,\ so\ close...\ */}}
\DoxyCodeLine{07778\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07779\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07780\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07781\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Invalid\ file.\ */}}
\DoxyCodeLine{07782\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07783\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07784\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07785\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Not\ a\ FLAC\ header.\ Skip\ it.\ */}}
\DoxyCodeLine{07786\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!onSeek(pUserData,\ bytesRemainingInPage,\ drflac\_seek\_origin\_current))\ \{}
\DoxyCodeLine{07787\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07788\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07789\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07790\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07791\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Not\ a\ FLAC\ header.\ Seek\ past\ the\ entire\ page\ and\ move\ on\ to\ the\ next.\ */}}
\DoxyCodeLine{07792\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!onSeek(pUserData,\ bytesRemainingInPage,\ drflac\_seek\_origin\_current))\ \{}
\DoxyCodeLine{07793\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07794\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07795\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07796\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07797\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!onSeek(pUserData,\ pageBodySize,\ drflac\_seek\_origin\_current))\ \{}
\DoxyCodeLine{07798\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07799\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07800\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07801\ }
\DoxyCodeLine{07802\ \ \ \ \ \ \ \ \ pInit-\/>runningFilePos\ +=\ pageBodySize;}
\DoxyCodeLine{07803\ }
\DoxyCodeLine{07804\ }
\DoxyCodeLine{07805\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Read\ the\ header\ of\ the\ next\ page.\ */}}
\DoxyCodeLine{07806\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_ogg\_\_read\_page\_header(onRead,\ pUserData,\ \&header,\ \&bytesRead,\ \&crc32)\ !=\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{07807\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07808\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07809\ \ \ \ \ \ \ \ \ pInit-\/>runningFilePos\ +=\ bytesRead;}
\DoxyCodeLine{07810\ \ \ \ \ \}}
\DoxyCodeLine{07811\ }
\DoxyCodeLine{07812\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{07813\ \textcolor{comment}{\ \ \ \ If\ we\ get\ here\ it\ means\ we\ found\ a\ FLAC\ audio\ stream.\ We\ should\ be\ sitting\ on\ the\ first\ byte\ of\ the\ header\ of\ the\ next\ page.\ The\ next}}
\DoxyCodeLine{07814\ \textcolor{comment}{\ \ \ \ packets\ in\ the\ FLAC\ logical\ stream\ contain\ the\ metadata.\ The\ only\ thing\ left\ to\ do\ in\ the\ initialization\ phase\ for\ Ogg\ is\ to\ create\ the}}
\DoxyCodeLine{07815\ \textcolor{comment}{\ \ \ \ Ogg\ bistream\ object.}}
\DoxyCodeLine{07816\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{07817\ \ \ \ \ pInit-\/>hasMetadataBlocks\ =\ DRFLAC\_TRUE;\ \ \ \ \textcolor{comment}{/*\ <-\/-\/\ Always\ have\ at\ least\ VORBIS\_COMMENT\ metadata\ block.\ */}}
\DoxyCodeLine{07818\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{07819\ \}}
\DoxyCodeLine{07820\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{07821\ }
\DoxyCodeLine{07822\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_init\_private(drflac\_init\_info*\ pInit,\ drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ drflac\_meta\_proc\ onMeta,\ drflac\_container\ container,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{void}*\ pUserDataMD)}
\DoxyCodeLine{07823\ \{}
\DoxyCodeLine{07824\ \ \ \ \ drflac\_bool32\ relaxed;}
\DoxyCodeLine{07825\ \ \ \ \ drflac\_uint8\ \textcolor{keywordtype}{id}[4];}
\DoxyCodeLine{07826\ }
\DoxyCodeLine{07827\ \ \ \ \ \textcolor{keywordflow}{if}\ (pInit\ ==\ NULL\ ||\ onRead\ ==\ NULL\ ||\ onSeek\ ==\ NULL)\ \{}
\DoxyCodeLine{07828\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07829\ \ \ \ \ \}}
\DoxyCodeLine{07830\ }
\DoxyCodeLine{07831\ \ \ \ \ DRFLAC\_ZERO\_MEMORY(pInit,\ \textcolor{keyword}{sizeof}(*pInit));}
\DoxyCodeLine{07832\ \ \ \ \ pInit-\/>onRead\ \ \ \ \ \ \ =\ onRead;}
\DoxyCodeLine{07833\ \ \ \ \ pInit-\/>onSeek\ \ \ \ \ \ \ =\ onSeek;}
\DoxyCodeLine{07834\ \ \ \ \ pInit-\/>onMeta\ \ \ \ \ \ \ =\ onMeta;}
\DoxyCodeLine{07835\ \ \ \ \ pInit-\/>container\ \ \ \ =\ container;}
\DoxyCodeLine{07836\ \ \ \ \ pInit-\/>pUserData\ \ \ \ =\ pUserData;}
\DoxyCodeLine{07837\ \ \ \ \ pInit-\/>pUserDataMD\ \ =\ pUserDataMD;}
\DoxyCodeLine{07838\ }
\DoxyCodeLine{07839\ \ \ \ \ pInit-\/>bs.onRead\ \ \ \ =\ onRead;}
\DoxyCodeLine{07840\ \ \ \ \ pInit-\/>bs.onSeek\ \ \ \ =\ onSeek;}
\DoxyCodeLine{07841\ \ \ \ \ pInit-\/>bs.pUserData\ =\ pUserData;}
\DoxyCodeLine{07842\ \ \ \ \ drflac\_\_reset\_cache(\&pInit-\/>bs);}
\DoxyCodeLine{07843\ }
\DoxyCodeLine{07844\ }
\DoxyCodeLine{07845\ \ \ \ \ \textcolor{comment}{/*\ If\ the\ container\ is\ explicitly\ defined\ then\ we\ can\ try\ opening\ in\ relaxed\ mode.\ */}}
\DoxyCodeLine{07846\ \ \ \ \ relaxed\ =\ container\ !=\ drflac\_container\_unknown;}
\DoxyCodeLine{07847\ }
\DoxyCodeLine{07848\ \ \ \ \ \textcolor{comment}{/*\ Skip\ over\ any\ ID3\ tags.\ */}}
\DoxyCodeLine{07849\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{07850\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ \textcolor{keywordtype}{id},\ 4)\ !=\ 4)\ \{}
\DoxyCodeLine{07851\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \textcolor{comment}{/*\ Ran\ out\ of\ data.\ */}}
\DoxyCodeLine{07852\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07853\ \ \ \ \ \ \ \ \ pInit-\/>runningFilePos\ +=\ 4;}
\DoxyCodeLine{07854\ }
\DoxyCodeLine{07855\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keywordtype}{id}[0]\ ==\ \textcolor{charliteral}{'I'}\ \&\&\ \textcolor{keywordtype}{id}[1]\ ==\ \textcolor{charliteral}{'D'}\ \&\&\ \textcolor{keywordtype}{id}[2]\ ==\ \textcolor{charliteral}{'3'})\ \{}
\DoxyCodeLine{07856\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ header[6];}
\DoxyCodeLine{07857\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint8\ flags;}
\DoxyCodeLine{07858\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ headerSize;}
\DoxyCodeLine{07859\ }
\DoxyCodeLine{07860\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (onRead(pUserData,\ header,\ 6)\ !=\ 6)\ \{}
\DoxyCodeLine{07861\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \textcolor{comment}{/*\ Ran\ out\ of\ data.\ */}}
\DoxyCodeLine{07862\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07863\ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>runningFilePos\ +=\ 6;}
\DoxyCodeLine{07864\ }
\DoxyCodeLine{07865\ \ \ \ \ \ \ \ \ \ \ \ \ flags\ =\ header[1];}
\DoxyCodeLine{07866\ }
\DoxyCodeLine{07867\ \ \ \ \ \ \ \ \ \ \ \ \ DRFLAC\_COPY\_MEMORY(\&headerSize,\ header+2,\ 4);}
\DoxyCodeLine{07868\ \ \ \ \ \ \ \ \ \ \ \ \ headerSize\ =\ drflac\_\_unsynchsafe\_32(drflac\_\_be2host\_32(headerSize));}
\DoxyCodeLine{07869\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (flags\ \&\ 0x10)\ \{}
\DoxyCodeLine{07870\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ headerSize\ +=\ 10;}
\DoxyCodeLine{07871\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07872\ }
\DoxyCodeLine{07873\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!onSeek(pUserData,\ headerSize,\ drflac\_seek\_origin\_current))\ \{}
\DoxyCodeLine{07874\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \ \ \textcolor{comment}{/*\ Failed\ to\ seek\ past\ the\ tag.\ */}}
\DoxyCodeLine{07875\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07876\ \ \ \ \ \ \ \ \ \ \ \ \ pInit-\/>runningFilePos\ +=\ headerSize;}
\DoxyCodeLine{07877\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07878\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{07879\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07880\ \ \ \ \ \}}
\DoxyCodeLine{07881\ }
\DoxyCodeLine{07882\ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keywordtype}{id}[0]\ ==\ \textcolor{charliteral}{'f'}\ \&\&\ \textcolor{keywordtype}{id}[1]\ ==\ \textcolor{charliteral}{'L'}\ \&\&\ \textcolor{keywordtype}{id}[2]\ ==\ \textcolor{charliteral}{'a'}\ \&\&\ \textcolor{keywordtype}{id}[3]\ ==\ \textcolor{charliteral}{'C'})\ \{}
\DoxyCodeLine{07883\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_init\_private\_\_native(pInit,\ onRead,\ onSeek,\ onMeta,\ pUserData,\ pUserDataMD,\ relaxed);}
\DoxyCodeLine{07884\ \ \ \ \ \}}
\DoxyCodeLine{07885\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{07886\ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keywordtype}{id}[0]\ ==\ \textcolor{charliteral}{'O'}\ \&\&\ \textcolor{keywordtype}{id}[1]\ ==\ \textcolor{charliteral}{'g'}\ \&\&\ \textcolor{keywordtype}{id}[2]\ ==\ \textcolor{charliteral}{'g'}\ \&\&\ \textcolor{keywordtype}{id}[3]\ ==\ \textcolor{charliteral}{'S'})\ \{}
\DoxyCodeLine{07887\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_init\_private\_\_ogg(pInit,\ onRead,\ onSeek,\ onMeta,\ pUserData,\ pUserDataMD,\ relaxed);}
\DoxyCodeLine{07888\ \ \ \ \ \}}
\DoxyCodeLine{07889\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{07890\ }
\DoxyCodeLine{07891\ \ \ \ \ \textcolor{comment}{/*\ If\ we\ get\ here\ it\ means\ we\ likely\ don't\ have\ a\ header.\ Try\ opening\ in\ relaxed\ mode,\ if\ applicable.\ */}}
\DoxyCodeLine{07892\ \ \ \ \ \textcolor{keywordflow}{if}\ (relaxed)\ \{}
\DoxyCodeLine{07893\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (container\ ==\ drflac\_container\_native)\ \{}
\DoxyCodeLine{07894\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_init\_private\_\_native(pInit,\ onRead,\ onSeek,\ onMeta,\ pUserData,\ pUserDataMD,\ relaxed);}
\DoxyCodeLine{07895\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07896\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{07897\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (container\ ==\ drflac\_container\_ogg)\ \{}
\DoxyCodeLine{07898\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_init\_private\_\_ogg(pInit,\ onRead,\ onSeek,\ onMeta,\ pUserData,\ pUserDataMD,\ relaxed);}
\DoxyCodeLine{07899\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07900\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{07901\ \ \ \ \ \}}
\DoxyCodeLine{07902\ }
\DoxyCodeLine{07903\ \ \ \ \ \textcolor{comment}{/*\ Unsupported\ container.\ */}}
\DoxyCodeLine{07904\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{07905\ \}}
\DoxyCodeLine{07906\ }
\DoxyCodeLine{07907\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ drflac\_\_init\_from\_info(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ \textcolor{keyword}{const}\ drflac\_init\_info*\ pInit)}
\DoxyCodeLine{07908\ \{}
\DoxyCodeLine{07909\ \ \ \ \ DRFLAC\_ASSERT(pFlac\ !=\ NULL);}
\DoxyCodeLine{07910\ \ \ \ \ DRFLAC\_ASSERT(pInit\ !=\ NULL);}
\DoxyCodeLine{07911\ }
\DoxyCodeLine{07912\ \ \ \ \ DRFLAC\_ZERO\_MEMORY(pFlac,\ \textcolor{keyword}{sizeof}(*pFlac));}
\DoxyCodeLine{07913\ \ \ \ \ pFlac-\/>bs\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pInit-\/>bs;}
\DoxyCodeLine{07914\ \ \ \ \ pFlac-\/>onMeta\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pInit-\/>onMeta;}
\DoxyCodeLine{07915\ \ \ \ \ pFlac-\/>pUserDataMD\ \ \ \ \ \ \ \ \ \ \ \ \ =\ pInit-\/>pUserDataMD;}
\DoxyCodeLine{07916\ \ \ \ \ pFlac-\/>maxBlockSizeInPCMFrames\ =\ pInit-\/>maxBlockSizeInPCMFrames;}
\DoxyCodeLine{07917\ \ \ \ \ pFlac-\/>sampleRate\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pInit-\/>sampleRate;}
\DoxyCodeLine{07918\ \ \ \ \ pFlac-\/>channels\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ (drflac\_uint8)pInit-\/>channels;}
\DoxyCodeLine{07919\ \ \ \ \ pFlac-\/>bitsPerSample\ \ \ \ \ \ \ \ \ \ \ =\ (drflac\_uint8)pInit-\/>bitsPerSample;}
\DoxyCodeLine{07920\ \ \ \ \ pFlac-\/>totalPCMFrameCount\ \ \ \ \ \ =\ pInit-\/>totalPCMFrameCount;}
\DoxyCodeLine{07921\ \ \ \ \ pFlac-\/>container\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ pInit-\/>container;}
\DoxyCodeLine{07922\ \}}
\DoxyCodeLine{07923\ }
\DoxyCodeLine{07924\ }
\DoxyCodeLine{07925\ \textcolor{keyword}{static}\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_with\_metadata\_private(drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ drflac\_meta\_proc\ onMeta,\ drflac\_container\ container,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{void}*\ pUserDataMD,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{07926\ \{}
\DoxyCodeLine{07927\ \ \ \ \ drflac\_init\_info\ init;}
\DoxyCodeLine{07928\ \ \ \ \ drflac\_uint32\ allocationSize;}
\DoxyCodeLine{07929\ \ \ \ \ drflac\_uint32\ wholeSIMDVectorCountPerChannel;}
\DoxyCodeLine{07930\ \ \ \ \ drflac\_uint32\ decodedSamplesAllocationSize;}
\DoxyCodeLine{07931\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{07932\ \ \ \ \ drflac\_oggbs*\ pOggbs\ =\ NULL;}
\DoxyCodeLine{07933\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{07934\ \ \ \ \ drflac\_uint64\ firstFramePos;}
\DoxyCodeLine{07935\ \ \ \ \ drflac\_uint64\ seektablePos;}
\DoxyCodeLine{07936\ \ \ \ \ drflac\_uint32\ seekpointCount;}
\DoxyCodeLine{07937\ \ \ \ \ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}\ allocationCallbacks;}
\DoxyCodeLine{07938\ \ \ \ \ \mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac;}
\DoxyCodeLine{07939\ }
\DoxyCodeLine{07940\ \ \ \ \ \textcolor{comment}{/*\ CPU\ support\ first.\ */}}
\DoxyCodeLine{07941\ \ \ \ \ drflac\_\_init\_cpu\_caps();}
\DoxyCodeLine{07942\ }
\DoxyCodeLine{07943\ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_init\_private(\&init,\ onRead,\ onSeek,\ onMeta,\ container,\ pUserData,\ pUserDataMD))\ \{}
\DoxyCodeLine{07944\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{07945\ \ \ \ \ \}}
\DoxyCodeLine{07946\ }
\DoxyCodeLine{07947\ \ \ \ \ \textcolor{keywordflow}{if}\ (pAllocationCallbacks\ !=\ NULL)\ \{}
\DoxyCodeLine{07948\ \ \ \ \ \ \ \ \ allocationCallbacks\ =\ *pAllocationCallbacks;}
\DoxyCodeLine{07949\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (allocationCallbacks.onFree\ ==\ NULL\ ||\ (allocationCallbacks.onMalloc\ ==\ NULL\ \&\&\ allocationCallbacks.onRealloc\ ==\ NULL))\ \{}
\DoxyCodeLine{07950\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;\ \ \ \ \textcolor{comment}{/*\ Invalid\ allocation\ callbacks.\ */}}
\DoxyCodeLine{07951\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07952\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07953\ \ \ \ \ \ \ \ \ allocationCallbacks.pUserData\ =\ NULL;}
\DoxyCodeLine{07954\ \ \ \ \ \ \ \ \ allocationCallbacks.onMalloc\ \ =\ drflac\_\_malloc\_default;}
\DoxyCodeLine{07955\ \ \ \ \ \ \ \ \ allocationCallbacks.onRealloc\ =\ drflac\_\_realloc\_default;}
\DoxyCodeLine{07956\ \ \ \ \ \ \ \ \ allocationCallbacks.onFree\ \ \ \ =\ drflac\_\_free\_default;}
\DoxyCodeLine{07957\ \ \ \ \ \}}
\DoxyCodeLine{07958\ }
\DoxyCodeLine{07959\ }
\DoxyCodeLine{07960\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{07961\ \textcolor{comment}{\ \ \ \ The\ size\ of\ the\ allocation\ for\ the\ drflac\ object\ needs\ to\ be\ large\ enough\ to\ fit\ the\ following:}}
\DoxyCodeLine{07962\ \textcolor{comment}{\ \ \ \ \ \ 1)\ The\ main\ members\ of\ the\ drflac\ structure}}
\DoxyCodeLine{07963\ \textcolor{comment}{\ \ \ \ \ \ 2)\ A\ block\ of\ memory\ large\ enough\ to\ store\ the\ decoded\ samples\ of\ the\ largest\ frame\ in\ the\ stream}}
\DoxyCodeLine{07964\ \textcolor{comment}{\ \ \ \ \ \ 3)\ If\ the\ container\ is\ Ogg,\ a\ drflac\_oggbs\ object}}
\DoxyCodeLine{07965\ \textcolor{comment}{}}
\DoxyCodeLine{07966\ \textcolor{comment}{\ \ \ \ The\ complicated\ part\ of\ the\ allocation\ is\ making\ sure\ there's\ enough\ room\ the\ decoded\ samples,\ taking\ into\ consideration}}
\DoxyCodeLine{07967\ \textcolor{comment}{\ \ \ \ the\ different\ SIMD\ instruction\ sets.}}
\DoxyCodeLine{07968\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{07969\ \ \ \ \ allocationSize\ =\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structdrflac}{drflac}});}
\DoxyCodeLine{07970\ }
\DoxyCodeLine{07971\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{07972\ \textcolor{comment}{\ \ \ \ The\ allocation\ size\ for\ decoded\ frames\ depends\ on\ the\ number\ of\ 32-\/bit\ integers\ that\ fit\ inside\ the\ largest\ SIMD\ vector}}
\DoxyCodeLine{07973\ \textcolor{comment}{\ \ \ \ we\ are\ supporting.}}
\DoxyCodeLine{07974\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{07975\ \ \ \ \ \textcolor{keywordflow}{if}\ ((init.maxBlockSizeInPCMFrames\ \%\ (DRFLAC\_MAX\_SIMD\_VECTOR\_SIZE\ /\ \textcolor{keyword}{sizeof}(drflac\_int32)))\ ==\ 0)\ \{}
\DoxyCodeLine{07976\ \ \ \ \ \ \ \ \ wholeSIMDVectorCountPerChannel\ =\ (init.maxBlockSizeInPCMFrames\ /\ (DRFLAC\_MAX\_SIMD\_VECTOR\_SIZE\ /\ \textcolor{keyword}{sizeof}(drflac\_int32)));}
\DoxyCodeLine{07977\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{07978\ \ \ \ \ \ \ \ \ wholeSIMDVectorCountPerChannel\ =\ (init.maxBlockSizeInPCMFrames\ /\ (DRFLAC\_MAX\_SIMD\_VECTOR\_SIZE\ /\ \textcolor{keyword}{sizeof}(drflac\_int32)))\ +\ 1;}
\DoxyCodeLine{07979\ \ \ \ \ \}}
\DoxyCodeLine{07980\ }
\DoxyCodeLine{07981\ \ \ \ \ decodedSamplesAllocationSize\ =\ wholeSIMDVectorCountPerChannel\ *\ DRFLAC\_MAX\_SIMD\_VECTOR\_SIZE\ *\ init.channels;}
\DoxyCodeLine{07982\ }
\DoxyCodeLine{07983\ \ \ \ \ allocationSize\ +=\ decodedSamplesAllocationSize;}
\DoxyCodeLine{07984\ \ \ \ \ allocationSize\ +=\ DRFLAC\_MAX\_SIMD\_VECTOR\_SIZE;\ \ \textcolor{comment}{/*\ Allocate\ extra\ bytes\ to\ ensure\ we\ have\ enough\ for\ alignment.\ */}}
\DoxyCodeLine{07985\ }
\DoxyCodeLine{07986\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{07987\ \ \ \ \ \textcolor{comment}{/*\ There's\ additional\ data\ required\ for\ Ogg\ streams.\ */}}
\DoxyCodeLine{07988\ \ \ \ \ \textcolor{keywordflow}{if}\ (init.container\ ==\ drflac\_container\_ogg)\ \{}
\DoxyCodeLine{07989\ \ \ \ \ \ \ \ \ allocationSize\ +=\ \textcolor{keyword}{sizeof}(drflac\_oggbs);}
\DoxyCodeLine{07990\ }
\DoxyCodeLine{07991\ \ \ \ \ \ \ \ \ pOggbs\ =\ (drflac\_oggbs*)drflac\_\_malloc\_from\_callbacks(\textcolor{keyword}{sizeof}(*pOggbs),\ \&allocationCallbacks);}
\DoxyCodeLine{07992\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pOggbs\ ==\ NULL)\ \{}
\DoxyCodeLine{07993\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;\ \textcolor{comment}{/*DRFLAC\_OUT\_OF\_MEMORY;*/}}
\DoxyCodeLine{07994\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{07995\ }
\DoxyCodeLine{07996\ \ \ \ \ \ \ \ \ DRFLAC\_ZERO\_MEMORY(pOggbs,\ \textcolor{keyword}{sizeof}(*pOggbs));}
\DoxyCodeLine{07997\ \ \ \ \ \ \ \ \ pOggbs-\/>onRead\ =\ onRead;}
\DoxyCodeLine{07998\ \ \ \ \ \ \ \ \ pOggbs-\/>onSeek\ =\ onSeek;}
\DoxyCodeLine{07999\ \ \ \ \ \ \ \ \ pOggbs-\/>pUserData\ =\ pUserData;}
\DoxyCodeLine{08000\ \ \ \ \ \ \ \ \ pOggbs-\/>currentBytePos\ =\ init.oggFirstBytePos;}
\DoxyCodeLine{08001\ \ \ \ \ \ \ \ \ pOggbs-\/>firstBytePos\ =\ init.oggFirstBytePos;}
\DoxyCodeLine{08002\ \ \ \ \ \ \ \ \ pOggbs-\/>serialNumber\ =\ init.oggSerial;}
\DoxyCodeLine{08003\ \ \ \ \ \ \ \ \ pOggbs-\/>bosPageHeader\ =\ init.oggBosHeader;}
\DoxyCodeLine{08004\ \ \ \ \ \ \ \ \ pOggbs-\/>bytesRemainingInPage\ =\ 0;}
\DoxyCodeLine{08005\ \ \ \ \ \}}
\DoxyCodeLine{08006\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08007\ }
\DoxyCodeLine{08008\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{08009\ \textcolor{comment}{\ \ \ \ This\ part\ is\ a\ bit\ awkward.\ We\ need\ to\ load\ the\ seektable\ so\ that\ it\ can\ be\ referenced\ in-\/memory,\ but\ I\ want\ the\ drflac\ object\ to}}
\DoxyCodeLine{08010\ \textcolor{comment}{\ \ \ \ consist\ of\ only\ a\ single\ heap\ allocation.\ To\ this,\ the\ size\ of\ the\ seek\ table\ needs\ to\ be\ known,\ which\ we\ determine\ when\ reading}}
\DoxyCodeLine{08011\ \textcolor{comment}{\ \ \ \ and\ decoding\ the\ metadata.}}
\DoxyCodeLine{08012\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{08013\ \ \ \ \ firstFramePos\ \ =\ 42;\ \ \ \textcolor{comment}{/*\ <-\/-\/\ We\ know\ we\ are\ at\ byte\ 42\ at\ this\ point.\ */}}
\DoxyCodeLine{08014\ \ \ \ \ seektablePos\ \ \ =\ 0;}
\DoxyCodeLine{08015\ \ \ \ \ seekpointCount\ =\ 0;}
\DoxyCodeLine{08016\ \ \ \ \ \textcolor{keywordflow}{if}\ (init.hasMetadataBlocks)\ \{}
\DoxyCodeLine{08017\ \ \ \ \ \ \ \ \ drflac\_read\_proc\ onReadOverride\ =\ onRead;}
\DoxyCodeLine{08018\ \ \ \ \ \ \ \ \ drflac\_seek\_proc\ onSeekOverride\ =\ onSeek;}
\DoxyCodeLine{08019\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ pUserDataOverride\ =\ pUserData;}
\DoxyCodeLine{08020\ }
\DoxyCodeLine{08021\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{08022\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (init.container\ ==\ drflac\_container\_ogg)\ \{}
\DoxyCodeLine{08023\ \ \ \ \ \ \ \ \ \ \ \ \ onReadOverride\ =\ drflac\_\_on\_read\_ogg;}
\DoxyCodeLine{08024\ \ \ \ \ \ \ \ \ \ \ \ \ onSeekOverride\ =\ drflac\_\_on\_seek\_ogg;}
\DoxyCodeLine{08025\ \ \ \ \ \ \ \ \ \ \ \ \ pUserDataOverride\ =\ (\textcolor{keywordtype}{void}*)pOggbs;}
\DoxyCodeLine{08026\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08027\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08028\ }
\DoxyCodeLine{08029\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_and\_decode\_metadata(onReadOverride,\ onSeekOverride,\ onMeta,\ pUserDataOverride,\ pUserDataMD,\ \&firstFramePos,\ \&seektablePos,\ \&seekpointCount,\ \&allocationCallbacks))\ \{}
\DoxyCodeLine{08030\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#ifndef\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{08031\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pOggbs,\ \&allocationCallbacks);}
\DoxyCodeLine{08032\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{08033\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{08034\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08035\ }
\DoxyCodeLine{08036\ \ \ \ \ \ \ \ \ allocationSize\ +=\ seekpointCount\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structdrflac__seekpoint}{drflac\_seekpoint}});}
\DoxyCodeLine{08037\ \ \ \ \ \}}
\DoxyCodeLine{08038\ }
\DoxyCodeLine{08039\ }
\DoxyCodeLine{08040\ \ \ \ \ pFlac\ =\ (\mbox{\hyperlink{structdrflac}{drflac}}*)drflac\_\_malloc\_from\_callbacks(allocationSize,\ \&allocationCallbacks);}
\DoxyCodeLine{08041\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{08042\ \textcolor{preprocessor}{\ \ \ \ \#ifndef\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{08043\ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pOggbs,\ \&allocationCallbacks);}
\DoxyCodeLine{08044\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08045\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{08046\ \ \ \ \ \}}
\DoxyCodeLine{08047\ }
\DoxyCodeLine{08048\ \ \ \ \ drflac\_\_init\_from\_info(pFlac,\ \&init);}
\DoxyCodeLine{08049\ \ \ \ \ pFlac-\/>allocationCallbacks\ =\ allocationCallbacks;}
\DoxyCodeLine{08050\ \ \ \ \ pFlac-\/>pDecodedSamples\ =\ (drflac\_int32*)drflac\_align((\textcolor{keywordtype}{size\_t})pFlac-\/>pExtraData,\ DRFLAC\_MAX\_SIMD\_VECTOR\_SIZE);}
\DoxyCodeLine{08051\ }
\DoxyCodeLine{08052\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{08053\ \ \ \ \ \textcolor{keywordflow}{if}\ (init.container\ ==\ drflac\_container\_ogg)\ \{}
\DoxyCodeLine{08054\ \ \ \ \ \ \ \ \ drflac\_oggbs*\ pInternalOggbs\ =\ (drflac\_oggbs*)((drflac\_uint8*)pFlac-\/>pDecodedSamples\ +\ decodedSamplesAllocationSize\ +\ (seekpointCount\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structdrflac__seekpoint}{drflac\_seekpoint}})));}
\DoxyCodeLine{08055\ \ \ \ \ \ \ \ \ DRFLAC\_COPY\_MEMORY(pInternalOggbs,\ pOggbs,\ \textcolor{keyword}{sizeof}(*pOggbs));}
\DoxyCodeLine{08056\ }
\DoxyCodeLine{08057\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ At\ this\ point\ the\ pOggbs\ object\ has\ been\ handed\ over\ to\ pInternalOggbs\ and\ can\ be\ freed.\ */}}
\DoxyCodeLine{08058\ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pOggbs,\ \&allocationCallbacks);}
\DoxyCodeLine{08059\ \ \ \ \ \ \ \ \ pOggbs\ =\ NULL;}
\DoxyCodeLine{08060\ }
\DoxyCodeLine{08061\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ Ogg\ bistream\ needs\ to\ be\ layered\ on\ top\ of\ the\ original\ bitstream.\ */}}
\DoxyCodeLine{08062\ \ \ \ \ \ \ \ \ pFlac-\/>bs.onRead\ =\ drflac\_\_on\_read\_ogg;}
\DoxyCodeLine{08063\ \ \ \ \ \ \ \ \ pFlac-\/>bs.onSeek\ =\ drflac\_\_on\_seek\_ogg;}
\DoxyCodeLine{08064\ \ \ \ \ \ \ \ \ pFlac-\/>bs.pUserData\ =\ (\textcolor{keywordtype}{void}*)pInternalOggbs;}
\DoxyCodeLine{08065\ \ \ \ \ \ \ \ \ pFlac-\/>\_oggbs\ =\ (\textcolor{keywordtype}{void}*)pInternalOggbs;}
\DoxyCodeLine{08066\ \ \ \ \ \}}
\DoxyCodeLine{08067\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08068\ }
\DoxyCodeLine{08069\ \ \ \ \ pFlac-\/>firstFLACFramePosInBytes\ =\ firstFramePos;}
\DoxyCodeLine{08070\ }
\DoxyCodeLine{08071\ \ \ \ \ \textcolor{comment}{/*\ NOTE:\ Seektables\ are\ not\ currently\ compatible\ with\ Ogg\ encapsulation\ (Ogg\ has\ its\ own\ accelerated\ seeking\ system).\ I\ may\ change\ this\ later,\ so\ I'm\ leaving\ this\ here\ for\ now.\ */}}
\DoxyCodeLine{08072\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{08073\ \ \ \ \ \textcolor{keywordflow}{if}\ (init.container\ ==\ drflac\_container\_ogg)}
\DoxyCodeLine{08074\ \ \ \ \ \{}
\DoxyCodeLine{08075\ \ \ \ \ \ \ \ \ pFlac-\/>pSeekpoints\ =\ NULL;}
\DoxyCodeLine{08076\ \ \ \ \ \ \ \ \ pFlac-\/>seekpointCount\ =\ 0;}
\DoxyCodeLine{08077\ \ \ \ \ \}}
\DoxyCodeLine{08078\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{08079\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08080\ \ \ \ \ \{}
\DoxyCodeLine{08081\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ we\ have\ a\ seektable\ we\ need\ to\ load\ it\ now,\ making\ sure\ we\ move\ back\ to\ where\ we\ were\ previously.\ */}}
\DoxyCodeLine{08082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (seektablePos\ !=\ 0)\ \{}
\DoxyCodeLine{08083\ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>seekpointCount\ =\ seekpointCount;}
\DoxyCodeLine{08084\ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>pSeekpoints\ =\ (\mbox{\hyperlink{structdrflac__seekpoint}{drflac\_seekpoint}}*)((drflac\_uint8*)pFlac-\/>pDecodedSamples\ +\ decodedSamplesAllocationSize);}
\DoxyCodeLine{08085\ }
\DoxyCodeLine{08086\ \ \ \ \ \ \ \ \ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bs.onSeek\ !=\ NULL);}
\DoxyCodeLine{08087\ \ \ \ \ \ \ \ \ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bs.onRead\ !=\ NULL);}
\DoxyCodeLine{08088\ }
\DoxyCodeLine{08089\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Seek\ to\ the\ seektable,\ then\ just\ read\ directly\ into\ our\ seektable\ buffer.\ */}}
\DoxyCodeLine{08090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>bs.onSeek(pFlac-\/>bs.pUserData,\ (\textcolor{keywordtype}{int})seektablePos,\ drflac\_seek\_origin\_start))\ \{}
\DoxyCodeLine{08091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ iSeekpoint;}
\DoxyCodeLine{08092\ }
\DoxyCodeLine{08093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (iSeekpoint\ =\ 0;\ iSeekpoint\ <\ seekpointCount;\ iSeekpoint\ +=\ 1)\ \{}
\DoxyCodeLine{08094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>bs.onRead(pFlac-\/>bs.pUserData,\ pFlac-\/>pSeekpoints\ +\ iSeekpoint,\ DRFLAC\_SEEKPOINT\_SIZE\_IN\_BYTES)\ ==\ DRFLAC\_SEEKPOINT\_SIZE\_IN\_BYTES)\ \{}
\DoxyCodeLine{08095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Endian\ swap.\ */}}
\DoxyCodeLine{08096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>pSeekpoints[iSeekpoint].firstPCMFrame\ \ \ =\ drflac\_\_be2host\_64(pFlac-\/>pSeekpoints[iSeekpoint].firstPCMFrame);}
\DoxyCodeLine{08097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>pSeekpoints[iSeekpoint].flacFrameOffset\ =\ drflac\_\_be2host\_64(pFlac-\/>pSeekpoints[iSeekpoint].flacFrameOffset);}
\DoxyCodeLine{08098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>pSeekpoints[iSeekpoint].pcmFrameCount\ \ \ =\ drflac\_\_be2host\_16(pFlac-\/>pSeekpoints[iSeekpoint].pcmFrameCount);}
\DoxyCodeLine{08099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{08100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Failed\ to\ read\ the\ seektable.\ Pretend\ we\ don't\ have\ one.\ */}}
\DoxyCodeLine{08101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>pSeekpoints\ =\ NULL;}
\DoxyCodeLine{08102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>seekpointCount\ =\ 0;}
\DoxyCodeLine{08103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{08104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08106\ }
\DoxyCodeLine{08107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ We\ need\ to\ seek\ back\ to\ where\ we\ were.\ If\ this\ fails\ it's\ a\ critical\ error.\ */}}
\DoxyCodeLine{08108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!pFlac-\/>bs.onSeek(pFlac-\/>bs.pUserData,\ (\textcolor{keywordtype}{int})pFlac-\/>firstFLACFramePosInBytes,\ drflac\_seek\_origin\_start))\ \{}
\DoxyCodeLine{08109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pFlac,\ \&allocationCallbacks);}
\DoxyCodeLine{08110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{08111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08112\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{08113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Failed\ to\ seek\ to\ the\ seektable.\ Ominous\ sign,\ but\ for\ now\ we\ can\ just\ pretend\ we\ don't\ have\ one.\ */}}
\DoxyCodeLine{08114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>pSeekpoints\ =\ NULL;}
\DoxyCodeLine{08115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>seekpointCount\ =\ 0;}
\DoxyCodeLine{08116\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08117\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08118\ \ \ \ \ \}}
\DoxyCodeLine{08119\ }
\DoxyCodeLine{08120\ }
\DoxyCodeLine{08121\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{08122\ \textcolor{comment}{\ \ \ \ If\ we\ get\ here,\ but\ don't\ have\ a\ STREAMINFO\ block,\ it\ means\ we've\ opened\ the\ stream\ in\ relaxed\ mode\ and\ need\ to\ decode}}
\DoxyCodeLine{08123\ \textcolor{comment}{\ \ \ \ the\ first\ frame.}}
\DoxyCodeLine{08124\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{08125\ \ \ \ \ \textcolor{keywordflow}{if}\ (!init.hasStreamInfoBlock)\ \{}
\DoxyCodeLine{08126\ \ \ \ \ \ \ \ \ pFlac-\/>currentFLACFrame.header\ =\ init.firstFrameHeader;}
\DoxyCodeLine{08127\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{08128\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_result\ result\ =\ drflac\_\_decode\_flac\_frame(pFlac);}
\DoxyCodeLine{08129\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{08130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{08131\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{08132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_CRC\_MISMATCH)\ \{}
\DoxyCodeLine{08133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_next\_flac\_frame\_header(\&pFlac-\/>bs,\ pFlac-\/>bitsPerSample,\ \&pFlac-\/>currentFLACFrame.header))\ \{}
\DoxyCodeLine{08134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pFlac,\ \&allocationCallbacks);}
\DoxyCodeLine{08135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{08136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{08138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{08139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pFlac,\ \&allocationCallbacks);}
\DoxyCodeLine{08140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{08141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08142\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08143\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08144\ \ \ \ \ \}}
\DoxyCodeLine{08145\ }
\DoxyCodeLine{08146\ \ \ \ \ \textcolor{keywordflow}{return}\ pFlac;}
\DoxyCodeLine{08147\ \}}
\DoxyCodeLine{08148\ }
\DoxyCodeLine{08149\ }
\DoxyCodeLine{08150\ }
\DoxyCodeLine{08151\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_STDIO}}
\DoxyCodeLine{08152\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{08153\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_WCHAR}}
\DoxyCodeLine{08154\ \textcolor{preprocessor}{\#include\ <wchar.h>}\ \ \ \ \ \ \textcolor{comment}{/*\ For\ wcslen(),\ wcsrtombs()\ */}}
\DoxyCodeLine{08155\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08156\ }
\DoxyCodeLine{08157\ \textcolor{comment}{/*\ Errno\ */}}
\DoxyCodeLine{08158\ \textcolor{comment}{/*\ drflac\_result\_from\_errno()\ is\ only\ used\ for\ fopen()\ and\ wfopen()\ so\ putting\ it\ inside\ DR\_WAV\_NO\_STDIO\ for\ now.\ If\ something\ else\ needs\ this\ later\ we\ can\ move\ it\ out.\ */}}
\DoxyCodeLine{08159\ \textcolor{preprocessor}{\#include\ <errno.h>}}
\DoxyCodeLine{08160\ \textcolor{keyword}{static}\ drflac\_result\ drflac\_result\_from\_errno(\textcolor{keywordtype}{int}\ e)}
\DoxyCodeLine{08161\ \{}
\DoxyCodeLine{08162\ \ \ \ \ \textcolor{keywordflow}{switch}\ (e)}
\DoxyCodeLine{08163\ \ \ \ \ \{}
\DoxyCodeLine{08164\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ \textcolor{keywordflow}{return}\ DRFLAC\_SUCCESS;}
\DoxyCodeLine{08165\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EPERM}}
\DoxyCodeLine{08166\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EPERM:\ \textcolor{keywordflow}{return}\ DRFLAC\_INVALID\_OPERATION;}
\DoxyCodeLine{08167\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08168\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOENT}}
\DoxyCodeLine{08169\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOENT:\ \textcolor{keywordflow}{return}\ DRFLAC\_DOES\_NOT\_EXIST;}
\DoxyCodeLine{08170\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08171\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ESRCH}}
\DoxyCodeLine{08172\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ESRCH:\ \textcolor{keywordflow}{return}\ DRFLAC\_DOES\_NOT\_EXIST;}
\DoxyCodeLine{08173\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08174\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EINTR}}
\DoxyCodeLine{08175\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EINTR:\ \textcolor{keywordflow}{return}\ DRFLAC\_INTERRUPT;}
\DoxyCodeLine{08176\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08177\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EIO}}
\DoxyCodeLine{08178\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EIO:\ \textcolor{keywordflow}{return}\ DRFLAC\_IO\_ERROR;}
\DoxyCodeLine{08179\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08180\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENXIO}}
\DoxyCodeLine{08181\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENXIO:\ \textcolor{keywordflow}{return}\ DRFLAC\_DOES\_NOT\_EXIST;}
\DoxyCodeLine{08182\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08183\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ E2BIG}}
\DoxyCodeLine{08184\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ E2BIG:\ \textcolor{keywordflow}{return}\ DRFLAC\_INVALID\_ARGS;}
\DoxyCodeLine{08185\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08186\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOEXEC}}
\DoxyCodeLine{08187\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOEXEC:\ \textcolor{keywordflow}{return}\ DRFLAC\_INVALID\_FILE;}
\DoxyCodeLine{08188\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08189\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EBADF}}
\DoxyCodeLine{08190\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EBADF:\ \textcolor{keywordflow}{return}\ DRFLAC\_INVALID\_FILE;}
\DoxyCodeLine{08191\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08192\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ECHILD}}
\DoxyCodeLine{08193\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ECHILD:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08194\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08195\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EAGAIN}}
\DoxyCodeLine{08196\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EAGAIN:\ \textcolor{keywordflow}{return}\ DRFLAC\_UNAVAILABLE;}
\DoxyCodeLine{08197\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08198\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOMEM}}
\DoxyCodeLine{08199\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOMEM:\ \textcolor{keywordflow}{return}\ DRFLAC\_OUT\_OF\_MEMORY;}
\DoxyCodeLine{08200\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08201\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EACCES}}
\DoxyCodeLine{08202\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EACCES:\ \textcolor{keywordflow}{return}\ DRFLAC\_ACCESS\_DENIED;}
\DoxyCodeLine{08203\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08204\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EFAULT}}
\DoxyCodeLine{08205\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EFAULT:\ \textcolor{keywordflow}{return}\ DRFLAC\_BAD\_ADDRESS;}
\DoxyCodeLine{08206\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08207\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOTBLK}}
\DoxyCodeLine{08208\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOTBLK:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08209\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08210\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EBUSY}}
\DoxyCodeLine{08211\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EBUSY:\ \textcolor{keywordflow}{return}\ DRFLAC\_BUSY;}
\DoxyCodeLine{08212\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08213\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EEXIST}}
\DoxyCodeLine{08214\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EEXIST:\ \textcolor{keywordflow}{return}\ DRFLAC\_ALREADY\_EXISTS;}
\DoxyCodeLine{08215\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08216\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EXDEV}}
\DoxyCodeLine{08217\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EXDEV:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08218\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08219\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENODEV}}
\DoxyCodeLine{08220\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENODEV:\ \textcolor{keywordflow}{return}\ DRFLAC\_DOES\_NOT\_EXIST;}
\DoxyCodeLine{08221\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08222\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOTDIR}}
\DoxyCodeLine{08223\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOTDIR:\ \textcolor{keywordflow}{return}\ DRFLAC\_NOT\_DIRECTORY;}
\DoxyCodeLine{08224\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08225\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EISDIR}}
\DoxyCodeLine{08226\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EISDIR:\ \textcolor{keywordflow}{return}\ DRFLAC\_IS\_DIRECTORY;}
\DoxyCodeLine{08227\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08228\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EINVAL}}
\DoxyCodeLine{08229\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EINVAL:\ \textcolor{keywordflow}{return}\ DRFLAC\_INVALID\_ARGS;}
\DoxyCodeLine{08230\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08231\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENFILE}}
\DoxyCodeLine{08232\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENFILE:\ \textcolor{keywordflow}{return}\ DRFLAC\_TOO\_MANY\_OPEN\_FILES;}
\DoxyCodeLine{08233\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08234\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EMFILE}}
\DoxyCodeLine{08235\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMFILE:\ \textcolor{keywordflow}{return}\ DRFLAC\_TOO\_MANY\_OPEN\_FILES;}
\DoxyCodeLine{08236\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08237\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOTTY}}
\DoxyCodeLine{08238\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOTTY:\ \textcolor{keywordflow}{return}\ DRFLAC\_INVALID\_OPERATION;}
\DoxyCodeLine{08239\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08240\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ETXTBSY}}
\DoxyCodeLine{08241\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ETXTBSY:\ \textcolor{keywordflow}{return}\ DRFLAC\_BUSY;}
\DoxyCodeLine{08242\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08243\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EFBIG}}
\DoxyCodeLine{08244\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EFBIG:\ \textcolor{keywordflow}{return}\ DRFLAC\_TOO\_BIG;}
\DoxyCodeLine{08245\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08246\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOSPC}}
\DoxyCodeLine{08247\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOSPC:\ \textcolor{keywordflow}{return}\ DRFLAC\_NO\_SPACE;}
\DoxyCodeLine{08248\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08249\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ESPIPE}}
\DoxyCodeLine{08250\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ESPIPE:\ \textcolor{keywordflow}{return}\ DRFLAC\_BAD\_SEEK;}
\DoxyCodeLine{08251\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08252\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EROFS}}
\DoxyCodeLine{08253\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EROFS:\ \textcolor{keywordflow}{return}\ DRFLAC\_ACCESS\_DENIED;}
\DoxyCodeLine{08254\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08255\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EMLINK}}
\DoxyCodeLine{08256\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMLINK:\ \textcolor{keywordflow}{return}\ DRFLAC\_TOO\_MANY\_LINKS;}
\DoxyCodeLine{08257\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08258\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EPIPE}}
\DoxyCodeLine{08259\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EPIPE:\ \textcolor{keywordflow}{return}\ DRFLAC\_BAD\_PIPE;}
\DoxyCodeLine{08260\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08261\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EDOM}}
\DoxyCodeLine{08262\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EDOM:\ \textcolor{keywordflow}{return}\ DRFLAC\_OUT\_OF\_RANGE;}
\DoxyCodeLine{08263\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08264\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ERANGE}}
\DoxyCodeLine{08265\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ERANGE:\ \textcolor{keywordflow}{return}\ DRFLAC\_OUT\_OF\_RANGE;}
\DoxyCodeLine{08266\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08267\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EDEADLK}}
\DoxyCodeLine{08268\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EDEADLK:\ \textcolor{keywordflow}{return}\ DRFLAC\_DEADLOCK;}
\DoxyCodeLine{08269\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08270\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENAMETOOLONG}}
\DoxyCodeLine{08271\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENAMETOOLONG:\ \textcolor{keywordflow}{return}\ DRFLAC\_PATH\_TOO\_LONG;}
\DoxyCodeLine{08272\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08273\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOLCK}}
\DoxyCodeLine{08274\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOLCK:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08275\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08276\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOSYS}}
\DoxyCodeLine{08277\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOSYS:\ \textcolor{keywordflow}{return}\ DRFLAC\_NOT\_IMPLEMENTED;}
\DoxyCodeLine{08278\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08279\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOTEMPTY}}
\DoxyCodeLine{08280\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOTEMPTY:\ \textcolor{keywordflow}{return}\ DRFLAC\_DIRECTORY\_NOT\_EMPTY;}
\DoxyCodeLine{08281\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08282\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ELOOP}}
\DoxyCodeLine{08283\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ELOOP:\ \textcolor{keywordflow}{return}\ DRFLAC\_TOO\_MANY\_LINKS;}
\DoxyCodeLine{08284\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08285\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOMSG}}
\DoxyCodeLine{08286\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOMSG:\ \textcolor{keywordflow}{return}\ DRFLAC\_NO\_MESSAGE;}
\DoxyCodeLine{08287\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08288\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EIDRM}}
\DoxyCodeLine{08289\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EIDRM:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08290\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08291\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ECHRNG}}
\DoxyCodeLine{08292\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ECHRNG:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08293\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08294\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EL2NSYNC}}
\DoxyCodeLine{08295\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EL2NSYNC:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08296\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08297\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EL3HLT}}
\DoxyCodeLine{08298\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EL3HLT:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08299\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08300\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EL3RST}}
\DoxyCodeLine{08301\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EL3RST:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08302\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08303\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ELNRNG}}
\DoxyCodeLine{08304\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ELNRNG:\ \textcolor{keywordflow}{return}\ DRFLAC\_OUT\_OF\_RANGE;}
\DoxyCodeLine{08305\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08306\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EUNATCH}}
\DoxyCodeLine{08307\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EUNATCH:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08308\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08309\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOCSI}}
\DoxyCodeLine{08310\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOCSI:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08311\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08312\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EL2HLT}}
\DoxyCodeLine{08313\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EL2HLT:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08314\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08315\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EBADE}}
\DoxyCodeLine{08316\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EBADE:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08317\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08318\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EBADR}}
\DoxyCodeLine{08319\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EBADR:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08320\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08321\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EXFULL}}
\DoxyCodeLine{08322\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EXFULL:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08323\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08324\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOANO}}
\DoxyCodeLine{08325\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOANO:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08326\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08327\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EBADRQC}}
\DoxyCodeLine{08328\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EBADRQC:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08329\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08330\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EBADSLT}}
\DoxyCodeLine{08331\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EBADSLT:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08332\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08333\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EBFONT}}
\DoxyCodeLine{08334\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EBFONT:\ \textcolor{keywordflow}{return}\ DRFLAC\_INVALID\_FILE;}
\DoxyCodeLine{08335\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08336\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOSTR}}
\DoxyCodeLine{08337\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOSTR:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08338\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08339\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENODATA}}
\DoxyCodeLine{08340\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENODATA:\ \textcolor{keywordflow}{return}\ DRFLAC\_NO\_DATA\_AVAILABLE;}
\DoxyCodeLine{08341\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08342\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ETIME}}
\DoxyCodeLine{08343\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ETIME:\ \textcolor{keywordflow}{return}\ DRFLAC\_TIMEOUT;}
\DoxyCodeLine{08344\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08345\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOSR}}
\DoxyCodeLine{08346\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOSR:\ \textcolor{keywordflow}{return}\ DRFLAC\_NO\_DATA\_AVAILABLE;}
\DoxyCodeLine{08347\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08348\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENONET}}
\DoxyCodeLine{08349\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENONET:\ \textcolor{keywordflow}{return}\ DRFLAC\_NO\_NETWORK;}
\DoxyCodeLine{08350\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08351\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOPKG}}
\DoxyCodeLine{08352\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOPKG:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08353\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08354\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EREMOTE}}
\DoxyCodeLine{08355\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EREMOTE:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08356\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08357\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOLINK}}
\DoxyCodeLine{08358\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOLINK:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08359\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08360\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EADV}}
\DoxyCodeLine{08361\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EADV:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08362\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08363\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ESRMNT}}
\DoxyCodeLine{08364\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ESRMNT:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08365\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08366\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ECOMM}}
\DoxyCodeLine{08367\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ECOMM:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08368\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08369\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EPROTO}}
\DoxyCodeLine{08370\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EPROTO:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08371\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08372\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EMULTIHOP}}
\DoxyCodeLine{08373\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMULTIHOP:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08374\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08375\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EDOTDOT}}
\DoxyCodeLine{08376\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EDOTDOT:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08377\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08378\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EBADMSG}}
\DoxyCodeLine{08379\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EBADMSG:\ \textcolor{keywordflow}{return}\ DRFLAC\_BAD\_MESSAGE;}
\DoxyCodeLine{08380\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08381\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EOVERFLOW}}
\DoxyCodeLine{08382\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EOVERFLOW:\ \textcolor{keywordflow}{return}\ DRFLAC\_TOO\_BIG;}
\DoxyCodeLine{08383\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08384\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOTUNIQ}}
\DoxyCodeLine{08385\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOTUNIQ:\ \textcolor{keywordflow}{return}\ DRFLAC\_NOT\_UNIQUE;}
\DoxyCodeLine{08386\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08387\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EBADFD}}
\DoxyCodeLine{08388\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EBADFD:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08389\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08390\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EREMCHG}}
\DoxyCodeLine{08391\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EREMCHG:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08392\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08393\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ELIBACC}}
\DoxyCodeLine{08394\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ELIBACC:\ \textcolor{keywordflow}{return}\ DRFLAC\_ACCESS\_DENIED;}
\DoxyCodeLine{08395\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08396\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ELIBBAD}}
\DoxyCodeLine{08397\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ELIBBAD:\ \textcolor{keywordflow}{return}\ DRFLAC\_INVALID\_FILE;}
\DoxyCodeLine{08398\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08399\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ELIBSCN}}
\DoxyCodeLine{08400\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ELIBSCN:\ \textcolor{keywordflow}{return}\ DRFLAC\_INVALID\_FILE;}
\DoxyCodeLine{08401\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08402\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ELIBMAX}}
\DoxyCodeLine{08403\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ELIBMAX:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08404\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08405\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ELIBEXEC}}
\DoxyCodeLine{08406\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ELIBEXEC:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08407\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08408\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EILSEQ}}
\DoxyCodeLine{08409\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EILSEQ:\ \textcolor{keywordflow}{return}\ DRFLAC\_INVALID\_DATA;}
\DoxyCodeLine{08410\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08411\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ERESTART}}
\DoxyCodeLine{08412\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ERESTART:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08413\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08414\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ESTRPIPE}}
\DoxyCodeLine{08415\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ESTRPIPE:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08416\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08417\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EUSERS}}
\DoxyCodeLine{08418\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EUSERS:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08419\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08420\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOTSOCK}}
\DoxyCodeLine{08421\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOTSOCK:\ \textcolor{keywordflow}{return}\ DRFLAC\_NOT\_SOCKET;}
\DoxyCodeLine{08422\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08423\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EDESTADDRREQ}}
\DoxyCodeLine{08424\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EDESTADDRREQ:\ \textcolor{keywordflow}{return}\ DRFLAC\_NO\_ADDRESS;}
\DoxyCodeLine{08425\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08426\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EMSGSIZE}}
\DoxyCodeLine{08427\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMSGSIZE:\ \textcolor{keywordflow}{return}\ DRFLAC\_TOO\_BIG;}
\DoxyCodeLine{08428\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08429\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EPROTOTYPE}}
\DoxyCodeLine{08430\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EPROTOTYPE:\ \textcolor{keywordflow}{return}\ DRFLAC\_BAD\_PROTOCOL;}
\DoxyCodeLine{08431\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08432\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOPROTOOPT}}
\DoxyCodeLine{08433\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOPROTOOPT:\ \textcolor{keywordflow}{return}\ DRFLAC\_PROTOCOL\_UNAVAILABLE;}
\DoxyCodeLine{08434\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08435\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EPROTONOSUPPORT}}
\DoxyCodeLine{08436\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EPROTONOSUPPORT:\ \textcolor{keywordflow}{return}\ DRFLAC\_PROTOCOL\_NOT\_SUPPORTED;}
\DoxyCodeLine{08437\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08438\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ESOCKTNOSUPPORT}}
\DoxyCodeLine{08439\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ESOCKTNOSUPPORT:\ \textcolor{keywordflow}{return}\ DRFLAC\_SOCKET\_NOT\_SUPPORTED;}
\DoxyCodeLine{08440\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08441\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EOPNOTSUPP}}
\DoxyCodeLine{08442\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EOPNOTSUPP:\ \textcolor{keywordflow}{return}\ DRFLAC\_INVALID\_OPERATION;}
\DoxyCodeLine{08443\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08444\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EPFNOSUPPORT}}
\DoxyCodeLine{08445\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EPFNOSUPPORT:\ \textcolor{keywordflow}{return}\ DRFLAC\_PROTOCOL\_FAMILY\_NOT\_SUPPORTED;}
\DoxyCodeLine{08446\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08447\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EAFNOSUPPORT}}
\DoxyCodeLine{08448\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EAFNOSUPPORT:\ \textcolor{keywordflow}{return}\ DRFLAC\_ADDRESS\_FAMILY\_NOT\_SUPPORTED;}
\DoxyCodeLine{08449\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08450\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EADDRINUSE}}
\DoxyCodeLine{08451\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EADDRINUSE:\ \textcolor{keywordflow}{return}\ DRFLAC\_ALREADY\_IN\_USE;}
\DoxyCodeLine{08452\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08453\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EADDRNOTAVAIL}}
\DoxyCodeLine{08454\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EADDRNOTAVAIL:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08455\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08456\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENETDOWN}}
\DoxyCodeLine{08457\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENETDOWN:\ \textcolor{keywordflow}{return}\ DRFLAC\_NO\_NETWORK;}
\DoxyCodeLine{08458\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08459\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENETUNREACH}}
\DoxyCodeLine{08460\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENETUNREACH:\ \textcolor{keywordflow}{return}\ DRFLAC\_NO\_NETWORK;}
\DoxyCodeLine{08461\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08462\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENETRESET}}
\DoxyCodeLine{08463\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENETRESET:\ \textcolor{keywordflow}{return}\ DRFLAC\_NO\_NETWORK;}
\DoxyCodeLine{08464\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08465\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ECONNABORTED}}
\DoxyCodeLine{08466\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ECONNABORTED:\ \textcolor{keywordflow}{return}\ DRFLAC\_NO\_NETWORK;}
\DoxyCodeLine{08467\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08468\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ECONNRESET}}
\DoxyCodeLine{08469\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ECONNRESET:\ \textcolor{keywordflow}{return}\ DRFLAC\_CONNECTION\_RESET;}
\DoxyCodeLine{08470\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08471\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOBUFS}}
\DoxyCodeLine{08472\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOBUFS:\ \textcolor{keywordflow}{return}\ DRFLAC\_NO\_SPACE;}
\DoxyCodeLine{08473\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08474\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EISCONN}}
\DoxyCodeLine{08475\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EISCONN:\ \textcolor{keywordflow}{return}\ DRFLAC\_ALREADY\_CONNECTED;}
\DoxyCodeLine{08476\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08477\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOTCONN}}
\DoxyCodeLine{08478\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOTCONN:\ \textcolor{keywordflow}{return}\ DRFLAC\_NOT\_CONNECTED;}
\DoxyCodeLine{08479\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08480\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ESHUTDOWN}}
\DoxyCodeLine{08481\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ESHUTDOWN:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08482\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08483\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ETOOMANYREFS}}
\DoxyCodeLine{08484\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ETOOMANYREFS:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08485\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08486\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ETIMEDOUT}}
\DoxyCodeLine{08487\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ETIMEDOUT:\ \textcolor{keywordflow}{return}\ DRFLAC\_TIMEOUT;}
\DoxyCodeLine{08488\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08489\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ECONNREFUSED}}
\DoxyCodeLine{08490\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ECONNREFUSED:\ \textcolor{keywordflow}{return}\ DRFLAC\_CONNECTION\_REFUSED;}
\DoxyCodeLine{08491\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08492\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EHOSTDOWN}}
\DoxyCodeLine{08493\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EHOSTDOWN:\ \textcolor{keywordflow}{return}\ DRFLAC\_NO\_HOST;}
\DoxyCodeLine{08494\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08495\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EHOSTUNREACH}}
\DoxyCodeLine{08496\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EHOSTUNREACH:\ \textcolor{keywordflow}{return}\ DRFLAC\_NO\_HOST;}
\DoxyCodeLine{08497\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08498\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EALREADY}}
\DoxyCodeLine{08499\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EALREADY:\ \textcolor{keywordflow}{return}\ DRFLAC\_IN\_PROGRESS;}
\DoxyCodeLine{08500\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08501\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EINPROGRESS}}
\DoxyCodeLine{08502\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EINPROGRESS:\ \textcolor{keywordflow}{return}\ DRFLAC\_IN\_PROGRESS;}
\DoxyCodeLine{08503\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08504\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ESTALE}}
\DoxyCodeLine{08505\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ESTALE:\ \textcolor{keywordflow}{return}\ DRFLAC\_INVALID\_FILE;}
\DoxyCodeLine{08506\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08507\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EUCLEAN}}
\DoxyCodeLine{08508\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EUCLEAN:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08509\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08510\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOTNAM}}
\DoxyCodeLine{08511\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOTNAM:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08512\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08513\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENAVAIL}}
\DoxyCodeLine{08514\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENAVAIL:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08515\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08516\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EISNAM}}
\DoxyCodeLine{08517\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EISNAM:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08518\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08519\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EREMOTEIO}}
\DoxyCodeLine{08520\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EREMOTEIO:\ \textcolor{keywordflow}{return}\ DRFLAC\_IO\_ERROR;}
\DoxyCodeLine{08521\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08522\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EDQUOT}}
\DoxyCodeLine{08523\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EDQUOT:\ \textcolor{keywordflow}{return}\ DRFLAC\_NO\_SPACE;}
\DoxyCodeLine{08524\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08525\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOMEDIUM}}
\DoxyCodeLine{08526\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOMEDIUM:\ \textcolor{keywordflow}{return}\ DRFLAC\_DOES\_NOT\_EXIST;}
\DoxyCodeLine{08527\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08528\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EMEDIUMTYPE}}
\DoxyCodeLine{08529\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMEDIUMTYPE:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08530\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08531\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ECANCELED}}
\DoxyCodeLine{08532\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ECANCELED:\ \textcolor{keywordflow}{return}\ DRFLAC\_CANCELLED;}
\DoxyCodeLine{08533\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08534\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOKEY}}
\DoxyCodeLine{08535\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOKEY:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08536\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08537\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EKEYEXPIRED}}
\DoxyCodeLine{08538\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EKEYEXPIRED:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08539\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08540\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EKEYREVOKED}}
\DoxyCodeLine{08541\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EKEYREVOKED:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08542\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08543\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EKEYREJECTED}}
\DoxyCodeLine{08544\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EKEYREJECTED:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08545\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08546\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EOWNERDEAD}}
\DoxyCodeLine{08547\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EOWNERDEAD:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08548\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08549\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ENOTRECOVERABLE}}
\DoxyCodeLine{08550\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ENOTRECOVERABLE:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08551\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08552\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ ERFKILL}}
\DoxyCodeLine{08553\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ ERFKILL:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08554\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08555\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ EHWPOISON}}
\DoxyCodeLine{08556\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EHWPOISON:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08557\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08558\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08559\ \ \ \ \ \}}
\DoxyCodeLine{08560\ \}}
\DoxyCodeLine{08561\ \textcolor{comment}{/*\ End\ Errno\ */}}
\DoxyCodeLine{08562\ }
\DoxyCodeLine{08563\ \textcolor{comment}{/*\ fopen\ */}}
\DoxyCodeLine{08564\ \textcolor{keyword}{static}\ drflac\_result\ drflac\_fopen(FILE**\ ppFile,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pFilePath,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pOpenMode)}
\DoxyCodeLine{08565\ \{}
\DoxyCodeLine{08566\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)\ \&\&\ \_MSC\_VER\ >=\ 1400}}
\DoxyCodeLine{08567\ \ \ \ \ errno\_t\ \mbox{\hyperlink{group__system_ga885486205a724571d140a7c8a0e3626b}{err}};}
\DoxyCodeLine{08568\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08569\ }
\DoxyCodeLine{08570\ \ \ \ \ \textcolor{keywordflow}{if}\ (ppFile\ !=\ NULL)\ \{}
\DoxyCodeLine{08571\ \ \ \ \ \ \ \ \ *ppFile\ =\ NULL;\ \ \textcolor{comment}{/*\ Safety.\ */}}
\DoxyCodeLine{08572\ \ \ \ \ \}}
\DoxyCodeLine{08573\ }
\DoxyCodeLine{08574\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFilePath\ ==\ NULL\ ||\ pOpenMode\ ==\ NULL\ ||\ ppFile\ ==\ NULL)\ \{}
\DoxyCodeLine{08575\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_INVALID\_ARGS;}
\DoxyCodeLine{08576\ \ \ \ \ \}}
\DoxyCodeLine{08577\ }
\DoxyCodeLine{08578\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)\ \&\&\ \_MSC\_VER\ >=\ 1400}}
\DoxyCodeLine{08579\ \ \ \ \ \mbox{\hyperlink{group__system_ga885486205a724571d140a7c8a0e3626b}{err}}\ =\ fopen\_s(ppFile,\ pFilePath,\ pOpenMode);}
\DoxyCodeLine{08580\ \ \ \ \ \textcolor{keywordflow}{if}\ (err\ !=\ 0)\ \{}
\DoxyCodeLine{08581\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_result\_from\_errno(err);}
\DoxyCodeLine{08582\ \ \ \ \ \}}
\DoxyCodeLine{08583\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{08584\ \textcolor{preprocessor}{\#if\ defined(\_WIN32)\ ||\ defined(\_\_APPLE\_\_)}}
\DoxyCodeLine{08585\ \ \ \ \ *ppFile\ =\ fopen(pFilePath,\ pOpenMode);}
\DoxyCodeLine{08586\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{08587\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\_FILE\_OFFSET\_BITS)\ \&\&\ \_FILE\_OFFSET\_BITS\ ==\ 64\ \&\&\ defined(\_LARGEFILE64\_SOURCE)}}
\DoxyCodeLine{08588\ \ \ \ \ \ \ \ \ *ppFile\ =\ fopen64(pFilePath,\ pOpenMode);}
\DoxyCodeLine{08589\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{08590\ \ \ \ \ \ \ \ \ *ppFile\ =\ fopen(pFilePath,\ pOpenMode);}
\DoxyCodeLine{08591\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08592\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08593\ \ \ \ \ \textcolor{keywordflow}{if}\ (*ppFile\ ==\ NULL)\ \{}
\DoxyCodeLine{08594\ \ \ \ \ \ \ \ \ drflac\_result\ result\ =\ drflac\_result\_from\_errno(errno);}
\DoxyCodeLine{08595\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ ==\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{08596\ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ DRFLAC\_ERROR;\ \ \ \textcolor{comment}{/*\ Just\ a\ safety\ check\ to\ make\ sure\ we\ never\ ever\ return\ success\ when\ pFile\ ==\ NULL.\ */}}
\DoxyCodeLine{08597\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08598\ }
\DoxyCodeLine{08599\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{08600\ \ \ \ \ \}}
\DoxyCodeLine{08601\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08602\ }
\DoxyCodeLine{08603\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_SUCCESS;}
\DoxyCodeLine{08604\ \}}
\DoxyCodeLine{08605\ }
\DoxyCodeLine{08606\ \textcolor{comment}{/*}}
\DoxyCodeLine{08607\ \textcolor{comment}{\_wfopen()\ isn't\ always\ available\ in\ all\ compilation\ environments.}}
\DoxyCodeLine{08608\ \textcolor{comment}{}}
\DoxyCodeLine{08609\ \textcolor{comment}{\ \ \ \ *\ Windows\ only.}}
\DoxyCodeLine{08610\ \textcolor{comment}{\ \ \ \ *\ MSVC\ seems\ to\ support\ it\ universally\ as\ far\ back\ as\ VC6\ from\ what\ I\ can\ tell\ (haven't\ checked\ further\ back).}}
\DoxyCodeLine{08611\ \textcolor{comment}{\ \ \ \ *\ MinGW-\/64\ (both\ 32-\/\ and\ 64-\/bit)\ seems\ to\ support\ it.}}
\DoxyCodeLine{08612\ \textcolor{comment}{\ \ \ \ *\ MinGW\ wraps\ it\ in\ !defined(\_\_STRICT\_ANSI\_\_).}}
\DoxyCodeLine{08613\ \textcolor{comment}{\ \ \ \ *\ OpenWatcom\ wraps\ it\ in\ !defined(\_NO\_EXT\_KEYS).}}
\DoxyCodeLine{08614\ \textcolor{comment}{}}
\DoxyCodeLine{08615\ \textcolor{comment}{This\ can\ be\ reviewed\ as\ compatibility\ issues\ arise.\ The\ preference\ is\ to\ use\ \_wfopen\_s()\ and\ \_wfopen()\ as\ opposed\ to\ the\ wcsrtombs()}}
\DoxyCodeLine{08616\ \textcolor{comment}{fallback,\ so\ if\ you\ notice\ your\ compiler\ not\ detecting\ this\ properly\ I'm\ happy\ to\ look\ at\ adding\ support.}}
\DoxyCodeLine{08617\ \textcolor{comment}{*/}}
\DoxyCodeLine{08618\ \textcolor{preprocessor}{\#if\ defined(\_WIN32)}}
\DoxyCodeLine{08619\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\_MSC\_VER)\ ||\ defined(\_\_MINGW64\_\_)\ ||\ (!defined(\_\_STRICT\_ANSI\_\_)\ \&\&\ !defined(\_NO\_EXT\_KEYS))}}
\DoxyCodeLine{08620\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_HAS\_WFOPEN}}
\DoxyCodeLine{08621\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08622\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08623\ }
\DoxyCodeLine{08624\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_WCHAR}}
\DoxyCodeLine{08625\ \textcolor{keyword}{static}\ drflac\_result\ drflac\_wfopen(FILE**\ ppFile,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{wchar\_t}*\ pFilePath,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{wchar\_t}*\ pOpenMode,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{08626\ \{}
\DoxyCodeLine{08627\ \ \ \ \ \textcolor{keywordflow}{if}\ (ppFile\ !=\ NULL)\ \{}
\DoxyCodeLine{08628\ \ \ \ \ \ \ \ \ *ppFile\ =\ NULL;\ \ \textcolor{comment}{/*\ Safety.\ */}}
\DoxyCodeLine{08629\ \ \ \ \ \}}
\DoxyCodeLine{08630\ }
\DoxyCodeLine{08631\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFilePath\ ==\ NULL\ ||\ pOpenMode\ ==\ NULL\ ||\ ppFile\ ==\ NULL)\ \{}
\DoxyCodeLine{08632\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_INVALID\_ARGS;}
\DoxyCodeLine{08633\ \ \ \ \ \}}
\DoxyCodeLine{08634\ }
\DoxyCodeLine{08635\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_HAS\_WFOPEN)}}
\DoxyCodeLine{08636\ \ \ \ \ \{}
\DoxyCodeLine{08637\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Use\ \_wfopen()\ on\ Windows.\ */}}
\DoxyCodeLine{08638\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\_MSC\_VER)\ \&\&\ \_MSC\_VER\ >=\ 1400}}
\DoxyCodeLine{08639\ \ \ \ \ \ \ \ \ errno\_t\ \mbox{\hyperlink{group__system_ga885486205a724571d140a7c8a0e3626b}{err}}\ =\ \_wfopen\_s(ppFile,\ pFilePath,\ pOpenMode);}
\DoxyCodeLine{08640\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (err\ !=\ 0)\ \{}
\DoxyCodeLine{08641\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_result\_from\_errno(err);}
\DoxyCodeLine{08642\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08643\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{08644\ \ \ \ \ \ \ \ \ *ppFile\ =\ \_wfopen(pFilePath,\ pOpenMode);}
\DoxyCodeLine{08645\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (*ppFile\ ==\ NULL)\ \{}
\DoxyCodeLine{08646\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_result\_from\_errno(errno);}
\DoxyCodeLine{08647\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08648\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08649\ \ \ \ \ \ \ \ \ (void)pAllocationCallbacks;}
\DoxyCodeLine{08650\ \ \ \ \ \}}
\DoxyCodeLine{08651\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{08652\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{08653\ \textcolor{comment}{\ \ \ \ Use\ fopen()\ on\ anything\ other\ than\ Windows.\ Requires\ a\ conversion.\ This\ is\ annoying\ because}}
\DoxyCodeLine{08654\ \textcolor{comment}{\ \ \ \ fopen()\ is\ locale\ specific.\ The\ only\ real\ way\ I\ can\ think\ of\ to\ do\ this\ is\ with\ wcsrtombs().\ Note}}
\DoxyCodeLine{08655\ \textcolor{comment}{\ \ \ \ that\ wcstombs()\ is\ apparently\ not\ thread-\/safe\ because\ it\ uses\ a\ static\ global\ mbstate\_t\ object\ for}}
\DoxyCodeLine{08656\ \textcolor{comment}{\ \ \ \ maintaining\ state.\ I've\ checked\ this\ with\ -\/std=c89\ and\ it\ works,\ but\ if\ somebody\ get's\ a\ compiler}}
\DoxyCodeLine{08657\ \textcolor{comment}{\ \ \ \ error\ I'll\ look\ into\ improving\ compatibility.}}
\DoxyCodeLine{08658\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{08659\ }
\DoxyCodeLine{08660\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{08661\ \textcolor{comment}{\ \ \ \ Some\ compilers\ don't\ support\ wchar\_t\ or\ wcsrtombs()\ which\ we're\ using\ below.\ In\ this\ case\ we\ just}}
\DoxyCodeLine{08662\ \textcolor{comment}{\ \ \ \ need\ to\ abort\ with\ an\ error.\ If\ you\ encounter\ a\ compiler\ lacking\ such\ support,\ add\ it\ to\ this\ list}}
\DoxyCodeLine{08663\ \textcolor{comment}{\ \ \ \ and\ submit\ a\ bug\ report\ and\ it'll\ be\ added\ to\ the\ library\ upstream.}}
\DoxyCodeLine{08664\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{08665\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\_\_DJGPP\_\_)}}
\DoxyCodeLine{08666\ \ \ \ \ \{}
\DoxyCodeLine{08667\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Nothing\ to\ do\ here.\ This\ will\ fall\ through\ to\ the\ error\ check\ below.\ */}}
\DoxyCodeLine{08668\ \ \ \ \ \}}
\DoxyCodeLine{08669\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{08670\ \ \ \ \ \{}
\DoxyCodeLine{08671\ \ \ \ \ \ \ \ \ mbstate\_t\ mbs;}
\DoxyCodeLine{08672\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ lenMB;}
\DoxyCodeLine{08673\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{wchar\_t}*\ pFilePathTemp\ =\ pFilePath;}
\DoxyCodeLine{08674\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}*\ pFilePathMB\ =\ NULL;}
\DoxyCodeLine{08675\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ pOpenModeMB[32]\ =\ \{0\};}
\DoxyCodeLine{08676\ }
\DoxyCodeLine{08677\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Get\ the\ length\ first.\ */}}
\DoxyCodeLine{08678\ \ \ \ \ \ \ \ \ DRFLAC\_ZERO\_OBJECT(\&mbs);}
\DoxyCodeLine{08679\ \ \ \ \ \ \ \ \ lenMB\ =\ wcsrtombs(NULL,\ \&pFilePathTemp,\ 0,\ \&mbs);}
\DoxyCodeLine{08680\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (lenMB\ ==\ (\textcolor{keywordtype}{size\_t})-\/1)\ \{}
\DoxyCodeLine{08681\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_result\_from\_errno(errno);}
\DoxyCodeLine{08682\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08683\ }
\DoxyCodeLine{08684\ \ \ \ \ \ \ \ \ pFilePathMB\ =\ (\textcolor{keywordtype}{char}*)drflac\_\_malloc\_from\_callbacks(lenMB\ +\ 1,\ pAllocationCallbacks);}
\DoxyCodeLine{08685\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pFilePathMB\ ==\ NULL)\ \{}
\DoxyCodeLine{08686\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_OUT\_OF\_MEMORY;}
\DoxyCodeLine{08687\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08688\ }
\DoxyCodeLine{08689\ \ \ \ \ \ \ \ \ pFilePathTemp\ =\ pFilePath;}
\DoxyCodeLine{08690\ \ \ \ \ \ \ \ \ DRFLAC\_ZERO\_OBJECT(\&mbs);}
\DoxyCodeLine{08691\ \ \ \ \ \ \ \ \ wcsrtombs(pFilePathMB,\ \&pFilePathTemp,\ lenMB\ +\ 1,\ \&mbs);}
\DoxyCodeLine{08692\ }
\DoxyCodeLine{08693\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ The\ open\ mode\ should\ always\ consist\ of\ ASCII\ characters\ so\ we\ should\ be\ able\ to\ do\ a\ trivial\ conversion.\ */}}
\DoxyCodeLine{08694\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{08695\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ i\ =\ 0;}
\DoxyCodeLine{08696\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{08697\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pOpenMode[i]\ ==\ 0)\ \{}
\DoxyCodeLine{08698\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pOpenModeMB[i]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{08699\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{08700\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08701\ }
\DoxyCodeLine{08702\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pOpenModeMB[i]\ =\ (char)pOpenMode[i];}
\DoxyCodeLine{08703\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ i\ +=\ 1;}
\DoxyCodeLine{08704\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08705\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08706\ }
\DoxyCodeLine{08707\ \ \ \ \ \ \ \ \ *ppFile\ =\ fopen(pFilePathMB,\ pOpenModeMB);}
\DoxyCodeLine{08708\ }
\DoxyCodeLine{08709\ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pFilePathMB,\ pAllocationCallbacks);}
\DoxyCodeLine{08710\ \ \ \ \ \}}
\DoxyCodeLine{08711\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{08712\ }
\DoxyCodeLine{08713\ \ \ \ \ \textcolor{keywordflow}{if}\ (*ppFile\ ==\ NULL)\ \{}
\DoxyCodeLine{08714\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_ERROR;}
\DoxyCodeLine{08715\ \ \ \ \ \}}
\DoxyCodeLine{08716\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08717\ }
\DoxyCodeLine{08718\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_SUCCESS;}
\DoxyCodeLine{08719\ \}}
\DoxyCodeLine{08720\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08721\ \textcolor{comment}{/*\ End\ fopen\ */}}
\DoxyCodeLine{08722\ }
\DoxyCodeLine{08723\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ drflac\_\_on\_read\_stdio(\textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{void}*\ bufferOut,\ \textcolor{keywordtype}{size\_t}\ bytesToRead)}
\DoxyCodeLine{08724\ \{}
\DoxyCodeLine{08725\ \ \ \ \ \textcolor{keywordflow}{return}\ fread(bufferOut,\ 1,\ bytesToRead,\ (FILE*)pUserData);}
\DoxyCodeLine{08726\ \}}
\DoxyCodeLine{08727\ }
\DoxyCodeLine{08728\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_on\_seek\_stdio(\textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structoffset}{offset}},\ drflac\_seek\_origin\ origin)}
\DoxyCodeLine{08729\ \{}
\DoxyCodeLine{08730\ \ \ \ \ DRFLAC\_ASSERT(\mbox{\hyperlink{structoffset}{offset}}\ >=\ 0);\ \ \textcolor{comment}{/*\ <-\/-\/\ Never\ seek\ backwards.\ */}}
\DoxyCodeLine{08731\ }
\DoxyCodeLine{08732\ \ \ \ \ \textcolor{keywordflow}{return}\ fseek((FILE*)pUserData,\ \mbox{\hyperlink{structoffset}{offset}},\ (origin\ ==\ drflac\_seek\_origin\_current)\ ?\ SEEK\_CUR\ :\ SEEK\_SET)\ ==\ 0;}
\DoxyCodeLine{08733\ \}}
\DoxyCodeLine{08734\ }
\DoxyCodeLine{08735\ }
\DoxyCodeLine{08736\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_file(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pFileName,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{08737\ \{}
\DoxyCodeLine{08738\ \ \ \ \ \mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac;}
\DoxyCodeLine{08739\ \ \ \ \ FILE*\ pFile;}
\DoxyCodeLine{08740\ }
\DoxyCodeLine{08741\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_fopen(\&pFile,\ pFileName,\ \textcolor{stringliteral}{"{}rb"{}})\ !=\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{08742\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{08743\ \ \ \ \ \}}
\DoxyCodeLine{08744\ }
\DoxyCodeLine{08745\ \ \ \ \ pFlac\ =\ drflac\_open(drflac\_\_on\_read\_stdio,\ drflac\_\_on\_seek\_stdio,\ (\textcolor{keywordtype}{void}*)pFile,\ pAllocationCallbacks);}
\DoxyCodeLine{08746\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{08747\ \ \ \ \ \ \ \ \ fclose(pFile);}
\DoxyCodeLine{08748\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{08749\ \ \ \ \ \}}
\DoxyCodeLine{08750\ }
\DoxyCodeLine{08751\ \ \ \ \ \textcolor{keywordflow}{return}\ pFlac;}
\DoxyCodeLine{08752\ \}}
\DoxyCodeLine{08753\ }
\DoxyCodeLine{08754\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_WCHAR}}
\DoxyCodeLine{08755\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_file\_w(\textcolor{keyword}{const}\ \textcolor{keywordtype}{wchar\_t}*\ pFileName,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{08756\ \{}
\DoxyCodeLine{08757\ \ \ \ \ \mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac;}
\DoxyCodeLine{08758\ \ \ \ \ FILE*\ pFile;}
\DoxyCodeLine{08759\ }
\DoxyCodeLine{08760\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_wfopen(\&pFile,\ pFileName,\ L\textcolor{stringliteral}{"{}rb"{}},\ pAllocationCallbacks)\ !=\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{08761\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{08762\ \ \ \ \ \}}
\DoxyCodeLine{08763\ }
\DoxyCodeLine{08764\ \ \ \ \ pFlac\ =\ drflac\_open(drflac\_\_on\_read\_stdio,\ drflac\_\_on\_seek\_stdio,\ (\textcolor{keywordtype}{void}*)pFile,\ pAllocationCallbacks);}
\DoxyCodeLine{08765\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{08766\ \ \ \ \ \ \ \ \ fclose(pFile);}
\DoxyCodeLine{08767\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{08768\ \ \ \ \ \}}
\DoxyCodeLine{08769\ }
\DoxyCodeLine{08770\ \ \ \ \ \textcolor{keywordflow}{return}\ pFlac;}
\DoxyCodeLine{08771\ \}}
\DoxyCodeLine{08772\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08773\ }
\DoxyCodeLine{08774\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_file\_with\_metadata(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pFileName,\ drflac\_meta\_proc\ onMeta,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{08775\ \{}
\DoxyCodeLine{08776\ \ \ \ \ \mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac;}
\DoxyCodeLine{08777\ \ \ \ \ FILE*\ pFile;}
\DoxyCodeLine{08778\ }
\DoxyCodeLine{08779\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_fopen(\&pFile,\ pFileName,\ \textcolor{stringliteral}{"{}rb"{}})\ !=\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{08780\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{08781\ \ \ \ \ \}}
\DoxyCodeLine{08782\ }
\DoxyCodeLine{08783\ \ \ \ \ pFlac\ =\ drflac\_open\_with\_metadata\_private(drflac\_\_on\_read\_stdio,\ drflac\_\_on\_seek\_stdio,\ onMeta,\ drflac\_container\_unknown,\ (\textcolor{keywordtype}{void}*)pFile,\ pUserData,\ pAllocationCallbacks);}
\DoxyCodeLine{08784\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{08785\ \ \ \ \ \ \ \ \ fclose(pFile);}
\DoxyCodeLine{08786\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pFlac;}
\DoxyCodeLine{08787\ \ \ \ \ \}}
\DoxyCodeLine{08788\ }
\DoxyCodeLine{08789\ \ \ \ \ \textcolor{keywordflow}{return}\ pFlac;}
\DoxyCodeLine{08790\ \}}
\DoxyCodeLine{08791\ }
\DoxyCodeLine{08792\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_WCHAR}}
\DoxyCodeLine{08793\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_file\_with\_metadata\_w(\textcolor{keyword}{const}\ \textcolor{keywordtype}{wchar\_t}*\ pFileName,\ drflac\_meta\_proc\ onMeta,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{08794\ \{}
\DoxyCodeLine{08795\ \ \ \ \ \mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac;}
\DoxyCodeLine{08796\ \ \ \ \ FILE*\ pFile;}
\DoxyCodeLine{08797\ }
\DoxyCodeLine{08798\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_wfopen(\&pFile,\ pFileName,\ L\textcolor{stringliteral}{"{}rb"{}},\ pAllocationCallbacks)\ !=\ DRFLAC\_SUCCESS)\ \{}
\DoxyCodeLine{08799\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{08800\ \ \ \ \ \}}
\DoxyCodeLine{08801\ }
\DoxyCodeLine{08802\ \ \ \ \ pFlac\ =\ drflac\_open\_with\_metadata\_private(drflac\_\_on\_read\_stdio,\ drflac\_\_on\_seek\_stdio,\ onMeta,\ drflac\_container\_unknown,\ (\textcolor{keywordtype}{void}*)pFile,\ pUserData,\ pAllocationCallbacks);}
\DoxyCodeLine{08803\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{08804\ \ \ \ \ \ \ \ \ fclose(pFile);}
\DoxyCodeLine{08805\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pFlac;}
\DoxyCodeLine{08806\ \ \ \ \ \}}
\DoxyCodeLine{08807\ }
\DoxyCodeLine{08808\ \ \ \ \ \textcolor{keywordflow}{return}\ pFlac;}
\DoxyCodeLine{08809\ \}}
\DoxyCodeLine{08810\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08811\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{/*\ DR\_FLAC\_NO\_STDIO\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{08812\ }
\DoxyCodeLine{08813\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ drflac\_\_on\_read\_memory(\textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{void}*\ bufferOut,\ \textcolor{keywordtype}{size\_t}\ bytesToRead)}
\DoxyCodeLine{08814\ \{}
\DoxyCodeLine{08815\ \ \ \ \ \mbox{\hyperlink{structdrflac____memory__stream}{drflac\_\_memory\_stream}}*\ memoryStream\ =\ (\mbox{\hyperlink{structdrflac____memory__stream}{drflac\_\_memory\_stream}}*)pUserData;}
\DoxyCodeLine{08816\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ bytesRemaining;}
\DoxyCodeLine{08817\ }
\DoxyCodeLine{08818\ \ \ \ \ DRFLAC\_ASSERT(memoryStream\ !=\ NULL);}
\DoxyCodeLine{08819\ \ \ \ \ DRFLAC\_ASSERT(memoryStream-\/>dataSize\ >=\ memoryStream-\/>currentReadPos);}
\DoxyCodeLine{08820\ }
\DoxyCodeLine{08821\ \ \ \ \ bytesRemaining\ =\ memoryStream-\/>dataSize\ -\/\ memoryStream-\/>currentReadPos;}
\DoxyCodeLine{08822\ \ \ \ \ \textcolor{keywordflow}{if}\ (bytesToRead\ >\ bytesRemaining)\ \{}
\DoxyCodeLine{08823\ \ \ \ \ \ \ \ \ bytesToRead\ =\ bytesRemaining;}
\DoxyCodeLine{08824\ \ \ \ \ \}}
\DoxyCodeLine{08825\ }
\DoxyCodeLine{08826\ \ \ \ \ \textcolor{keywordflow}{if}\ (bytesToRead\ >\ 0)\ \{}
\DoxyCodeLine{08827\ \ \ \ \ \ \ \ \ DRFLAC\_COPY\_MEMORY(bufferOut,\ memoryStream-\/>data\ +\ memoryStream-\/>currentReadPos,\ bytesToRead);}
\DoxyCodeLine{08828\ \ \ \ \ \ \ \ \ memoryStream-\/>currentReadPos\ +=\ bytesToRead;}
\DoxyCodeLine{08829\ \ \ \ \ \}}
\DoxyCodeLine{08830\ }
\DoxyCodeLine{08831\ \ \ \ \ \textcolor{keywordflow}{return}\ bytesToRead;}
\DoxyCodeLine{08832\ \}}
\DoxyCodeLine{08833\ }
\DoxyCodeLine{08834\ \textcolor{keyword}{static}\ drflac\_bool32\ drflac\_\_on\_seek\_memory(\textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structoffset}{offset}},\ drflac\_seek\_origin\ origin)}
\DoxyCodeLine{08835\ \{}
\DoxyCodeLine{08836\ \ \ \ \ \mbox{\hyperlink{structdrflac____memory__stream}{drflac\_\_memory\_stream}}*\ memoryStream\ =\ (\mbox{\hyperlink{structdrflac____memory__stream}{drflac\_\_memory\_stream}}*)pUserData;}
\DoxyCodeLine{08837\ }
\DoxyCodeLine{08838\ \ \ \ \ DRFLAC\_ASSERT(memoryStream\ !=\ NULL);}
\DoxyCodeLine{08839\ \ \ \ \ DRFLAC\_ASSERT(\mbox{\hyperlink{structoffset}{offset}}\ >=\ 0);\ \textcolor{comment}{/*\ <-\/-\/\ Never\ seek\ backwards.\ */}}
\DoxyCodeLine{08840\ }
\DoxyCodeLine{08841\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structoffset}{offset}}\ >\ (drflac\_int64)memoryStream-\/>dataSize)\ \{}
\DoxyCodeLine{08842\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{08843\ \ \ \ \ \}}
\DoxyCodeLine{08844\ }
\DoxyCodeLine{08845\ \ \ \ \ \textcolor{keywordflow}{if}\ (origin\ ==\ drflac\_seek\_origin\_current)\ \{}
\DoxyCodeLine{08846\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (memoryStream-\/>currentReadPos\ +\ offset\ <=\ memoryStream-\/>dataSize)\ \{}
\DoxyCodeLine{08847\ \ \ \ \ \ \ \ \ \ \ \ \ memoryStream-\/>currentReadPos\ +=\ \mbox{\hyperlink{structoffset}{offset}};}
\DoxyCodeLine{08848\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{08849\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \textcolor{comment}{/*\ Trying\ to\ seek\ too\ far\ forward.\ */}}
\DoxyCodeLine{08850\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08851\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{08852\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((drflac\_uint32)offset\ <=\ memoryStream-\/>dataSize)\ \{}
\DoxyCodeLine{08853\ \ \ \ \ \ \ \ \ \ \ \ \ memoryStream-\/>currentReadPos\ =\ \mbox{\hyperlink{structoffset}{offset}};}
\DoxyCodeLine{08854\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{08855\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;\ \ \textcolor{comment}{/*\ Trying\ to\ seek\ too\ far\ forward.\ */}}
\DoxyCodeLine{08856\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08857\ \ \ \ \ \}}
\DoxyCodeLine{08858\ }
\DoxyCodeLine{08859\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{08860\ \}}
\DoxyCodeLine{08861\ }
\DoxyCodeLine{08862\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_memory(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ pData,\ \textcolor{keywordtype}{size\_t}\ dataSize,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{08863\ \{}
\DoxyCodeLine{08864\ \ \ \ \ \mbox{\hyperlink{structdrflac____memory__stream}{drflac\_\_memory\_stream}}\ memoryStream;}
\DoxyCodeLine{08865\ \ \ \ \ \mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac;}
\DoxyCodeLine{08866\ }
\DoxyCodeLine{08867\ \ \ \ \ memoryStream.data\ =\ (\textcolor{keyword}{const}\ drflac\_uint8*)pData;}
\DoxyCodeLine{08868\ \ \ \ \ memoryStream.dataSize\ =\ dataSize;}
\DoxyCodeLine{08869\ \ \ \ \ memoryStream.currentReadPos\ =\ 0;}
\DoxyCodeLine{08870\ \ \ \ \ pFlac\ =\ drflac\_open(drflac\_\_on\_read\_memory,\ drflac\_\_on\_seek\_memory,\ \&memoryStream,\ pAllocationCallbacks);}
\DoxyCodeLine{08871\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{08872\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{08873\ \ \ \ \ \}}
\DoxyCodeLine{08874\ }
\DoxyCodeLine{08875\ \ \ \ \ pFlac-\/>memoryStream\ =\ memoryStream;}
\DoxyCodeLine{08876\ }
\DoxyCodeLine{08877\ \ \ \ \ \textcolor{comment}{/*\ This\ is\ an\ awful\ hack...\ */}}
\DoxyCodeLine{08878\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{08879\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>container\ ==\ drflac\_container\_ogg)}
\DoxyCodeLine{08880\ \ \ \ \ \{}
\DoxyCodeLine{08881\ \ \ \ \ \ \ \ \ drflac\_oggbs*\ oggbs\ =\ (drflac\_oggbs*)pFlac-\/>\_oggbs;}
\DoxyCodeLine{08882\ \ \ \ \ \ \ \ \ oggbs-\/>pUserData\ =\ \&pFlac-\/>memoryStream;}
\DoxyCodeLine{08883\ \ \ \ \ \}}
\DoxyCodeLine{08884\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{08885\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08886\ \ \ \ \ \{}
\DoxyCodeLine{08887\ \ \ \ \ \ \ \ \ pFlac-\/>bs.pUserData\ =\ \&pFlac-\/>memoryStream;}
\DoxyCodeLine{08888\ \ \ \ \ \}}
\DoxyCodeLine{08889\ }
\DoxyCodeLine{08890\ \ \ \ \ \textcolor{keywordflow}{return}\ pFlac;}
\DoxyCodeLine{08891\ \}}
\DoxyCodeLine{08892\ }
\DoxyCodeLine{08893\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_memory\_with\_metadata(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ pData,\ \textcolor{keywordtype}{size\_t}\ dataSize,\ drflac\_meta\_proc\ onMeta,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{08894\ \{}
\DoxyCodeLine{08895\ \ \ \ \ \mbox{\hyperlink{structdrflac____memory__stream}{drflac\_\_memory\_stream}}\ memoryStream;}
\DoxyCodeLine{08896\ \ \ \ \ \mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac;}
\DoxyCodeLine{08897\ }
\DoxyCodeLine{08898\ \ \ \ \ memoryStream.data\ =\ (\textcolor{keyword}{const}\ drflac\_uint8*)pData;}
\DoxyCodeLine{08899\ \ \ \ \ memoryStream.dataSize\ =\ dataSize;}
\DoxyCodeLine{08900\ \ \ \ \ memoryStream.currentReadPos\ =\ 0;}
\DoxyCodeLine{08901\ \ \ \ \ pFlac\ =\ drflac\_open\_with\_metadata\_private(drflac\_\_on\_read\_memory,\ drflac\_\_on\_seek\_memory,\ onMeta,\ drflac\_container\_unknown,\ \&memoryStream,\ pUserData,\ pAllocationCallbacks);}
\DoxyCodeLine{08902\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{08903\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{08904\ \ \ \ \ \}}
\DoxyCodeLine{08905\ }
\DoxyCodeLine{08906\ \ \ \ \ pFlac-\/>memoryStream\ =\ memoryStream;}
\DoxyCodeLine{08907\ }
\DoxyCodeLine{08908\ \ \ \ \ \textcolor{comment}{/*\ This\ is\ an\ awful\ hack...\ */}}
\DoxyCodeLine{08909\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{08910\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>container\ ==\ drflac\_container\_ogg)}
\DoxyCodeLine{08911\ \ \ \ \ \{}
\DoxyCodeLine{08912\ \ \ \ \ \ \ \ \ drflac\_oggbs*\ oggbs\ =\ (drflac\_oggbs*)pFlac-\/>\_oggbs;}
\DoxyCodeLine{08913\ \ \ \ \ \ \ \ \ oggbs-\/>pUserData\ =\ \&pFlac-\/>memoryStream;}
\DoxyCodeLine{08914\ \ \ \ \ \}}
\DoxyCodeLine{08915\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{08916\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08917\ \ \ \ \ \{}
\DoxyCodeLine{08918\ \ \ \ \ \ \ \ \ pFlac-\/>bs.pUserData\ =\ \&pFlac-\/>memoryStream;}
\DoxyCodeLine{08919\ \ \ \ \ \}}
\DoxyCodeLine{08920\ }
\DoxyCodeLine{08921\ \ \ \ \ \textcolor{keywordflow}{return}\ pFlac;}
\DoxyCodeLine{08922\ \}}
\DoxyCodeLine{08923\ }
\DoxyCodeLine{08924\ }
\DoxyCodeLine{08925\ }
\DoxyCodeLine{08926\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open(drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{08927\ \{}
\DoxyCodeLine{08928\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_open\_with\_metadata\_private(onRead,\ onSeek,\ NULL,\ drflac\_container\_unknown,\ pUserData,\ pUserData,\ pAllocationCallbacks);}
\DoxyCodeLine{08929\ \}}
\DoxyCodeLine{08930\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_relaxed(drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ drflac\_container\ container,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{08931\ \{}
\DoxyCodeLine{08932\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_open\_with\_metadata\_private(onRead,\ onSeek,\ NULL,\ container,\ pUserData,\ pUserData,\ pAllocationCallbacks);}
\DoxyCodeLine{08933\ \}}
\DoxyCodeLine{08934\ }
\DoxyCodeLine{08935\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_with\_metadata(drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ drflac\_meta\_proc\ onMeta,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{08936\ \{}
\DoxyCodeLine{08937\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_open\_with\_metadata\_private(onRead,\ onSeek,\ onMeta,\ drflac\_container\_unknown,\ pUserData,\ pUserData,\ pAllocationCallbacks);}
\DoxyCodeLine{08938\ \}}
\DoxyCodeLine{08939\ DRFLAC\_API\ \mbox{\hyperlink{structdrflac}{drflac}}*\ drflac\_open\_with\_metadata\_relaxed(drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ drflac\_meta\_proc\ onMeta,\ drflac\_container\ container,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{08940\ \{}
\DoxyCodeLine{08941\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_open\_with\_metadata\_private(onRead,\ onSeek,\ onMeta,\ container,\ pUserData,\ pUserData,\ pAllocationCallbacks);}
\DoxyCodeLine{08942\ \}}
\DoxyCodeLine{08943\ }
\DoxyCodeLine{08944\ DRFLAC\_API\ \textcolor{keywordtype}{void}\ drflac\_close(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac)}
\DoxyCodeLine{08945\ \{}
\DoxyCodeLine{08946\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{08947\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{08948\ \ \ \ \ \}}
\DoxyCodeLine{08949\ }
\DoxyCodeLine{08950\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_STDIO}}
\DoxyCodeLine{08951\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{08952\ \textcolor{comment}{\ \ \ \ If\ we\ opened\ the\ file\ with\ drflac\_open\_file()\ we\ will\ want\ to\ close\ the\ file\ handle.\ We\ can\ know\ whether\ or\ not\ drflac\_open\_file()}}
\DoxyCodeLine{08953\ \textcolor{comment}{\ \ \ \ was\ used\ by\ looking\ at\ the\ callbacks.}}
\DoxyCodeLine{08954\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{08955\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>bs.onRead\ ==\ drflac\_\_on\_read\_stdio)\ \{}
\DoxyCodeLine{08956\ \ \ \ \ \ \ \ \ fclose((FILE*)pFlac-\/>bs.pUserData);}
\DoxyCodeLine{08957\ \ \ \ \ \}}
\DoxyCodeLine{08958\ }
\DoxyCodeLine{08959\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{08960\ \ \ \ \ \textcolor{comment}{/*\ Need\ to\ clean\ up\ Ogg\ streams\ a\ bit\ differently\ due\ to\ the\ way\ the\ bit\ streaming\ is\ chained.\ */}}
\DoxyCodeLine{08961\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>container\ ==\ drflac\_container\_ogg)\ \{}
\DoxyCodeLine{08962\ \ \ \ \ \ \ \ \ drflac\_oggbs*\ oggbs\ =\ (drflac\_oggbs*)pFlac-\/>\_oggbs;}
\DoxyCodeLine{08963\ \ \ \ \ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bs.onRead\ ==\ drflac\_\_on\_read\_ogg);}
\DoxyCodeLine{08964\ }
\DoxyCodeLine{08965\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (oggbs-\/>onRead\ ==\ drflac\_\_on\_read\_stdio)\ \{}
\DoxyCodeLine{08966\ \ \ \ \ \ \ \ \ \ \ \ \ fclose((FILE*)oggbs-\/>pUserData);}
\DoxyCodeLine{08967\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{08968\ \ \ \ \ \}}
\DoxyCodeLine{08969\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08970\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08971\ }
\DoxyCodeLine{08972\ \ \ \ \ drflac\_\_free\_from\_callbacks(pFlac,\ \&pFlac-\/>allocationCallbacks);}
\DoxyCodeLine{08973\ \}}
\DoxyCodeLine{08974\ }
\DoxyCodeLine{08975\ }
\DoxyCodeLine{08976\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{08977\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_left\_side\_\_reference(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{08978\ \{}
\DoxyCodeLine{08979\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{08980\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{08981\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ (drflac\_uint32)pInputSamples0[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample);}
\DoxyCodeLine{08982\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ (drflac\_uint32)pInputSamples1[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample);}
\DoxyCodeLine{08983\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ left\ -\/\ side;}
\DoxyCodeLine{08984\ }
\DoxyCodeLine{08985\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)left;}
\DoxyCodeLine{08986\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)right;}
\DoxyCodeLine{08987\ \ \ \ \ \}}
\DoxyCodeLine{08988\ \}}
\DoxyCodeLine{08989\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{08990\ }
\DoxyCodeLine{08991\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_left\_side\_\_scalar(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{08992\ \{}
\DoxyCodeLine{08993\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{08994\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{08995\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{08996\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{08997\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{08998\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{08999\ }
\DoxyCodeLine{09000\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09001\ \ \ \ \ \ \ \ \ drflac\_uint32\ left0\ =\ pInputSamples0U32[i*4+0]\ <<\ shift0;}
\DoxyCodeLine{09002\ \ \ \ \ \ \ \ \ drflac\_uint32\ left1\ =\ pInputSamples0U32[i*4+1]\ <<\ shift0;}
\DoxyCodeLine{09003\ \ \ \ \ \ \ \ \ drflac\_uint32\ left2\ =\ pInputSamples0U32[i*4+2]\ <<\ shift0;}
\DoxyCodeLine{09004\ \ \ \ \ \ \ \ \ drflac\_uint32\ left3\ =\ pInputSamples0U32[i*4+3]\ <<\ shift0;}
\DoxyCodeLine{09005\ }
\DoxyCodeLine{09006\ \ \ \ \ \ \ \ \ drflac\_uint32\ side0\ =\ pInputSamples1U32[i*4+0]\ <<\ shift1;}
\DoxyCodeLine{09007\ \ \ \ \ \ \ \ \ drflac\_uint32\ side1\ =\ pInputSamples1U32[i*4+1]\ <<\ shift1;}
\DoxyCodeLine{09008\ \ \ \ \ \ \ \ \ drflac\_uint32\ side2\ =\ pInputSamples1U32[i*4+2]\ <<\ shift1;}
\DoxyCodeLine{09009\ \ \ \ \ \ \ \ \ drflac\_uint32\ side3\ =\ pInputSamples1U32[i*4+3]\ <<\ shift1;}
\DoxyCodeLine{09010\ }
\DoxyCodeLine{09011\ \ \ \ \ \ \ \ \ drflac\_uint32\ right0\ =\ left0\ -\/\ side0;}
\DoxyCodeLine{09012\ \ \ \ \ \ \ \ \ drflac\_uint32\ right1\ =\ left1\ -\/\ side1;}
\DoxyCodeLine{09013\ \ \ \ \ \ \ \ \ drflac\_uint32\ right2\ =\ left2\ -\/\ side2;}
\DoxyCodeLine{09014\ \ \ \ \ \ \ \ \ drflac\_uint32\ right3\ =\ left3\ -\/\ side3;}
\DoxyCodeLine{09015\ }
\DoxyCodeLine{09016\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+0]\ =\ (drflac\_int32)left0;}
\DoxyCodeLine{09017\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+1]\ =\ (drflac\_int32)right0;}
\DoxyCodeLine{09018\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+2]\ =\ (drflac\_int32)left1;}
\DoxyCodeLine{09019\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+3]\ =\ (drflac\_int32)right1;}
\DoxyCodeLine{09020\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+4]\ =\ (drflac\_int32)left2;}
\DoxyCodeLine{09021\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+5]\ =\ (drflac\_int32)right2;}
\DoxyCodeLine{09022\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+6]\ =\ (drflac\_int32)left3;}
\DoxyCodeLine{09023\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+7]\ =\ (drflac\_int32)right3;}
\DoxyCodeLine{09024\ \ \ \ \ \}}
\DoxyCodeLine{09025\ }
\DoxyCodeLine{09026\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09027\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{09028\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{09029\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ left\ -\/\ side;}
\DoxyCodeLine{09030\ }
\DoxyCodeLine{09031\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)left;}
\DoxyCodeLine{09032\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)right;}
\DoxyCodeLine{09033\ \ \ \ \ \}}
\DoxyCodeLine{09034\ \}}
\DoxyCodeLine{09035\ }
\DoxyCodeLine{09036\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{09037\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_left\_side\_\_sse2(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09038\ \{}
\DoxyCodeLine{09039\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09040\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{09041\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{09042\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{09043\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09044\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09045\ }
\DoxyCodeLine{09046\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{09047\ }
\DoxyCodeLine{09048\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09049\ \ \ \ \ \ \ \ \ \_\_m128i\ left\ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples0\ +\ i),\ shift0);}
\DoxyCodeLine{09050\ \ \ \ \ \ \ \ \ \_\_m128i\ side\ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples1\ +\ i),\ shift1);}
\DoxyCodeLine{09051\ \ \ \ \ \ \ \ \ \_\_m128i\ right\ =\ \_mm\_sub\_epi32(left,\ side);}
\DoxyCodeLine{09052\ }
\DoxyCodeLine{09053\ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)(pOutputSamples\ +\ i*8\ +\ 0),\ \_mm\_unpacklo\_epi32(left,\ right));}
\DoxyCodeLine{09054\ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)(pOutputSamples\ +\ i*8\ +\ 4),\ \_mm\_unpackhi\_epi32(left,\ right));}
\DoxyCodeLine{09055\ \ \ \ \ \}}
\DoxyCodeLine{09056\ }
\DoxyCodeLine{09057\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09058\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{09059\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{09060\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ left\ -\/\ side;}
\DoxyCodeLine{09061\ }
\DoxyCodeLine{09062\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)left;}
\DoxyCodeLine{09063\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)right;}
\DoxyCodeLine{09064\ \ \ \ \ \}}
\DoxyCodeLine{09065\ \}}
\DoxyCodeLine{09066\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09067\ }
\DoxyCodeLine{09068\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{09069\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_left\_side\_\_neon(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09070\ \{}
\DoxyCodeLine{09071\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09072\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{09073\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{09074\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{09075\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09076\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09077\ \ \ \ \ int32x4\_t\ shift0\_4;}
\DoxyCodeLine{09078\ \ \ \ \ int32x4\_t\ shift1\_4;}
\DoxyCodeLine{09079\ }
\DoxyCodeLine{09080\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{09081\ }
\DoxyCodeLine{09082\ \ \ \ \ shift0\_4\ =\ vdupq\_n\_s32(shift0);}
\DoxyCodeLine{09083\ \ \ \ \ shift1\_4\ =\ vdupq\_n\_s32(shift1);}
\DoxyCodeLine{09084\ }
\DoxyCodeLine{09085\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09086\ \ \ \ \ \ \ \ \ uint32x4\_t\ left;}
\DoxyCodeLine{09087\ \ \ \ \ \ \ \ \ uint32x4\_t\ side;}
\DoxyCodeLine{09088\ \ \ \ \ \ \ \ \ uint32x4\_t\ right;}
\DoxyCodeLine{09089\ }
\DoxyCodeLine{09090\ \ \ \ \ \ \ \ \ left\ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples0U32\ +\ i*4),\ shift0\_4);}
\DoxyCodeLine{09091\ \ \ \ \ \ \ \ \ side\ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples1U32\ +\ i*4),\ shift1\_4);}
\DoxyCodeLine{09092\ \ \ \ \ \ \ \ \ right\ =\ vsubq\_u32(left,\ side);}
\DoxyCodeLine{09093\ }
\DoxyCodeLine{09094\ \ \ \ \ \ \ \ \ drflac\_\_vst2q\_u32((drflac\_uint32*)pOutputSamples\ +\ i*8,\ vzipq\_u32(left,\ right));}
\DoxyCodeLine{09095\ \ \ \ \ \}}
\DoxyCodeLine{09096\ }
\DoxyCodeLine{09097\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09098\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{09099\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{09100\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ left\ -\/\ side;}
\DoxyCodeLine{09101\ }
\DoxyCodeLine{09102\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)left;}
\DoxyCodeLine{09103\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)right;}
\DoxyCodeLine{09104\ \ \ \ \ \}}
\DoxyCodeLine{09105\ \}}
\DoxyCodeLine{09106\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09107\ }
\DoxyCodeLine{09108\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_left\_side(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09109\ \{}
\DoxyCodeLine{09110\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{09111\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsSSE2Supported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{09112\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_left\_side\_\_sse2(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09113\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{09114\ \textcolor{preprocessor}{\#elif\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{09115\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsNEONSupported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{09116\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_left\_side\_\_neon(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09117\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{09118\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09119\ \ \ \ \ \{}
\DoxyCodeLine{09120\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Scalar\ fallback.\ */}}
\DoxyCodeLine{09121\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{09122\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_left\_side\_\_reference(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09123\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{09124\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_left\_side\_\_scalar(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09125\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09126\ \ \ \ \ \}}
\DoxyCodeLine{09127\ \}}
\DoxyCodeLine{09128\ }
\DoxyCodeLine{09129\ }
\DoxyCodeLine{09130\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{09131\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_right\_side\_\_reference(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09132\ \{}
\DoxyCodeLine{09133\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09134\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09135\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ (drflac\_uint32)pInputSamples0[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample);}
\DoxyCodeLine{09136\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ (drflac\_uint32)pInputSamples1[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample);}
\DoxyCodeLine{09137\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ right\ +\ side;}
\DoxyCodeLine{09138\ }
\DoxyCodeLine{09139\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)left;}
\DoxyCodeLine{09140\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)right;}
\DoxyCodeLine{09141\ \ \ \ \ \}}
\DoxyCodeLine{09142\ \}}
\DoxyCodeLine{09143\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09144\ }
\DoxyCodeLine{09145\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_right\_side\_\_scalar(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09146\ \{}
\DoxyCodeLine{09147\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09148\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{09149\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{09150\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{09151\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09152\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09153\ }
\DoxyCodeLine{09154\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09155\ \ \ \ \ \ \ \ \ drflac\_uint32\ side0\ \ =\ pInputSamples0U32[i*4+0]\ <<\ shift0;}
\DoxyCodeLine{09156\ \ \ \ \ \ \ \ \ drflac\_uint32\ side1\ \ =\ pInputSamples0U32[i*4+1]\ <<\ shift0;}
\DoxyCodeLine{09157\ \ \ \ \ \ \ \ \ drflac\_uint32\ side2\ \ =\ pInputSamples0U32[i*4+2]\ <<\ shift0;}
\DoxyCodeLine{09158\ \ \ \ \ \ \ \ \ drflac\_uint32\ side3\ \ =\ pInputSamples0U32[i*4+3]\ <<\ shift0;}
\DoxyCodeLine{09159\ }
\DoxyCodeLine{09160\ \ \ \ \ \ \ \ \ drflac\_uint32\ right0\ =\ pInputSamples1U32[i*4+0]\ <<\ shift1;}
\DoxyCodeLine{09161\ \ \ \ \ \ \ \ \ drflac\_uint32\ right1\ =\ pInputSamples1U32[i*4+1]\ <<\ shift1;}
\DoxyCodeLine{09162\ \ \ \ \ \ \ \ \ drflac\_uint32\ right2\ =\ pInputSamples1U32[i*4+2]\ <<\ shift1;}
\DoxyCodeLine{09163\ \ \ \ \ \ \ \ \ drflac\_uint32\ right3\ =\ pInputSamples1U32[i*4+3]\ <<\ shift1;}
\DoxyCodeLine{09164\ }
\DoxyCodeLine{09165\ \ \ \ \ \ \ \ \ drflac\_uint32\ left0\ =\ right0\ +\ side0;}
\DoxyCodeLine{09166\ \ \ \ \ \ \ \ \ drflac\_uint32\ left1\ =\ right1\ +\ side1;}
\DoxyCodeLine{09167\ \ \ \ \ \ \ \ \ drflac\_uint32\ left2\ =\ right2\ +\ side2;}
\DoxyCodeLine{09168\ \ \ \ \ \ \ \ \ drflac\_uint32\ left3\ =\ right3\ +\ side3;}
\DoxyCodeLine{09169\ }
\DoxyCodeLine{09170\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+0]\ =\ (drflac\_int32)left0;}
\DoxyCodeLine{09171\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+1]\ =\ (drflac\_int32)right0;}
\DoxyCodeLine{09172\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+2]\ =\ (drflac\_int32)left1;}
\DoxyCodeLine{09173\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+3]\ =\ (drflac\_int32)right1;}
\DoxyCodeLine{09174\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+4]\ =\ (drflac\_int32)left2;}
\DoxyCodeLine{09175\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+5]\ =\ (drflac\_int32)right2;}
\DoxyCodeLine{09176\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+6]\ =\ (drflac\_int32)left3;}
\DoxyCodeLine{09177\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+7]\ =\ (drflac\_int32)right3;}
\DoxyCodeLine{09178\ \ \ \ \ \}}
\DoxyCodeLine{09179\ }
\DoxyCodeLine{09180\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09181\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{09182\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{09183\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ right\ +\ side;}
\DoxyCodeLine{09184\ }
\DoxyCodeLine{09185\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)left;}
\DoxyCodeLine{09186\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)right;}
\DoxyCodeLine{09187\ \ \ \ \ \}}
\DoxyCodeLine{09188\ \}}
\DoxyCodeLine{09189\ }
\DoxyCodeLine{09190\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{09191\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_right\_side\_\_sse2(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09192\ \{}
\DoxyCodeLine{09193\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09194\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{09195\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{09196\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{09197\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09198\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09199\ }
\DoxyCodeLine{09200\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{09201\ }
\DoxyCodeLine{09202\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09203\ \ \ \ \ \ \ \ \ \_\_m128i\ side\ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples0\ +\ i),\ shift0);}
\DoxyCodeLine{09204\ \ \ \ \ \ \ \ \ \_\_m128i\ right\ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples1\ +\ i),\ shift1);}
\DoxyCodeLine{09205\ \ \ \ \ \ \ \ \ \_\_m128i\ left\ \ =\ \_mm\_add\_epi32(right,\ side);}
\DoxyCodeLine{09206\ }
\DoxyCodeLine{09207\ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)(pOutputSamples\ +\ i*8\ +\ 0),\ \_mm\_unpacklo\_epi32(left,\ right));}
\DoxyCodeLine{09208\ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)(pOutputSamples\ +\ i*8\ +\ 4),\ \_mm\_unpackhi\_epi32(left,\ right));}
\DoxyCodeLine{09209\ \ \ \ \ \}}
\DoxyCodeLine{09210\ }
\DoxyCodeLine{09211\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09212\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{09213\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{09214\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ right\ +\ side;}
\DoxyCodeLine{09215\ }
\DoxyCodeLine{09216\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)left;}
\DoxyCodeLine{09217\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)right;}
\DoxyCodeLine{09218\ \ \ \ \ \}}
\DoxyCodeLine{09219\ \}}
\DoxyCodeLine{09220\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09221\ }
\DoxyCodeLine{09222\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{09223\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_right\_side\_\_neon(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09224\ \{}
\DoxyCodeLine{09225\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09226\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{09227\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{09228\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{09229\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09230\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09231\ \ \ \ \ int32x4\_t\ shift0\_4;}
\DoxyCodeLine{09232\ \ \ \ \ int32x4\_t\ shift1\_4;}
\DoxyCodeLine{09233\ }
\DoxyCodeLine{09234\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{09235\ }
\DoxyCodeLine{09236\ \ \ \ \ shift0\_4\ =\ vdupq\_n\_s32(shift0);}
\DoxyCodeLine{09237\ \ \ \ \ shift1\_4\ =\ vdupq\_n\_s32(shift1);}
\DoxyCodeLine{09238\ }
\DoxyCodeLine{09239\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09240\ \ \ \ \ \ \ \ \ uint32x4\_t\ side;}
\DoxyCodeLine{09241\ \ \ \ \ \ \ \ \ uint32x4\_t\ right;}
\DoxyCodeLine{09242\ \ \ \ \ \ \ \ \ uint32x4\_t\ left;}
\DoxyCodeLine{09243\ }
\DoxyCodeLine{09244\ \ \ \ \ \ \ \ \ side\ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples0U32\ +\ i*4),\ shift0\_4);}
\DoxyCodeLine{09245\ \ \ \ \ \ \ \ \ right\ =\ vshlq\_u32(vld1q\_u32(pInputSamples1U32\ +\ i*4),\ shift1\_4);}
\DoxyCodeLine{09246\ \ \ \ \ \ \ \ \ left\ \ =\ vaddq\_u32(right,\ side);}
\DoxyCodeLine{09247\ }
\DoxyCodeLine{09248\ \ \ \ \ \ \ \ \ drflac\_\_vst2q\_u32((drflac\_uint32*)pOutputSamples\ +\ i*8,\ vzipq\_u32(left,\ right));}
\DoxyCodeLine{09249\ \ \ \ \ \}}
\DoxyCodeLine{09250\ }
\DoxyCodeLine{09251\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09252\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{09253\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{09254\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ right\ +\ side;}
\DoxyCodeLine{09255\ }
\DoxyCodeLine{09256\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)left;}
\DoxyCodeLine{09257\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)right;}
\DoxyCodeLine{09258\ \ \ \ \ \}}
\DoxyCodeLine{09259\ \}}
\DoxyCodeLine{09260\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09261\ }
\DoxyCodeLine{09262\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_right\_side(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09263\ \{}
\DoxyCodeLine{09264\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{09265\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsSSE2Supported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{09266\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_right\_side\_\_sse2(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09267\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{09268\ \textcolor{preprocessor}{\#elif\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{09269\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsNEONSupported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{09270\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_right\_side\_\_neon(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09271\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{09272\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09273\ \ \ \ \ \{}
\DoxyCodeLine{09274\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Scalar\ fallback.\ */}}
\DoxyCodeLine{09275\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{09276\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_right\_side\_\_reference(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09277\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{09278\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_right\_side\_\_scalar(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09279\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09280\ \ \ \ \ \}}
\DoxyCodeLine{09281\ \}}
\DoxyCodeLine{09282\ }
\DoxyCodeLine{09283\ }
\DoxyCodeLine{09284\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{09285\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_mid\_side\_\_reference(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09286\ \{}
\DoxyCodeLine{09287\ \ \ \ \ \textcolor{keywordflow}{for}\ (drflac\_uint64\ i\ =\ 0;\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09288\ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ pInputSamples0U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09289\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ pInputSamples1U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09290\ }
\DoxyCodeLine{09291\ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{09292\ }
\DoxyCodeLine{09293\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)((drflac\_uint32)((drflac\_int32)(mid\ +\ side)\ >>\ 1)\ <<\ unusedBitsPerSample);}
\DoxyCodeLine{09294\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)((drflac\_uint32)((drflac\_int32)(mid\ -\/\ side)\ >>\ 1)\ <<\ unusedBitsPerSample);}
\DoxyCodeLine{09295\ \ \ \ \ \}}
\DoxyCodeLine{09296\ \}}
\DoxyCodeLine{09297\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09298\ }
\DoxyCodeLine{09299\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_mid\_side\_\_scalar(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09300\ \{}
\DoxyCodeLine{09301\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09302\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{09303\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{09304\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{09305\ \ \ \ \ drflac\_int32\ shift\ =\ unusedBitsPerSample;}
\DoxyCodeLine{09306\ }
\DoxyCodeLine{09307\ \ \ \ \ \textcolor{keywordflow}{if}\ (shift\ >\ 0)\ \{}
\DoxyCodeLine{09308\ \ \ \ \ \ \ \ \ shift\ -\/=\ 1;}
\DoxyCodeLine{09309\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09310\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp0L;}
\DoxyCodeLine{09311\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp1L;}
\DoxyCodeLine{09312\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp2L;}
\DoxyCodeLine{09313\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp3L;}
\DoxyCodeLine{09314\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp0R;}
\DoxyCodeLine{09315\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp1R;}
\DoxyCodeLine{09316\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp2R;}
\DoxyCodeLine{09317\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp3R;}
\DoxyCodeLine{09318\ }
\DoxyCodeLine{09319\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid0\ \ =\ pInputSamples0U32[i*4+0]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09320\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid1\ \ =\ pInputSamples0U32[i*4+1]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09321\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid2\ \ =\ pInputSamples0U32[i*4+2]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09322\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid3\ \ =\ pInputSamples0U32[i*4+3]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09323\ }
\DoxyCodeLine{09324\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side0\ =\ pInputSamples1U32[i*4+0]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09325\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side1\ =\ pInputSamples1U32[i*4+1]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09326\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side2\ =\ pInputSamples1U32[i*4+2]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09327\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side3\ =\ pInputSamples1U32[i*4+3]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09328\ }
\DoxyCodeLine{09329\ \ \ \ \ \ \ \ \ \ \ \ \ mid0\ =\ (mid0\ <<\ 1)\ |\ (side0\ \&\ 0x01);}
\DoxyCodeLine{09330\ \ \ \ \ \ \ \ \ \ \ \ \ mid1\ =\ (mid1\ <<\ 1)\ |\ (side1\ \&\ 0x01);}
\DoxyCodeLine{09331\ \ \ \ \ \ \ \ \ \ \ \ \ mid2\ =\ (mid2\ <<\ 1)\ |\ (side2\ \&\ 0x01);}
\DoxyCodeLine{09332\ \ \ \ \ \ \ \ \ \ \ \ \ mid3\ =\ (mid3\ <<\ 1)\ |\ (side3\ \&\ 0x01);}
\DoxyCodeLine{09333\ }
\DoxyCodeLine{09334\ \ \ \ \ \ \ \ \ \ \ \ \ temp0L\ =\ (mid0\ +\ side0)\ <<\ shift;}
\DoxyCodeLine{09335\ \ \ \ \ \ \ \ \ \ \ \ \ temp1L\ =\ (mid1\ +\ side1)\ <<\ shift;}
\DoxyCodeLine{09336\ \ \ \ \ \ \ \ \ \ \ \ \ temp2L\ =\ (mid2\ +\ side2)\ <<\ shift;}
\DoxyCodeLine{09337\ \ \ \ \ \ \ \ \ \ \ \ \ temp3L\ =\ (mid3\ +\ side3)\ <<\ shift;}
\DoxyCodeLine{09338\ }
\DoxyCodeLine{09339\ \ \ \ \ \ \ \ \ \ \ \ \ temp0R\ =\ (mid0\ -\/\ side0)\ <<\ shift;}
\DoxyCodeLine{09340\ \ \ \ \ \ \ \ \ \ \ \ \ temp1R\ =\ (mid1\ -\/\ side1)\ <<\ shift;}
\DoxyCodeLine{09341\ \ \ \ \ \ \ \ \ \ \ \ \ temp2R\ =\ (mid2\ -\/\ side2)\ <<\ shift;}
\DoxyCodeLine{09342\ \ \ \ \ \ \ \ \ \ \ \ \ temp3R\ =\ (mid3\ -\/\ side3)\ <<\ shift;}
\DoxyCodeLine{09343\ }
\DoxyCodeLine{09344\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+0]\ =\ (drflac\_int32)temp0L;}
\DoxyCodeLine{09345\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+1]\ =\ (drflac\_int32)temp0R;}
\DoxyCodeLine{09346\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+2]\ =\ (drflac\_int32)temp1L;}
\DoxyCodeLine{09347\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+3]\ =\ (drflac\_int32)temp1R;}
\DoxyCodeLine{09348\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+4]\ =\ (drflac\_int32)temp2L;}
\DoxyCodeLine{09349\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+5]\ =\ (drflac\_int32)temp2R;}
\DoxyCodeLine{09350\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+6]\ =\ (drflac\_int32)temp3L;}
\DoxyCodeLine{09351\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+7]\ =\ (drflac\_int32)temp3R;}
\DoxyCodeLine{09352\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09353\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{09354\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09355\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp0L;}
\DoxyCodeLine{09356\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp1L;}
\DoxyCodeLine{09357\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp2L;}
\DoxyCodeLine{09358\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp3L;}
\DoxyCodeLine{09359\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp0R;}
\DoxyCodeLine{09360\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp1R;}
\DoxyCodeLine{09361\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp2R;}
\DoxyCodeLine{09362\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp3R;}
\DoxyCodeLine{09363\ }
\DoxyCodeLine{09364\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid0\ \ =\ pInputSamples0U32[i*4+0]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09365\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid1\ \ =\ pInputSamples0U32[i*4+1]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09366\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid2\ \ =\ pInputSamples0U32[i*4+2]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09367\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid3\ \ =\ pInputSamples0U32[i*4+3]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09368\ }
\DoxyCodeLine{09369\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side0\ =\ pInputSamples1U32[i*4+0]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09370\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side1\ =\ pInputSamples1U32[i*4+1]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09371\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side2\ =\ pInputSamples1U32[i*4+2]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09372\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side3\ =\ pInputSamples1U32[i*4+3]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09373\ }
\DoxyCodeLine{09374\ \ \ \ \ \ \ \ \ \ \ \ \ mid0\ =\ (mid0\ <<\ 1)\ |\ (side0\ \&\ 0x01);}
\DoxyCodeLine{09375\ \ \ \ \ \ \ \ \ \ \ \ \ mid1\ =\ (mid1\ <<\ 1)\ |\ (side1\ \&\ 0x01);}
\DoxyCodeLine{09376\ \ \ \ \ \ \ \ \ \ \ \ \ mid2\ =\ (mid2\ <<\ 1)\ |\ (side2\ \&\ 0x01);}
\DoxyCodeLine{09377\ \ \ \ \ \ \ \ \ \ \ \ \ mid3\ =\ (mid3\ <<\ 1)\ |\ (side3\ \&\ 0x01);}
\DoxyCodeLine{09378\ }
\DoxyCodeLine{09379\ \ \ \ \ \ \ \ \ \ \ \ \ temp0L\ =\ (drflac\_uint32)((drflac\_int32)(mid0\ +\ side0)\ >>\ 1);}
\DoxyCodeLine{09380\ \ \ \ \ \ \ \ \ \ \ \ \ temp1L\ =\ (drflac\_uint32)((drflac\_int32)(mid1\ +\ side1)\ >>\ 1);}
\DoxyCodeLine{09381\ \ \ \ \ \ \ \ \ \ \ \ \ temp2L\ =\ (drflac\_uint32)((drflac\_int32)(mid2\ +\ side2)\ >>\ 1);}
\DoxyCodeLine{09382\ \ \ \ \ \ \ \ \ \ \ \ \ temp3L\ =\ (drflac\_uint32)((drflac\_int32)(mid3\ +\ side3)\ >>\ 1);}
\DoxyCodeLine{09383\ }
\DoxyCodeLine{09384\ \ \ \ \ \ \ \ \ \ \ \ \ temp0R\ =\ (drflac\_uint32)((drflac\_int32)(mid0\ -\/\ side0)\ >>\ 1);}
\DoxyCodeLine{09385\ \ \ \ \ \ \ \ \ \ \ \ \ temp1R\ =\ (drflac\_uint32)((drflac\_int32)(mid1\ -\/\ side1)\ >>\ 1);}
\DoxyCodeLine{09386\ \ \ \ \ \ \ \ \ \ \ \ \ temp2R\ =\ (drflac\_uint32)((drflac\_int32)(mid2\ -\/\ side2)\ >>\ 1);}
\DoxyCodeLine{09387\ \ \ \ \ \ \ \ \ \ \ \ \ temp3R\ =\ (drflac\_uint32)((drflac\_int32)(mid3\ -\/\ side3)\ >>\ 1);}
\DoxyCodeLine{09388\ }
\DoxyCodeLine{09389\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+0]\ =\ (drflac\_int32)temp0L;}
\DoxyCodeLine{09390\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+1]\ =\ (drflac\_int32)temp0R;}
\DoxyCodeLine{09391\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+2]\ =\ (drflac\_int32)temp1L;}
\DoxyCodeLine{09392\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+3]\ =\ (drflac\_int32)temp1R;}
\DoxyCodeLine{09393\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+4]\ =\ (drflac\_int32)temp2L;}
\DoxyCodeLine{09394\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+5]\ =\ (drflac\_int32)temp2R;}
\DoxyCodeLine{09395\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+6]\ =\ (drflac\_int32)temp3L;}
\DoxyCodeLine{09396\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+7]\ =\ (drflac\_int32)temp3R;}
\DoxyCodeLine{09397\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09398\ \ \ \ \ \}}
\DoxyCodeLine{09399\ }
\DoxyCodeLine{09400\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09401\ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ pInputSamples0U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09402\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ pInputSamples1U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09403\ }
\DoxyCodeLine{09404\ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{09405\ }
\DoxyCodeLine{09406\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)((drflac\_uint32)((drflac\_int32)(mid\ +\ side)\ >>\ 1)\ <<\ unusedBitsPerSample);}
\DoxyCodeLine{09407\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)((drflac\_uint32)((drflac\_int32)(mid\ -\/\ side)\ >>\ 1)\ <<\ unusedBitsPerSample);}
\DoxyCodeLine{09408\ \ \ \ \ \}}
\DoxyCodeLine{09409\ \}}
\DoxyCodeLine{09410\ }
\DoxyCodeLine{09411\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{09412\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_mid\_side\_\_sse2(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09413\ \{}
\DoxyCodeLine{09414\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09415\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{09416\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{09417\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{09418\ \ \ \ \ drflac\_int32\ shift\ =\ unusedBitsPerSample;}
\DoxyCodeLine{09419\ }
\DoxyCodeLine{09420\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{09421\ }
\DoxyCodeLine{09422\ \ \ \ \ \textcolor{keywordflow}{if}\ (shift\ ==\ 0)\ \{}
\DoxyCodeLine{09423\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09424\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ mid;}
\DoxyCodeLine{09425\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ side;}
\DoxyCodeLine{09426\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ left;}
\DoxyCodeLine{09427\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ right;}
\DoxyCodeLine{09428\ }
\DoxyCodeLine{09429\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples0\ +\ i),\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample);}
\DoxyCodeLine{09430\ \ \ \ \ \ \ \ \ \ \ \ \ side\ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples1\ +\ i),\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample);}
\DoxyCodeLine{09431\ }
\DoxyCodeLine{09432\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ =\ \_mm\_or\_si128(\_mm\_slli\_epi32(mid,\ 1),\ \_mm\_and\_si128(side,\ \_mm\_set1\_epi32(0x01)));}
\DoxyCodeLine{09433\ }
\DoxyCodeLine{09434\ \ \ \ \ \ \ \ \ \ \ \ \ left\ \ =\ \_mm\_srai\_epi32(\_mm\_add\_epi32(mid,\ side),\ 1);}
\DoxyCodeLine{09435\ \ \ \ \ \ \ \ \ \ \ \ \ right\ =\ \_mm\_srai\_epi32(\_mm\_sub\_epi32(mid,\ side),\ 1);}
\DoxyCodeLine{09436\ }
\DoxyCodeLine{09437\ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)(pOutputSamples\ +\ i*8\ +\ 0),\ \_mm\_unpacklo\_epi32(left,\ right));}
\DoxyCodeLine{09438\ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)(pOutputSamples\ +\ i*8\ +\ 4),\ \_mm\_unpackhi\_epi32(left,\ right));}
\DoxyCodeLine{09439\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09440\ }
\DoxyCodeLine{09441\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09442\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ pInputSamples0U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09443\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ pInputSamples1U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09444\ }
\DoxyCodeLine{09445\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{09446\ }
\DoxyCodeLine{09447\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)(mid\ +\ side)\ >>\ 1;}
\DoxyCodeLine{09448\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)(mid\ -\/\ side)\ >>\ 1;}
\DoxyCodeLine{09449\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09450\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{09451\ \ \ \ \ \ \ \ \ shift\ -\/=\ 1;}
\DoxyCodeLine{09452\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09453\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ mid;}
\DoxyCodeLine{09454\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ side;}
\DoxyCodeLine{09455\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ left;}
\DoxyCodeLine{09456\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ right;}
\DoxyCodeLine{09457\ }
\DoxyCodeLine{09458\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples0\ +\ i),\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample);}
\DoxyCodeLine{09459\ \ \ \ \ \ \ \ \ \ \ \ \ side\ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples1\ +\ i),\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample);}
\DoxyCodeLine{09460\ }
\DoxyCodeLine{09461\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ =\ \_mm\_or\_si128(\_mm\_slli\_epi32(mid,\ 1),\ \_mm\_and\_si128(side,\ \_mm\_set1\_epi32(0x01)));}
\DoxyCodeLine{09462\ }
\DoxyCodeLine{09463\ \ \ \ \ \ \ \ \ \ \ \ \ left\ \ =\ \_mm\_slli\_epi32(\_mm\_add\_epi32(mid,\ side),\ shift);}
\DoxyCodeLine{09464\ \ \ \ \ \ \ \ \ \ \ \ \ right\ =\ \_mm\_slli\_epi32(\_mm\_sub\_epi32(mid,\ side),\ shift);}
\DoxyCodeLine{09465\ }
\DoxyCodeLine{09466\ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)(pOutputSamples\ +\ i*8\ +\ 0),\ \_mm\_unpacklo\_epi32(left,\ right));}
\DoxyCodeLine{09467\ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)(pOutputSamples\ +\ i*8\ +\ 4),\ \_mm\_unpackhi\_epi32(left,\ right));}
\DoxyCodeLine{09468\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09469\ }
\DoxyCodeLine{09470\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09471\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ pInputSamples0U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09472\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ pInputSamples1U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09473\ }
\DoxyCodeLine{09474\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{09475\ }
\DoxyCodeLine{09476\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)((mid\ +\ side)\ <<\ shift);}
\DoxyCodeLine{09477\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)((mid\ -\/\ side)\ <<\ shift);}
\DoxyCodeLine{09478\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09479\ \ \ \ \ \}}
\DoxyCodeLine{09480\ \}}
\DoxyCodeLine{09481\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09482\ }
\DoxyCodeLine{09483\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{09484\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_mid\_side\_\_neon(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09485\ \{}
\DoxyCodeLine{09486\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09487\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{09488\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{09489\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{09490\ \ \ \ \ drflac\_int32\ shift\ =\ unusedBitsPerSample;}
\DoxyCodeLine{09491\ \ \ \ \ int32x4\_t\ \ wbpsShift0\_4;\ \textcolor{comment}{/*\ wbps\ =\ Wasted\ Bits\ Per\ Sample\ */}}
\DoxyCodeLine{09492\ \ \ \ \ int32x4\_t\ \ wbpsShift1\_4;\ \textcolor{comment}{/*\ wbps\ =\ Wasted\ Bits\ Per\ Sample\ */}}
\DoxyCodeLine{09493\ \ \ \ \ uint32x4\_t\ one4;}
\DoxyCodeLine{09494\ }
\DoxyCodeLine{09495\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{09496\ }
\DoxyCodeLine{09497\ \ \ \ \ wbpsShift0\_4\ =\ vdupq\_n\_s32(pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample);}
\DoxyCodeLine{09498\ \ \ \ \ wbpsShift1\_4\ =\ vdupq\_n\_s32(pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample);}
\DoxyCodeLine{09499\ \ \ \ \ one4\ \ \ \ \ \ \ \ \ =\ vdupq\_n\_u32(1);}
\DoxyCodeLine{09500\ }
\DoxyCodeLine{09501\ \ \ \ \ \textcolor{keywordflow}{if}\ (shift\ ==\ 0)\ \{}
\DoxyCodeLine{09502\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09503\ \ \ \ \ \ \ \ \ \ \ \ \ uint32x4\_t\ mid;}
\DoxyCodeLine{09504\ \ \ \ \ \ \ \ \ \ \ \ \ uint32x4\_t\ side;}
\DoxyCodeLine{09505\ \ \ \ \ \ \ \ \ \ \ \ \ int32x4\_t\ left;}
\DoxyCodeLine{09506\ \ \ \ \ \ \ \ \ \ \ \ \ int32x4\_t\ right;}
\DoxyCodeLine{09507\ }
\DoxyCodeLine{09508\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples0U32\ +\ i*4),\ wbpsShift0\_4);}
\DoxyCodeLine{09509\ \ \ \ \ \ \ \ \ \ \ \ \ side\ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples1U32\ +\ i*4),\ wbpsShift1\_4);}
\DoxyCodeLine{09510\ }
\DoxyCodeLine{09511\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ =\ vorrq\_u32(vshlq\_n\_u32(mid,\ 1),\ vandq\_u32(side,\ one4));}
\DoxyCodeLine{09512\ }
\DoxyCodeLine{09513\ \ \ \ \ \ \ \ \ \ \ \ \ left\ \ =\ vshrq\_n\_s32(vreinterpretq\_s32\_u32(vaddq\_u32(mid,\ side)),\ 1);}
\DoxyCodeLine{09514\ \ \ \ \ \ \ \ \ \ \ \ \ right\ =\ vshrq\_n\_s32(vreinterpretq\_s32\_u32(vsubq\_u32(mid,\ side)),\ 1);}
\DoxyCodeLine{09515\ }
\DoxyCodeLine{09516\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_vst2q\_s32(pOutputSamples\ +\ i*8,\ vzipq\_s32(left,\ right));}
\DoxyCodeLine{09517\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09518\ }
\DoxyCodeLine{09519\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09520\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ pInputSamples0U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09521\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ pInputSamples1U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09522\ }
\DoxyCodeLine{09523\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{09524\ }
\DoxyCodeLine{09525\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)(mid\ +\ side)\ >>\ 1;}
\DoxyCodeLine{09526\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)(mid\ -\/\ side)\ >>\ 1;}
\DoxyCodeLine{09527\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09528\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{09529\ \ \ \ \ \ \ \ \ int32x4\_t\ shift4;}
\DoxyCodeLine{09530\ }
\DoxyCodeLine{09531\ \ \ \ \ \ \ \ \ shift\ -\/=\ 1;}
\DoxyCodeLine{09532\ \ \ \ \ \ \ \ \ shift4\ =\ vdupq\_n\_s32(shift);}
\DoxyCodeLine{09533\ }
\DoxyCodeLine{09534\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09535\ \ \ \ \ \ \ \ \ \ \ \ \ uint32x4\_t\ mid;}
\DoxyCodeLine{09536\ \ \ \ \ \ \ \ \ \ \ \ \ uint32x4\_t\ side;}
\DoxyCodeLine{09537\ \ \ \ \ \ \ \ \ \ \ \ \ int32x4\_t\ left;}
\DoxyCodeLine{09538\ \ \ \ \ \ \ \ \ \ \ \ \ int32x4\_t\ right;}
\DoxyCodeLine{09539\ }
\DoxyCodeLine{09540\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples0U32\ +\ i*4),\ wbpsShift0\_4);}
\DoxyCodeLine{09541\ \ \ \ \ \ \ \ \ \ \ \ \ side\ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples1U32\ +\ i*4),\ wbpsShift1\_4);}
\DoxyCodeLine{09542\ }
\DoxyCodeLine{09543\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ =\ vorrq\_u32(vshlq\_n\_u32(mid,\ 1),\ vandq\_u32(side,\ one4));}
\DoxyCodeLine{09544\ }
\DoxyCodeLine{09545\ \ \ \ \ \ \ \ \ \ \ \ \ left\ \ =\ vreinterpretq\_s32\_u32(vshlq\_u32(vaddq\_u32(mid,\ side),\ shift4));}
\DoxyCodeLine{09546\ \ \ \ \ \ \ \ \ \ \ \ \ right\ =\ vreinterpretq\_s32\_u32(vshlq\_u32(vsubq\_u32(mid,\ side),\ shift4));}
\DoxyCodeLine{09547\ }
\DoxyCodeLine{09548\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_vst2q\_s32(pOutputSamples\ +\ i*8,\ vzipq\_s32(left,\ right));}
\DoxyCodeLine{09549\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09550\ }
\DoxyCodeLine{09551\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09552\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ pInputSamples0U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09553\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ pInputSamples1U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09554\ }
\DoxyCodeLine{09555\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{09556\ }
\DoxyCodeLine{09557\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)((mid\ +\ side)\ <<\ shift);}
\DoxyCodeLine{09558\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)((mid\ -\/\ side)\ <<\ shift);}
\DoxyCodeLine{09559\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09560\ \ \ \ \ \}}
\DoxyCodeLine{09561\ \}}
\DoxyCodeLine{09562\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09563\ }
\DoxyCodeLine{09564\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_mid\_side(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09565\ \{}
\DoxyCodeLine{09566\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{09567\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsSSE2Supported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{09568\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_mid\_side\_\_sse2(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09569\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{09570\ \textcolor{preprocessor}{\#elif\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{09571\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsNEONSupported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{09572\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_mid\_side\_\_neon(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09573\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{09574\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09575\ \ \ \ \ \{}
\DoxyCodeLine{09576\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Scalar\ fallback.\ */}}
\DoxyCodeLine{09577\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{09578\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_mid\_side\_\_reference(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09579\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{09580\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_mid\_side\_\_scalar(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09581\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09582\ \ \ \ \ \}}
\DoxyCodeLine{09583\ \}}
\DoxyCodeLine{09584\ }
\DoxyCodeLine{09585\ }
\DoxyCodeLine{09586\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{09587\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_independent\_stereo\_\_reference(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09588\ \{}
\DoxyCodeLine{09589\ \ \ \ \ \textcolor{keywordflow}{for}\ (drflac\_uint64\ i\ =\ 0;\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09590\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)((drflac\_uint32)pInputSamples0[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample));}
\DoxyCodeLine{09591\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)((drflac\_uint32)pInputSamples1[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample));}
\DoxyCodeLine{09592\ \ \ \ \ \}}
\DoxyCodeLine{09593\ \}}
\DoxyCodeLine{09594\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09595\ }
\DoxyCodeLine{09596\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_independent\_stereo\_\_scalar(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09597\ \{}
\DoxyCodeLine{09598\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09599\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{09600\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{09601\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{09602\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09603\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09604\ }
\DoxyCodeLine{09605\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09606\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempL0\ =\ pInputSamples0U32[i*4+0]\ <<\ shift0;}
\DoxyCodeLine{09607\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempL1\ =\ pInputSamples0U32[i*4+1]\ <<\ shift0;}
\DoxyCodeLine{09608\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempL2\ =\ pInputSamples0U32[i*4+2]\ <<\ shift0;}
\DoxyCodeLine{09609\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempL3\ =\ pInputSamples0U32[i*4+3]\ <<\ shift0;}
\DoxyCodeLine{09610\ }
\DoxyCodeLine{09611\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempR0\ =\ pInputSamples1U32[i*4+0]\ <<\ shift1;}
\DoxyCodeLine{09612\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempR1\ =\ pInputSamples1U32[i*4+1]\ <<\ shift1;}
\DoxyCodeLine{09613\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempR2\ =\ pInputSamples1U32[i*4+2]\ <<\ shift1;}
\DoxyCodeLine{09614\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempR3\ =\ pInputSamples1U32[i*4+3]\ <<\ shift1;}
\DoxyCodeLine{09615\ }
\DoxyCodeLine{09616\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+0]\ =\ (drflac\_int32)tempL0;}
\DoxyCodeLine{09617\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+1]\ =\ (drflac\_int32)tempR0;}
\DoxyCodeLine{09618\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+2]\ =\ (drflac\_int32)tempL1;}
\DoxyCodeLine{09619\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+3]\ =\ (drflac\_int32)tempR1;}
\DoxyCodeLine{09620\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+4]\ =\ (drflac\_int32)tempL2;}
\DoxyCodeLine{09621\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+5]\ =\ (drflac\_int32)tempR2;}
\DoxyCodeLine{09622\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+6]\ =\ (drflac\_int32)tempL3;}
\DoxyCodeLine{09623\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+7]\ =\ (drflac\_int32)tempR3;}
\DoxyCodeLine{09624\ \ \ \ \ \}}
\DoxyCodeLine{09625\ }
\DoxyCodeLine{09626\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09627\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)(pInputSamples0U32[i]\ <<\ shift0);}
\DoxyCodeLine{09628\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)(pInputSamples1U32[i]\ <<\ shift1);}
\DoxyCodeLine{09629\ \ \ \ \ \}}
\DoxyCodeLine{09630\ \}}
\DoxyCodeLine{09631\ }
\DoxyCodeLine{09632\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{09633\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_independent\_stereo\_\_sse2(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09634\ \{}
\DoxyCodeLine{09635\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09636\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{09637\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{09638\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{09639\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09640\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09641\ }
\DoxyCodeLine{09642\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09643\ \ \ \ \ \ \ \ \ \_\_m128i\ left\ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples0\ +\ i),\ shift0);}
\DoxyCodeLine{09644\ \ \ \ \ \ \ \ \ \_\_m128i\ right\ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples1\ +\ i),\ shift1);}
\DoxyCodeLine{09645\ }
\DoxyCodeLine{09646\ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)(pOutputSamples\ +\ i*8\ +\ 0),\ \_mm\_unpacklo\_epi32(left,\ right));}
\DoxyCodeLine{09647\ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)(pOutputSamples\ +\ i*8\ +\ 4),\ \_mm\_unpackhi\_epi32(left,\ right));}
\DoxyCodeLine{09648\ \ \ \ \ \}}
\DoxyCodeLine{09649\ }
\DoxyCodeLine{09650\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09651\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)(pInputSamples0U32[i]\ <<\ shift0);}
\DoxyCodeLine{09652\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)(pInputSamples1U32[i]\ <<\ shift1);}
\DoxyCodeLine{09653\ \ \ \ \ \}}
\DoxyCodeLine{09654\ \}}
\DoxyCodeLine{09655\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09656\ }
\DoxyCodeLine{09657\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{09658\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_independent\_stereo\_\_neon(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09659\ \{}
\DoxyCodeLine{09660\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09661\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{09662\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{09663\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{09664\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09665\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09666\ }
\DoxyCodeLine{09667\ \ \ \ \ int32x4\_t\ shift4\_0\ =\ vdupq\_n\_s32(shift0);}
\DoxyCodeLine{09668\ \ \ \ \ int32x4\_t\ shift4\_1\ =\ vdupq\_n\_s32(shift1);}
\DoxyCodeLine{09669\ }
\DoxyCodeLine{09670\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09671\ \ \ \ \ \ \ \ \ int32x4\_t\ left;}
\DoxyCodeLine{09672\ \ \ \ \ \ \ \ \ int32x4\_t\ right;}
\DoxyCodeLine{09673\ }
\DoxyCodeLine{09674\ \ \ \ \ \ \ \ \ left\ \ =\ vreinterpretq\_s32\_u32(vshlq\_u32(vld1q\_u32(pInputSamples0U32\ +\ i*4),\ shift4\_0));}
\DoxyCodeLine{09675\ \ \ \ \ \ \ \ \ right\ =\ vreinterpretq\_s32\_u32(vshlq\_u32(vld1q\_u32(pInputSamples1U32\ +\ i*4),\ shift4\_1));}
\DoxyCodeLine{09676\ }
\DoxyCodeLine{09677\ \ \ \ \ \ \ \ \ drflac\_\_vst2q\_s32(pOutputSamples\ +\ i*8,\ vzipq\_s32(left,\ right));}
\DoxyCodeLine{09678\ \ \ \ \ \}}
\DoxyCodeLine{09679\ }
\DoxyCodeLine{09680\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09681\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)(pInputSamples0U32[i]\ <<\ shift0);}
\DoxyCodeLine{09682\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)(pInputSamples1U32[i]\ <<\ shift1);}
\DoxyCodeLine{09683\ \ \ \ \ \}}
\DoxyCodeLine{09684\ \}}
\DoxyCodeLine{09685\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09686\ }
\DoxyCodeLine{09687\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s32\_\_decode\_independent\_stereo(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int32*\ pOutputSamples)}
\DoxyCodeLine{09688\ \{}
\DoxyCodeLine{09689\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{09690\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsSSE2Supported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{09691\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_independent\_stereo\_\_sse2(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09692\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{09693\ \textcolor{preprocessor}{\#elif\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{09694\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsNEONSupported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{09695\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_independent\_stereo\_\_neon(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09696\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{09697\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09698\ \ \ \ \ \{}
\DoxyCodeLine{09699\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Scalar\ fallback.\ */}}
\DoxyCodeLine{09700\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{09701\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_independent\_stereo\_\_reference(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09702\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{09703\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_independent\_stereo\_\_scalar(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09704\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09705\ \ \ \ \ \}}
\DoxyCodeLine{09706\ \}}
\DoxyCodeLine{09707\ }
\DoxyCodeLine{09708\ }
\DoxyCodeLine{09709\ DRFLAC\_API\ drflac\_uint64\ drflac\_read\_pcm\_frames\_s32(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ framesToRead,\ drflac\_int32*\ pBufferOut)}
\DoxyCodeLine{09710\ \{}
\DoxyCodeLine{09711\ \ \ \ \ drflac\_uint64\ framesRead;}
\DoxyCodeLine{09712\ \ \ \ \ drflac\_uint32\ unusedBitsPerSample;}
\DoxyCodeLine{09713\ }
\DoxyCodeLine{09714\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL\ ||\ framesToRead\ ==\ 0)\ \{}
\DoxyCodeLine{09715\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{09716\ \ \ \ \ \}}
\DoxyCodeLine{09717\ }
\DoxyCodeLine{09718\ \ \ \ \ \textcolor{keywordflow}{if}\ (pBufferOut\ ==\ NULL)\ \{}
\DoxyCodeLine{09719\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_seek\_forward\_by\_pcm\_frames(pFlac,\ framesToRead);}
\DoxyCodeLine{09720\ \ \ \ \ \}}
\DoxyCodeLine{09721\ }
\DoxyCodeLine{09722\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 32);}
\DoxyCodeLine{09723\ \ \ \ \ unusedBitsPerSample\ =\ 32\ -\/\ pFlac-\/>bitsPerSample;}
\DoxyCodeLine{09724\ }
\DoxyCodeLine{09725\ \ \ \ \ framesRead\ =\ 0;}
\DoxyCodeLine{09726\ \ \ \ \ \textcolor{keywordflow}{while}\ (framesToRead\ >\ 0)\ \{}
\DoxyCodeLine{09727\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ we've\ run\ out\ of\ samples\ in\ this\ frame,\ go\ to\ the\ next.\ */}}
\DoxyCodeLine{09728\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>currentFLACFrame.pcmFramesRemaining\ ==\ 0)\ \{}
\DoxyCodeLine{09729\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_and\_decode\_next\_flac\_frame(pFlac))\ \{}
\DoxyCodeLine{09730\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \ \textcolor{comment}{/*\ Couldn't\ read\ the\ next\ frame,\ so\ just\ break\ from\ the\ loop\ and\ return.\ */}}
\DoxyCodeLine{09731\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09732\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{09733\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ channelCount\ =\ drflac\_\_get\_channel\_count\_from\_channel\_assignment(pFlac-\/>currentFLACFrame.header.channelAssignment);}
\DoxyCodeLine{09734\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ iFirstPCMFrame\ =\ pFlac-\/>currentFLACFrame.header.blockSizeInPCMFrames\ -\/\ pFlac-\/>currentFLACFrame.pcmFramesRemaining;}
\DoxyCodeLine{09735\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ frameCountThisIteration\ =\ framesToRead;}
\DoxyCodeLine{09736\ }
\DoxyCodeLine{09737\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (frameCountThisIteration\ >\ pFlac-\/>currentFLACFrame.pcmFramesRemaining)\ \{}
\DoxyCodeLine{09738\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ frameCountThisIteration\ =\ pFlac-\/>currentFLACFrame.pcmFramesRemaining;}
\DoxyCodeLine{09739\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09740\ }
\DoxyCodeLine{09741\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (channelCount\ ==\ 2)\ \{}
\DoxyCodeLine{09742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ drflac\_int32*\ pDecodedSamples0\ =\ pFlac-\/>currentFLACFrame.subframes[0].pSamplesS32\ +\ iFirstPCMFrame;}
\DoxyCodeLine{09743\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ drflac\_int32*\ pDecodedSamples1\ =\ pFlac-\/>currentFLACFrame.subframes[1].pSamplesS32\ +\ iFirstPCMFrame;}
\DoxyCodeLine{09744\ }
\DoxyCodeLine{09745\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (pFlac-\/>currentFLACFrame.header.channelAssignment)}
\DoxyCodeLine{09746\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{09747\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_CHANNEL\_ASSIGNMENT\_LEFT\_SIDE:}
\DoxyCodeLine{09748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{09749\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_left\_side(pFlac,\ frameCountThisIteration,\ unusedBitsPerSample,\ pDecodedSamples0,\ pDecodedSamples1,\ pBufferOut);}
\DoxyCodeLine{09750\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{09751\ }
\DoxyCodeLine{09752\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_CHANNEL\_ASSIGNMENT\_RIGHT\_SIDE:}
\DoxyCodeLine{09753\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{09754\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_right\_side(pFlac,\ frameCountThisIteration,\ unusedBitsPerSample,\ pDecodedSamples0,\ pDecodedSamples1,\ pBufferOut);}
\DoxyCodeLine{09755\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{09756\ }
\DoxyCodeLine{09757\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_CHANNEL\_ASSIGNMENT\_MID\_SIDE:}
\DoxyCodeLine{09758\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{09759\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_mid\_side(pFlac,\ frameCountThisIteration,\ unusedBitsPerSample,\ pDecodedSamples0,\ pDecodedSamples1,\ pBufferOut);}
\DoxyCodeLine{09760\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{09761\ }
\DoxyCodeLine{09762\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_CHANNEL\_ASSIGNMENT\_INDEPENDENT:}
\DoxyCodeLine{09763\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{09764\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{09765\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s32\_\_decode\_independent\_stereo(pFlac,\ frameCountThisIteration,\ unusedBitsPerSample,\ pDecodedSamples0,\ pDecodedSamples1,\ pBufferOut);}
\DoxyCodeLine{09766\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{09767\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09768\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{09769\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Generic\ interleaving.\ */}}
\DoxyCodeLine{09770\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09771\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCountThisIteration;\ ++i)\ \{}
\DoxyCodeLine{09772\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ j;}
\DoxyCodeLine{09773\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (j\ =\ 0;\ j\ <\ channelCount;\ ++j)\ \{}
\DoxyCodeLine{09774\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pBufferOut[(i*channelCount)+j]\ =\ (drflac\_int32)((drflac\_uint32)(pFlac-\/>currentFLACFrame.subframes[j].pSamplesS32[iFirstPCMFrame\ +\ i])\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[j].wastedBitsPerSample));}
\DoxyCodeLine{09775\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09776\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09777\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09778\ }
\DoxyCodeLine{09779\ \ \ \ \ \ \ \ \ \ \ \ \ framesRead\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ +=\ frameCountThisIteration;}
\DoxyCodeLine{09780\ \ \ \ \ \ \ \ \ \ \ \ \ pBufferOut\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ +=\ frameCountThisIteration\ *\ channelCount;}
\DoxyCodeLine{09781\ \ \ \ \ \ \ \ \ \ \ \ \ framesToRead\ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/=\ frameCountThisIteration;}
\DoxyCodeLine{09782\ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentPCMFrame\ \ \ \ +=\ frameCountThisIteration;}
\DoxyCodeLine{09783\ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentFLACFrame.pcmFramesRemaining\ -\/=\ (drflac\_uint32)frameCountThisIteration;}
\DoxyCodeLine{09784\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{09785\ \ \ \ \ \}}
\DoxyCodeLine{09786\ }
\DoxyCodeLine{09787\ \ \ \ \ \textcolor{keywordflow}{return}\ framesRead;}
\DoxyCodeLine{09788\ \}}
\DoxyCodeLine{09789\ }
\DoxyCodeLine{09790\ }
\DoxyCodeLine{09791\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{09792\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_left\_side\_\_reference(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{09793\ \{}
\DoxyCodeLine{09794\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09795\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09796\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ (drflac\_uint32)pInputSamples0[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample);}
\DoxyCodeLine{09797\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ (drflac\_uint32)pInputSamples1[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample);}
\DoxyCodeLine{09798\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ left\ -\/\ side;}
\DoxyCodeLine{09799\ }
\DoxyCodeLine{09800\ \ \ \ \ \ \ \ \ left\ \ >>=\ 16;}
\DoxyCodeLine{09801\ \ \ \ \ \ \ \ \ right\ >>=\ 16;}
\DoxyCodeLine{09802\ }
\DoxyCodeLine{09803\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)left;}
\DoxyCodeLine{09804\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)right;}
\DoxyCodeLine{09805\ \ \ \ \ \}}
\DoxyCodeLine{09806\ \}}
\DoxyCodeLine{09807\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09808\ }
\DoxyCodeLine{09809\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_left\_side\_\_scalar(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{09810\ \{}
\DoxyCodeLine{09811\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09812\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{09813\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{09814\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{09815\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09816\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09817\ }
\DoxyCodeLine{09818\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09819\ \ \ \ \ \ \ \ \ drflac\_uint32\ left0\ =\ pInputSamples0U32[i*4+0]\ <<\ shift0;}
\DoxyCodeLine{09820\ \ \ \ \ \ \ \ \ drflac\_uint32\ left1\ =\ pInputSamples0U32[i*4+1]\ <<\ shift0;}
\DoxyCodeLine{09821\ \ \ \ \ \ \ \ \ drflac\_uint32\ left2\ =\ pInputSamples0U32[i*4+2]\ <<\ shift0;}
\DoxyCodeLine{09822\ \ \ \ \ \ \ \ \ drflac\_uint32\ left3\ =\ pInputSamples0U32[i*4+3]\ <<\ shift0;}
\DoxyCodeLine{09823\ }
\DoxyCodeLine{09824\ \ \ \ \ \ \ \ \ drflac\_uint32\ side0\ =\ pInputSamples1U32[i*4+0]\ <<\ shift1;}
\DoxyCodeLine{09825\ \ \ \ \ \ \ \ \ drflac\_uint32\ side1\ =\ pInputSamples1U32[i*4+1]\ <<\ shift1;}
\DoxyCodeLine{09826\ \ \ \ \ \ \ \ \ drflac\_uint32\ side2\ =\ pInputSamples1U32[i*4+2]\ <<\ shift1;}
\DoxyCodeLine{09827\ \ \ \ \ \ \ \ \ drflac\_uint32\ side3\ =\ pInputSamples1U32[i*4+3]\ <<\ shift1;}
\DoxyCodeLine{09828\ }
\DoxyCodeLine{09829\ \ \ \ \ \ \ \ \ drflac\_uint32\ right0\ =\ left0\ -\/\ side0;}
\DoxyCodeLine{09830\ \ \ \ \ \ \ \ \ drflac\_uint32\ right1\ =\ left1\ -\/\ side1;}
\DoxyCodeLine{09831\ \ \ \ \ \ \ \ \ drflac\_uint32\ right2\ =\ left2\ -\/\ side2;}
\DoxyCodeLine{09832\ \ \ \ \ \ \ \ \ drflac\_uint32\ right3\ =\ left3\ -\/\ side3;}
\DoxyCodeLine{09833\ }
\DoxyCodeLine{09834\ \ \ \ \ \ \ \ \ left0\ \ >>=\ 16;}
\DoxyCodeLine{09835\ \ \ \ \ \ \ \ \ left1\ \ >>=\ 16;}
\DoxyCodeLine{09836\ \ \ \ \ \ \ \ \ left2\ \ >>=\ 16;}
\DoxyCodeLine{09837\ \ \ \ \ \ \ \ \ left3\ \ >>=\ 16;}
\DoxyCodeLine{09838\ }
\DoxyCodeLine{09839\ \ \ \ \ \ \ \ \ right0\ >>=\ 16;}
\DoxyCodeLine{09840\ \ \ \ \ \ \ \ \ right1\ >>=\ 16;}
\DoxyCodeLine{09841\ \ \ \ \ \ \ \ \ right2\ >>=\ 16;}
\DoxyCodeLine{09842\ \ \ \ \ \ \ \ \ right3\ >>=\ 16;}
\DoxyCodeLine{09843\ }
\DoxyCodeLine{09844\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+0]\ =\ (drflac\_int16)left0;}
\DoxyCodeLine{09845\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+1]\ =\ (drflac\_int16)right0;}
\DoxyCodeLine{09846\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+2]\ =\ (drflac\_int16)left1;}
\DoxyCodeLine{09847\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+3]\ =\ (drflac\_int16)right1;}
\DoxyCodeLine{09848\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+4]\ =\ (drflac\_int16)left2;}
\DoxyCodeLine{09849\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+5]\ =\ (drflac\_int16)right2;}
\DoxyCodeLine{09850\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+6]\ =\ (drflac\_int16)left3;}
\DoxyCodeLine{09851\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+7]\ =\ (drflac\_int16)right3;}
\DoxyCodeLine{09852\ \ \ \ \ \}}
\DoxyCodeLine{09853\ }
\DoxyCodeLine{09854\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09855\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{09856\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{09857\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ left\ -\/\ side;}
\DoxyCodeLine{09858\ }
\DoxyCodeLine{09859\ \ \ \ \ \ \ \ \ left\ \ >>=\ 16;}
\DoxyCodeLine{09860\ \ \ \ \ \ \ \ \ right\ >>=\ 16;}
\DoxyCodeLine{09861\ }
\DoxyCodeLine{09862\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)left;}
\DoxyCodeLine{09863\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)right;}
\DoxyCodeLine{09864\ \ \ \ \ \}}
\DoxyCodeLine{09865\ \}}
\DoxyCodeLine{09866\ }
\DoxyCodeLine{09867\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{09868\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_left\_side\_\_sse2(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{09869\ \{}
\DoxyCodeLine{09870\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09871\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{09872\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{09873\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{09874\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09875\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09876\ }
\DoxyCodeLine{09877\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{09878\ }
\DoxyCodeLine{09879\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09880\ \ \ \ \ \ \ \ \ \_\_m128i\ left\ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples0\ +\ i),\ shift0);}
\DoxyCodeLine{09881\ \ \ \ \ \ \ \ \ \_\_m128i\ side\ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples1\ +\ i),\ shift1);}
\DoxyCodeLine{09882\ \ \ \ \ \ \ \ \ \_\_m128i\ right\ =\ \_mm\_sub\_epi32(left,\ side);}
\DoxyCodeLine{09883\ }
\DoxyCodeLine{09884\ \ \ \ \ \ \ \ \ left\ \ =\ \_mm\_srai\_epi32(left,\ \ 16);}
\DoxyCodeLine{09885\ \ \ \ \ \ \ \ \ right\ =\ \_mm\_srai\_epi32(right,\ 16);}
\DoxyCodeLine{09886\ }
\DoxyCodeLine{09887\ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)(pOutputSamples\ +\ i*8),\ drflac\_\_mm\_packs\_interleaved\_epi32(left,\ right));}
\DoxyCodeLine{09888\ \ \ \ \ \}}
\DoxyCodeLine{09889\ }
\DoxyCodeLine{09890\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09891\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{09892\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{09893\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ left\ -\/\ side;}
\DoxyCodeLine{09894\ }
\DoxyCodeLine{09895\ \ \ \ \ \ \ \ \ left\ \ >>=\ 16;}
\DoxyCodeLine{09896\ \ \ \ \ \ \ \ \ right\ >>=\ 16;}
\DoxyCodeLine{09897\ }
\DoxyCodeLine{09898\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)left;}
\DoxyCodeLine{09899\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)right;}
\DoxyCodeLine{09900\ \ \ \ \ \}}
\DoxyCodeLine{09901\ \}}
\DoxyCodeLine{09902\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09903\ }
\DoxyCodeLine{09904\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{09905\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_left\_side\_\_neon(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{09906\ \{}
\DoxyCodeLine{09907\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09908\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{09909\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{09910\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{09911\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09912\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09913\ \ \ \ \ int32x4\_t\ shift0\_4;}
\DoxyCodeLine{09914\ \ \ \ \ int32x4\_t\ shift1\_4;}
\DoxyCodeLine{09915\ }
\DoxyCodeLine{09916\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{09917\ }
\DoxyCodeLine{09918\ \ \ \ \ shift0\_4\ =\ vdupq\_n\_s32(shift0);}
\DoxyCodeLine{09919\ \ \ \ \ shift1\_4\ =\ vdupq\_n\_s32(shift1);}
\DoxyCodeLine{09920\ }
\DoxyCodeLine{09921\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{09922\ \ \ \ \ \ \ \ \ uint32x4\_t\ left;}
\DoxyCodeLine{09923\ \ \ \ \ \ \ \ \ uint32x4\_t\ side;}
\DoxyCodeLine{09924\ \ \ \ \ \ \ \ \ uint32x4\_t\ right;}
\DoxyCodeLine{09925\ }
\DoxyCodeLine{09926\ \ \ \ \ \ \ \ \ left\ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples0U32\ +\ i*4),\ shift0\_4);}
\DoxyCodeLine{09927\ \ \ \ \ \ \ \ \ side\ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples1U32\ +\ i*4),\ shift1\_4);}
\DoxyCodeLine{09928\ \ \ \ \ \ \ \ \ right\ =\ vsubq\_u32(left,\ side);}
\DoxyCodeLine{09929\ }
\DoxyCodeLine{09930\ \ \ \ \ \ \ \ \ left\ \ =\ vshrq\_n\_u32(left,\ \ 16);}
\DoxyCodeLine{09931\ \ \ \ \ \ \ \ \ right\ =\ vshrq\_n\_u32(right,\ 16);}
\DoxyCodeLine{09932\ }
\DoxyCodeLine{09933\ \ \ \ \ \ \ \ \ drflac\_\_vst2q\_u16((drflac\_uint16*)pOutputSamples\ +\ i*8,\ vzip\_u16(vmovn\_u32(left),\ vmovn\_u32(right)));}
\DoxyCodeLine{09934\ \ \ \ \ \}}
\DoxyCodeLine{09935\ }
\DoxyCodeLine{09936\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09937\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{09938\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{09939\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ left\ -\/\ side;}
\DoxyCodeLine{09940\ }
\DoxyCodeLine{09941\ \ \ \ \ \ \ \ \ left\ \ >>=\ 16;}
\DoxyCodeLine{09942\ \ \ \ \ \ \ \ \ right\ >>=\ 16;}
\DoxyCodeLine{09943\ }
\DoxyCodeLine{09944\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)left;}
\DoxyCodeLine{09945\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)right;}
\DoxyCodeLine{09946\ \ \ \ \ \}}
\DoxyCodeLine{09947\ \}}
\DoxyCodeLine{09948\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09949\ }
\DoxyCodeLine{09950\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_left\_side(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{09951\ \{}
\DoxyCodeLine{09952\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{09953\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsSSE2Supported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{09954\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_left\_side\_\_sse2(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09955\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{09956\ \textcolor{preprocessor}{\#elif\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{09957\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsNEONSupported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{09958\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_left\_side\_\_neon(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09959\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{09960\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09961\ \ \ \ \ \{}
\DoxyCodeLine{09962\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Scalar\ fallback.\ */}}
\DoxyCodeLine{09963\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{09964\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_left\_side\_\_reference(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09965\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{09966\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_left\_side\_\_scalar(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{09967\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09968\ \ \ \ \ \}}
\DoxyCodeLine{09969\ \}}
\DoxyCodeLine{09970\ }
\DoxyCodeLine{09971\ }
\DoxyCodeLine{09972\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{09973\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_right\_side\_\_reference(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{09974\ \{}
\DoxyCodeLine{09975\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09976\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{09977\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ (drflac\_uint32)pInputSamples0[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample);}
\DoxyCodeLine{09978\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ (drflac\_uint32)pInputSamples1[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample);}
\DoxyCodeLine{09979\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ right\ +\ side;}
\DoxyCodeLine{09980\ }
\DoxyCodeLine{09981\ \ \ \ \ \ \ \ \ left\ \ >>=\ 16;}
\DoxyCodeLine{09982\ \ \ \ \ \ \ \ \ right\ >>=\ 16;}
\DoxyCodeLine{09983\ }
\DoxyCodeLine{09984\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)left;}
\DoxyCodeLine{09985\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)right;}
\DoxyCodeLine{09986\ \ \ \ \ \}}
\DoxyCodeLine{09987\ \}}
\DoxyCodeLine{09988\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{09989\ }
\DoxyCodeLine{09990\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_right\_side\_\_scalar(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{09991\ \{}
\DoxyCodeLine{09992\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{09993\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{09994\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{09995\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{09996\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{09997\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{09998\ }
\DoxyCodeLine{09999\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10000\ \ \ \ \ \ \ \ \ drflac\_uint32\ side0\ \ =\ pInputSamples0U32[i*4+0]\ <<\ shift0;}
\DoxyCodeLine{10001\ \ \ \ \ \ \ \ \ drflac\_uint32\ side1\ \ =\ pInputSamples0U32[i*4+1]\ <<\ shift0;}
\DoxyCodeLine{10002\ \ \ \ \ \ \ \ \ drflac\_uint32\ side2\ \ =\ pInputSamples0U32[i*4+2]\ <<\ shift0;}
\DoxyCodeLine{10003\ \ \ \ \ \ \ \ \ drflac\_uint32\ side3\ \ =\ pInputSamples0U32[i*4+3]\ <<\ shift0;}
\DoxyCodeLine{10004\ }
\DoxyCodeLine{10005\ \ \ \ \ \ \ \ \ drflac\_uint32\ right0\ =\ pInputSamples1U32[i*4+0]\ <<\ shift1;}
\DoxyCodeLine{10006\ \ \ \ \ \ \ \ \ drflac\_uint32\ right1\ =\ pInputSamples1U32[i*4+1]\ <<\ shift1;}
\DoxyCodeLine{10007\ \ \ \ \ \ \ \ \ drflac\_uint32\ right2\ =\ pInputSamples1U32[i*4+2]\ <<\ shift1;}
\DoxyCodeLine{10008\ \ \ \ \ \ \ \ \ drflac\_uint32\ right3\ =\ pInputSamples1U32[i*4+3]\ <<\ shift1;}
\DoxyCodeLine{10009\ }
\DoxyCodeLine{10010\ \ \ \ \ \ \ \ \ drflac\_uint32\ left0\ =\ right0\ +\ side0;}
\DoxyCodeLine{10011\ \ \ \ \ \ \ \ \ drflac\_uint32\ left1\ =\ right1\ +\ side1;}
\DoxyCodeLine{10012\ \ \ \ \ \ \ \ \ drflac\_uint32\ left2\ =\ right2\ +\ side2;}
\DoxyCodeLine{10013\ \ \ \ \ \ \ \ \ drflac\_uint32\ left3\ =\ right3\ +\ side3;}
\DoxyCodeLine{10014\ }
\DoxyCodeLine{10015\ \ \ \ \ \ \ \ \ left0\ \ >>=\ 16;}
\DoxyCodeLine{10016\ \ \ \ \ \ \ \ \ left1\ \ >>=\ 16;}
\DoxyCodeLine{10017\ \ \ \ \ \ \ \ \ left2\ \ >>=\ 16;}
\DoxyCodeLine{10018\ \ \ \ \ \ \ \ \ left3\ \ >>=\ 16;}
\DoxyCodeLine{10019\ }
\DoxyCodeLine{10020\ \ \ \ \ \ \ \ \ right0\ >>=\ 16;}
\DoxyCodeLine{10021\ \ \ \ \ \ \ \ \ right1\ >>=\ 16;}
\DoxyCodeLine{10022\ \ \ \ \ \ \ \ \ right2\ >>=\ 16;}
\DoxyCodeLine{10023\ \ \ \ \ \ \ \ \ right3\ >>=\ 16;}
\DoxyCodeLine{10024\ }
\DoxyCodeLine{10025\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+0]\ =\ (drflac\_int16)left0;}
\DoxyCodeLine{10026\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+1]\ =\ (drflac\_int16)right0;}
\DoxyCodeLine{10027\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+2]\ =\ (drflac\_int16)left1;}
\DoxyCodeLine{10028\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+3]\ =\ (drflac\_int16)right1;}
\DoxyCodeLine{10029\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+4]\ =\ (drflac\_int16)left2;}
\DoxyCodeLine{10030\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+5]\ =\ (drflac\_int16)right2;}
\DoxyCodeLine{10031\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+6]\ =\ (drflac\_int16)left3;}
\DoxyCodeLine{10032\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+7]\ =\ (drflac\_int16)right3;}
\DoxyCodeLine{10033\ \ \ \ \ \}}
\DoxyCodeLine{10034\ }
\DoxyCodeLine{10035\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10036\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{10037\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{10038\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ right\ +\ side;}
\DoxyCodeLine{10039\ }
\DoxyCodeLine{10040\ \ \ \ \ \ \ \ \ left\ \ >>=\ 16;}
\DoxyCodeLine{10041\ \ \ \ \ \ \ \ \ right\ >>=\ 16;}
\DoxyCodeLine{10042\ }
\DoxyCodeLine{10043\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)left;}
\DoxyCodeLine{10044\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)right;}
\DoxyCodeLine{10045\ \ \ \ \ \}}
\DoxyCodeLine{10046\ \}}
\DoxyCodeLine{10047\ }
\DoxyCodeLine{10048\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{10049\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_right\_side\_\_sse2(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{10050\ \{}
\DoxyCodeLine{10051\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10052\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{10053\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{10054\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{10055\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10056\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10057\ }
\DoxyCodeLine{10058\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{10059\ }
\DoxyCodeLine{10060\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10061\ \ \ \ \ \ \ \ \ \_\_m128i\ side\ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples0\ +\ i),\ shift0);}
\DoxyCodeLine{10062\ \ \ \ \ \ \ \ \ \_\_m128i\ right\ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples1\ +\ i),\ shift1);}
\DoxyCodeLine{10063\ \ \ \ \ \ \ \ \ \_\_m128i\ left\ \ =\ \_mm\_add\_epi32(right,\ side);}
\DoxyCodeLine{10064\ }
\DoxyCodeLine{10065\ \ \ \ \ \ \ \ \ left\ \ =\ \_mm\_srai\_epi32(left,\ \ 16);}
\DoxyCodeLine{10066\ \ \ \ \ \ \ \ \ right\ =\ \_mm\_srai\_epi32(right,\ 16);}
\DoxyCodeLine{10067\ }
\DoxyCodeLine{10068\ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)(pOutputSamples\ +\ i*8),\ drflac\_\_mm\_packs\_interleaved\_epi32(left,\ right));}
\DoxyCodeLine{10069\ \ \ \ \ \}}
\DoxyCodeLine{10070\ }
\DoxyCodeLine{10071\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10072\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{10073\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{10074\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ right\ +\ side;}
\DoxyCodeLine{10075\ }
\DoxyCodeLine{10076\ \ \ \ \ \ \ \ \ left\ \ >>=\ 16;}
\DoxyCodeLine{10077\ \ \ \ \ \ \ \ \ right\ >>=\ 16;}
\DoxyCodeLine{10078\ }
\DoxyCodeLine{10079\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)left;}
\DoxyCodeLine{10080\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)right;}
\DoxyCodeLine{10081\ \ \ \ \ \}}
\DoxyCodeLine{10082\ \}}
\DoxyCodeLine{10083\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10084\ }
\DoxyCodeLine{10085\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{10086\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_right\_side\_\_neon(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{10087\ \{}
\DoxyCodeLine{10088\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10089\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{10090\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{10091\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{10092\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10093\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10094\ \ \ \ \ int32x4\_t\ shift0\_4;}
\DoxyCodeLine{10095\ \ \ \ \ int32x4\_t\ shift1\_4;}
\DoxyCodeLine{10096\ }
\DoxyCodeLine{10097\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{10098\ }
\DoxyCodeLine{10099\ \ \ \ \ shift0\_4\ =\ vdupq\_n\_s32(shift0);}
\DoxyCodeLine{10100\ \ \ \ \ shift1\_4\ =\ vdupq\_n\_s32(shift1);}
\DoxyCodeLine{10101\ }
\DoxyCodeLine{10102\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10103\ \ \ \ \ \ \ \ \ uint32x4\_t\ side;}
\DoxyCodeLine{10104\ \ \ \ \ \ \ \ \ uint32x4\_t\ right;}
\DoxyCodeLine{10105\ \ \ \ \ \ \ \ \ uint32x4\_t\ left;}
\DoxyCodeLine{10106\ }
\DoxyCodeLine{10107\ \ \ \ \ \ \ \ \ side\ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples0U32\ +\ i*4),\ shift0\_4);}
\DoxyCodeLine{10108\ \ \ \ \ \ \ \ \ right\ =\ vshlq\_u32(vld1q\_u32(pInputSamples1U32\ +\ i*4),\ shift1\_4);}
\DoxyCodeLine{10109\ \ \ \ \ \ \ \ \ left\ \ =\ vaddq\_u32(right,\ side);}
\DoxyCodeLine{10110\ }
\DoxyCodeLine{10111\ \ \ \ \ \ \ \ \ left\ \ =\ vshrq\_n\_u32(left,\ \ 16);}
\DoxyCodeLine{10112\ \ \ \ \ \ \ \ \ right\ =\ vshrq\_n\_u32(right,\ 16);}
\DoxyCodeLine{10113\ }
\DoxyCodeLine{10114\ \ \ \ \ \ \ \ \ drflac\_\_vst2q\_u16((drflac\_uint16*)pOutputSamples\ +\ i*8,\ vzip\_u16(vmovn\_u32(left),\ vmovn\_u32(right)));}
\DoxyCodeLine{10115\ \ \ \ \ \}}
\DoxyCodeLine{10116\ }
\DoxyCodeLine{10117\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10118\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{10119\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{10120\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ right\ +\ side;}
\DoxyCodeLine{10121\ }
\DoxyCodeLine{10122\ \ \ \ \ \ \ \ \ left\ \ >>=\ 16;}
\DoxyCodeLine{10123\ \ \ \ \ \ \ \ \ right\ >>=\ 16;}
\DoxyCodeLine{10124\ }
\DoxyCodeLine{10125\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)left;}
\DoxyCodeLine{10126\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)right;}
\DoxyCodeLine{10127\ \ \ \ \ \}}
\DoxyCodeLine{10128\ \}}
\DoxyCodeLine{10129\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10130\ }
\DoxyCodeLine{10131\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_right\_side(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{10132\ \{}
\DoxyCodeLine{10133\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{10134\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsSSE2Supported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{10135\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_right\_side\_\_sse2(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{10136\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{10137\ \textcolor{preprocessor}{\#elif\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{10138\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsNEONSupported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{10139\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_right\_side\_\_neon(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{10140\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{10141\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10142\ \ \ \ \ \{}
\DoxyCodeLine{10143\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Scalar\ fallback.\ */}}
\DoxyCodeLine{10144\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{10145\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_right\_side\_\_reference(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{10146\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{10147\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_right\_side\_\_scalar(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{10148\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10149\ \ \ \ \ \}}
\DoxyCodeLine{10150\ \}}
\DoxyCodeLine{10151\ }
\DoxyCodeLine{10152\ }
\DoxyCodeLine{10153\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{10154\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_mid\_side\_\_reference(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{10155\ \{}
\DoxyCodeLine{10156\ \ \ \ \ \textcolor{keywordflow}{for}\ (drflac\_uint64\ i\ =\ 0;\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10157\ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ (drflac\_uint32)pInputSamples0[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10158\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ (drflac\_uint32)pInputSamples1[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10159\ }
\DoxyCodeLine{10160\ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{10161\ }
\DoxyCodeLine{10162\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)(((drflac\_uint32)((drflac\_int32)(mid\ +\ side)\ >>\ 1)\ <<\ unusedBitsPerSample)\ >>\ 16);}
\DoxyCodeLine{10163\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)(((drflac\_uint32)((drflac\_int32)(mid\ -\/\ side)\ >>\ 1)\ <<\ unusedBitsPerSample)\ >>\ 16);}
\DoxyCodeLine{10164\ \ \ \ \ \}}
\DoxyCodeLine{10165\ \}}
\DoxyCodeLine{10166\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10167\ }
\DoxyCodeLine{10168\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_mid\_side\_\_scalar(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{10169\ \{}
\DoxyCodeLine{10170\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10171\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{10172\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{10173\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{10174\ \ \ \ \ drflac\_uint32\ shift\ =\ unusedBitsPerSample;}
\DoxyCodeLine{10175\ }
\DoxyCodeLine{10176\ \ \ \ \ \textcolor{keywordflow}{if}\ (shift\ >\ 0)\ \{}
\DoxyCodeLine{10177\ \ \ \ \ \ \ \ \ shift\ -\/=\ 1;}
\DoxyCodeLine{10178\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10179\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp0L;}
\DoxyCodeLine{10180\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp1L;}
\DoxyCodeLine{10181\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp2L;}
\DoxyCodeLine{10182\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp3L;}
\DoxyCodeLine{10183\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp0R;}
\DoxyCodeLine{10184\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp1R;}
\DoxyCodeLine{10185\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp2R;}
\DoxyCodeLine{10186\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp3R;}
\DoxyCodeLine{10187\ }
\DoxyCodeLine{10188\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid0\ \ =\ pInputSamples0U32[i*4+0]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10189\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid1\ \ =\ pInputSamples0U32[i*4+1]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10190\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid2\ \ =\ pInputSamples0U32[i*4+2]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10191\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid3\ \ =\ pInputSamples0U32[i*4+3]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10192\ }
\DoxyCodeLine{10193\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side0\ =\ pInputSamples1U32[i*4+0]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10194\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side1\ =\ pInputSamples1U32[i*4+1]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10195\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side2\ =\ pInputSamples1U32[i*4+2]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10196\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side3\ =\ pInputSamples1U32[i*4+3]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10197\ }
\DoxyCodeLine{10198\ \ \ \ \ \ \ \ \ \ \ \ \ mid0\ =\ (mid0\ <<\ 1)\ |\ (side0\ \&\ 0x01);}
\DoxyCodeLine{10199\ \ \ \ \ \ \ \ \ \ \ \ \ mid1\ =\ (mid1\ <<\ 1)\ |\ (side1\ \&\ 0x01);}
\DoxyCodeLine{10200\ \ \ \ \ \ \ \ \ \ \ \ \ mid2\ =\ (mid2\ <<\ 1)\ |\ (side2\ \&\ 0x01);}
\DoxyCodeLine{10201\ \ \ \ \ \ \ \ \ \ \ \ \ mid3\ =\ (mid3\ <<\ 1)\ |\ (side3\ \&\ 0x01);}
\DoxyCodeLine{10202\ }
\DoxyCodeLine{10203\ \ \ \ \ \ \ \ \ \ \ \ \ temp0L\ =\ (mid0\ +\ side0)\ <<\ shift;}
\DoxyCodeLine{10204\ \ \ \ \ \ \ \ \ \ \ \ \ temp1L\ =\ (mid1\ +\ side1)\ <<\ shift;}
\DoxyCodeLine{10205\ \ \ \ \ \ \ \ \ \ \ \ \ temp2L\ =\ (mid2\ +\ side2)\ <<\ shift;}
\DoxyCodeLine{10206\ \ \ \ \ \ \ \ \ \ \ \ \ temp3L\ =\ (mid3\ +\ side3)\ <<\ shift;}
\DoxyCodeLine{10207\ }
\DoxyCodeLine{10208\ \ \ \ \ \ \ \ \ \ \ \ \ temp0R\ =\ (mid0\ -\/\ side0)\ <<\ shift;}
\DoxyCodeLine{10209\ \ \ \ \ \ \ \ \ \ \ \ \ temp1R\ =\ (mid1\ -\/\ side1)\ <<\ shift;}
\DoxyCodeLine{10210\ \ \ \ \ \ \ \ \ \ \ \ \ temp2R\ =\ (mid2\ -\/\ side2)\ <<\ shift;}
\DoxyCodeLine{10211\ \ \ \ \ \ \ \ \ \ \ \ \ temp3R\ =\ (mid3\ -\/\ side3)\ <<\ shift;}
\DoxyCodeLine{10212\ }
\DoxyCodeLine{10213\ \ \ \ \ \ \ \ \ \ \ \ \ temp0L\ >>=\ 16;}
\DoxyCodeLine{10214\ \ \ \ \ \ \ \ \ \ \ \ \ temp1L\ >>=\ 16;}
\DoxyCodeLine{10215\ \ \ \ \ \ \ \ \ \ \ \ \ temp2L\ >>=\ 16;}
\DoxyCodeLine{10216\ \ \ \ \ \ \ \ \ \ \ \ \ temp3L\ >>=\ 16;}
\DoxyCodeLine{10217\ }
\DoxyCodeLine{10218\ \ \ \ \ \ \ \ \ \ \ \ \ temp0R\ >>=\ 16;}
\DoxyCodeLine{10219\ \ \ \ \ \ \ \ \ \ \ \ \ temp1R\ >>=\ 16;}
\DoxyCodeLine{10220\ \ \ \ \ \ \ \ \ \ \ \ \ temp2R\ >>=\ 16;}
\DoxyCodeLine{10221\ \ \ \ \ \ \ \ \ \ \ \ \ temp3R\ >>=\ 16;}
\DoxyCodeLine{10222\ }
\DoxyCodeLine{10223\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+0]\ =\ (drflac\_int16)temp0L;}
\DoxyCodeLine{10224\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+1]\ =\ (drflac\_int16)temp0R;}
\DoxyCodeLine{10225\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+2]\ =\ (drflac\_int16)temp1L;}
\DoxyCodeLine{10226\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+3]\ =\ (drflac\_int16)temp1R;}
\DoxyCodeLine{10227\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+4]\ =\ (drflac\_int16)temp2L;}
\DoxyCodeLine{10228\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+5]\ =\ (drflac\_int16)temp2R;}
\DoxyCodeLine{10229\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+6]\ =\ (drflac\_int16)temp3L;}
\DoxyCodeLine{10230\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+7]\ =\ (drflac\_int16)temp3R;}
\DoxyCodeLine{10231\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10232\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{10233\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10234\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp0L;}
\DoxyCodeLine{10235\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp1L;}
\DoxyCodeLine{10236\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp2L;}
\DoxyCodeLine{10237\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp3L;}
\DoxyCodeLine{10238\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp0R;}
\DoxyCodeLine{10239\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp1R;}
\DoxyCodeLine{10240\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp2R;}
\DoxyCodeLine{10241\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp3R;}
\DoxyCodeLine{10242\ }
\DoxyCodeLine{10243\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid0\ \ =\ pInputSamples0U32[i*4+0]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10244\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid1\ \ =\ pInputSamples0U32[i*4+1]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10245\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid2\ \ =\ pInputSamples0U32[i*4+2]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10246\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid3\ \ =\ pInputSamples0U32[i*4+3]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10247\ }
\DoxyCodeLine{10248\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side0\ =\ pInputSamples1U32[i*4+0]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10249\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side1\ =\ pInputSamples1U32[i*4+1]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10250\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side2\ =\ pInputSamples1U32[i*4+2]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10251\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side3\ =\ pInputSamples1U32[i*4+3]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10252\ }
\DoxyCodeLine{10253\ \ \ \ \ \ \ \ \ \ \ \ \ mid0\ =\ (mid0\ <<\ 1)\ |\ (side0\ \&\ 0x01);}
\DoxyCodeLine{10254\ \ \ \ \ \ \ \ \ \ \ \ \ mid1\ =\ (mid1\ <<\ 1)\ |\ (side1\ \&\ 0x01);}
\DoxyCodeLine{10255\ \ \ \ \ \ \ \ \ \ \ \ \ mid2\ =\ (mid2\ <<\ 1)\ |\ (side2\ \&\ 0x01);}
\DoxyCodeLine{10256\ \ \ \ \ \ \ \ \ \ \ \ \ mid3\ =\ (mid3\ <<\ 1)\ |\ (side3\ \&\ 0x01);}
\DoxyCodeLine{10257\ }
\DoxyCodeLine{10258\ \ \ \ \ \ \ \ \ \ \ \ \ temp0L\ =\ ((drflac\_int32)(mid0\ +\ side0)\ >>\ 1);}
\DoxyCodeLine{10259\ \ \ \ \ \ \ \ \ \ \ \ \ temp1L\ =\ ((drflac\_int32)(mid1\ +\ side1)\ >>\ 1);}
\DoxyCodeLine{10260\ \ \ \ \ \ \ \ \ \ \ \ \ temp2L\ =\ ((drflac\_int32)(mid2\ +\ side2)\ >>\ 1);}
\DoxyCodeLine{10261\ \ \ \ \ \ \ \ \ \ \ \ \ temp3L\ =\ ((drflac\_int32)(mid3\ +\ side3)\ >>\ 1);}
\DoxyCodeLine{10262\ }
\DoxyCodeLine{10263\ \ \ \ \ \ \ \ \ \ \ \ \ temp0R\ =\ ((drflac\_int32)(mid0\ -\/\ side0)\ >>\ 1);}
\DoxyCodeLine{10264\ \ \ \ \ \ \ \ \ \ \ \ \ temp1R\ =\ ((drflac\_int32)(mid1\ -\/\ side1)\ >>\ 1);}
\DoxyCodeLine{10265\ \ \ \ \ \ \ \ \ \ \ \ \ temp2R\ =\ ((drflac\_int32)(mid2\ -\/\ side2)\ >>\ 1);}
\DoxyCodeLine{10266\ \ \ \ \ \ \ \ \ \ \ \ \ temp3R\ =\ ((drflac\_int32)(mid3\ -\/\ side3)\ >>\ 1);}
\DoxyCodeLine{10267\ }
\DoxyCodeLine{10268\ \ \ \ \ \ \ \ \ \ \ \ \ temp0L\ >>=\ 16;}
\DoxyCodeLine{10269\ \ \ \ \ \ \ \ \ \ \ \ \ temp1L\ >>=\ 16;}
\DoxyCodeLine{10270\ \ \ \ \ \ \ \ \ \ \ \ \ temp2L\ >>=\ 16;}
\DoxyCodeLine{10271\ \ \ \ \ \ \ \ \ \ \ \ \ temp3L\ >>=\ 16;}
\DoxyCodeLine{10272\ }
\DoxyCodeLine{10273\ \ \ \ \ \ \ \ \ \ \ \ \ temp0R\ >>=\ 16;}
\DoxyCodeLine{10274\ \ \ \ \ \ \ \ \ \ \ \ \ temp1R\ >>=\ 16;}
\DoxyCodeLine{10275\ \ \ \ \ \ \ \ \ \ \ \ \ temp2R\ >>=\ 16;}
\DoxyCodeLine{10276\ \ \ \ \ \ \ \ \ \ \ \ \ temp3R\ >>=\ 16;}
\DoxyCodeLine{10277\ }
\DoxyCodeLine{10278\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+0]\ =\ (drflac\_int16)temp0L;}
\DoxyCodeLine{10279\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+1]\ =\ (drflac\_int16)temp0R;}
\DoxyCodeLine{10280\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+2]\ =\ (drflac\_int16)temp1L;}
\DoxyCodeLine{10281\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+3]\ =\ (drflac\_int16)temp1R;}
\DoxyCodeLine{10282\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+4]\ =\ (drflac\_int16)temp2L;}
\DoxyCodeLine{10283\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+5]\ =\ (drflac\_int16)temp2R;}
\DoxyCodeLine{10284\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+6]\ =\ (drflac\_int16)temp3L;}
\DoxyCodeLine{10285\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+7]\ =\ (drflac\_int16)temp3R;}
\DoxyCodeLine{10286\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10287\ \ \ \ \ \}}
\DoxyCodeLine{10288\ }
\DoxyCodeLine{10289\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10290\ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ pInputSamples0U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10291\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ pInputSamples1U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10292\ }
\DoxyCodeLine{10293\ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{10294\ }
\DoxyCodeLine{10295\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)(((drflac\_uint32)((drflac\_int32)(mid\ +\ side)\ >>\ 1)\ <<\ unusedBitsPerSample)\ >>\ 16);}
\DoxyCodeLine{10296\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)(((drflac\_uint32)((drflac\_int32)(mid\ -\/\ side)\ >>\ 1)\ <<\ unusedBitsPerSample)\ >>\ 16);}
\DoxyCodeLine{10297\ \ \ \ \ \}}
\DoxyCodeLine{10298\ \}}
\DoxyCodeLine{10299\ }
\DoxyCodeLine{10300\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{10301\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_mid\_side\_\_sse2(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{10302\ \{}
\DoxyCodeLine{10303\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10304\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{10305\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{10306\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{10307\ \ \ \ \ drflac\_uint32\ shift\ =\ unusedBitsPerSample;}
\DoxyCodeLine{10308\ }
\DoxyCodeLine{10309\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{10310\ }
\DoxyCodeLine{10311\ \ \ \ \ \textcolor{keywordflow}{if}\ (shift\ ==\ 0)\ \{}
\DoxyCodeLine{10312\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10313\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ mid;}
\DoxyCodeLine{10314\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ side;}
\DoxyCodeLine{10315\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ left;}
\DoxyCodeLine{10316\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ right;}
\DoxyCodeLine{10317\ }
\DoxyCodeLine{10318\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples0\ +\ i),\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample);}
\DoxyCodeLine{10319\ \ \ \ \ \ \ \ \ \ \ \ \ side\ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples1\ +\ i),\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample);}
\DoxyCodeLine{10320\ }
\DoxyCodeLine{10321\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ =\ \_mm\_or\_si128(\_mm\_slli\_epi32(mid,\ 1),\ \_mm\_and\_si128(side,\ \_mm\_set1\_epi32(0x01)));}
\DoxyCodeLine{10322\ }
\DoxyCodeLine{10323\ \ \ \ \ \ \ \ \ \ \ \ \ left\ \ =\ \_mm\_srai\_epi32(\_mm\_add\_epi32(mid,\ side),\ 1);}
\DoxyCodeLine{10324\ \ \ \ \ \ \ \ \ \ \ \ \ right\ =\ \_mm\_srai\_epi32(\_mm\_sub\_epi32(mid,\ side),\ 1);}
\DoxyCodeLine{10325\ }
\DoxyCodeLine{10326\ \ \ \ \ \ \ \ \ \ \ \ \ left\ \ =\ \_mm\_srai\_epi32(left,\ \ 16);}
\DoxyCodeLine{10327\ \ \ \ \ \ \ \ \ \ \ \ \ right\ =\ \_mm\_srai\_epi32(right,\ 16);}
\DoxyCodeLine{10328\ }
\DoxyCodeLine{10329\ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)(pOutputSamples\ +\ i*8),\ drflac\_\_mm\_packs\_interleaved\_epi32(left,\ right));}
\DoxyCodeLine{10330\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10331\ }
\DoxyCodeLine{10332\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10333\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ pInputSamples0U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10334\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ pInputSamples1U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10335\ }
\DoxyCodeLine{10336\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{10337\ }
\DoxyCodeLine{10338\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)(((drflac\_int32)(mid\ +\ side)\ >>\ 1)\ >>\ 16);}
\DoxyCodeLine{10339\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)(((drflac\_int32)(mid\ -\/\ side)\ >>\ 1)\ >>\ 16);}
\DoxyCodeLine{10340\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10341\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{10342\ \ \ \ \ \ \ \ \ shift\ -\/=\ 1;}
\DoxyCodeLine{10343\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10344\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ mid;}
\DoxyCodeLine{10345\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ side;}
\DoxyCodeLine{10346\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ left;}
\DoxyCodeLine{10347\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ right;}
\DoxyCodeLine{10348\ }
\DoxyCodeLine{10349\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples0\ +\ i),\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample);}
\DoxyCodeLine{10350\ \ \ \ \ \ \ \ \ \ \ \ \ side\ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples1\ +\ i),\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample);}
\DoxyCodeLine{10351\ }
\DoxyCodeLine{10352\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ =\ \_mm\_or\_si128(\_mm\_slli\_epi32(mid,\ 1),\ \_mm\_and\_si128(side,\ \_mm\_set1\_epi32(0x01)));}
\DoxyCodeLine{10353\ }
\DoxyCodeLine{10354\ \ \ \ \ \ \ \ \ \ \ \ \ left\ \ =\ \_mm\_slli\_epi32(\_mm\_add\_epi32(mid,\ side),\ shift);}
\DoxyCodeLine{10355\ \ \ \ \ \ \ \ \ \ \ \ \ right\ =\ \_mm\_slli\_epi32(\_mm\_sub\_epi32(mid,\ side),\ shift);}
\DoxyCodeLine{10356\ }
\DoxyCodeLine{10357\ \ \ \ \ \ \ \ \ \ \ \ \ left\ \ =\ \_mm\_srai\_epi32(left,\ \ 16);}
\DoxyCodeLine{10358\ \ \ \ \ \ \ \ \ \ \ \ \ right\ =\ \_mm\_srai\_epi32(right,\ 16);}
\DoxyCodeLine{10359\ }
\DoxyCodeLine{10360\ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)(pOutputSamples\ +\ i*8),\ drflac\_\_mm\_packs\_interleaved\_epi32(left,\ right));}
\DoxyCodeLine{10361\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10362\ }
\DoxyCodeLine{10363\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10364\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ pInputSamples0U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10365\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ pInputSamples1U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10366\ }
\DoxyCodeLine{10367\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{10368\ }
\DoxyCodeLine{10369\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)(((mid\ +\ side)\ <<\ shift)\ >>\ 16);}
\DoxyCodeLine{10370\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)(((mid\ -\/\ side)\ <<\ shift)\ >>\ 16);}
\DoxyCodeLine{10371\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10372\ \ \ \ \ \}}
\DoxyCodeLine{10373\ \}}
\DoxyCodeLine{10374\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10375\ }
\DoxyCodeLine{10376\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{10377\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_mid\_side\_\_neon(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{10378\ \{}
\DoxyCodeLine{10379\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10380\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{10381\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{10382\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{10383\ \ \ \ \ drflac\_uint32\ shift\ =\ unusedBitsPerSample;}
\DoxyCodeLine{10384\ \ \ \ \ int32x4\_t\ wbpsShift0\_4;\ \textcolor{comment}{/*\ wbps\ =\ Wasted\ Bits\ Per\ Sample\ */}}
\DoxyCodeLine{10385\ \ \ \ \ int32x4\_t\ wbpsShift1\_4;\ \textcolor{comment}{/*\ wbps\ =\ Wasted\ Bits\ Per\ Sample\ */}}
\DoxyCodeLine{10386\ }
\DoxyCodeLine{10387\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{10388\ }
\DoxyCodeLine{10389\ \ \ \ \ wbpsShift0\_4\ =\ vdupq\_n\_s32(pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample);}
\DoxyCodeLine{10390\ \ \ \ \ wbpsShift1\_4\ =\ vdupq\_n\_s32(pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample);}
\DoxyCodeLine{10391\ }
\DoxyCodeLine{10392\ \ \ \ \ \textcolor{keywordflow}{if}\ (shift\ ==\ 0)\ \{}
\DoxyCodeLine{10393\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10394\ \ \ \ \ \ \ \ \ \ \ \ \ uint32x4\_t\ mid;}
\DoxyCodeLine{10395\ \ \ \ \ \ \ \ \ \ \ \ \ uint32x4\_t\ side;}
\DoxyCodeLine{10396\ \ \ \ \ \ \ \ \ \ \ \ \ int32x4\_t\ left;}
\DoxyCodeLine{10397\ \ \ \ \ \ \ \ \ \ \ \ \ int32x4\_t\ right;}
\DoxyCodeLine{10398\ }
\DoxyCodeLine{10399\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples0U32\ +\ i*4),\ wbpsShift0\_4);}
\DoxyCodeLine{10400\ \ \ \ \ \ \ \ \ \ \ \ \ side\ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples1U32\ +\ i*4),\ wbpsShift1\_4);}
\DoxyCodeLine{10401\ }
\DoxyCodeLine{10402\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ =\ vorrq\_u32(vshlq\_n\_u32(mid,\ 1),\ vandq\_u32(side,\ vdupq\_n\_u32(1)));}
\DoxyCodeLine{10403\ }
\DoxyCodeLine{10404\ \ \ \ \ \ \ \ \ \ \ \ \ left\ \ =\ vshrq\_n\_s32(vreinterpretq\_s32\_u32(vaddq\_u32(mid,\ side)),\ 1);}
\DoxyCodeLine{10405\ \ \ \ \ \ \ \ \ \ \ \ \ right\ =\ vshrq\_n\_s32(vreinterpretq\_s32\_u32(vsubq\_u32(mid,\ side)),\ 1);}
\DoxyCodeLine{10406\ }
\DoxyCodeLine{10407\ \ \ \ \ \ \ \ \ \ \ \ \ left\ \ =\ vshrq\_n\_s32(left,\ \ 16);}
\DoxyCodeLine{10408\ \ \ \ \ \ \ \ \ \ \ \ \ right\ =\ vshrq\_n\_s32(right,\ 16);}
\DoxyCodeLine{10409\ }
\DoxyCodeLine{10410\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_vst2q\_s16(pOutputSamples\ +\ i*8,\ vzip\_s16(vmovn\_s32(left),\ vmovn\_s32(right)));}
\DoxyCodeLine{10411\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10412\ }
\DoxyCodeLine{10413\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10414\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ pInputSamples0U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10415\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ pInputSamples1U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10416\ }
\DoxyCodeLine{10417\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{10418\ }
\DoxyCodeLine{10419\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)(((drflac\_int32)(mid\ +\ side)\ >>\ 1)\ >>\ 16);}
\DoxyCodeLine{10420\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)(((drflac\_int32)(mid\ -\/\ side)\ >>\ 1)\ >>\ 16);}
\DoxyCodeLine{10421\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10422\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{10423\ \ \ \ \ \ \ \ \ int32x4\_t\ shift4;}
\DoxyCodeLine{10424\ }
\DoxyCodeLine{10425\ \ \ \ \ \ \ \ \ shift\ -\/=\ 1;}
\DoxyCodeLine{10426\ \ \ \ \ \ \ \ \ shift4\ =\ vdupq\_n\_s32(shift);}
\DoxyCodeLine{10427\ }
\DoxyCodeLine{10428\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10429\ \ \ \ \ \ \ \ \ \ \ \ \ uint32x4\_t\ mid;}
\DoxyCodeLine{10430\ \ \ \ \ \ \ \ \ \ \ \ \ uint32x4\_t\ side;}
\DoxyCodeLine{10431\ \ \ \ \ \ \ \ \ \ \ \ \ int32x4\_t\ left;}
\DoxyCodeLine{10432\ \ \ \ \ \ \ \ \ \ \ \ \ int32x4\_t\ right;}
\DoxyCodeLine{10433\ }
\DoxyCodeLine{10434\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples0U32\ +\ i*4),\ wbpsShift0\_4);}
\DoxyCodeLine{10435\ \ \ \ \ \ \ \ \ \ \ \ \ side\ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples1U32\ +\ i*4),\ wbpsShift1\_4);}
\DoxyCodeLine{10436\ }
\DoxyCodeLine{10437\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ =\ vorrq\_u32(vshlq\_n\_u32(mid,\ 1),\ vandq\_u32(side,\ vdupq\_n\_u32(1)));}
\DoxyCodeLine{10438\ }
\DoxyCodeLine{10439\ \ \ \ \ \ \ \ \ \ \ \ \ left\ \ =\ vreinterpretq\_s32\_u32(vshlq\_u32(vaddq\_u32(mid,\ side),\ shift4));}
\DoxyCodeLine{10440\ \ \ \ \ \ \ \ \ \ \ \ \ right\ =\ vreinterpretq\_s32\_u32(vshlq\_u32(vsubq\_u32(mid,\ side),\ shift4));}
\DoxyCodeLine{10441\ }
\DoxyCodeLine{10442\ \ \ \ \ \ \ \ \ \ \ \ \ left\ \ =\ vshrq\_n\_s32(left,\ \ 16);}
\DoxyCodeLine{10443\ \ \ \ \ \ \ \ \ \ \ \ \ right\ =\ vshrq\_n\_s32(right,\ 16);}
\DoxyCodeLine{10444\ }
\DoxyCodeLine{10445\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_vst2q\_s16(pOutputSamples\ +\ i*8,\ vzip\_s16(vmovn\_s32(left),\ vmovn\_s32(right)));}
\DoxyCodeLine{10446\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10447\ }
\DoxyCodeLine{10448\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10449\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ pInputSamples0U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10450\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ pInputSamples1U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10451\ }
\DoxyCodeLine{10452\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{10453\ }
\DoxyCodeLine{10454\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)(((mid\ +\ side)\ <<\ shift)\ >>\ 16);}
\DoxyCodeLine{10455\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)(((mid\ -\/\ side)\ <<\ shift)\ >>\ 16);}
\DoxyCodeLine{10456\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10457\ \ \ \ \ \}}
\DoxyCodeLine{10458\ \}}
\DoxyCodeLine{10459\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10460\ }
\DoxyCodeLine{10461\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_mid\_side(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{10462\ \{}
\DoxyCodeLine{10463\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{10464\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsSSE2Supported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{10465\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_mid\_side\_\_sse2(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{10466\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{10467\ \textcolor{preprocessor}{\#elif\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{10468\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsNEONSupported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{10469\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_mid\_side\_\_neon(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{10470\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{10471\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10472\ \ \ \ \ \{}
\DoxyCodeLine{10473\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Scalar\ fallback.\ */}}
\DoxyCodeLine{10474\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{10475\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_mid\_side\_\_reference(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{10476\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{10477\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_mid\_side\_\_scalar(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{10478\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10479\ \ \ \ \ \}}
\DoxyCodeLine{10480\ \}}
\DoxyCodeLine{10481\ }
\DoxyCodeLine{10482\ }
\DoxyCodeLine{10483\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{10484\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_independent\_stereo\_\_reference(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{10485\ \{}
\DoxyCodeLine{10486\ \ \ \ \ \textcolor{keywordflow}{for}\ (drflac\_uint64\ i\ =\ 0;\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10487\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)((drflac\_int32)((drflac\_uint32)pInputSamples0[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample))\ >>\ 16);}
\DoxyCodeLine{10488\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)((drflac\_int32)((drflac\_uint32)pInputSamples1[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample))\ >>\ 16);}
\DoxyCodeLine{10489\ \ \ \ \ \}}
\DoxyCodeLine{10490\ \}}
\DoxyCodeLine{10491\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10492\ }
\DoxyCodeLine{10493\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_independent\_stereo\_\_scalar(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{10494\ \{}
\DoxyCodeLine{10495\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10496\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{10497\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{10498\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{10499\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10500\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10501\ }
\DoxyCodeLine{10502\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10503\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempL0\ =\ pInputSamples0U32[i*4+0]\ <<\ shift0;}
\DoxyCodeLine{10504\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempL1\ =\ pInputSamples0U32[i*4+1]\ <<\ shift0;}
\DoxyCodeLine{10505\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempL2\ =\ pInputSamples0U32[i*4+2]\ <<\ shift0;}
\DoxyCodeLine{10506\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempL3\ =\ pInputSamples0U32[i*4+3]\ <<\ shift0;}
\DoxyCodeLine{10507\ }
\DoxyCodeLine{10508\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempR0\ =\ pInputSamples1U32[i*4+0]\ <<\ shift1;}
\DoxyCodeLine{10509\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempR1\ =\ pInputSamples1U32[i*4+1]\ <<\ shift1;}
\DoxyCodeLine{10510\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempR2\ =\ pInputSamples1U32[i*4+2]\ <<\ shift1;}
\DoxyCodeLine{10511\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempR3\ =\ pInputSamples1U32[i*4+3]\ <<\ shift1;}
\DoxyCodeLine{10512\ }
\DoxyCodeLine{10513\ \ \ \ \ \ \ \ \ tempL0\ >>=\ 16;}
\DoxyCodeLine{10514\ \ \ \ \ \ \ \ \ tempL1\ >>=\ 16;}
\DoxyCodeLine{10515\ \ \ \ \ \ \ \ \ tempL2\ >>=\ 16;}
\DoxyCodeLine{10516\ \ \ \ \ \ \ \ \ tempL3\ >>=\ 16;}
\DoxyCodeLine{10517\ }
\DoxyCodeLine{10518\ \ \ \ \ \ \ \ \ tempR0\ >>=\ 16;}
\DoxyCodeLine{10519\ \ \ \ \ \ \ \ \ tempR1\ >>=\ 16;}
\DoxyCodeLine{10520\ \ \ \ \ \ \ \ \ tempR2\ >>=\ 16;}
\DoxyCodeLine{10521\ \ \ \ \ \ \ \ \ tempR3\ >>=\ 16;}
\DoxyCodeLine{10522\ }
\DoxyCodeLine{10523\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+0]\ =\ (drflac\_int16)tempL0;}
\DoxyCodeLine{10524\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+1]\ =\ (drflac\_int16)tempR0;}
\DoxyCodeLine{10525\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+2]\ =\ (drflac\_int16)tempL1;}
\DoxyCodeLine{10526\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+3]\ =\ (drflac\_int16)tempR1;}
\DoxyCodeLine{10527\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+4]\ =\ (drflac\_int16)tempL2;}
\DoxyCodeLine{10528\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+5]\ =\ (drflac\_int16)tempR2;}
\DoxyCodeLine{10529\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+6]\ =\ (drflac\_int16)tempL3;}
\DoxyCodeLine{10530\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+7]\ =\ (drflac\_int16)tempR3;}
\DoxyCodeLine{10531\ \ \ \ \ \}}
\DoxyCodeLine{10532\ }
\DoxyCodeLine{10533\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10534\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)((pInputSamples0U32[i]\ <<\ shift0)\ >>\ 16);}
\DoxyCodeLine{10535\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)((pInputSamples1U32[i]\ <<\ shift1)\ >>\ 16);}
\DoxyCodeLine{10536\ \ \ \ \ \}}
\DoxyCodeLine{10537\ \}}
\DoxyCodeLine{10538\ }
\DoxyCodeLine{10539\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{10540\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_independent\_stereo\_\_sse2(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{10541\ \{}
\DoxyCodeLine{10542\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10543\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{10544\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{10545\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{10546\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10547\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10548\ }
\DoxyCodeLine{10549\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10550\ \ \ \ \ \ \ \ \ \_\_m128i\ left\ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples0\ +\ i),\ shift0);}
\DoxyCodeLine{10551\ \ \ \ \ \ \ \ \ \_\_m128i\ right\ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples1\ +\ i),\ shift1);}
\DoxyCodeLine{10552\ }
\DoxyCodeLine{10553\ \ \ \ \ \ \ \ \ left\ \ =\ \_mm\_srai\_epi32(left,\ \ 16);}
\DoxyCodeLine{10554\ \ \ \ \ \ \ \ \ right\ =\ \_mm\_srai\_epi32(right,\ 16);}
\DoxyCodeLine{10555\ }
\DoxyCodeLine{10556\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ At\ this\ point\ we\ have\ results.\ We\ can\ now\ pack\ and\ interleave\ these\ into\ a\ single\ \_\_m128i\ object\ and\ then\ store\ the\ in\ the\ output\ buffer.\ */}}
\DoxyCodeLine{10557\ \ \ \ \ \ \ \ \ \_mm\_storeu\_si128((\_\_m128i*)(pOutputSamples\ +\ i*8),\ drflac\_\_mm\_packs\_interleaved\_epi32(left,\ right));}
\DoxyCodeLine{10558\ \ \ \ \ \}}
\DoxyCodeLine{10559\ }
\DoxyCodeLine{10560\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10561\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)((pInputSamples0U32[i]\ <<\ shift0)\ >>\ 16);}
\DoxyCodeLine{10562\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)((pInputSamples1U32[i]\ <<\ shift1)\ >>\ 16);}
\DoxyCodeLine{10563\ \ \ \ \ \}}
\DoxyCodeLine{10564\ \}}
\DoxyCodeLine{10565\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10566\ }
\DoxyCodeLine{10567\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{10568\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_independent\_stereo\_\_neon(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{10569\ \{}
\DoxyCodeLine{10570\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10571\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{10572\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{10573\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{10574\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10575\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10576\ }
\DoxyCodeLine{10577\ \ \ \ \ int32x4\_t\ shift0\_4\ =\ vdupq\_n\_s32(shift0);}
\DoxyCodeLine{10578\ \ \ \ \ int32x4\_t\ shift1\_4\ =\ vdupq\_n\_s32(shift1);}
\DoxyCodeLine{10579\ }
\DoxyCodeLine{10580\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10581\ \ \ \ \ \ \ \ \ int32x4\_t\ left;}
\DoxyCodeLine{10582\ \ \ \ \ \ \ \ \ int32x4\_t\ right;}
\DoxyCodeLine{10583\ }
\DoxyCodeLine{10584\ \ \ \ \ \ \ \ \ left\ \ =\ vreinterpretq\_s32\_u32(vshlq\_u32(vld1q\_u32(pInputSamples0U32\ +\ i*4),\ shift0\_4));}
\DoxyCodeLine{10585\ \ \ \ \ \ \ \ \ right\ =\ vreinterpretq\_s32\_u32(vshlq\_u32(vld1q\_u32(pInputSamples1U32\ +\ i*4),\ shift1\_4));}
\DoxyCodeLine{10586\ }
\DoxyCodeLine{10587\ \ \ \ \ \ \ \ \ left\ \ =\ vshrq\_n\_s32(left,\ \ 16);}
\DoxyCodeLine{10588\ \ \ \ \ \ \ \ \ right\ =\ vshrq\_n\_s32(right,\ 16);}
\DoxyCodeLine{10589\ }
\DoxyCodeLine{10590\ \ \ \ \ \ \ \ \ drflac\_\_vst2q\_s16(pOutputSamples\ +\ i*8,\ vzip\_s16(vmovn\_s32(left),\ vmovn\_s32(right)));}
\DoxyCodeLine{10591\ \ \ \ \ \}}
\DoxyCodeLine{10592\ }
\DoxyCodeLine{10593\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10594\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int16)((pInputSamples0U32[i]\ <<\ shift0)\ >>\ 16);}
\DoxyCodeLine{10595\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int16)((pInputSamples1U32[i]\ <<\ shift1)\ >>\ 16);}
\DoxyCodeLine{10596\ \ \ \ \ \}}
\DoxyCodeLine{10597\ \}}
\DoxyCodeLine{10598\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10599\ }
\DoxyCodeLine{10600\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_s16\_\_decode\_independent\_stereo(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ drflac\_int16*\ pOutputSamples)}
\DoxyCodeLine{10601\ \{}
\DoxyCodeLine{10602\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{10603\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsSSE2Supported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{10604\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_independent\_stereo\_\_sse2(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{10605\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{10606\ \textcolor{preprocessor}{\#elif\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{10607\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsNEONSupported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{10608\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_independent\_stereo\_\_neon(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{10609\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{10610\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10611\ \ \ \ \ \{}
\DoxyCodeLine{10612\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Scalar\ fallback.\ */}}
\DoxyCodeLine{10613\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{10614\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_independent\_stereo\_\_reference(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{10615\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{10616\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_independent\_stereo\_\_scalar(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{10617\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10618\ \ \ \ \ \}}
\DoxyCodeLine{10619\ \}}
\DoxyCodeLine{10620\ }
\DoxyCodeLine{10621\ DRFLAC\_API\ drflac\_uint64\ drflac\_read\_pcm\_frames\_s16(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ framesToRead,\ drflac\_int16*\ pBufferOut)}
\DoxyCodeLine{10622\ \{}
\DoxyCodeLine{10623\ \ \ \ \ drflac\_uint64\ framesRead;}
\DoxyCodeLine{10624\ \ \ \ \ drflac\_uint32\ unusedBitsPerSample;}
\DoxyCodeLine{10625\ }
\DoxyCodeLine{10626\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL\ ||\ framesToRead\ ==\ 0)\ \{}
\DoxyCodeLine{10627\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{10628\ \ \ \ \ \}}
\DoxyCodeLine{10629\ }
\DoxyCodeLine{10630\ \ \ \ \ \textcolor{keywordflow}{if}\ (pBufferOut\ ==\ NULL)\ \{}
\DoxyCodeLine{10631\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_seek\_forward\_by\_pcm\_frames(pFlac,\ framesToRead);}
\DoxyCodeLine{10632\ \ \ \ \ \}}
\DoxyCodeLine{10633\ }
\DoxyCodeLine{10634\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 32);}
\DoxyCodeLine{10635\ \ \ \ \ unusedBitsPerSample\ =\ 32\ -\/\ pFlac-\/>bitsPerSample;}
\DoxyCodeLine{10636\ }
\DoxyCodeLine{10637\ \ \ \ \ framesRead\ =\ 0;}
\DoxyCodeLine{10638\ \ \ \ \ \textcolor{keywordflow}{while}\ (framesToRead\ >\ 0)\ \{}
\DoxyCodeLine{10639\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ we've\ run\ out\ of\ samples\ in\ this\ frame,\ go\ to\ the\ next.\ */}}
\DoxyCodeLine{10640\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>currentFLACFrame.pcmFramesRemaining\ ==\ 0)\ \{}
\DoxyCodeLine{10641\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_and\_decode\_next\_flac\_frame(pFlac))\ \{}
\DoxyCodeLine{10642\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \ \textcolor{comment}{/*\ Couldn't\ read\ the\ next\ frame,\ so\ just\ break\ from\ the\ loop\ and\ return.\ */}}
\DoxyCodeLine{10643\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10644\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{10645\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ channelCount\ =\ drflac\_\_get\_channel\_count\_from\_channel\_assignment(pFlac-\/>currentFLACFrame.header.channelAssignment);}
\DoxyCodeLine{10646\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ iFirstPCMFrame\ =\ pFlac-\/>currentFLACFrame.header.blockSizeInPCMFrames\ -\/\ pFlac-\/>currentFLACFrame.pcmFramesRemaining;}
\DoxyCodeLine{10647\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ frameCountThisIteration\ =\ framesToRead;}
\DoxyCodeLine{10648\ }
\DoxyCodeLine{10649\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (frameCountThisIteration\ >\ pFlac-\/>currentFLACFrame.pcmFramesRemaining)\ \{}
\DoxyCodeLine{10650\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ frameCountThisIteration\ =\ pFlac-\/>currentFLACFrame.pcmFramesRemaining;}
\DoxyCodeLine{10651\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10652\ }
\DoxyCodeLine{10653\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (channelCount\ ==\ 2)\ \{}
\DoxyCodeLine{10654\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ drflac\_int32*\ pDecodedSamples0\ =\ pFlac-\/>currentFLACFrame.subframes[0].pSamplesS32\ +\ iFirstPCMFrame;}
\DoxyCodeLine{10655\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ drflac\_int32*\ pDecodedSamples1\ =\ pFlac-\/>currentFLACFrame.subframes[1].pSamplesS32\ +\ iFirstPCMFrame;}
\DoxyCodeLine{10656\ }
\DoxyCodeLine{10657\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (pFlac-\/>currentFLACFrame.header.channelAssignment)}
\DoxyCodeLine{10658\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{10659\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_CHANNEL\_ASSIGNMENT\_LEFT\_SIDE:}
\DoxyCodeLine{10660\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{10661\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_left\_side(pFlac,\ frameCountThisIteration,\ unusedBitsPerSample,\ pDecodedSamples0,\ pDecodedSamples1,\ pBufferOut);}
\DoxyCodeLine{10662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{10663\ }
\DoxyCodeLine{10664\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_CHANNEL\_ASSIGNMENT\_RIGHT\_SIDE:}
\DoxyCodeLine{10665\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{10666\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_right\_side(pFlac,\ frameCountThisIteration,\ unusedBitsPerSample,\ pDecodedSamples0,\ pDecodedSamples1,\ pBufferOut);}
\DoxyCodeLine{10667\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{10668\ }
\DoxyCodeLine{10669\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_CHANNEL\_ASSIGNMENT\_MID\_SIDE:}
\DoxyCodeLine{10670\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{10671\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_mid\_side(pFlac,\ frameCountThisIteration,\ unusedBitsPerSample,\ pDecodedSamples0,\ pDecodedSamples1,\ pBufferOut);}
\DoxyCodeLine{10672\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{10673\ }
\DoxyCodeLine{10674\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_CHANNEL\_ASSIGNMENT\_INDEPENDENT:}
\DoxyCodeLine{10675\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{10676\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{10677\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_s16\_\_decode\_independent\_stereo(pFlac,\ frameCountThisIteration,\ unusedBitsPerSample,\ pDecodedSamples0,\ pDecodedSamples1,\ pBufferOut);}
\DoxyCodeLine{10678\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{10679\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10680\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{10681\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Generic\ interleaving.\ */}}
\DoxyCodeLine{10682\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10683\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCountThisIteration;\ ++i)\ \{}
\DoxyCodeLine{10684\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ j;}
\DoxyCodeLine{10685\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (j\ =\ 0;\ j\ <\ channelCount;\ ++j)\ \{}
\DoxyCodeLine{10686\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_int32\ sampleS32\ =\ (drflac\_int32)((drflac\_uint32)(pFlac-\/>currentFLACFrame.subframes[j].pSamplesS32[iFirstPCMFrame\ +\ i])\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[j].wastedBitsPerSample));}
\DoxyCodeLine{10687\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pBufferOut[(i*channelCount)+j]\ =\ (drflac\_int16)(sampleS32\ >>\ 16);}
\DoxyCodeLine{10688\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10689\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10690\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10691\ }
\DoxyCodeLine{10692\ \ \ \ \ \ \ \ \ \ \ \ \ framesRead\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ +=\ frameCountThisIteration;}
\DoxyCodeLine{10693\ \ \ \ \ \ \ \ \ \ \ \ \ pBufferOut\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ +=\ frameCountThisIteration\ *\ channelCount;}
\DoxyCodeLine{10694\ \ \ \ \ \ \ \ \ \ \ \ \ framesToRead\ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/=\ frameCountThisIteration;}
\DoxyCodeLine{10695\ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentPCMFrame\ \ \ \ +=\ frameCountThisIteration;}
\DoxyCodeLine{10696\ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentFLACFrame.pcmFramesRemaining\ -\/=\ (drflac\_uint32)frameCountThisIteration;}
\DoxyCodeLine{10697\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{10698\ \ \ \ \ \}}
\DoxyCodeLine{10699\ }
\DoxyCodeLine{10700\ \ \ \ \ \textcolor{keywordflow}{return}\ framesRead;}
\DoxyCodeLine{10701\ \}}
\DoxyCodeLine{10702\ }
\DoxyCodeLine{10703\ }
\DoxyCodeLine{10704\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{10705\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_left\_side\_\_reference(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{10706\ \{}
\DoxyCodeLine{10707\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10708\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10709\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ (drflac\_uint32)pInputSamples0[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample);}
\DoxyCodeLine{10710\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ (drflac\_uint32)pInputSamples1[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample);}
\DoxyCodeLine{10711\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ left\ -\/\ side;}
\DoxyCodeLine{10712\ }
\DoxyCodeLine{10713\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (float)((drflac\_int32)left\ \ /\ 2147483648.0);}
\DoxyCodeLine{10714\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (float)((drflac\_int32)right\ /\ 2147483648.0);}
\DoxyCodeLine{10715\ \ \ \ \ \}}
\DoxyCodeLine{10716\ \}}
\DoxyCodeLine{10717\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10718\ }
\DoxyCodeLine{10719\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_left\_side\_\_scalar(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{10720\ \{}
\DoxyCodeLine{10721\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10722\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{10723\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{10724\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{10725\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10726\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10727\ }
\DoxyCodeLine{10728\ \ \ \ \ \textcolor{keywordtype}{float}\ factor\ =\ 1\ /\ 2147483648.0;}
\DoxyCodeLine{10729\ }
\DoxyCodeLine{10730\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10731\ \ \ \ \ \ \ \ \ drflac\_uint32\ left0\ =\ pInputSamples0U32[i*4+0]\ <<\ shift0;}
\DoxyCodeLine{10732\ \ \ \ \ \ \ \ \ drflac\_uint32\ left1\ =\ pInputSamples0U32[i*4+1]\ <<\ shift0;}
\DoxyCodeLine{10733\ \ \ \ \ \ \ \ \ drflac\_uint32\ left2\ =\ pInputSamples0U32[i*4+2]\ <<\ shift0;}
\DoxyCodeLine{10734\ \ \ \ \ \ \ \ \ drflac\_uint32\ left3\ =\ pInputSamples0U32[i*4+3]\ <<\ shift0;}
\DoxyCodeLine{10735\ }
\DoxyCodeLine{10736\ \ \ \ \ \ \ \ \ drflac\_uint32\ side0\ =\ pInputSamples1U32[i*4+0]\ <<\ shift1;}
\DoxyCodeLine{10737\ \ \ \ \ \ \ \ \ drflac\_uint32\ side1\ =\ pInputSamples1U32[i*4+1]\ <<\ shift1;}
\DoxyCodeLine{10738\ \ \ \ \ \ \ \ \ drflac\_uint32\ side2\ =\ pInputSamples1U32[i*4+2]\ <<\ shift1;}
\DoxyCodeLine{10739\ \ \ \ \ \ \ \ \ drflac\_uint32\ side3\ =\ pInputSamples1U32[i*4+3]\ <<\ shift1;}
\DoxyCodeLine{10740\ }
\DoxyCodeLine{10741\ \ \ \ \ \ \ \ \ drflac\_uint32\ right0\ =\ left0\ -\/\ side0;}
\DoxyCodeLine{10742\ \ \ \ \ \ \ \ \ drflac\_uint32\ right1\ =\ left1\ -\/\ side1;}
\DoxyCodeLine{10743\ \ \ \ \ \ \ \ \ drflac\_uint32\ right2\ =\ left2\ -\/\ side2;}
\DoxyCodeLine{10744\ \ \ \ \ \ \ \ \ drflac\_uint32\ right3\ =\ left3\ -\/\ side3;}
\DoxyCodeLine{10745\ }
\DoxyCodeLine{10746\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+0]\ =\ (drflac\_int32)left0\ \ *\ factor;}
\DoxyCodeLine{10747\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+1]\ =\ (drflac\_int32)right0\ *\ factor;}
\DoxyCodeLine{10748\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+2]\ =\ (drflac\_int32)left1\ \ *\ factor;}
\DoxyCodeLine{10749\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+3]\ =\ (drflac\_int32)right1\ *\ factor;}
\DoxyCodeLine{10750\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+4]\ =\ (drflac\_int32)left2\ \ *\ factor;}
\DoxyCodeLine{10751\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+5]\ =\ (drflac\_int32)right2\ *\ factor;}
\DoxyCodeLine{10752\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+6]\ =\ (drflac\_int32)left3\ \ *\ factor;}
\DoxyCodeLine{10753\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+7]\ =\ (drflac\_int32)right3\ *\ factor;}
\DoxyCodeLine{10754\ \ \ \ \ \}}
\DoxyCodeLine{10755\ }
\DoxyCodeLine{10756\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10757\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{10758\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{10759\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ left\ -\/\ side;}
\DoxyCodeLine{10760\ }
\DoxyCodeLine{10761\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)left\ \ *\ factor;}
\DoxyCodeLine{10762\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)right\ *\ factor;}
\DoxyCodeLine{10763\ \ \ \ \ \}}
\DoxyCodeLine{10764\ \}}
\DoxyCodeLine{10765\ }
\DoxyCodeLine{10766\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{10767\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_left\_side\_\_sse2(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{10768\ \{}
\DoxyCodeLine{10769\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10770\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{10771\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{10772\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{10773\ \ \ \ \ drflac\_uint32\ shift0\ =\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample)\ -\/\ 8;}
\DoxyCodeLine{10774\ \ \ \ \ drflac\_uint32\ shift1\ =\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample)\ -\/\ 8;}
\DoxyCodeLine{10775\ \ \ \ \ \_\_m128\ factor;}
\DoxyCodeLine{10776\ }
\DoxyCodeLine{10777\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{10778\ }
\DoxyCodeLine{10779\ \ \ \ \ factor\ =\ \_mm\_set1\_ps(1.0f\ /\ 8388608.0f);}
\DoxyCodeLine{10780\ }
\DoxyCodeLine{10781\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10782\ \ \ \ \ \ \ \ \ \_\_m128i\ left\ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples0\ +\ i),\ shift0);}
\DoxyCodeLine{10783\ \ \ \ \ \ \ \ \ \_\_m128i\ side\ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples1\ +\ i),\ shift1);}
\DoxyCodeLine{10784\ \ \ \ \ \ \ \ \ \_\_m128i\ right\ =\ \_mm\_sub\_epi32(left,\ side);}
\DoxyCodeLine{10785\ \ \ \ \ \ \ \ \ \_\_m128\ leftf\ \ =\ \_mm\_mul\_ps(\_mm\_cvtepi32\_ps(left),\ \ factor);}
\DoxyCodeLine{10786\ \ \ \ \ \ \ \ \ \_\_m128\ rightf\ =\ \_mm\_mul\_ps(\_mm\_cvtepi32\_ps(right),\ factor);}
\DoxyCodeLine{10787\ }
\DoxyCodeLine{10788\ \ \ \ \ \ \ \ \ \_mm\_storeu\_ps(pOutputSamples\ +\ i*8\ +\ 0,\ \_mm\_unpacklo\_ps(leftf,\ rightf));}
\DoxyCodeLine{10789\ \ \ \ \ \ \ \ \ \_mm\_storeu\_ps(pOutputSamples\ +\ i*8\ +\ 4,\ \_mm\_unpackhi\_ps(leftf,\ rightf));}
\DoxyCodeLine{10790\ \ \ \ \ \}}
\DoxyCodeLine{10791\ }
\DoxyCodeLine{10792\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10793\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{10794\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{10795\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ left\ -\/\ side;}
\DoxyCodeLine{10796\ }
\DoxyCodeLine{10797\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)left\ \ /\ 8388608.0f;}
\DoxyCodeLine{10798\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)right\ /\ 8388608.0f;}
\DoxyCodeLine{10799\ \ \ \ \ \}}
\DoxyCodeLine{10800\ \}}
\DoxyCodeLine{10801\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10802\ }
\DoxyCodeLine{10803\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{10804\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_left\_side\_\_neon(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{10805\ \{}
\DoxyCodeLine{10806\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10807\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{10808\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{10809\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{10810\ \ \ \ \ drflac\_uint32\ shift0\ =\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample)\ -\/\ 8;}
\DoxyCodeLine{10811\ \ \ \ \ drflac\_uint32\ shift1\ =\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample)\ -\/\ 8;}
\DoxyCodeLine{10812\ \ \ \ \ float32x4\_t\ factor4;}
\DoxyCodeLine{10813\ \ \ \ \ int32x4\_t\ shift0\_4;}
\DoxyCodeLine{10814\ \ \ \ \ int32x4\_t\ shift1\_4;}
\DoxyCodeLine{10815\ }
\DoxyCodeLine{10816\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{10817\ }
\DoxyCodeLine{10818\ \ \ \ \ factor4\ \ =\ vdupq\_n\_f32(1.0f\ /\ 8388608.0f);}
\DoxyCodeLine{10819\ \ \ \ \ shift0\_4\ =\ vdupq\_n\_s32(shift0);}
\DoxyCodeLine{10820\ \ \ \ \ shift1\_4\ =\ vdupq\_n\_s32(shift1);}
\DoxyCodeLine{10821\ }
\DoxyCodeLine{10822\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10823\ \ \ \ \ \ \ \ \ uint32x4\_t\ left;}
\DoxyCodeLine{10824\ \ \ \ \ \ \ \ \ uint32x4\_t\ side;}
\DoxyCodeLine{10825\ \ \ \ \ \ \ \ \ uint32x4\_t\ right;}
\DoxyCodeLine{10826\ \ \ \ \ \ \ \ \ float32x4\_t\ leftf;}
\DoxyCodeLine{10827\ \ \ \ \ \ \ \ \ float32x4\_t\ rightf;}
\DoxyCodeLine{10828\ }
\DoxyCodeLine{10829\ \ \ \ \ \ \ \ \ left\ \ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples0U32\ +\ i*4),\ shift0\_4);}
\DoxyCodeLine{10830\ \ \ \ \ \ \ \ \ side\ \ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples1U32\ +\ i*4),\ shift1\_4);}
\DoxyCodeLine{10831\ \ \ \ \ \ \ \ \ right\ \ =\ vsubq\_u32(left,\ side);}
\DoxyCodeLine{10832\ \ \ \ \ \ \ \ \ leftf\ \ =\ vmulq\_f32(vcvtq\_f32\_s32(vreinterpretq\_s32\_u32(left)),\ \ factor4);}
\DoxyCodeLine{10833\ \ \ \ \ \ \ \ \ rightf\ =\ vmulq\_f32(vcvtq\_f32\_s32(vreinterpretq\_s32\_u32(right)),\ factor4);}
\DoxyCodeLine{10834\ }
\DoxyCodeLine{10835\ \ \ \ \ \ \ \ \ drflac\_\_vst2q\_f32(pOutputSamples\ +\ i*8,\ vzipq\_f32(leftf,\ rightf));}
\DoxyCodeLine{10836\ \ \ \ \ \}}
\DoxyCodeLine{10837\ }
\DoxyCodeLine{10838\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10839\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{10840\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{10841\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ left\ -\/\ side;}
\DoxyCodeLine{10842\ }
\DoxyCodeLine{10843\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)left\ \ /\ 8388608.0f;}
\DoxyCodeLine{10844\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)right\ /\ 8388608.0f;}
\DoxyCodeLine{10845\ \ \ \ \ \}}
\DoxyCodeLine{10846\ \}}
\DoxyCodeLine{10847\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10848\ }
\DoxyCodeLine{10849\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_left\_side(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{10850\ \{}
\DoxyCodeLine{10851\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{10852\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsSSE2Supported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{10853\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_left\_side\_\_sse2(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{10854\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{10855\ \textcolor{preprocessor}{\#elif\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{10856\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsNEONSupported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{10857\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_left\_side\_\_neon(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{10858\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{10859\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10860\ \ \ \ \ \{}
\DoxyCodeLine{10861\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Scalar\ fallback.\ */}}
\DoxyCodeLine{10862\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{10863\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_left\_side\_\_reference(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{10864\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{10865\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_left\_side\_\_scalar(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{10866\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10867\ \ \ \ \ \}}
\DoxyCodeLine{10868\ \}}
\DoxyCodeLine{10869\ }
\DoxyCodeLine{10870\ }
\DoxyCodeLine{10871\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{10872\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_right\_side\_\_reference(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{10873\ \{}
\DoxyCodeLine{10874\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10875\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10876\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ (drflac\_uint32)pInputSamples0[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample);}
\DoxyCodeLine{10877\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ (drflac\_uint32)pInputSamples1[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample);}
\DoxyCodeLine{10878\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ right\ +\ side;}
\DoxyCodeLine{10879\ }
\DoxyCodeLine{10880\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (float)((drflac\_int32)left\ \ /\ 2147483648.0);}
\DoxyCodeLine{10881\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (float)((drflac\_int32)right\ /\ 2147483648.0);}
\DoxyCodeLine{10882\ \ \ \ \ \}}
\DoxyCodeLine{10883\ \}}
\DoxyCodeLine{10884\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10885\ }
\DoxyCodeLine{10886\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_right\_side\_\_scalar(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{10887\ \{}
\DoxyCodeLine{10888\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10889\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{10890\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{10891\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{10892\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{10893\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{10894\ \ \ \ \ \textcolor{keywordtype}{float}\ factor\ =\ 1\ /\ 2147483648.0;}
\DoxyCodeLine{10895\ }
\DoxyCodeLine{10896\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10897\ \ \ \ \ \ \ \ \ drflac\_uint32\ side0\ \ =\ pInputSamples0U32[i*4+0]\ <<\ shift0;}
\DoxyCodeLine{10898\ \ \ \ \ \ \ \ \ drflac\_uint32\ side1\ \ =\ pInputSamples0U32[i*4+1]\ <<\ shift0;}
\DoxyCodeLine{10899\ \ \ \ \ \ \ \ \ drflac\_uint32\ side2\ \ =\ pInputSamples0U32[i*4+2]\ <<\ shift0;}
\DoxyCodeLine{10900\ \ \ \ \ \ \ \ \ drflac\_uint32\ side3\ \ =\ pInputSamples0U32[i*4+3]\ <<\ shift0;}
\DoxyCodeLine{10901\ }
\DoxyCodeLine{10902\ \ \ \ \ \ \ \ \ drflac\_uint32\ right0\ =\ pInputSamples1U32[i*4+0]\ <<\ shift1;}
\DoxyCodeLine{10903\ \ \ \ \ \ \ \ \ drflac\_uint32\ right1\ =\ pInputSamples1U32[i*4+1]\ <<\ shift1;}
\DoxyCodeLine{10904\ \ \ \ \ \ \ \ \ drflac\_uint32\ right2\ =\ pInputSamples1U32[i*4+2]\ <<\ shift1;}
\DoxyCodeLine{10905\ \ \ \ \ \ \ \ \ drflac\_uint32\ right3\ =\ pInputSamples1U32[i*4+3]\ <<\ shift1;}
\DoxyCodeLine{10906\ }
\DoxyCodeLine{10907\ \ \ \ \ \ \ \ \ drflac\_uint32\ left0\ =\ right0\ +\ side0;}
\DoxyCodeLine{10908\ \ \ \ \ \ \ \ \ drflac\_uint32\ left1\ =\ right1\ +\ side1;}
\DoxyCodeLine{10909\ \ \ \ \ \ \ \ \ drflac\_uint32\ left2\ =\ right2\ +\ side2;}
\DoxyCodeLine{10910\ \ \ \ \ \ \ \ \ drflac\_uint32\ left3\ =\ right3\ +\ side3;}
\DoxyCodeLine{10911\ }
\DoxyCodeLine{10912\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+0]\ =\ (drflac\_int32)left0\ \ *\ factor;}
\DoxyCodeLine{10913\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+1]\ =\ (drflac\_int32)right0\ *\ factor;}
\DoxyCodeLine{10914\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+2]\ =\ (drflac\_int32)left1\ \ *\ factor;}
\DoxyCodeLine{10915\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+3]\ =\ (drflac\_int32)right1\ *\ factor;}
\DoxyCodeLine{10916\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+4]\ =\ (drflac\_int32)left2\ \ *\ factor;}
\DoxyCodeLine{10917\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+5]\ =\ (drflac\_int32)right2\ *\ factor;}
\DoxyCodeLine{10918\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+6]\ =\ (drflac\_int32)left3\ \ *\ factor;}
\DoxyCodeLine{10919\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+7]\ =\ (drflac\_int32)right3\ *\ factor;}
\DoxyCodeLine{10920\ \ \ \ \ \}}
\DoxyCodeLine{10921\ }
\DoxyCodeLine{10922\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10923\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{10924\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{10925\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ right\ +\ side;}
\DoxyCodeLine{10926\ }
\DoxyCodeLine{10927\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)left\ \ *\ factor;}
\DoxyCodeLine{10928\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)right\ *\ factor;}
\DoxyCodeLine{10929\ \ \ \ \ \}}
\DoxyCodeLine{10930\ \}}
\DoxyCodeLine{10931\ }
\DoxyCodeLine{10932\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{10933\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_right\_side\_\_sse2(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{10934\ \{}
\DoxyCodeLine{10935\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10936\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{10937\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{10938\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{10939\ \ \ \ \ drflac\_uint32\ shift0\ =\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample)\ -\/\ 8;}
\DoxyCodeLine{10940\ \ \ \ \ drflac\_uint32\ shift1\ =\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample)\ -\/\ 8;}
\DoxyCodeLine{10941\ \ \ \ \ \_\_m128\ factor;}
\DoxyCodeLine{10942\ }
\DoxyCodeLine{10943\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{10944\ }
\DoxyCodeLine{10945\ \ \ \ \ factor\ =\ \_mm\_set1\_ps(1.0f\ /\ 8388608.0f);}
\DoxyCodeLine{10946\ }
\DoxyCodeLine{10947\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10948\ \ \ \ \ \ \ \ \ \_\_m128i\ side\ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples0\ +\ i),\ shift0);}
\DoxyCodeLine{10949\ \ \ \ \ \ \ \ \ \_\_m128i\ right\ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples1\ +\ i),\ shift1);}
\DoxyCodeLine{10950\ \ \ \ \ \ \ \ \ \_\_m128i\ left\ \ =\ \_mm\_add\_epi32(right,\ side);}
\DoxyCodeLine{10951\ \ \ \ \ \ \ \ \ \_\_m128\ leftf\ \ =\ \_mm\_mul\_ps(\_mm\_cvtepi32\_ps(left),\ \ factor);}
\DoxyCodeLine{10952\ \ \ \ \ \ \ \ \ \_\_m128\ rightf\ =\ \_mm\_mul\_ps(\_mm\_cvtepi32\_ps(right),\ factor);}
\DoxyCodeLine{10953\ }
\DoxyCodeLine{10954\ \ \ \ \ \ \ \ \ \_mm\_storeu\_ps(pOutputSamples\ +\ i*8\ +\ 0,\ \_mm\_unpacklo\_ps(leftf,\ rightf));}
\DoxyCodeLine{10955\ \ \ \ \ \ \ \ \ \_mm\_storeu\_ps(pOutputSamples\ +\ i*8\ +\ 4,\ \_mm\_unpackhi\_ps(leftf,\ rightf));}
\DoxyCodeLine{10956\ \ \ \ \ \}}
\DoxyCodeLine{10957\ }
\DoxyCodeLine{10958\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{10959\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{10960\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{10961\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ right\ +\ side;}
\DoxyCodeLine{10962\ }
\DoxyCodeLine{10963\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)left\ \ /\ 8388608.0f;}
\DoxyCodeLine{10964\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)right\ /\ 8388608.0f;}
\DoxyCodeLine{10965\ \ \ \ \ \}}
\DoxyCodeLine{10966\ \}}
\DoxyCodeLine{10967\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10968\ }
\DoxyCodeLine{10969\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{10970\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_right\_side\_\_neon(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{10971\ \{}
\DoxyCodeLine{10972\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{10973\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{10974\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{10975\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{10976\ \ \ \ \ drflac\_uint32\ shift0\ =\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample)\ -\/\ 8;}
\DoxyCodeLine{10977\ \ \ \ \ drflac\_uint32\ shift1\ =\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample)\ -\/\ 8;}
\DoxyCodeLine{10978\ \ \ \ \ float32x4\_t\ factor4;}
\DoxyCodeLine{10979\ \ \ \ \ int32x4\_t\ shift0\_4;}
\DoxyCodeLine{10980\ \ \ \ \ int32x4\_t\ shift1\_4;}
\DoxyCodeLine{10981\ }
\DoxyCodeLine{10982\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{10983\ }
\DoxyCodeLine{10984\ \ \ \ \ factor4\ \ =\ vdupq\_n\_f32(1.0f\ /\ 8388608.0f);}
\DoxyCodeLine{10985\ \ \ \ \ shift0\_4\ =\ vdupq\_n\_s32(shift0);}
\DoxyCodeLine{10986\ \ \ \ \ shift1\_4\ =\ vdupq\_n\_s32(shift1);}
\DoxyCodeLine{10987\ }
\DoxyCodeLine{10988\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{10989\ \ \ \ \ \ \ \ \ uint32x4\_t\ side;}
\DoxyCodeLine{10990\ \ \ \ \ \ \ \ \ uint32x4\_t\ right;}
\DoxyCodeLine{10991\ \ \ \ \ \ \ \ \ uint32x4\_t\ left;}
\DoxyCodeLine{10992\ \ \ \ \ \ \ \ \ float32x4\_t\ leftf;}
\DoxyCodeLine{10993\ \ \ \ \ \ \ \ \ float32x4\_t\ rightf;}
\DoxyCodeLine{10994\ }
\DoxyCodeLine{10995\ \ \ \ \ \ \ \ \ side\ \ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples0U32\ +\ i*4),\ shift0\_4);}
\DoxyCodeLine{10996\ \ \ \ \ \ \ \ \ right\ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples1U32\ +\ i*4),\ shift1\_4);}
\DoxyCodeLine{10997\ \ \ \ \ \ \ \ \ left\ \ \ =\ vaddq\_u32(right,\ side);}
\DoxyCodeLine{10998\ \ \ \ \ \ \ \ \ leftf\ \ =\ vmulq\_f32(vcvtq\_f32\_s32(vreinterpretq\_s32\_u32(left)),\ \ factor4);}
\DoxyCodeLine{10999\ \ \ \ \ \ \ \ \ rightf\ =\ vmulq\_f32(vcvtq\_f32\_s32(vreinterpretq\_s32\_u32(right)),\ factor4);}
\DoxyCodeLine{11000\ }
\DoxyCodeLine{11001\ \ \ \ \ \ \ \ \ drflac\_\_vst2q\_f32(pOutputSamples\ +\ i*8,\ vzipq\_f32(leftf,\ rightf));}
\DoxyCodeLine{11002\ \ \ \ \ \}}
\DoxyCodeLine{11003\ }
\DoxyCodeLine{11004\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{11005\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ \ =\ pInputSamples0U32[i]\ <<\ shift0;}
\DoxyCodeLine{11006\ \ \ \ \ \ \ \ \ drflac\_uint32\ right\ =\ pInputSamples1U32[i]\ <<\ shift1;}
\DoxyCodeLine{11007\ \ \ \ \ \ \ \ \ drflac\_uint32\ left\ \ =\ right\ +\ side;}
\DoxyCodeLine{11008\ }
\DoxyCodeLine{11009\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)left\ \ /\ 8388608.0f;}
\DoxyCodeLine{11010\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)right\ /\ 8388608.0f;}
\DoxyCodeLine{11011\ \ \ \ \ \}}
\DoxyCodeLine{11012\ \}}
\DoxyCodeLine{11013\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11014\ }
\DoxyCodeLine{11015\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_right\_side(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{11016\ \{}
\DoxyCodeLine{11017\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{11018\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsSSE2Supported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{11019\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_right\_side\_\_sse2(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{11020\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{11021\ \textcolor{preprocessor}{\#elif\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{11022\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsNEONSupported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{11023\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_right\_side\_\_neon(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{11024\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{11025\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11026\ \ \ \ \ \{}
\DoxyCodeLine{11027\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Scalar\ fallback.\ */}}
\DoxyCodeLine{11028\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{11029\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_right\_side\_\_reference(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{11030\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{11031\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_right\_side\_\_scalar(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{11032\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11033\ \ \ \ \ \}}
\DoxyCodeLine{11034\ \}}
\DoxyCodeLine{11035\ }
\DoxyCodeLine{11036\ }
\DoxyCodeLine{11037\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{11038\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_mid\_side\_\_reference(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{11039\ \{}
\DoxyCodeLine{11040\ \ \ \ \ \textcolor{keywordflow}{for}\ (drflac\_uint64\ i\ =\ 0;\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{11041\ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ (drflac\_uint32)pInputSamples0[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{11042\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ (drflac\_uint32)pInputSamples1[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{11043\ }
\DoxyCodeLine{11044\ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{11045\ }
\DoxyCodeLine{11046\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (float)((((drflac\_int32)(mid\ +\ side)\ >>\ 1)\ <<\ (unusedBitsPerSample))\ /\ 2147483648.0);}
\DoxyCodeLine{11047\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (float)((((drflac\_int32)(mid\ -\/\ side)\ >>\ 1)\ <<\ (unusedBitsPerSample))\ /\ 2147483648.0);}
\DoxyCodeLine{11048\ \ \ \ \ \}}
\DoxyCodeLine{11049\ \}}
\DoxyCodeLine{11050\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11051\ }
\DoxyCodeLine{11052\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_mid\_side\_\_scalar(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{11053\ \{}
\DoxyCodeLine{11054\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{11055\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{11056\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{11057\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{11058\ \ \ \ \ drflac\_uint32\ shift\ =\ unusedBitsPerSample;}
\DoxyCodeLine{11059\ \ \ \ \ \textcolor{keywordtype}{float}\ factor\ =\ 1\ /\ 2147483648.0;}
\DoxyCodeLine{11060\ }
\DoxyCodeLine{11061\ \ \ \ \ \textcolor{keywordflow}{if}\ (shift\ >\ 0)\ \{}
\DoxyCodeLine{11062\ \ \ \ \ \ \ \ \ shift\ -\/=\ 1;}
\DoxyCodeLine{11063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{11064\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp0L;}
\DoxyCodeLine{11065\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp1L;}
\DoxyCodeLine{11066\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp2L;}
\DoxyCodeLine{11067\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp3L;}
\DoxyCodeLine{11068\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp0R;}
\DoxyCodeLine{11069\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp1R;}
\DoxyCodeLine{11070\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp2R;}
\DoxyCodeLine{11071\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp3R;}
\DoxyCodeLine{11072\ }
\DoxyCodeLine{11073\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid0\ \ =\ pInputSamples0U32[i*4+0]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{11074\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid1\ \ =\ pInputSamples0U32[i*4+1]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{11075\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid2\ \ =\ pInputSamples0U32[i*4+2]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{11076\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid3\ \ =\ pInputSamples0U32[i*4+3]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{11077\ }
\DoxyCodeLine{11078\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side0\ =\ pInputSamples1U32[i*4+0]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{11079\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side1\ =\ pInputSamples1U32[i*4+1]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{11080\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side2\ =\ pInputSamples1U32[i*4+2]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{11081\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side3\ =\ pInputSamples1U32[i*4+3]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{11082\ }
\DoxyCodeLine{11083\ \ \ \ \ \ \ \ \ \ \ \ \ mid0\ =\ (mid0\ <<\ 1)\ |\ (side0\ \&\ 0x01);}
\DoxyCodeLine{11084\ \ \ \ \ \ \ \ \ \ \ \ \ mid1\ =\ (mid1\ <<\ 1)\ |\ (side1\ \&\ 0x01);}
\DoxyCodeLine{11085\ \ \ \ \ \ \ \ \ \ \ \ \ mid2\ =\ (mid2\ <<\ 1)\ |\ (side2\ \&\ 0x01);}
\DoxyCodeLine{11086\ \ \ \ \ \ \ \ \ \ \ \ \ mid3\ =\ (mid3\ <<\ 1)\ |\ (side3\ \&\ 0x01);}
\DoxyCodeLine{11087\ }
\DoxyCodeLine{11088\ \ \ \ \ \ \ \ \ \ \ \ \ temp0L\ =\ (mid0\ +\ side0)\ <<\ shift;}
\DoxyCodeLine{11089\ \ \ \ \ \ \ \ \ \ \ \ \ temp1L\ =\ (mid1\ +\ side1)\ <<\ shift;}
\DoxyCodeLine{11090\ \ \ \ \ \ \ \ \ \ \ \ \ temp2L\ =\ (mid2\ +\ side2)\ <<\ shift;}
\DoxyCodeLine{11091\ \ \ \ \ \ \ \ \ \ \ \ \ temp3L\ =\ (mid3\ +\ side3)\ <<\ shift;}
\DoxyCodeLine{11092\ }
\DoxyCodeLine{11093\ \ \ \ \ \ \ \ \ \ \ \ \ temp0R\ =\ (mid0\ -\/\ side0)\ <<\ shift;}
\DoxyCodeLine{11094\ \ \ \ \ \ \ \ \ \ \ \ \ temp1R\ =\ (mid1\ -\/\ side1)\ <<\ shift;}
\DoxyCodeLine{11095\ \ \ \ \ \ \ \ \ \ \ \ \ temp2R\ =\ (mid2\ -\/\ side2)\ <<\ shift;}
\DoxyCodeLine{11096\ \ \ \ \ \ \ \ \ \ \ \ \ temp3R\ =\ (mid3\ -\/\ side3)\ <<\ shift;}
\DoxyCodeLine{11097\ }
\DoxyCodeLine{11098\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+0]\ =\ (drflac\_int32)temp0L\ *\ factor;}
\DoxyCodeLine{11099\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+1]\ =\ (drflac\_int32)temp0R\ *\ factor;}
\DoxyCodeLine{11100\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+2]\ =\ (drflac\_int32)temp1L\ *\ factor;}
\DoxyCodeLine{11101\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+3]\ =\ (drflac\_int32)temp1R\ *\ factor;}
\DoxyCodeLine{11102\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+4]\ =\ (drflac\_int32)temp2L\ *\ factor;}
\DoxyCodeLine{11103\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+5]\ =\ (drflac\_int32)temp2R\ *\ factor;}
\DoxyCodeLine{11104\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+6]\ =\ (drflac\_int32)temp3L\ *\ factor;}
\DoxyCodeLine{11105\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+7]\ =\ (drflac\_int32)temp3R\ *\ factor;}
\DoxyCodeLine{11106\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11107\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{11108\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{11109\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp0L;}
\DoxyCodeLine{11110\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp1L;}
\DoxyCodeLine{11111\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp2L;}
\DoxyCodeLine{11112\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp3L;}
\DoxyCodeLine{11113\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp0R;}
\DoxyCodeLine{11114\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp1R;}
\DoxyCodeLine{11115\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp2R;}
\DoxyCodeLine{11116\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ temp3R;}
\DoxyCodeLine{11117\ }
\DoxyCodeLine{11118\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid0\ \ =\ pInputSamples0U32[i*4+0]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{11119\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid1\ \ =\ pInputSamples0U32[i*4+1]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{11120\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid2\ \ =\ pInputSamples0U32[i*4+2]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{11121\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid3\ \ =\ pInputSamples0U32[i*4+3]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{11122\ }
\DoxyCodeLine{11123\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side0\ =\ pInputSamples1U32[i*4+0]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{11124\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side1\ =\ pInputSamples1U32[i*4+1]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{11125\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side2\ =\ pInputSamples1U32[i*4+2]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{11126\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side3\ =\ pInputSamples1U32[i*4+3]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{11127\ }
\DoxyCodeLine{11128\ \ \ \ \ \ \ \ \ \ \ \ \ mid0\ =\ (mid0\ <<\ 1)\ |\ (side0\ \&\ 0x01);}
\DoxyCodeLine{11129\ \ \ \ \ \ \ \ \ \ \ \ \ mid1\ =\ (mid1\ <<\ 1)\ |\ (side1\ \&\ 0x01);}
\DoxyCodeLine{11130\ \ \ \ \ \ \ \ \ \ \ \ \ mid2\ =\ (mid2\ <<\ 1)\ |\ (side2\ \&\ 0x01);}
\DoxyCodeLine{11131\ \ \ \ \ \ \ \ \ \ \ \ \ mid3\ =\ (mid3\ <<\ 1)\ |\ (side3\ \&\ 0x01);}
\DoxyCodeLine{11132\ }
\DoxyCodeLine{11133\ \ \ \ \ \ \ \ \ \ \ \ \ temp0L\ =\ (drflac\_uint32)((drflac\_int32)(mid0\ +\ side0)\ >>\ 1);}
\DoxyCodeLine{11134\ \ \ \ \ \ \ \ \ \ \ \ \ temp1L\ =\ (drflac\_uint32)((drflac\_int32)(mid1\ +\ side1)\ >>\ 1);}
\DoxyCodeLine{11135\ \ \ \ \ \ \ \ \ \ \ \ \ temp2L\ =\ (drflac\_uint32)((drflac\_int32)(mid2\ +\ side2)\ >>\ 1);}
\DoxyCodeLine{11136\ \ \ \ \ \ \ \ \ \ \ \ \ temp3L\ =\ (drflac\_uint32)((drflac\_int32)(mid3\ +\ side3)\ >>\ 1);}
\DoxyCodeLine{11137\ }
\DoxyCodeLine{11138\ \ \ \ \ \ \ \ \ \ \ \ \ temp0R\ =\ (drflac\_uint32)((drflac\_int32)(mid0\ -\/\ side0)\ >>\ 1);}
\DoxyCodeLine{11139\ \ \ \ \ \ \ \ \ \ \ \ \ temp1R\ =\ (drflac\_uint32)((drflac\_int32)(mid1\ -\/\ side1)\ >>\ 1);}
\DoxyCodeLine{11140\ \ \ \ \ \ \ \ \ \ \ \ \ temp2R\ =\ (drflac\_uint32)((drflac\_int32)(mid2\ -\/\ side2)\ >>\ 1);}
\DoxyCodeLine{11141\ \ \ \ \ \ \ \ \ \ \ \ \ temp3R\ =\ (drflac\_uint32)((drflac\_int32)(mid3\ -\/\ side3)\ >>\ 1);}
\DoxyCodeLine{11142\ }
\DoxyCodeLine{11143\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+0]\ =\ (drflac\_int32)temp0L\ *\ factor;}
\DoxyCodeLine{11144\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+1]\ =\ (drflac\_int32)temp0R\ *\ factor;}
\DoxyCodeLine{11145\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+2]\ =\ (drflac\_int32)temp1L\ *\ factor;}
\DoxyCodeLine{11146\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+3]\ =\ (drflac\_int32)temp1R\ *\ factor;}
\DoxyCodeLine{11147\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+4]\ =\ (drflac\_int32)temp2L\ *\ factor;}
\DoxyCodeLine{11148\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+5]\ =\ (drflac\_int32)temp2R\ *\ factor;}
\DoxyCodeLine{11149\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+6]\ =\ (drflac\_int32)temp3L\ *\ factor;}
\DoxyCodeLine{11150\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*8+7]\ =\ (drflac\_int32)temp3R\ *\ factor;}
\DoxyCodeLine{11151\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11152\ \ \ \ \ \}}
\DoxyCodeLine{11153\ }
\DoxyCodeLine{11154\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{11155\ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ pInputSamples0U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{11156\ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ pInputSamples1U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{11157\ }
\DoxyCodeLine{11158\ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{11159\ }
\DoxyCodeLine{11160\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)((drflac\_uint32)((drflac\_int32)(mid\ +\ side)\ >>\ 1)\ <<\ unusedBitsPerSample)\ *\ factor;}
\DoxyCodeLine{11161\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)((drflac\_uint32)((drflac\_int32)(mid\ -\/\ side)\ >>\ 1)\ <<\ unusedBitsPerSample)\ *\ factor;}
\DoxyCodeLine{11162\ \ \ \ \ \}}
\DoxyCodeLine{11163\ \}}
\DoxyCodeLine{11164\ }
\DoxyCodeLine{11165\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{11166\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_mid\_side\_\_sse2(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{11167\ \{}
\DoxyCodeLine{11168\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{11169\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{11170\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{11171\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{11172\ \ \ \ \ drflac\_uint32\ shift\ =\ unusedBitsPerSample\ -\/\ 8;}
\DoxyCodeLine{11173\ \ \ \ \ \textcolor{keywordtype}{float}\ factor;}
\DoxyCodeLine{11174\ \ \ \ \ \_\_m128\ factor128;}
\DoxyCodeLine{11175\ }
\DoxyCodeLine{11176\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{11177\ }
\DoxyCodeLine{11178\ \ \ \ \ factor\ =\ 1.0f\ /\ 8388608.0f;}
\DoxyCodeLine{11179\ \ \ \ \ factor128\ =\ \_mm\_set1\_ps(factor);}
\DoxyCodeLine{11180\ }
\DoxyCodeLine{11181\ \ \ \ \ \textcolor{keywordflow}{if}\ (shift\ ==\ 0)\ \{}
\DoxyCodeLine{11182\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{11183\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ mid;}
\DoxyCodeLine{11184\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ side;}
\DoxyCodeLine{11185\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ tempL;}
\DoxyCodeLine{11186\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ tempR;}
\DoxyCodeLine{11187\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128\ \ leftf;}
\DoxyCodeLine{11188\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128\ \ rightf;}
\DoxyCodeLine{11189\ }
\DoxyCodeLine{11190\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples0\ +\ i),\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample);}
\DoxyCodeLine{11191\ \ \ \ \ \ \ \ \ \ \ \ \ side\ \ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples1\ +\ i),\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample);}
\DoxyCodeLine{11192\ }
\DoxyCodeLine{11193\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ \ =\ \_mm\_or\_si128(\_mm\_slli\_epi32(mid,\ 1),\ \_mm\_and\_si128(side,\ \_mm\_set1\_epi32(0x01)));}
\DoxyCodeLine{11194\ }
\DoxyCodeLine{11195\ \ \ \ \ \ \ \ \ \ \ \ \ tempL\ \ =\ \_mm\_srai\_epi32(\_mm\_add\_epi32(mid,\ side),\ 1);}
\DoxyCodeLine{11196\ \ \ \ \ \ \ \ \ \ \ \ \ tempR\ \ =\ \_mm\_srai\_epi32(\_mm\_sub\_epi32(mid,\ side),\ 1);}
\DoxyCodeLine{11197\ }
\DoxyCodeLine{11198\ \ \ \ \ \ \ \ \ \ \ \ \ leftf\ \ =\ \_mm\_mul\_ps(\_mm\_cvtepi32\_ps(tempL),\ factor128);}
\DoxyCodeLine{11199\ \ \ \ \ \ \ \ \ \ \ \ \ rightf\ =\ \_mm\_mul\_ps(\_mm\_cvtepi32\_ps(tempR),\ factor128);}
\DoxyCodeLine{11200\ }
\DoxyCodeLine{11201\ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_storeu\_ps(pOutputSamples\ +\ i*8\ +\ 0,\ \_mm\_unpacklo\_ps(leftf,\ rightf));}
\DoxyCodeLine{11202\ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_storeu\_ps(pOutputSamples\ +\ i*8\ +\ 4,\ \_mm\_unpackhi\_ps(leftf,\ rightf));}
\DoxyCodeLine{11203\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11204\ }
\DoxyCodeLine{11205\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{11206\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ pInputSamples0U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{11207\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ pInputSamples1U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{11208\ }
\DoxyCodeLine{11209\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{11210\ }
\DoxyCodeLine{11211\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ ((drflac\_int32)(mid\ +\ side)\ >>\ 1)\ *\ factor;}
\DoxyCodeLine{11212\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ ((drflac\_int32)(mid\ -\/\ side)\ >>\ 1)\ *\ factor;}
\DoxyCodeLine{11213\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11214\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{11215\ \ \ \ \ \ \ \ \ shift\ -\/=\ 1;}
\DoxyCodeLine{11216\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{11217\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ mid;}
\DoxyCodeLine{11218\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ side;}
\DoxyCodeLine{11219\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ tempL;}
\DoxyCodeLine{11220\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128i\ tempR;}
\DoxyCodeLine{11221\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128\ leftf;}
\DoxyCodeLine{11222\ \ \ \ \ \ \ \ \ \ \ \ \ \_\_m128\ rightf;}
\DoxyCodeLine{11223\ }
\DoxyCodeLine{11224\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples0\ +\ i),\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample);}
\DoxyCodeLine{11225\ \ \ \ \ \ \ \ \ \ \ \ \ side\ \ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples1\ +\ i),\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample);}
\DoxyCodeLine{11226\ }
\DoxyCodeLine{11227\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ \ =\ \_mm\_or\_si128(\_mm\_slli\_epi32(mid,\ 1),\ \_mm\_and\_si128(side,\ \_mm\_set1\_epi32(0x01)));}
\DoxyCodeLine{11228\ }
\DoxyCodeLine{11229\ \ \ \ \ \ \ \ \ \ \ \ \ tempL\ \ =\ \_mm\_slli\_epi32(\_mm\_add\_epi32(mid,\ side),\ shift);}
\DoxyCodeLine{11230\ \ \ \ \ \ \ \ \ \ \ \ \ tempR\ \ =\ \_mm\_slli\_epi32(\_mm\_sub\_epi32(mid,\ side),\ shift);}
\DoxyCodeLine{11231\ }
\DoxyCodeLine{11232\ \ \ \ \ \ \ \ \ \ \ \ \ leftf\ \ =\ \_mm\_mul\_ps(\_mm\_cvtepi32\_ps(tempL),\ factor128);}
\DoxyCodeLine{11233\ \ \ \ \ \ \ \ \ \ \ \ \ rightf\ =\ \_mm\_mul\_ps(\_mm\_cvtepi32\_ps(tempR),\ factor128);}
\DoxyCodeLine{11234\ }
\DoxyCodeLine{11235\ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_storeu\_ps(pOutputSamples\ +\ i*8\ +\ 0,\ \_mm\_unpacklo\_ps(leftf,\ rightf));}
\DoxyCodeLine{11236\ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_storeu\_ps(pOutputSamples\ +\ i*8\ +\ 4,\ \_mm\_unpackhi\_ps(leftf,\ rightf));}
\DoxyCodeLine{11237\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11238\ }
\DoxyCodeLine{11239\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{11240\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ pInputSamples0U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{11241\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ pInputSamples1U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{11242\ }
\DoxyCodeLine{11243\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{11244\ }
\DoxyCodeLine{11245\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)((mid\ +\ side)\ <<\ shift)\ *\ factor;}
\DoxyCodeLine{11246\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)((mid\ -\/\ side)\ <<\ shift)\ *\ factor;}
\DoxyCodeLine{11247\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11248\ \ \ \ \ \}}
\DoxyCodeLine{11249\ \}}
\DoxyCodeLine{11250\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11251\ }
\DoxyCodeLine{11252\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{11253\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_mid\_side\_\_neon(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{11254\ \{}
\DoxyCodeLine{11255\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{11256\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{11257\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{11258\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{11259\ \ \ \ \ drflac\_uint32\ shift\ =\ unusedBitsPerSample\ -\/\ 8;}
\DoxyCodeLine{11260\ \ \ \ \ \textcolor{keywordtype}{float}\ factor;}
\DoxyCodeLine{11261\ \ \ \ \ float32x4\_t\ factor4;}
\DoxyCodeLine{11262\ \ \ \ \ int32x4\_t\ shift4;}
\DoxyCodeLine{11263\ \ \ \ \ int32x4\_t\ wbps0\_4;\ \ \textcolor{comment}{/*\ Wasted\ Bits\ Per\ Sample\ */}}
\DoxyCodeLine{11264\ \ \ \ \ int32x4\_t\ wbps1\_4;\ \ \textcolor{comment}{/*\ Wasted\ Bits\ Per\ Sample\ */}}
\DoxyCodeLine{11265\ }
\DoxyCodeLine{11266\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 24);}
\DoxyCodeLine{11267\ }
\DoxyCodeLine{11268\ \ \ \ \ factor\ \ =\ 1.0f\ /\ 8388608.0f;}
\DoxyCodeLine{11269\ \ \ \ \ factor4\ =\ vdupq\_n\_f32(factor);}
\DoxyCodeLine{11270\ \ \ \ \ wbps0\_4\ =\ vdupq\_n\_s32(pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample);}
\DoxyCodeLine{11271\ \ \ \ \ wbps1\_4\ =\ vdupq\_n\_s32(pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample);}
\DoxyCodeLine{11272\ }
\DoxyCodeLine{11273\ \ \ \ \ \textcolor{keywordflow}{if}\ (shift\ ==\ 0)\ \{}
\DoxyCodeLine{11274\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{11275\ \ \ \ \ \ \ \ \ \ \ \ \ int32x4\_t\ lefti;}
\DoxyCodeLine{11276\ \ \ \ \ \ \ \ \ \ \ \ \ int32x4\_t\ righti;}
\DoxyCodeLine{11277\ \ \ \ \ \ \ \ \ \ \ \ \ float32x4\_t\ leftf;}
\DoxyCodeLine{11278\ \ \ \ \ \ \ \ \ \ \ \ \ float32x4\_t\ rightf;}
\DoxyCodeLine{11279\ }
\DoxyCodeLine{11280\ \ \ \ \ \ \ \ \ \ \ \ \ uint32x4\_t\ mid\ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples0U32\ +\ i*4),\ wbps0\_4);}
\DoxyCodeLine{11281\ \ \ \ \ \ \ \ \ \ \ \ \ uint32x4\_t\ side\ =\ vshlq\_u32(vld1q\_u32(pInputSamples1U32\ +\ i*4),\ wbps1\_4);}
\DoxyCodeLine{11282\ }
\DoxyCodeLine{11283\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ \ =\ vorrq\_u32(vshlq\_n\_u32(mid,\ 1),\ vandq\_u32(side,\ vdupq\_n\_u32(1)));}
\DoxyCodeLine{11284\ }
\DoxyCodeLine{11285\ \ \ \ \ \ \ \ \ \ \ \ \ lefti\ \ =\ vshrq\_n\_s32(vreinterpretq\_s32\_u32(vaddq\_u32(mid,\ side)),\ 1);}
\DoxyCodeLine{11286\ \ \ \ \ \ \ \ \ \ \ \ \ righti\ =\ vshrq\_n\_s32(vreinterpretq\_s32\_u32(vsubq\_u32(mid,\ side)),\ 1);}
\DoxyCodeLine{11287\ }
\DoxyCodeLine{11288\ \ \ \ \ \ \ \ \ \ \ \ \ leftf\ \ =\ vmulq\_f32(vcvtq\_f32\_s32(lefti),\ \ factor4);}
\DoxyCodeLine{11289\ \ \ \ \ \ \ \ \ \ \ \ \ rightf\ =\ vmulq\_f32(vcvtq\_f32\_s32(righti),\ factor4);}
\DoxyCodeLine{11290\ }
\DoxyCodeLine{11291\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_vst2q\_f32(pOutputSamples\ +\ i*8,\ vzipq\_f32(leftf,\ rightf));}
\DoxyCodeLine{11292\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11293\ }
\DoxyCodeLine{11294\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{11295\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ pInputSamples0U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{11296\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ pInputSamples1U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{11297\ }
\DoxyCodeLine{11298\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{11299\ }
\DoxyCodeLine{11300\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ ((drflac\_int32)(mid\ +\ side)\ >>\ 1)\ *\ factor;}
\DoxyCodeLine{11301\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ ((drflac\_int32)(mid\ -\/\ side)\ >>\ 1)\ *\ factor;}
\DoxyCodeLine{11302\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11303\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{11304\ \ \ \ \ \ \ \ \ shift\ -\/=\ 1;}
\DoxyCodeLine{11305\ \ \ \ \ \ \ \ \ shift4\ =\ vdupq\_n\_s32(shift);}
\DoxyCodeLine{11306\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{11307\ \ \ \ \ \ \ \ \ \ \ \ \ uint32x4\_t\ mid;}
\DoxyCodeLine{11308\ \ \ \ \ \ \ \ \ \ \ \ \ uint32x4\_t\ side;}
\DoxyCodeLine{11309\ \ \ \ \ \ \ \ \ \ \ \ \ int32x4\_t\ lefti;}
\DoxyCodeLine{11310\ \ \ \ \ \ \ \ \ \ \ \ \ int32x4\_t\ righti;}
\DoxyCodeLine{11311\ \ \ \ \ \ \ \ \ \ \ \ \ float32x4\_t\ leftf;}
\DoxyCodeLine{11312\ \ \ \ \ \ \ \ \ \ \ \ \ float32x4\_t\ rightf;}
\DoxyCodeLine{11313\ }
\DoxyCodeLine{11314\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples0U32\ +\ i*4),\ wbps0\_4);}
\DoxyCodeLine{11315\ \ \ \ \ \ \ \ \ \ \ \ \ side\ \ \ =\ vshlq\_u32(vld1q\_u32(pInputSamples1U32\ +\ i*4),\ wbps1\_4);}
\DoxyCodeLine{11316\ }
\DoxyCodeLine{11317\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ \ \ \ =\ vorrq\_u32(vshlq\_n\_u32(mid,\ 1),\ vandq\_u32(side,\ vdupq\_n\_u32(1)));}
\DoxyCodeLine{11318\ }
\DoxyCodeLine{11319\ \ \ \ \ \ \ \ \ \ \ \ \ lefti\ \ =\ vreinterpretq\_s32\_u32(vshlq\_u32(vaddq\_u32(mid,\ side),\ shift4));}
\DoxyCodeLine{11320\ \ \ \ \ \ \ \ \ \ \ \ \ righti\ =\ vreinterpretq\_s32\_u32(vshlq\_u32(vsubq\_u32(mid,\ side),\ shift4));}
\DoxyCodeLine{11321\ }
\DoxyCodeLine{11322\ \ \ \ \ \ \ \ \ \ \ \ \ leftf\ \ =\ vmulq\_f32(vcvtq\_f32\_s32(lefti),\ \ factor4);}
\DoxyCodeLine{11323\ \ \ \ \ \ \ \ \ \ \ \ \ rightf\ =\ vmulq\_f32(vcvtq\_f32\_s32(righti),\ factor4);}
\DoxyCodeLine{11324\ }
\DoxyCodeLine{11325\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_vst2q\_f32(pOutputSamples\ +\ i*8,\ vzipq\_f32(leftf,\ rightf));}
\DoxyCodeLine{11326\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11327\ }
\DoxyCodeLine{11328\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{11329\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ mid\ \ =\ pInputSamples0U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{11330\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ side\ =\ pInputSamples1U32[i]\ <<\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{11331\ }
\DoxyCodeLine{11332\ \ \ \ \ \ \ \ \ \ \ \ \ mid\ =\ (mid\ <<\ 1)\ |\ (side\ \&\ 0x01);}
\DoxyCodeLine{11333\ }
\DoxyCodeLine{11334\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)((mid\ +\ side)\ <<\ shift)\ *\ factor;}
\DoxyCodeLine{11335\ \ \ \ \ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)((mid\ -\/\ side)\ <<\ shift)\ *\ factor;}
\DoxyCodeLine{11336\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11337\ \ \ \ \ \}}
\DoxyCodeLine{11338\ \}}
\DoxyCodeLine{11339\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11340\ }
\DoxyCodeLine{11341\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_mid\_side(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{11342\ \{}
\DoxyCodeLine{11343\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{11344\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsSSE2Supported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{11345\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_mid\_side\_\_sse2(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{11346\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{11347\ \textcolor{preprocessor}{\#elif\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{11348\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsNEONSupported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{11349\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_mid\_side\_\_neon(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{11350\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{11351\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11352\ \ \ \ \ \{}
\DoxyCodeLine{11353\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Scalar\ fallback.\ */}}
\DoxyCodeLine{11354\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{11355\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_mid\_side\_\_reference(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{11356\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{11357\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_mid\_side\_\_scalar(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{11358\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11359\ \ \ \ \ \}}
\DoxyCodeLine{11360\ \}}
\DoxyCodeLine{11361\ }
\DoxyCodeLine{11362\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{11363\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_independent\_stereo\_\_reference(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{11364\ \{}
\DoxyCodeLine{11365\ \ \ \ \ \textcolor{keywordflow}{for}\ (drflac\_uint64\ i\ =\ 0;\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{11366\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (float)((drflac\_int32)((drflac\_uint32)pInputSamples0[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample))\ /\ 2147483648.0);}
\DoxyCodeLine{11367\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (float)((drflac\_int32)((drflac\_uint32)pInputSamples1[i]\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample))\ /\ 2147483648.0);}
\DoxyCodeLine{11368\ \ \ \ \ \}}
\DoxyCodeLine{11369\ \}}
\DoxyCodeLine{11370\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11371\ }
\DoxyCodeLine{11372\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_independent\_stereo\_\_scalar(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{11373\ \{}
\DoxyCodeLine{11374\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{11375\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{11376\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{11377\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{11378\ \ \ \ \ drflac\_uint32\ shift0\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample;}
\DoxyCodeLine{11379\ \ \ \ \ drflac\_uint32\ shift1\ =\ unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample;}
\DoxyCodeLine{11380\ \ \ \ \ \textcolor{keywordtype}{float}\ factor\ =\ 1\ /\ 2147483648.0;}
\DoxyCodeLine{11381\ }
\DoxyCodeLine{11382\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{11383\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempL0\ =\ pInputSamples0U32[i*4+0]\ <<\ shift0;}
\DoxyCodeLine{11384\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempL1\ =\ pInputSamples0U32[i*4+1]\ <<\ shift0;}
\DoxyCodeLine{11385\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempL2\ =\ pInputSamples0U32[i*4+2]\ <<\ shift0;}
\DoxyCodeLine{11386\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempL3\ =\ pInputSamples0U32[i*4+3]\ <<\ shift0;}
\DoxyCodeLine{11387\ }
\DoxyCodeLine{11388\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempR0\ =\ pInputSamples1U32[i*4+0]\ <<\ shift1;}
\DoxyCodeLine{11389\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempR1\ =\ pInputSamples1U32[i*4+1]\ <<\ shift1;}
\DoxyCodeLine{11390\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempR2\ =\ pInputSamples1U32[i*4+2]\ <<\ shift1;}
\DoxyCodeLine{11391\ \ \ \ \ \ \ \ \ drflac\_uint32\ tempR3\ =\ pInputSamples1U32[i*4+3]\ <<\ shift1;}
\DoxyCodeLine{11392\ }
\DoxyCodeLine{11393\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+0]\ =\ (drflac\_int32)tempL0\ *\ factor;}
\DoxyCodeLine{11394\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+1]\ =\ (drflac\_int32)tempR0\ *\ factor;}
\DoxyCodeLine{11395\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+2]\ =\ (drflac\_int32)tempL1\ *\ factor;}
\DoxyCodeLine{11396\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+3]\ =\ (drflac\_int32)tempR1\ *\ factor;}
\DoxyCodeLine{11397\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+4]\ =\ (drflac\_int32)tempL2\ *\ factor;}
\DoxyCodeLine{11398\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+5]\ =\ (drflac\_int32)tempR2\ *\ factor;}
\DoxyCodeLine{11399\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+6]\ =\ (drflac\_int32)tempL3\ *\ factor;}
\DoxyCodeLine{11400\ \ \ \ \ \ \ \ \ pOutputSamples[i*8+7]\ =\ (drflac\_int32)tempR3\ *\ factor;}
\DoxyCodeLine{11401\ \ \ \ \ \}}
\DoxyCodeLine{11402\ }
\DoxyCodeLine{11403\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{11404\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)(pInputSamples0U32[i]\ <<\ shift0)\ *\ factor;}
\DoxyCodeLine{11405\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)(pInputSamples1U32[i]\ <<\ shift1)\ *\ factor;}
\DoxyCodeLine{11406\ \ \ \ \ \}}
\DoxyCodeLine{11407\ \}}
\DoxyCodeLine{11408\ }
\DoxyCodeLine{11409\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{11410\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_independent\_stereo\_\_sse2(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{11411\ \{}
\DoxyCodeLine{11412\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{11413\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{11414\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{11415\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{11416\ \ \ \ \ drflac\_uint32\ shift0\ =\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample)\ -\/\ 8;}
\DoxyCodeLine{11417\ \ \ \ \ drflac\_uint32\ shift1\ =\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample)\ -\/\ 8;}
\DoxyCodeLine{11418\ }
\DoxyCodeLine{11419\ \ \ \ \ \textcolor{keywordtype}{float}\ factor\ =\ 1.0f\ /\ 8388608.0f;}
\DoxyCodeLine{11420\ \ \ \ \ \_\_m128\ factor128\ =\ \_mm\_set1\_ps(factor);}
\DoxyCodeLine{11421\ }
\DoxyCodeLine{11422\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{11423\ \ \ \ \ \ \ \ \ \_\_m128i\ lefti;}
\DoxyCodeLine{11424\ \ \ \ \ \ \ \ \ \_\_m128i\ righti;}
\DoxyCodeLine{11425\ \ \ \ \ \ \ \ \ \_\_m128\ leftf;}
\DoxyCodeLine{11426\ \ \ \ \ \ \ \ \ \_\_m128\ rightf;}
\DoxyCodeLine{11427\ }
\DoxyCodeLine{11428\ \ \ \ \ \ \ \ \ lefti\ \ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples0\ +\ i),\ shift0);}
\DoxyCodeLine{11429\ \ \ \ \ \ \ \ \ righti\ =\ \_mm\_slli\_epi32(\_mm\_loadu\_si128((\textcolor{keyword}{const}\ \_\_m128i*)pInputSamples1\ +\ i),\ shift1);}
\DoxyCodeLine{11430\ }
\DoxyCodeLine{11431\ \ \ \ \ \ \ \ \ leftf\ \ =\ \_mm\_mul\_ps(\_mm\_cvtepi32\_ps(lefti),\ \ factor128);}
\DoxyCodeLine{11432\ \ \ \ \ \ \ \ \ rightf\ =\ \_mm\_mul\_ps(\_mm\_cvtepi32\_ps(righti),\ factor128);}
\DoxyCodeLine{11433\ }
\DoxyCodeLine{11434\ \ \ \ \ \ \ \ \ \_mm\_storeu\_ps(pOutputSamples\ +\ i*8\ +\ 0,\ \_mm\_unpacklo\_ps(leftf,\ rightf));}
\DoxyCodeLine{11435\ \ \ \ \ \ \ \ \ \_mm\_storeu\_ps(pOutputSamples\ +\ i*8\ +\ 4,\ \_mm\_unpackhi\_ps(leftf,\ rightf));}
\DoxyCodeLine{11436\ \ \ \ \ \}}
\DoxyCodeLine{11437\ }
\DoxyCodeLine{11438\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{11439\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)(pInputSamples0U32[i]\ <<\ shift0)\ *\ factor;}
\DoxyCodeLine{11440\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)(pInputSamples1U32[i]\ <<\ shift1)\ *\ factor;}
\DoxyCodeLine{11441\ \ \ \ \ \}}
\DoxyCodeLine{11442\ \}}
\DoxyCodeLine{11443\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11444\ }
\DoxyCodeLine{11445\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{11446\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_independent\_stereo\_\_neon(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{11447\ \{}
\DoxyCodeLine{11448\ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{11449\ \ \ \ \ drflac\_uint64\ frameCount4\ =\ frameCount\ >>\ 2;}
\DoxyCodeLine{11450\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples0U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples0;}
\DoxyCodeLine{11451\ \ \ \ \ \textcolor{keyword}{const}\ drflac\_uint32*\ pInputSamples1U32\ =\ (\textcolor{keyword}{const}\ drflac\_uint32*)pInputSamples1;}
\DoxyCodeLine{11452\ \ \ \ \ drflac\_uint32\ shift0\ =\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[0].wastedBitsPerSample)\ -\/\ 8;}
\DoxyCodeLine{11453\ \ \ \ \ drflac\_uint32\ shift1\ =\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[1].wastedBitsPerSample)\ -\/\ 8;}
\DoxyCodeLine{11454\ }
\DoxyCodeLine{11455\ \ \ \ \ \textcolor{keywordtype}{float}\ factor\ =\ 1.0f\ /\ 8388608.0f;}
\DoxyCodeLine{11456\ \ \ \ \ float32x4\_t\ factor4\ =\ vdupq\_n\_f32(factor);}
\DoxyCodeLine{11457\ \ \ \ \ int32x4\_t\ shift0\_4\ \ =\ vdupq\_n\_s32(shift0);}
\DoxyCodeLine{11458\ \ \ \ \ int32x4\_t\ shift1\_4\ \ =\ vdupq\_n\_s32(shift1);}
\DoxyCodeLine{11459\ }
\DoxyCodeLine{11460\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCount4;\ ++i)\ \{}
\DoxyCodeLine{11461\ \ \ \ \ \ \ \ \ int32x4\_t\ lefti;}
\DoxyCodeLine{11462\ \ \ \ \ \ \ \ \ int32x4\_t\ righti;}
\DoxyCodeLine{11463\ \ \ \ \ \ \ \ \ float32x4\_t\ leftf;}
\DoxyCodeLine{11464\ \ \ \ \ \ \ \ \ float32x4\_t\ rightf;}
\DoxyCodeLine{11465\ }
\DoxyCodeLine{11466\ \ \ \ \ \ \ \ \ lefti\ \ =\ vreinterpretq\_s32\_u32(vshlq\_u32(vld1q\_u32(pInputSamples0U32\ +\ i*4),\ shift0\_4));}
\DoxyCodeLine{11467\ \ \ \ \ \ \ \ \ righti\ =\ vreinterpretq\_s32\_u32(vshlq\_u32(vld1q\_u32(pInputSamples1U32\ +\ i*4),\ shift1\_4));}
\DoxyCodeLine{11468\ }
\DoxyCodeLine{11469\ \ \ \ \ \ \ \ \ leftf\ \ =\ vmulq\_f32(vcvtq\_f32\_s32(lefti),\ \ factor4);}
\DoxyCodeLine{11470\ \ \ \ \ \ \ \ \ rightf\ =\ vmulq\_f32(vcvtq\_f32\_s32(righti),\ factor4);}
\DoxyCodeLine{11471\ }
\DoxyCodeLine{11472\ \ \ \ \ \ \ \ \ drflac\_\_vst2q\_f32(pOutputSamples\ +\ i*8,\ vzipq\_f32(leftf,\ rightf));}
\DoxyCodeLine{11473\ \ \ \ \ \}}
\DoxyCodeLine{11474\ }
\DoxyCodeLine{11475\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ (frameCount4\ <<\ 2);\ i\ <\ frameCount;\ ++i)\ \{}
\DoxyCodeLine{11476\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+0]\ =\ (drflac\_int32)(pInputSamples0U32[i]\ <<\ shift0)\ *\ factor;}
\DoxyCodeLine{11477\ \ \ \ \ \ \ \ \ pOutputSamples[i*2+1]\ =\ (drflac\_int32)(pInputSamples1U32[i]\ <<\ shift1)\ *\ factor;}
\DoxyCodeLine{11478\ \ \ \ \ \}}
\DoxyCodeLine{11479\ \}}
\DoxyCodeLine{11480\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11481\ }
\DoxyCodeLine{11482\ \textcolor{keyword}{static}\ DRFLAC\_INLINE\ \textcolor{keywordtype}{void}\ drflac\_read\_pcm\_frames\_f32\_\_decode\_independent\_stereo(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ frameCount,\ drflac\_uint32\ unusedBitsPerSample,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples0,\ \textcolor{keyword}{const}\ drflac\_int32*\ pInputSamples1,\ \textcolor{keywordtype}{float}*\ pOutputSamples)}
\DoxyCodeLine{11483\ \{}
\DoxyCodeLine{11484\ \textcolor{preprocessor}{\#if\ defined(DRFLAC\_SUPPORT\_SSE2)}}
\DoxyCodeLine{11485\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsSSE2Supported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{11486\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_independent\_stereo\_\_sse2(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{11487\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{11488\ \textcolor{preprocessor}{\#elif\ defined(DRFLAC\_SUPPORT\_NEON)}}
\DoxyCodeLine{11489\ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_\_gIsNEONSupported\ \&\&\ pFlac-\/>bitsPerSample\ <=\ 24)\ \{}
\DoxyCodeLine{11490\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_independent\_stereo\_\_neon(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{11491\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{11492\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11493\ \ \ \ \ \{}
\DoxyCodeLine{11494\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Scalar\ fallback.\ */}}
\DoxyCodeLine{11495\ \textcolor{preprocessor}{\#if\ 0}}
\DoxyCodeLine{11496\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_independent\_stereo\_\_reference(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{11497\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{11498\ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_independent\_stereo\_\_scalar(pFlac,\ frameCount,\ unusedBitsPerSample,\ pInputSamples0,\ pInputSamples1,\ pOutputSamples);}
\DoxyCodeLine{11499\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11500\ \ \ \ \ \}}
\DoxyCodeLine{11501\ \}}
\DoxyCodeLine{11502\ }
\DoxyCodeLine{11503\ DRFLAC\_API\ drflac\_uint64\ drflac\_read\_pcm\_frames\_f32(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ framesToRead,\ \textcolor{keywordtype}{float}*\ pBufferOut)}
\DoxyCodeLine{11504\ \{}
\DoxyCodeLine{11505\ \ \ \ \ drflac\_uint64\ framesRead;}
\DoxyCodeLine{11506\ \ \ \ \ drflac\_uint32\ unusedBitsPerSample;}
\DoxyCodeLine{11507\ }
\DoxyCodeLine{11508\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL\ ||\ framesToRead\ ==\ 0)\ \{}
\DoxyCodeLine{11509\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{11510\ \ \ \ \ \}}
\DoxyCodeLine{11511\ }
\DoxyCodeLine{11512\ \ \ \ \ \textcolor{keywordflow}{if}\ (pBufferOut\ ==\ NULL)\ \{}
\DoxyCodeLine{11513\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_seek\_forward\_by\_pcm\_frames(pFlac,\ framesToRead);}
\DoxyCodeLine{11514\ \ \ \ \ \}}
\DoxyCodeLine{11515\ }
\DoxyCodeLine{11516\ \ \ \ \ DRFLAC\_ASSERT(pFlac-\/>bitsPerSample\ <=\ 32);}
\DoxyCodeLine{11517\ \ \ \ \ unusedBitsPerSample\ =\ 32\ -\/\ pFlac-\/>bitsPerSample;}
\DoxyCodeLine{11518\ }
\DoxyCodeLine{11519\ \ \ \ \ framesRead\ =\ 0;}
\DoxyCodeLine{11520\ \ \ \ \ \textcolor{keywordflow}{while}\ (framesToRead\ >\ 0)\ \{}
\DoxyCodeLine{11521\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ we've\ run\ out\ of\ samples\ in\ this\ frame,\ go\ to\ the\ next.\ */}}
\DoxyCodeLine{11522\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>currentFLACFrame.pcmFramesRemaining\ ==\ 0)\ \{}
\DoxyCodeLine{11523\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!drflac\_\_read\_and\_decode\_next\_flac\_frame(pFlac))\ \{}
\DoxyCodeLine{11524\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};\ \ \textcolor{comment}{/*\ Couldn't\ read\ the\ next\ frame,\ so\ just\ break\ from\ the\ loop\ and\ return.\ */}}
\DoxyCodeLine{11525\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11526\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{11527\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ channelCount\ =\ drflac\_\_get\_channel\_count\_from\_channel\_assignment(pFlac-\/>currentFLACFrame.header.channelAssignment);}
\DoxyCodeLine{11528\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ iFirstPCMFrame\ =\ pFlac-\/>currentFLACFrame.header.blockSizeInPCMFrames\ -\/\ pFlac-\/>currentFLACFrame.pcmFramesRemaining;}
\DoxyCodeLine{11529\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ frameCountThisIteration\ =\ framesToRead;}
\DoxyCodeLine{11530\ }
\DoxyCodeLine{11531\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (frameCountThisIteration\ >\ pFlac-\/>currentFLACFrame.pcmFramesRemaining)\ \{}
\DoxyCodeLine{11532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ frameCountThisIteration\ =\ pFlac-\/>currentFLACFrame.pcmFramesRemaining;}
\DoxyCodeLine{11533\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11534\ }
\DoxyCodeLine{11535\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (channelCount\ ==\ 2)\ \{}
\DoxyCodeLine{11536\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ drflac\_int32*\ pDecodedSamples0\ =\ pFlac-\/>currentFLACFrame.subframes[0].pSamplesS32\ +\ iFirstPCMFrame;}
\DoxyCodeLine{11537\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ drflac\_int32*\ pDecodedSamples1\ =\ pFlac-\/>currentFLACFrame.subframes[1].pSamplesS32\ +\ iFirstPCMFrame;}
\DoxyCodeLine{11538\ }
\DoxyCodeLine{11539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (pFlac-\/>currentFLACFrame.header.channelAssignment)}
\DoxyCodeLine{11540\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{11541\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_CHANNEL\_ASSIGNMENT\_LEFT\_SIDE:}
\DoxyCodeLine{11542\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{11543\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_left\_side(pFlac,\ frameCountThisIteration,\ unusedBitsPerSample,\ pDecodedSamples0,\ pDecodedSamples1,\ pBufferOut);}
\DoxyCodeLine{11544\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{11545\ }
\DoxyCodeLine{11546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_CHANNEL\_ASSIGNMENT\_RIGHT\_SIDE:}
\DoxyCodeLine{11547\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{11548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_right\_side(pFlac,\ frameCountThisIteration,\ unusedBitsPerSample,\ pDecodedSamples0,\ pDecodedSamples1,\ pBufferOut);}
\DoxyCodeLine{11549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{11550\ }
\DoxyCodeLine{11551\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_CHANNEL\_ASSIGNMENT\_MID\_SIDE:}
\DoxyCodeLine{11552\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{11553\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_mid\_side(pFlac,\ frameCountThisIteration,\ unusedBitsPerSample,\ pDecodedSamples0,\ pDecodedSamples1,\ pBufferOut);}
\DoxyCodeLine{11554\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{11555\ }
\DoxyCodeLine{11556\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ DRFLAC\_CHANNEL\_ASSIGNMENT\_INDEPENDENT:}
\DoxyCodeLine{11557\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{11558\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{11559\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_read\_pcm\_frames\_f32\_\_decode\_independent\_stereo(pFlac,\ frameCountThisIteration,\ unusedBitsPerSample,\ pDecodedSamples0,\ pDecodedSamples1,\ pBufferOut);}
\DoxyCodeLine{11560\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{11561\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11562\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{11563\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Generic\ interleaving.\ */}}
\DoxyCodeLine{11564\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint64\ i;}
\DoxyCodeLine{11565\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ frameCountThisIteration;\ ++i)\ \{}
\DoxyCodeLine{11566\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ j;}
\DoxyCodeLine{11567\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (j\ =\ 0;\ j\ <\ channelCount;\ ++j)\ \{}
\DoxyCodeLine{11568\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_int32\ sampleS32\ =\ (drflac\_int32)((drflac\_uint32)(pFlac-\/>currentFLACFrame.subframes[j].pSamplesS32[iFirstPCMFrame\ +\ i])\ <<\ (unusedBitsPerSample\ +\ pFlac-\/>currentFLACFrame.subframes[j].wastedBitsPerSample));}
\DoxyCodeLine{11569\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pBufferOut[(i*channelCount)+j]\ =\ (\textcolor{keywordtype}{float})(sampleS32\ /\ 2147483648.0);}
\DoxyCodeLine{11570\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11571\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11572\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11573\ }
\DoxyCodeLine{11574\ \ \ \ \ \ \ \ \ \ \ \ \ framesRead\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ +=\ frameCountThisIteration;}
\DoxyCodeLine{11575\ \ \ \ \ \ \ \ \ \ \ \ \ pBufferOut\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ +=\ frameCountThisIteration\ *\ channelCount;}
\DoxyCodeLine{11576\ \ \ \ \ \ \ \ \ \ \ \ \ framesToRead\ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/=\ frameCountThisIteration;}
\DoxyCodeLine{11577\ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentPCMFrame\ \ \ \ +=\ frameCountThisIteration;}
\DoxyCodeLine{11578\ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentFLACFrame.pcmFramesRemaining\ -\/=\ (\textcolor{keywordtype}{unsigned}\ int)frameCountThisIteration;}
\DoxyCodeLine{11579\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11580\ \ \ \ \ \}}
\DoxyCodeLine{11581\ }
\DoxyCodeLine{11582\ \ \ \ \ \textcolor{keywordflow}{return}\ framesRead;}
\DoxyCodeLine{11583\ \}}
\DoxyCodeLine{11584\ }
\DoxyCodeLine{11585\ }
\DoxyCodeLine{11586\ DRFLAC\_API\ drflac\_bool32\ drflac\_seek\_to\_pcm\_frame(\mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac,\ drflac\_uint64\ pcmFrameIndex)}
\DoxyCodeLine{11587\ \{}
\DoxyCodeLine{11588\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{11589\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{11590\ \ \ \ \ \}}
\DoxyCodeLine{11591\ }
\DoxyCodeLine{11592\ \ \ \ \ \textcolor{comment}{/*\ Don't\ do\ anything\ if\ we're\ already\ on\ the\ seek\ point.\ */}}
\DoxyCodeLine{11593\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>currentPCMFrame\ ==\ pcmFrameIndex)\ \{}
\DoxyCodeLine{11594\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{11595\ \ \ \ \ \}}
\DoxyCodeLine{11596\ }
\DoxyCodeLine{11597\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{11598\ \textcolor{comment}{\ \ \ \ If\ we\ don't\ know\ where\ the\ first\ frame\ begins\ then\ we\ can't\ seek.\ This\ will\ happen\ when\ the\ STREAMINFO\ block\ was\ not\ present}}
\DoxyCodeLine{11599\ \textcolor{comment}{\ \ \ \ when\ the\ decoder\ was\ opened.}}
\DoxyCodeLine{11600\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{11601\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>firstFLACFramePosInBytes\ ==\ 0)\ \{}
\DoxyCodeLine{11602\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{11603\ \ \ \ \ \}}
\DoxyCodeLine{11604\ }
\DoxyCodeLine{11605\ \ \ \ \ \textcolor{keywordflow}{if}\ (pcmFrameIndex\ ==\ 0)\ \{}
\DoxyCodeLine{11606\ \ \ \ \ \ \ \ \ pFlac-\/>currentPCMFrame\ =\ 0;}
\DoxyCodeLine{11607\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_seek\_to\_first\_frame(pFlac);}
\DoxyCodeLine{11608\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{11609\ \ \ \ \ \ \ \ \ drflac\_bool32\ wasSuccessful\ =\ DRFLAC\_FALSE;}
\DoxyCodeLine{11610\ \ \ \ \ \ \ \ \ drflac\_uint64\ originalPCMFrame\ =\ pFlac-\/>currentPCMFrame;}
\DoxyCodeLine{11611\ }
\DoxyCodeLine{11612\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Clamp\ the\ sample\ to\ the\ end.\ */}}
\DoxyCodeLine{11613\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pcmFrameIndex\ >\ pFlac-\/>totalPCMFrameCount)\ \{}
\DoxyCodeLine{11614\ \ \ \ \ \ \ \ \ \ \ \ \ pcmFrameIndex\ =\ pFlac-\/>totalPCMFrameCount;}
\DoxyCodeLine{11615\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11616\ }
\DoxyCodeLine{11617\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ the\ target\ sample\ and\ the\ current\ sample\ are\ in\ the\ same\ frame\ we\ just\ move\ the\ position\ forward.\ */}}
\DoxyCodeLine{11618\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pcmFrameIndex\ >\ pFlac-\/>currentPCMFrame)\ \{}
\DoxyCodeLine{11619\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Forward.\ */}}
\DoxyCodeLine{11620\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ \mbox{\hyperlink{structoffset}{offset}}\ =\ (drflac\_uint32)(pcmFrameIndex\ -\/\ pFlac-\/>currentPCMFrame);}
\DoxyCodeLine{11621\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>currentFLACFrame.pcmFramesRemaining\ >\ \ \mbox{\hyperlink{structoffset}{offset}})\ \{}
\DoxyCodeLine{11622\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentFLACFrame.pcmFramesRemaining\ -\/=\ \mbox{\hyperlink{structoffset}{offset}};}
\DoxyCodeLine{11623\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentPCMFrame\ =\ pcmFrameIndex;}
\DoxyCodeLine{11624\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{11625\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11626\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{11627\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Backward.\ */}}
\DoxyCodeLine{11628\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ offsetAbs\ =\ (drflac\_uint32)(pFlac-\/>currentPCMFrame\ -\/\ pcmFrameIndex);}
\DoxyCodeLine{11629\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ currentFLACFramePCMFrameCount\ =\ pFlac-\/>currentFLACFrame.header.blockSizeInPCMFrames;}
\DoxyCodeLine{11630\ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_uint32\ currentFLACFramePCMFramesConsumed\ =\ currentFLACFramePCMFrameCount\ -\/\ pFlac-\/>currentFLACFrame.pcmFramesRemaining;}
\DoxyCodeLine{11631\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (currentFLACFramePCMFramesConsumed\ >\ offsetAbs)\ \{}
\DoxyCodeLine{11632\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentFLACFrame.pcmFramesRemaining\ +=\ offsetAbs;}
\DoxyCodeLine{11633\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentPCMFrame\ =\ pcmFrameIndex;}
\DoxyCodeLine{11634\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{11635\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11636\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11637\ }
\DoxyCodeLine{11638\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{11639\ \textcolor{comment}{\ \ \ \ \ \ \ \ Different\ techniques\ depending\ on\ encapsulation.\ Using\ the\ native\ FLAC\ seektable\ with\ Ogg\ encapsulation\ is\ a\ bit\ awkward\ so}}
\DoxyCodeLine{11640\ \textcolor{comment}{\ \ \ \ \ \ \ \ we'll\ instead\ use\ Ogg's\ natural\ seeking\ facility.}}
\DoxyCodeLine{11641\ \textcolor{comment}{\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{11642\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_OGG}}
\DoxyCodeLine{11643\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac-\/>container\ ==\ drflac\_container\_ogg)}
\DoxyCodeLine{11644\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{11645\ \ \ \ \ \ \ \ \ \ \ \ \ wasSuccessful\ =\ drflac\_ogg\_\_seek\_to\_pcm\_frame(pFlac,\ pcmFrameIndex);}
\DoxyCodeLine{11646\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11647\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{11648\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11649\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{11650\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ First\ try\ seeking\ via\ the\ seek\ table.\ If\ this\ fails,\ fall\ back\ to\ a\ brute\ force\ seek\ which\ is\ much\ slower.\ */}}
\DoxyCodeLine{11651\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!pFlac-\/>\_noSeekTableSeek)\ \{}
\DoxyCodeLine{11652\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wasSuccessful\ =\ drflac\_\_seek\_to\_pcm\_frame\_\_seek\_table(pFlac,\ pcmFrameIndex);}
\DoxyCodeLine{11653\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11654\ }
\DoxyCodeLine{11655\ \textcolor{preprocessor}{\#if\ !defined(DR\_FLAC\_NO\_CRC)}}
\DoxyCodeLine{11656\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Fall\ back\ to\ binary\ search\ if\ seek\ table\ seeking\ fails.\ This\ requires\ the\ length\ of\ the\ stream\ to\ be\ known.\ */}}
\DoxyCodeLine{11657\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!wasSuccessful\ \&\&\ !pFlac-\/>\_noBinarySearchSeek\ \&\&\ pFlac-\/>totalPCMFrameCount\ >\ 0)\ \{}
\DoxyCodeLine{11658\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wasSuccessful\ =\ drflac\_\_seek\_to\_pcm\_frame\_\_binary\_search(pFlac,\ pcmFrameIndex);}
\DoxyCodeLine{11659\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11660\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11661\ }
\DoxyCodeLine{11662\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Fall\ back\ to\ brute\ force\ if\ all\ else\ fails.\ */}}
\DoxyCodeLine{11663\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!wasSuccessful\ \&\&\ !pFlac-\/>\_noBruteForceSeek)\ \{}
\DoxyCodeLine{11664\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wasSuccessful\ =\ drflac\_\_seek\_to\_pcm\_frame\_\_brute\_force(pFlac,\ pcmFrameIndex);}
\DoxyCodeLine{11665\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11666\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11667\ }
\DoxyCodeLine{11668\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (wasSuccessful)\ \{}
\DoxyCodeLine{11669\ \ \ \ \ \ \ \ \ \ \ \ \ pFlac-\/>currentPCMFrame\ =\ pcmFrameIndex;}
\DoxyCodeLine{11670\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{11671\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Seek\ failed.\ Try\ putting\ the\ decoder\ back\ to\ it's\ original\ state.\ */}}
\DoxyCodeLine{11672\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (drflac\_seek\_to\_pcm\_frame(pFlac,\ originalPCMFrame)\ ==\ DRFLAC\_FALSE)\ \{}
\DoxyCodeLine{11673\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Failed\ to\ seek\ back\ to\ the\ original\ PCM\ frame.\ Fall\ back\ to\ 0.\ */}}
\DoxyCodeLine{11674\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_seek\_to\_pcm\_frame(pFlac,\ 0);}
\DoxyCodeLine{11675\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11676\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{11677\ }
\DoxyCodeLine{11678\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ wasSuccessful;}
\DoxyCodeLine{11679\ \ \ \ \ \}}
\DoxyCodeLine{11680\ \}}
\DoxyCodeLine{11681\ }
\DoxyCodeLine{11682\ }
\DoxyCodeLine{11683\ }
\DoxyCodeLine{11684\ \textcolor{comment}{/*\ High\ Level\ APIs\ */}}
\DoxyCodeLine{11685\ }
\DoxyCodeLine{11686\ \textcolor{comment}{/*\ SIZE\_MAX\ */}}
\DoxyCodeLine{11687\ \textcolor{preprocessor}{\#if\ defined(SIZE\_MAX)}}
\DoxyCodeLine{11688\ \textcolor{preprocessor}{\ \ \ \ \#define\ DRFLAC\_SIZE\_MAX\ \ SIZE\_MAX}}
\DoxyCodeLine{11689\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{11690\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(DRFLAC\_64BIT)}}
\DoxyCodeLine{11691\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_SIZE\_MAX\ \ ((drflac\_uint64)0xFFFFFFFFFFFFFFFF)}}
\DoxyCodeLine{11692\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{11693\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#define\ DRFLAC\_SIZE\_MAX\ \ 0xFFFFFFFF}}
\DoxyCodeLine{11694\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{11695\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11696\ \textcolor{comment}{/*\ End\ SIZE\_MAX\ */}}
\DoxyCodeLine{11697\ }
\DoxyCodeLine{11698\ }
\DoxyCodeLine{11699\ \textcolor{comment}{/*\ Using\ a\ macro\ as\ the\ definition\ of\ the\ drflac\_\_full\_decode\_and\_close\_*()\ API\ family.\ Sue\ me.\ */}}
\DoxyCodeLine{11700\ \textcolor{preprocessor}{\#define\ DRFLAC\_DEFINE\_FULL\_READ\_AND\_CLOSE(extension,\ type)\ \(\backslash\)}}
\DoxyCodeLine{11701\ \textcolor{preprocessor}{static\ type*\ drflac\_\_full\_read\_and\_close\_\ \#\#\ extension\ (drflac*\ pFlac,\ unsigned\ int*\ channelsOut,\ unsigned\ int*\ sampleRateOut,\ drflac\_uint64*\ totalPCMFrameCountOut)\(\backslash\)}}
\DoxyCodeLine{11702\ \textcolor{preprocessor}{\{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11703\ \textcolor{preprocessor}{\ \ \ \ type*\ pSampleData\ =\ NULL;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11704\ \textcolor{preprocessor}{\ \ \ \ drflac\_uint64\ totalPCMFrameCount;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11705\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11706\ \textcolor{preprocessor}{\ \ \ \ DRFLAC\_ASSERT(pFlac\ !=\ NULL);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11707\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11708\ \textcolor{preprocessor}{\ \ \ \ totalPCMFrameCount\ =\ pFlac-\/>totalPCMFrameCount;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11709\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11710\ \textcolor{preprocessor}{\ \ \ \ if\ (totalPCMFrameCount\ ==\ 0)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11711\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ type\ buffer[4096];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11712\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ drflac\_uint64\ pcmFramesRead;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11713\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ size\_t\ sampleDataBufferSize\ =\ sizeof(buffer);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11714\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11715\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ pSampleData\ =\ (type*)drflac\_\_malloc\_from\_callbacks(sampleDataBufferSize,\ \&pFlac-\/>allocationCallbacks);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11716\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ if\ (pSampleData\ ==\ NULL)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11717\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ goto\ on\_error;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11718\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11719\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11720\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ while\ ((pcmFramesRead\ =\ (drflac\_uint64)drflac\_read\_pcm\_frames\_\#\#extension(pFlac,\ sizeof(buffer)/sizeof(buffer[0])/pFlac-\/>channels,\ buffer))\ >\ 0)\ \{\ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11721\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ if\ (((totalPCMFrameCount\ +\ pcmFramesRead)\ *\ pFlac-\/>channels\ *\ sizeof(type))\ >\ sampleDataBufferSize)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11722\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ type*\ pNewSampleData;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11723\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ size\_t\ newSampleDataBufferSize;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11724\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11725\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ newSampleDataBufferSize\ =\ sampleDataBufferSize\ *\ 2;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11726\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pNewSampleData\ =\ (type*)drflac\_\_realloc\_from\_callbacks(pSampleData,\ newSampleDataBufferSize,\ sampleDataBufferSize,\ \&pFlac-\/>allocationCallbacks);\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11727\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (pNewSampleData\ ==\ NULL)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11728\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(pSampleData,\ \&pFlac-\/>allocationCallbacks);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11729\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ goto\ on\_error;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11730\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11731\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11732\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sampleDataBufferSize\ =\ newSampleDataBufferSize;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11733\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pSampleData\ =\ pNewSampleData;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11734\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11735\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11736\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ DRFLAC\_COPY\_MEMORY(pSampleData\ +\ (totalPCMFrameCount*pFlac-\/>channels),\ buffer,\ (size\_t)(pcmFramesRead*pFlac-\/>channels*sizeof(type)));\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11737\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ totalPCMFrameCount\ +=\ pcmFramesRead;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11738\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11739\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11740\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ }\textcolor{comment}{/*\ At\ this\ point\ everything\ should\ be\ decoded,\ but\ we\ just\ want\ to\ fill\ the\ unused\ part\ buffer\ with\ silence\ -\/\ need\ to\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11741\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ protect\ those\ ears\ from\ random\ noise!\ */}\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11742\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ DRFLAC\_ZERO\_MEMORY(pSampleData\ +\ (totalPCMFrameCount*pFlac-\/>channels),\ (size\_t)(sampleDataBufferSize\ -\/\ totalPCMFrameCount*pFlac-\/>channels*sizeof(type)));\ \ \ \(\backslash\)}}
\DoxyCodeLine{11743\ \textcolor{preprocessor}{\ \ \ \ \}\ else\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11744\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ drflac\_uint64\ dataSize\ =\ totalPCMFrameCount*pFlac-\/>channels*sizeof(type);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11745\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ if\ (dataSize\ >\ (drflac\_uint64)DRFLAC\_SIZE\_MAX)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11746\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ goto\ on\_error;\ \ }\textcolor{comment}{/*\ The\ decoded\ data\ is\ too\ big.\ */}\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11747\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11748\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11749\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ pSampleData\ =\ (type*)drflac\_\_malloc\_from\_callbacks((size\_t)dataSize,\ \&pFlac-\/>allocationCallbacks);\ \ \ \ }\textcolor{comment}{/*\ <-\/-\/\ Safe\ cast\ as\ per\ the\ check\ above.\ */}\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11750\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ if\ (pSampleData\ ==\ NULL)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11751\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ goto\ on\_error;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11752\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11753\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11754\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ totalPCMFrameCount\ =\ drflac\_read\_pcm\_frames\_\#\#extension(pFlac,\ pFlac-\/>totalPCMFrameCount,\ pSampleData);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11755\ \textcolor{preprocessor}{\ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11756\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11757\ \textcolor{preprocessor}{\ \ \ \ if\ (sampleRateOut)\ *sampleRateOut\ =\ pFlac-\/>sampleRate;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11758\ \textcolor{preprocessor}{\ \ \ \ if\ (channelsOut)\ *channelsOut\ =\ pFlac-\/>channels;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11759\ \textcolor{preprocessor}{\ \ \ \ if\ (totalPCMFrameCountOut)\ *totalPCMFrameCountOut\ =\ totalPCMFrameCount;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11760\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11761\ \textcolor{preprocessor}{\ \ \ \ drflac\_close(pFlac);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11762\ \textcolor{preprocessor}{\ \ \ \ return\ pSampleData;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11763\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11764\ \textcolor{preprocessor}{on\_error:\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11765\ \textcolor{preprocessor}{\ \ \ \ drflac\_close(pFlac);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11766\ \textcolor{preprocessor}{\ \ \ \ return\ NULL;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{11767\ \textcolor{preprocessor}{\}}}
\DoxyCodeLine{11768\ }
\DoxyCodeLine{11769\ DRFLAC\_DEFINE\_FULL\_READ\_AND\_CLOSE(s32,\ drflac\_int32)}
\DoxyCodeLine{11770\ DRFLAC\_DEFINE\_FULL\_READ\_AND\_CLOSE(s16,\ drflac\_int16)}
\DoxyCodeLine{11771\ DRFLAC\_DEFINE\_FULL\_READ\_AND\_CLOSE(f32,\ \textcolor{keywordtype}{float})}
\DoxyCodeLine{11772\ }
\DoxyCodeLine{11773\ DRFLAC\_API\ drflac\_int32*\ drflac\_open\_and\_read\_pcm\_frames\_s32(drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channelsOut,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRateOut,\ drflac\_uint64*\ totalPCMFrameCountOut,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{11774\ \{}
\DoxyCodeLine{11775\ \ \ \ \ \mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac;}
\DoxyCodeLine{11776\ }
\DoxyCodeLine{11777\ \ \ \ \ \textcolor{keywordflow}{if}\ (channelsOut)\ \{}
\DoxyCodeLine{11778\ \ \ \ \ \ \ \ \ *channelsOut\ =\ 0;}
\DoxyCodeLine{11779\ \ \ \ \ \}}
\DoxyCodeLine{11780\ \ \ \ \ \textcolor{keywordflow}{if}\ (sampleRateOut)\ \{}
\DoxyCodeLine{11781\ \ \ \ \ \ \ \ \ *sampleRateOut\ =\ 0;}
\DoxyCodeLine{11782\ \ \ \ \ \}}
\DoxyCodeLine{11783\ \ \ \ \ \textcolor{keywordflow}{if}\ (totalPCMFrameCountOut)\ \{}
\DoxyCodeLine{11784\ \ \ \ \ \ \ \ \ *totalPCMFrameCountOut\ =\ 0;}
\DoxyCodeLine{11785\ \ \ \ \ \}}
\DoxyCodeLine{11786\ }
\DoxyCodeLine{11787\ \ \ \ \ pFlac\ =\ drflac\_open(onRead,\ onSeek,\ pUserData,\ pAllocationCallbacks);}
\DoxyCodeLine{11788\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{11789\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{11790\ \ \ \ \ \}}
\DoxyCodeLine{11791\ }
\DoxyCodeLine{11792\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_full\_read\_and\_close\_s32(pFlac,\ channelsOut,\ sampleRateOut,\ totalPCMFrameCountOut);}
\DoxyCodeLine{11793\ \}}
\DoxyCodeLine{11794\ }
\DoxyCodeLine{11795\ DRFLAC\_API\ drflac\_int16*\ drflac\_open\_and\_read\_pcm\_frames\_s16(drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channelsOut,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRateOut,\ drflac\_uint64*\ totalPCMFrameCountOut,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{11796\ \{}
\DoxyCodeLine{11797\ \ \ \ \ \mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac;}
\DoxyCodeLine{11798\ }
\DoxyCodeLine{11799\ \ \ \ \ \textcolor{keywordflow}{if}\ (channelsOut)\ \{}
\DoxyCodeLine{11800\ \ \ \ \ \ \ \ \ *channelsOut\ =\ 0;}
\DoxyCodeLine{11801\ \ \ \ \ \}}
\DoxyCodeLine{11802\ \ \ \ \ \textcolor{keywordflow}{if}\ (sampleRateOut)\ \{}
\DoxyCodeLine{11803\ \ \ \ \ \ \ \ \ *sampleRateOut\ =\ 0;}
\DoxyCodeLine{11804\ \ \ \ \ \}}
\DoxyCodeLine{11805\ \ \ \ \ \textcolor{keywordflow}{if}\ (totalPCMFrameCountOut)\ \{}
\DoxyCodeLine{11806\ \ \ \ \ \ \ \ \ *totalPCMFrameCountOut\ =\ 0;}
\DoxyCodeLine{11807\ \ \ \ \ \}}
\DoxyCodeLine{11808\ }
\DoxyCodeLine{11809\ \ \ \ \ pFlac\ =\ drflac\_open(onRead,\ onSeek,\ pUserData,\ pAllocationCallbacks);}
\DoxyCodeLine{11810\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{11811\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{11812\ \ \ \ \ \}}
\DoxyCodeLine{11813\ }
\DoxyCodeLine{11814\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_full\_read\_and\_close\_s16(pFlac,\ channelsOut,\ sampleRateOut,\ totalPCMFrameCountOut);}
\DoxyCodeLine{11815\ \}}
\DoxyCodeLine{11816\ }
\DoxyCodeLine{11817\ DRFLAC\_API\ \textcolor{keywordtype}{float}*\ drflac\_open\_and\_read\_pcm\_frames\_f32(drflac\_read\_proc\ onRead,\ drflac\_seek\_proc\ onSeek,\ \textcolor{keywordtype}{void}*\ pUserData,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channelsOut,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRateOut,\ drflac\_uint64*\ totalPCMFrameCountOut,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{11818\ \{}
\DoxyCodeLine{11819\ \ \ \ \ \mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac;}
\DoxyCodeLine{11820\ }
\DoxyCodeLine{11821\ \ \ \ \ \textcolor{keywordflow}{if}\ (channelsOut)\ \{}
\DoxyCodeLine{11822\ \ \ \ \ \ \ \ \ *channelsOut\ =\ 0;}
\DoxyCodeLine{11823\ \ \ \ \ \}}
\DoxyCodeLine{11824\ \ \ \ \ \textcolor{keywordflow}{if}\ (sampleRateOut)\ \{}
\DoxyCodeLine{11825\ \ \ \ \ \ \ \ \ *sampleRateOut\ =\ 0;}
\DoxyCodeLine{11826\ \ \ \ \ \}}
\DoxyCodeLine{11827\ \ \ \ \ \textcolor{keywordflow}{if}\ (totalPCMFrameCountOut)\ \{}
\DoxyCodeLine{11828\ \ \ \ \ \ \ \ \ *totalPCMFrameCountOut\ =\ 0;}
\DoxyCodeLine{11829\ \ \ \ \ \}}
\DoxyCodeLine{11830\ }
\DoxyCodeLine{11831\ \ \ \ \ pFlac\ =\ drflac\_open(onRead,\ onSeek,\ pUserData,\ pAllocationCallbacks);}
\DoxyCodeLine{11832\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{11833\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{11834\ \ \ \ \ \}}
\DoxyCodeLine{11835\ }
\DoxyCodeLine{11836\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_full\_read\_and\_close\_f32(pFlac,\ channelsOut,\ sampleRateOut,\ totalPCMFrameCountOut);}
\DoxyCodeLine{11837\ \}}
\DoxyCodeLine{11838\ }
\DoxyCodeLine{11839\ \textcolor{preprocessor}{\#ifndef\ DR\_FLAC\_NO\_STDIO}}
\DoxyCodeLine{11840\ DRFLAC\_API\ drflac\_int32*\ drflac\_open\_file\_and\_read\_pcm\_frames\_s32(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ filename,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channels,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRate,\ drflac\_uint64*\ totalPCMFrameCount,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{11841\ \{}
\DoxyCodeLine{11842\ \ \ \ \ \mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac;}
\DoxyCodeLine{11843\ }
\DoxyCodeLine{11844\ \ \ \ \ \textcolor{keywordflow}{if}\ (sampleRate)\ \{}
\DoxyCodeLine{11845\ \ \ \ \ \ \ \ \ *sampleRate\ =\ 0;}
\DoxyCodeLine{11846\ \ \ \ \ \}}
\DoxyCodeLine{11847\ \ \ \ \ \textcolor{keywordflow}{if}\ (channels)\ \{}
\DoxyCodeLine{11848\ \ \ \ \ \ \ \ \ *channels\ =\ 0;}
\DoxyCodeLine{11849\ \ \ \ \ \}}
\DoxyCodeLine{11850\ \ \ \ \ \textcolor{keywordflow}{if}\ (totalPCMFrameCount)\ \{}
\DoxyCodeLine{11851\ \ \ \ \ \ \ \ \ *totalPCMFrameCount\ =\ 0;}
\DoxyCodeLine{11852\ \ \ \ \ \}}
\DoxyCodeLine{11853\ }
\DoxyCodeLine{11854\ \ \ \ \ pFlac\ =\ drflac\_open\_file(filename,\ pAllocationCallbacks);}
\DoxyCodeLine{11855\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{11856\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{11857\ \ \ \ \ \}}
\DoxyCodeLine{11858\ }
\DoxyCodeLine{11859\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_full\_read\_and\_close\_s32(pFlac,\ channels,\ sampleRate,\ totalPCMFrameCount);}
\DoxyCodeLine{11860\ \}}
\DoxyCodeLine{11861\ }
\DoxyCodeLine{11862\ DRFLAC\_API\ drflac\_int16*\ drflac\_open\_file\_and\_read\_pcm\_frames\_s16(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ filename,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channels,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRate,\ drflac\_uint64*\ totalPCMFrameCount,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{11863\ \{}
\DoxyCodeLine{11864\ \ \ \ \ \mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac;}
\DoxyCodeLine{11865\ }
\DoxyCodeLine{11866\ \ \ \ \ \textcolor{keywordflow}{if}\ (sampleRate)\ \{}
\DoxyCodeLine{11867\ \ \ \ \ \ \ \ \ *sampleRate\ =\ 0;}
\DoxyCodeLine{11868\ \ \ \ \ \}}
\DoxyCodeLine{11869\ \ \ \ \ \textcolor{keywordflow}{if}\ (channels)\ \{}
\DoxyCodeLine{11870\ \ \ \ \ \ \ \ \ *channels\ =\ 0;}
\DoxyCodeLine{11871\ \ \ \ \ \}}
\DoxyCodeLine{11872\ \ \ \ \ \textcolor{keywordflow}{if}\ (totalPCMFrameCount)\ \{}
\DoxyCodeLine{11873\ \ \ \ \ \ \ \ \ *totalPCMFrameCount\ =\ 0;}
\DoxyCodeLine{11874\ \ \ \ \ \}}
\DoxyCodeLine{11875\ }
\DoxyCodeLine{11876\ \ \ \ \ pFlac\ =\ drflac\_open\_file(filename,\ pAllocationCallbacks);}
\DoxyCodeLine{11877\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{11878\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{11879\ \ \ \ \ \}}
\DoxyCodeLine{11880\ }
\DoxyCodeLine{11881\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_full\_read\_and\_close\_s16(pFlac,\ channels,\ sampleRate,\ totalPCMFrameCount);}
\DoxyCodeLine{11882\ \}}
\DoxyCodeLine{11883\ }
\DoxyCodeLine{11884\ DRFLAC\_API\ \textcolor{keywordtype}{float}*\ drflac\_open\_file\_and\_read\_pcm\_frames\_f32(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ filename,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channels,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRate,\ drflac\_uint64*\ totalPCMFrameCount,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{11885\ \{}
\DoxyCodeLine{11886\ \ \ \ \ \mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac;}
\DoxyCodeLine{11887\ }
\DoxyCodeLine{11888\ \ \ \ \ \textcolor{keywordflow}{if}\ (sampleRate)\ \{}
\DoxyCodeLine{11889\ \ \ \ \ \ \ \ \ *sampleRate\ =\ 0;}
\DoxyCodeLine{11890\ \ \ \ \ \}}
\DoxyCodeLine{11891\ \ \ \ \ \textcolor{keywordflow}{if}\ (channels)\ \{}
\DoxyCodeLine{11892\ \ \ \ \ \ \ \ \ *channels\ =\ 0;}
\DoxyCodeLine{11893\ \ \ \ \ \}}
\DoxyCodeLine{11894\ \ \ \ \ \textcolor{keywordflow}{if}\ (totalPCMFrameCount)\ \{}
\DoxyCodeLine{11895\ \ \ \ \ \ \ \ \ *totalPCMFrameCount\ =\ 0;}
\DoxyCodeLine{11896\ \ \ \ \ \}}
\DoxyCodeLine{11897\ }
\DoxyCodeLine{11898\ \ \ \ \ pFlac\ =\ drflac\_open\_file(filename,\ pAllocationCallbacks);}
\DoxyCodeLine{11899\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{11900\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{11901\ \ \ \ \ \}}
\DoxyCodeLine{11902\ }
\DoxyCodeLine{11903\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_full\_read\_and\_close\_f32(pFlac,\ channels,\ sampleRate,\ totalPCMFrameCount);}
\DoxyCodeLine{11904\ \}}
\DoxyCodeLine{11905\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{11906\ }
\DoxyCodeLine{11907\ DRFLAC\_API\ drflac\_int32*\ drflac\_open\_memory\_and\_read\_pcm\_frames\_s32(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ data,\ \textcolor{keywordtype}{size\_t}\ dataSize,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channels,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRate,\ drflac\_uint64*\ totalPCMFrameCount,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{11908\ \{}
\DoxyCodeLine{11909\ \ \ \ \ \mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac;}
\DoxyCodeLine{11910\ }
\DoxyCodeLine{11911\ \ \ \ \ \textcolor{keywordflow}{if}\ (sampleRate)\ \{}
\DoxyCodeLine{11912\ \ \ \ \ \ \ \ \ *sampleRate\ =\ 0;}
\DoxyCodeLine{11913\ \ \ \ \ \}}
\DoxyCodeLine{11914\ \ \ \ \ \textcolor{keywordflow}{if}\ (channels)\ \{}
\DoxyCodeLine{11915\ \ \ \ \ \ \ \ \ *channels\ =\ 0;}
\DoxyCodeLine{11916\ \ \ \ \ \}}
\DoxyCodeLine{11917\ \ \ \ \ \textcolor{keywordflow}{if}\ (totalPCMFrameCount)\ \{}
\DoxyCodeLine{11918\ \ \ \ \ \ \ \ \ *totalPCMFrameCount\ =\ 0;}
\DoxyCodeLine{11919\ \ \ \ \ \}}
\DoxyCodeLine{11920\ }
\DoxyCodeLine{11921\ \ \ \ \ pFlac\ =\ drflac\_open\_memory(data,\ dataSize,\ pAllocationCallbacks);}
\DoxyCodeLine{11922\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{11923\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{11924\ \ \ \ \ \}}
\DoxyCodeLine{11925\ }
\DoxyCodeLine{11926\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_full\_read\_and\_close\_s32(pFlac,\ channels,\ sampleRate,\ totalPCMFrameCount);}
\DoxyCodeLine{11927\ \}}
\DoxyCodeLine{11928\ }
\DoxyCodeLine{11929\ DRFLAC\_API\ drflac\_int16*\ drflac\_open\_memory\_and\_read\_pcm\_frames\_s16(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ data,\ \textcolor{keywordtype}{size\_t}\ dataSize,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channels,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRate,\ drflac\_uint64*\ totalPCMFrameCount,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{11930\ \{}
\DoxyCodeLine{11931\ \ \ \ \ \mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac;}
\DoxyCodeLine{11932\ }
\DoxyCodeLine{11933\ \ \ \ \ \textcolor{keywordflow}{if}\ (sampleRate)\ \{}
\DoxyCodeLine{11934\ \ \ \ \ \ \ \ \ *sampleRate\ =\ 0;}
\DoxyCodeLine{11935\ \ \ \ \ \}}
\DoxyCodeLine{11936\ \ \ \ \ \textcolor{keywordflow}{if}\ (channels)\ \{}
\DoxyCodeLine{11937\ \ \ \ \ \ \ \ \ *channels\ =\ 0;}
\DoxyCodeLine{11938\ \ \ \ \ \}}
\DoxyCodeLine{11939\ \ \ \ \ \textcolor{keywordflow}{if}\ (totalPCMFrameCount)\ \{}
\DoxyCodeLine{11940\ \ \ \ \ \ \ \ \ *totalPCMFrameCount\ =\ 0;}
\DoxyCodeLine{11941\ \ \ \ \ \}}
\DoxyCodeLine{11942\ }
\DoxyCodeLine{11943\ \ \ \ \ pFlac\ =\ drflac\_open\_memory(data,\ dataSize,\ pAllocationCallbacks);}
\DoxyCodeLine{11944\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{11945\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{11946\ \ \ \ \ \}}
\DoxyCodeLine{11947\ }
\DoxyCodeLine{11948\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_full\_read\_and\_close\_s16(pFlac,\ channels,\ sampleRate,\ totalPCMFrameCount);}
\DoxyCodeLine{11949\ \}}
\DoxyCodeLine{11950\ }
\DoxyCodeLine{11951\ DRFLAC\_API\ \textcolor{keywordtype}{float}*\ drflac\_open\_memory\_and\_read\_pcm\_frames\_f32(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ data,\ \textcolor{keywordtype}{size\_t}\ dataSize,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ channels,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*\ sampleRate,\ drflac\_uint64*\ totalPCMFrameCount,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{11952\ \{}
\DoxyCodeLine{11953\ \ \ \ \ \mbox{\hyperlink{structdrflac}{drflac}}*\ pFlac;}
\DoxyCodeLine{11954\ }
\DoxyCodeLine{11955\ \ \ \ \ \textcolor{keywordflow}{if}\ (sampleRate)\ \{}
\DoxyCodeLine{11956\ \ \ \ \ \ \ \ \ *sampleRate\ =\ 0;}
\DoxyCodeLine{11957\ \ \ \ \ \}}
\DoxyCodeLine{11958\ \ \ \ \ \textcolor{keywordflow}{if}\ (channels)\ \{}
\DoxyCodeLine{11959\ \ \ \ \ \ \ \ \ *channels\ =\ 0;}
\DoxyCodeLine{11960\ \ \ \ \ \}}
\DoxyCodeLine{11961\ \ \ \ \ \textcolor{keywordflow}{if}\ (totalPCMFrameCount)\ \{}
\DoxyCodeLine{11962\ \ \ \ \ \ \ \ \ *totalPCMFrameCount\ =\ 0;}
\DoxyCodeLine{11963\ \ \ \ \ \}}
\DoxyCodeLine{11964\ }
\DoxyCodeLine{11965\ \ \ \ \ pFlac\ =\ drflac\_open\_memory(data,\ dataSize,\ pAllocationCallbacks);}
\DoxyCodeLine{11966\ \ \ \ \ \textcolor{keywordflow}{if}\ (pFlac\ ==\ NULL)\ \{}
\DoxyCodeLine{11967\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{11968\ \ \ \ \ \}}
\DoxyCodeLine{11969\ }
\DoxyCodeLine{11970\ \ \ \ \ \textcolor{keywordflow}{return}\ drflac\_\_full\_read\_and\_close\_f32(pFlac,\ channels,\ sampleRate,\ totalPCMFrameCount);}
\DoxyCodeLine{11971\ \}}
\DoxyCodeLine{11972\ }
\DoxyCodeLine{11973\ }
\DoxyCodeLine{11974\ DRFLAC\_API\ \textcolor{keywordtype}{void}\ drflac\_free(\textcolor{keywordtype}{void}*\ p,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__allocation__callbacks}{drflac\_allocation\_callbacks}}*\ pAllocationCallbacks)}
\DoxyCodeLine{11975\ \{}
\DoxyCodeLine{11976\ \ \ \ \ \textcolor{keywordflow}{if}\ (pAllocationCallbacks\ !=\ NULL)\ \{}
\DoxyCodeLine{11977\ \ \ \ \ \ \ \ \ drflac\_\_free\_from\_callbacks(p,\ pAllocationCallbacks);}
\DoxyCodeLine{11978\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{11979\ \ \ \ \ \ \ \ \ drflac\_\_free\_default(p,\ NULL);}
\DoxyCodeLine{11980\ \ \ \ \ \}}
\DoxyCodeLine{11981\ \}}
\DoxyCodeLine{11982\ }
\DoxyCodeLine{11983\ }
\DoxyCodeLine{11984\ }
\DoxyCodeLine{11985\ }
\DoxyCodeLine{11986\ DRFLAC\_API\ \textcolor{keywordtype}{void}\ drflac\_init\_vorbis\_comment\_iterator(\mbox{\hyperlink{structdrflac__vorbis__comment__iterator}{drflac\_vorbis\_comment\_iterator}}*\ pIter,\ drflac\_uint32\ commentCount,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ pComments)}
\DoxyCodeLine{11987\ \{}
\DoxyCodeLine{11988\ \ \ \ \ \textcolor{keywordflow}{if}\ (pIter\ ==\ NULL)\ \{}
\DoxyCodeLine{11989\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{11990\ \ \ \ \ \}}
\DoxyCodeLine{11991\ }
\DoxyCodeLine{11992\ \ \ \ \ pIter-\/>countRemaining\ =\ commentCount;}
\DoxyCodeLine{11993\ \ \ \ \ pIter-\/>pRunningData\ \ \ =\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)pComments;}
\DoxyCodeLine{11994\ \}}
\DoxyCodeLine{11995\ }
\DoxyCodeLine{11996\ DRFLAC\_API\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ drflac\_next\_vorbis\_comment(\mbox{\hyperlink{structdrflac__vorbis__comment__iterator}{drflac\_vorbis\_comment\_iterator}}*\ pIter,\ drflac\_uint32*\ pCommentLengthOut)}
\DoxyCodeLine{11997\ \{}
\DoxyCodeLine{11998\ \ \ \ \ drflac\_int32\ length;}
\DoxyCodeLine{11999\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pComment;}
\DoxyCodeLine{12000\ }
\DoxyCodeLine{12001\ \ \ \ \ \textcolor{comment}{/*\ Safety.\ */}}
\DoxyCodeLine{12002\ \ \ \ \ \textcolor{keywordflow}{if}\ (pCommentLengthOut)\ \{}
\DoxyCodeLine{12003\ \ \ \ \ \ \ \ \ *pCommentLengthOut\ =\ 0;}
\DoxyCodeLine{12004\ \ \ \ \ \}}
\DoxyCodeLine{12005\ }
\DoxyCodeLine{12006\ \ \ \ \ \textcolor{keywordflow}{if}\ (pIter\ ==\ NULL\ ||\ pIter-\/>countRemaining\ ==\ 0\ ||\ pIter-\/>pRunningData\ ==\ NULL)\ \{}
\DoxyCodeLine{12007\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{12008\ \ \ \ \ \}}
\DoxyCodeLine{12009\ }
\DoxyCodeLine{12010\ \ \ \ \ length\ =\ drflac\_\_le2host\_32\_ptr\_unaligned(pIter-\/>pRunningData);}
\DoxyCodeLine{12011\ \ \ \ \ pIter-\/>pRunningData\ +=\ 4;}
\DoxyCodeLine{12012\ }
\DoxyCodeLine{12013\ \ \ \ \ pComment\ =\ pIter-\/>pRunningData;}
\DoxyCodeLine{12014\ \ \ \ \ pIter-\/>pRunningData\ +=\ length;}
\DoxyCodeLine{12015\ \ \ \ \ pIter-\/>countRemaining\ -\/=\ 1;}
\DoxyCodeLine{12016\ }
\DoxyCodeLine{12017\ \ \ \ \ \textcolor{keywordflow}{if}\ (pCommentLengthOut)\ \{}
\DoxyCodeLine{12018\ \ \ \ \ \ \ \ \ *pCommentLengthOut\ =\ length;}
\DoxyCodeLine{12019\ \ \ \ \ \}}
\DoxyCodeLine{12020\ }
\DoxyCodeLine{12021\ \ \ \ \ \textcolor{keywordflow}{return}\ pComment;}
\DoxyCodeLine{12022\ \}}
\DoxyCodeLine{12023\ }
\DoxyCodeLine{12024\ }
\DoxyCodeLine{12025\ }
\DoxyCodeLine{12026\ }
\DoxyCodeLine{12027\ DRFLAC\_API\ \textcolor{keywordtype}{void}\ drflac\_init\_cuesheet\_track\_iterator(\mbox{\hyperlink{structdrflac__cuesheet__track__iterator}{drflac\_cuesheet\_track\_iterator}}*\ pIter,\ drflac\_uint32\ trackCount,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ pTrackData)}
\DoxyCodeLine{12028\ \{}
\DoxyCodeLine{12029\ \ \ \ \ \textcolor{keywordflow}{if}\ (pIter\ ==\ NULL)\ \{}
\DoxyCodeLine{12030\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{12031\ \ \ \ \ \}}
\DoxyCodeLine{12032\ }
\DoxyCodeLine{12033\ \ \ \ \ pIter-\/>countRemaining\ =\ trackCount;}
\DoxyCodeLine{12034\ \ \ \ \ pIter-\/>pRunningData\ \ \ =\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)pTrackData;}
\DoxyCodeLine{12035\ \}}
\DoxyCodeLine{12036\ }
\DoxyCodeLine{12037\ DRFLAC\_API\ drflac\_bool32\ drflac\_next\_cuesheet\_track(\mbox{\hyperlink{structdrflac__cuesheet__track__iterator}{drflac\_cuesheet\_track\_iterator}}*\ pIter,\ \mbox{\hyperlink{structdrflac__cuesheet__track}{drflac\_cuesheet\_track}}*\ pCuesheetTrack)}
\DoxyCodeLine{12038\ \{}
\DoxyCodeLine{12039\ \ \ \ \ \mbox{\hyperlink{structdrflac__cuesheet__track}{drflac\_cuesheet\_track}}\ cuesheetTrack;}
\DoxyCodeLine{12040\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pRunningData;}
\DoxyCodeLine{12041\ \ \ \ \ drflac\_uint64\ offsetHi;}
\DoxyCodeLine{12042\ \ \ \ \ drflac\_uint64\ offsetLo;}
\DoxyCodeLine{12043\ }
\DoxyCodeLine{12044\ \ \ \ \ \textcolor{keywordflow}{if}\ (pIter\ ==\ NULL\ ||\ pIter-\/>countRemaining\ ==\ 0\ ||\ pIter-\/>pRunningData\ ==\ NULL)\ \{}
\DoxyCodeLine{12045\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_FALSE;}
\DoxyCodeLine{12046\ \ \ \ \ \}}
\DoxyCodeLine{12047\ }
\DoxyCodeLine{12048\ \ \ \ \ pRunningData\ =\ pIter-\/>pRunningData;}
\DoxyCodeLine{12049\ }
\DoxyCodeLine{12050\ \ \ \ \ offsetHi\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ drflac\_\_be2host\_32(*(\textcolor{keyword}{const}\ drflac\_uint32*)pRunningData);\ pRunningData\ +=\ 4;}
\DoxyCodeLine{12051\ \ \ \ \ offsetLo\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ drflac\_\_be2host\_32(*(\textcolor{keyword}{const}\ drflac\_uint32*)pRunningData);\ pRunningData\ +=\ 4;}
\DoxyCodeLine{12052\ \ \ \ \ cuesheetTrack.offset\ \ \ \ \ \ \ =\ offsetLo\ |\ (offsetHi\ <<\ 32);}
\DoxyCodeLine{12053\ \ \ \ \ cuesheetTrack.trackNumber\ \ =\ pRunningData[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ +=\ 1;}
\DoxyCodeLine{12054\ \ \ \ \ DRFLAC\_COPY\_MEMORY(cuesheetTrack.ISRC,\ pRunningData,\ \textcolor{keyword}{sizeof}(cuesheetTrack.ISRC));\ \ \ \ \ pRunningData\ +=\ 12;}
\DoxyCodeLine{12055\ \ \ \ \ cuesheetTrack.isAudio\ \ \ \ \ \ =\ (pRunningData[0]\ \&\ 0x80)\ !=\ 0;}
\DoxyCodeLine{12056\ \ \ \ \ cuesheetTrack.preEmphasis\ \ =\ (pRunningData[0]\ \&\ 0x40)\ !=\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ +=\ 14;}
\DoxyCodeLine{12057\ \ \ \ \ cuesheetTrack.indexCount\ \ \ =\ pRunningData[0];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pRunningData\ +=\ 1;}
\DoxyCodeLine{12058\ \ \ \ \ cuesheetTrack.pIndexPoints\ =\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{structdrflac__cuesheet__track__index}{drflac\_cuesheet\_track\_index}}*)pRunningData;\ \ \ \ \ \ \ \ pRunningData\ +=\ cuesheetTrack.indexCount\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structdrflac__cuesheet__track__index}{drflac\_cuesheet\_track\_index}});}
\DoxyCodeLine{12059\ }
\DoxyCodeLine{12060\ \ \ \ \ pIter-\/>pRunningData\ =\ pRunningData;}
\DoxyCodeLine{12061\ \ \ \ \ pIter-\/>countRemaining\ -\/=\ 1;}
\DoxyCodeLine{12062\ }
\DoxyCodeLine{12063\ \ \ \ \ \textcolor{keywordflow}{if}\ (pCuesheetTrack)\ \{}
\DoxyCodeLine{12064\ \ \ \ \ \ \ \ \ *pCuesheetTrack\ =\ cuesheetTrack;}
\DoxyCodeLine{12065\ \ \ \ \ \}}
\DoxyCodeLine{12066\ }
\DoxyCodeLine{12067\ \ \ \ \ \textcolor{keywordflow}{return}\ DRFLAC\_TRUE;}
\DoxyCodeLine{12068\ \}}
\DoxyCodeLine{12069\ }
\DoxyCodeLine{12070\ \textcolor{preprocessor}{\#if\ defined(\_\_clang\_\_)\ ||\ (defined(\_\_GNUC\_\_)\ \&\&\ (\_\_GNUC\_\_\ >\ 4\ ||\ (\_\_GNUC\_\_\ ==\ 4\ \&\&\ \_\_GNUC\_MINOR\_\_\ >=\ 6)))}}
\DoxyCodeLine{12071\ \textcolor{preprocessor}{\ \ \ \ \#pragma\ GCC\ diagnostic\ pop}}
\DoxyCodeLine{12072\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{12073\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{/*\ dr\_flac\_c\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{12074\ \textcolor{preprocessor}{\#endif\ \ }\textcolor{comment}{/*\ DR\_FLAC\_IMPLEMENTATION\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{12075\ }
\DoxyCodeLine{12076\ }
\DoxyCodeLine{12077\ \textcolor{comment}{/*}}
\DoxyCodeLine{12078\ \textcolor{comment}{REVISION\ HISTORY}}
\DoxyCodeLine{12079\ \textcolor{comment}{================}}
\DoxyCodeLine{12080\ \textcolor{comment}{v0.12.42\ -\/\ 2023-\/11-\/02}}
\DoxyCodeLine{12081\ \textcolor{comment}{\ \ -\/\ Fix\ build\ for\ ARMv6-\/M.}}
\DoxyCodeLine{12082\ \textcolor{comment}{\ \ -\/\ Fix\ a\ compilation\ warning\ with\ GCC.}}
\DoxyCodeLine{12083\ \textcolor{comment}{}}
\DoxyCodeLine{12084\ \textcolor{comment}{v0.12.41\ -\/\ 2023-\/06-\/17}}
\DoxyCodeLine{12085\ \textcolor{comment}{\ \ -\/\ Fix\ an\ incorrect\ date\ in\ revision\ history.\ No\ functional\ change.}}
\DoxyCodeLine{12086\ \textcolor{comment}{}}
\DoxyCodeLine{12087\ \textcolor{comment}{v0.12.40\ -\/\ 2023-\/05-\/22}}
\DoxyCodeLine{12088\ \textcolor{comment}{\ \ -\/\ Minor\ code\ restructure.\ No\ functional\ change.}}
\DoxyCodeLine{12089\ \textcolor{comment}{}}
\DoxyCodeLine{12090\ \textcolor{comment}{v0.12.39\ -\/\ 2022-\/09-\/17}}
\DoxyCodeLine{12091\ \textcolor{comment}{\ \ -\/\ Fix\ compilation\ with\ DJGPP.}}
\DoxyCodeLine{12092\ \textcolor{comment}{\ \ -\/\ Fix\ compilation\ error\ with\ Visual\ Studio\ 2019\ and\ the\ ARM\ build.}}
\DoxyCodeLine{12093\ \textcolor{comment}{\ \ -\/\ Fix\ an\ error\ with\ SSE\ 4.1\ detection.}}
\DoxyCodeLine{12094\ \textcolor{comment}{\ \ -\/\ Add\ support\ for\ disabling\ wchar\_t\ with\ DR\_WAV\_NO\_WCHAR.}}
\DoxyCodeLine{12095\ \textcolor{comment}{\ \ -\/\ Improve\ compatibility\ with\ compilers\ which\ lack\ support\ for\ explicit\ struct\ packing.}}
\DoxyCodeLine{12096\ \textcolor{comment}{\ \ -\/\ Improve\ compatibility\ with\ low-\/end\ and\ embedded\ hardware\ by\ reducing\ the\ amount\ of\ stack}}
\DoxyCodeLine{12097\ \textcolor{comment}{\ \ \ \ allocation\ when\ loading\ an\ Ogg\ encapsulated\ file.}}
\DoxyCodeLine{12098\ \textcolor{comment}{}}
\DoxyCodeLine{12099\ \textcolor{comment}{v0.12.38\ -\/\ 2022-\/04-\/10}}
\DoxyCodeLine{12100\ \textcolor{comment}{\ \ -\/\ Fix\ compilation\ error\ on\ older\ versions\ of\ GCC.}}
\DoxyCodeLine{12101\ \textcolor{comment}{}}
\DoxyCodeLine{12102\ \textcolor{comment}{v0.12.37\ -\/\ 2022-\/02-\/12}}
\DoxyCodeLine{12103\ \textcolor{comment}{\ \ -\/\ Improve\ ARM\ detection.}}
\DoxyCodeLine{12104\ \textcolor{comment}{}}
\DoxyCodeLine{12105\ \textcolor{comment}{v0.12.36\ -\/\ 2022-\/02-\/07}}
\DoxyCodeLine{12106\ \textcolor{comment}{\ \ -\/\ Fix\ a\ compilation\ error\ with\ the\ ARM\ build.}}
\DoxyCodeLine{12107\ \textcolor{comment}{}}
\DoxyCodeLine{12108\ \textcolor{comment}{v0.12.35\ -\/\ 2022-\/02-\/06}}
\DoxyCodeLine{12109\ \textcolor{comment}{\ \ -\/\ Fix\ a\ bug\ due\ to\ underestimating\ the\ amount\ of\ precision\ required\ for\ the\ prediction\ stage.}}
\DoxyCodeLine{12110\ \textcolor{comment}{\ \ -\/\ Fix\ some\ bugs\ found\ from\ fuzz\ testing.}}
\DoxyCodeLine{12111\ \textcolor{comment}{}}
\DoxyCodeLine{12112\ \textcolor{comment}{v0.12.34\ -\/\ 2022-\/01-\/07}}
\DoxyCodeLine{12113\ \textcolor{comment}{\ \ -\/\ Fix\ some\ misalignment\ bugs\ when\ reading\ metadata.}}
\DoxyCodeLine{12114\ \textcolor{comment}{}}
\DoxyCodeLine{12115\ \textcolor{comment}{v0.12.33\ -\/\ 2021-\/12-\/22}}
\DoxyCodeLine{12116\ \textcolor{comment}{\ \ -\/\ Fix\ a\ bug\ with\ seeking\ when\ the\ seek\ table\ does\ not\ start\ at\ PCM\ frame\ 0.}}
\DoxyCodeLine{12117\ \textcolor{comment}{}}
\DoxyCodeLine{12118\ \textcolor{comment}{v0.12.32\ -\/\ 2021-\/12-\/11}}
\DoxyCodeLine{12119\ \textcolor{comment}{\ \ -\/\ Fix\ a\ warning\ with\ Clang.}}
\DoxyCodeLine{12120\ \textcolor{comment}{}}
\DoxyCodeLine{12121\ \textcolor{comment}{v0.12.31\ -\/\ 2021-\/08-\/16}}
\DoxyCodeLine{12122\ \textcolor{comment}{\ \ -\/\ Silence\ some\ warnings.}}
\DoxyCodeLine{12123\ \textcolor{comment}{}}
\DoxyCodeLine{12124\ \textcolor{comment}{v0.12.30\ -\/\ 2021-\/07-\/31}}
\DoxyCodeLine{12125\ \textcolor{comment}{\ \ -\/\ Fix\ platform\ detection\ for\ ARM64.}}
\DoxyCodeLine{12126\ \textcolor{comment}{}}
\DoxyCodeLine{12127\ \textcolor{comment}{v0.12.29\ -\/\ 2021-\/04-\/02}}
\DoxyCodeLine{12128\ \textcolor{comment}{\ \ -\/\ Fix\ a\ bug\ where\ the\ running\ PCM\ frame\ index\ is\ set\ to\ an\ invalid\ value\ when\ over-\/seeking.}}
\DoxyCodeLine{12129\ \textcolor{comment}{\ \ -\/\ Fix\ a\ decoding\ error\ due\ to\ an\ incorrect\ validation\ check.}}
\DoxyCodeLine{12130\ \textcolor{comment}{}}
\DoxyCodeLine{12131\ \textcolor{comment}{v0.12.28\ -\/\ 2021-\/02-\/21}}
\DoxyCodeLine{12132\ \textcolor{comment}{\ \ -\/\ Fix\ a\ warning\ due\ to\ referencing\ \_MSC\_VER\ when\ it\ is\ undefined.}}
\DoxyCodeLine{12133\ \textcolor{comment}{}}
\DoxyCodeLine{12134\ \textcolor{comment}{v0.12.27\ -\/\ 2021-\/01-\/31}}
\DoxyCodeLine{12135\ \textcolor{comment}{\ \ -\/\ Fix\ a\ static\ analysis\ warning.}}
\DoxyCodeLine{12136\ \textcolor{comment}{}}
\DoxyCodeLine{12137\ \textcolor{comment}{v0.12.26\ -\/\ 2021-\/01-\/17}}
\DoxyCodeLine{12138\ \textcolor{comment}{\ \ -\/\ Fix\ a\ compilation\ warning\ due\ to\ \_BSD\_SOURCE\ being\ deprecated.}}
\DoxyCodeLine{12139\ \textcolor{comment}{}}
\DoxyCodeLine{12140\ \textcolor{comment}{v0.12.25\ -\/\ 2020-\/12-\/26}}
\DoxyCodeLine{12141\ \textcolor{comment}{\ \ -\/\ Update\ documentation.}}
\DoxyCodeLine{12142\ \textcolor{comment}{}}
\DoxyCodeLine{12143\ \textcolor{comment}{v0.12.24\ -\/\ 2020-\/11-\/29}}
\DoxyCodeLine{12144\ \textcolor{comment}{\ \ -\/\ Fix\ ARM64/NEON\ detection\ when\ compiling\ with\ MSVC.}}
\DoxyCodeLine{12145\ \textcolor{comment}{}}
\DoxyCodeLine{12146\ \textcolor{comment}{v0.12.23\ -\/\ 2020-\/11-\/21}}
\DoxyCodeLine{12147\ \textcolor{comment}{\ \ -\/\ Fix\ compilation\ with\ OpenWatcom.}}
\DoxyCodeLine{12148\ \textcolor{comment}{}}
\DoxyCodeLine{12149\ \textcolor{comment}{v0.12.22\ -\/\ 2020-\/11-\/01}}
\DoxyCodeLine{12150\ \textcolor{comment}{\ \ -\/\ Fix\ an\ error\ with\ the\ previous\ release.}}
\DoxyCodeLine{12151\ \textcolor{comment}{}}
\DoxyCodeLine{12152\ \textcolor{comment}{v0.12.21\ -\/\ 2020-\/11-\/01}}
\DoxyCodeLine{12153\ \textcolor{comment}{\ \ -\/\ Fix\ a\ possible\ deadlock\ when\ seeking.}}
\DoxyCodeLine{12154\ \textcolor{comment}{\ \ -\/\ Improve\ compiler\ support\ for\ older\ versions\ of\ GCC.}}
\DoxyCodeLine{12155\ \textcolor{comment}{}}
\DoxyCodeLine{12156\ \textcolor{comment}{v0.12.20\ -\/\ 2020-\/09-\/08}}
\DoxyCodeLine{12157\ \textcolor{comment}{\ \ -\/\ Fix\ a\ compilation\ error\ on\ older\ compilers.}}
\DoxyCodeLine{12158\ \textcolor{comment}{}}
\DoxyCodeLine{12159\ \textcolor{comment}{v0.12.19\ -\/\ 2020-\/08-\/30}}
\DoxyCodeLine{12160\ \textcolor{comment}{\ \ -\/\ Fix\ a\ bug\ due\ to\ an\ undefined\ 32-\/bit\ shift.}}
\DoxyCodeLine{12161\ \textcolor{comment}{}}
\DoxyCodeLine{12162\ \textcolor{comment}{v0.12.18\ -\/\ 2020-\/08-\/14}}
\DoxyCodeLine{12163\ \textcolor{comment}{\ \ -\/\ Fix\ a\ crash\ when\ compiling\ with\ clang-\/cl.}}
\DoxyCodeLine{12164\ \textcolor{comment}{}}
\DoxyCodeLine{12165\ \textcolor{comment}{v0.12.17\ -\/\ 2020-\/08-\/02}}
\DoxyCodeLine{12166\ \textcolor{comment}{\ \ -\/\ Simplify\ sized\ types.}}
\DoxyCodeLine{12167\ \textcolor{comment}{}}
\DoxyCodeLine{12168\ \textcolor{comment}{v0.12.16\ -\/\ 2020-\/07-\/25}}
\DoxyCodeLine{12169\ \textcolor{comment}{\ \ -\/\ Fix\ a\ compilation\ warning.}}
\DoxyCodeLine{12170\ \textcolor{comment}{}}
\DoxyCodeLine{12171\ \textcolor{comment}{v0.12.15\ -\/\ 2020-\/07-\/06}}
\DoxyCodeLine{12172\ \textcolor{comment}{\ \ -\/\ Check\ for\ negative\ LPC\ shifts\ and\ return\ an\ error.}}
\DoxyCodeLine{12173\ \textcolor{comment}{}}
\DoxyCodeLine{12174\ \textcolor{comment}{v0.12.14\ -\/\ 2020-\/06-\/23}}
\DoxyCodeLine{12175\ \textcolor{comment}{\ \ -\/\ Add\ include\ guard\ for\ the\ implementation\ section.}}
\DoxyCodeLine{12176\ \textcolor{comment}{}}
\DoxyCodeLine{12177\ \textcolor{comment}{v0.12.13\ -\/\ 2020-\/05-\/16}}
\DoxyCodeLine{12178\ \textcolor{comment}{\ \ -\/\ Add\ compile-\/time\ and\ run-\/time\ version\ querying.}}
\DoxyCodeLine{12179\ \textcolor{comment}{\ \ \ \ -\/\ DRFLAC\_VERSION\_MINOR}}
\DoxyCodeLine{12180\ \textcolor{comment}{\ \ \ \ -\/\ DRFLAC\_VERSION\_MAJOR}}
\DoxyCodeLine{12181\ \textcolor{comment}{\ \ \ \ -\/\ DRFLAC\_VERSION\_REVISION}}
\DoxyCodeLine{12182\ \textcolor{comment}{\ \ \ \ -\/\ DRFLAC\_VERSION\_STRING}}
\DoxyCodeLine{12183\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_version()}}
\DoxyCodeLine{12184\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_version\_string()}}
\DoxyCodeLine{12185\ \textcolor{comment}{}}
\DoxyCodeLine{12186\ \textcolor{comment}{v0.12.12\ -\/\ 2020-\/04-\/30}}
\DoxyCodeLine{12187\ \textcolor{comment}{\ \ -\/\ Fix\ compilation\ errors\ with\ VC6.}}
\DoxyCodeLine{12188\ \textcolor{comment}{}}
\DoxyCodeLine{12189\ \textcolor{comment}{v0.12.11\ -\/\ 2020-\/04-\/19}}
\DoxyCodeLine{12190\ \textcolor{comment}{\ \ -\/\ Fix\ some\ pedantic\ warnings.}}
\DoxyCodeLine{12191\ \textcolor{comment}{\ \ -\/\ Fix\ some\ undefined\ behaviour\ warnings.}}
\DoxyCodeLine{12192\ \textcolor{comment}{}}
\DoxyCodeLine{12193\ \textcolor{comment}{v0.12.10\ -\/\ 2020-\/04-\/10}}
\DoxyCodeLine{12194\ \textcolor{comment}{\ \ -\/\ Fix\ some\ bugs\ when\ trying\ to\ seek\ with\ an\ invalid\ seek\ table.}}
\DoxyCodeLine{12195\ \textcolor{comment}{}}
\DoxyCodeLine{12196\ \textcolor{comment}{v0.12.9\ -\/\ 2020-\/04-\/05}}
\DoxyCodeLine{12197\ \textcolor{comment}{\ \ -\/\ Fix\ warnings.}}
\DoxyCodeLine{12198\ \textcolor{comment}{}}
\DoxyCodeLine{12199\ \textcolor{comment}{v0.12.8\ -\/\ 2020-\/04-\/04}}
\DoxyCodeLine{12200\ \textcolor{comment}{\ \ -\/\ Add\ drflac\_open\_file\_w()\ and\ drflac\_open\_file\_with\_metadata\_w().}}
\DoxyCodeLine{12201\ \textcolor{comment}{\ \ -\/\ Fix\ some\ static\ analysis\ warnings.}}
\DoxyCodeLine{12202\ \textcolor{comment}{\ \ -\/\ Minor\ documentation\ updates.}}
\DoxyCodeLine{12203\ \textcolor{comment}{}}
\DoxyCodeLine{12204\ \textcolor{comment}{v0.12.7\ -\/\ 2020-\/03-\/14}}
\DoxyCodeLine{12205\ \textcolor{comment}{\ \ -\/\ Fix\ compilation\ errors\ with\ VC6.}}
\DoxyCodeLine{12206\ \textcolor{comment}{}}
\DoxyCodeLine{12207\ \textcolor{comment}{v0.12.6\ -\/\ 2020-\/03-\/07}}
\DoxyCodeLine{12208\ \textcolor{comment}{\ \ -\/\ Fix\ compilation\ error\ with\ Visual\ Studio\ .NET\ 2003.}}
\DoxyCodeLine{12209\ \textcolor{comment}{}}
\DoxyCodeLine{12210\ \textcolor{comment}{v0.12.5\ -\/\ 2020-\/01-\/30}}
\DoxyCodeLine{12211\ \textcolor{comment}{\ \ -\/\ Silence\ some\ static\ analysis\ warnings.}}
\DoxyCodeLine{12212\ \textcolor{comment}{}}
\DoxyCodeLine{12213\ \textcolor{comment}{v0.12.4\ -\/\ 2020-\/01-\/29}}
\DoxyCodeLine{12214\ \textcolor{comment}{\ \ -\/\ Silence\ some\ static\ analysis\ warnings.}}
\DoxyCodeLine{12215\ \textcolor{comment}{}}
\DoxyCodeLine{12216\ \textcolor{comment}{v0.12.3\ -\/\ 2019-\/12-\/02}}
\DoxyCodeLine{12217\ \textcolor{comment}{\ \ -\/\ Fix\ some\ warnings\ when\ compiling\ with\ GCC\ and\ the\ -\/Og\ flag.}}
\DoxyCodeLine{12218\ \textcolor{comment}{\ \ -\/\ Fix\ a\ crash\ in\ out-\/of-\/memory\ situations.}}
\DoxyCodeLine{12219\ \textcolor{comment}{\ \ -\/\ Fix\ potential\ integer\ overflow\ bug.}}
\DoxyCodeLine{12220\ \textcolor{comment}{\ \ -\/\ Fix\ some\ static\ analysis\ warnings.}}
\DoxyCodeLine{12221\ \textcolor{comment}{\ \ -\/\ Fix\ a\ possible\ crash\ when\ using\ custom\ memory\ allocators\ without\ a\ custom\ realloc()\ implementation.}}
\DoxyCodeLine{12222\ \textcolor{comment}{\ \ -\/\ Fix\ a\ bug\ with\ binary\ search\ seeking\ where\ the\ bits\ per\ sample\ is\ not\ a\ multiple\ of\ 8.}}
\DoxyCodeLine{12223\ \textcolor{comment}{}}
\DoxyCodeLine{12224\ \textcolor{comment}{v0.12.2\ -\/\ 2019-\/10-\/07}}
\DoxyCodeLine{12225\ \textcolor{comment}{\ \ -\/\ Internal\ code\ clean\ up.}}
\DoxyCodeLine{12226\ \textcolor{comment}{}}
\DoxyCodeLine{12227\ \textcolor{comment}{v0.12.1\ -\/\ 2019-\/09-\/29}}
\DoxyCodeLine{12228\ \textcolor{comment}{\ \ -\/\ Fix\ some\ Clang\ Static\ Analyzer\ warnings.}}
\DoxyCodeLine{12229\ \textcolor{comment}{\ \ -\/\ Fix\ an\ unused\ variable\ warning.}}
\DoxyCodeLine{12230\ \textcolor{comment}{}}
\DoxyCodeLine{12231\ \textcolor{comment}{v0.12.0\ -\/\ 2019-\/09-\/23}}
\DoxyCodeLine{12232\ \textcolor{comment}{\ \ -\/\ API\ CHANGE:\ Add\ support\ for\ user\ defined\ memory\ allocation\ routines.\ This\ system\ allows\ the\ program\ to\ specify\ their\ own\ memory\ allocation}}
\DoxyCodeLine{12233\ \textcolor{comment}{\ \ \ \ routines\ with\ a\ user\ data\ pointer\ for\ client-\/specific\ contextual\ data.\ This\ adds\ an\ extra\ parameter\ to\ the\ end\ of\ the\ following\ APIs:}}
\DoxyCodeLine{12234\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open()}}
\DoxyCodeLine{12235\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_relaxed()}}
\DoxyCodeLine{12236\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_with\_metadata()}}
\DoxyCodeLine{12237\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_with\_metadata\_relaxed()}}
\DoxyCodeLine{12238\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_file()}}
\DoxyCodeLine{12239\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_file\_with\_metadata()}}
\DoxyCodeLine{12240\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_memory()}}
\DoxyCodeLine{12241\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_memory\_with\_metadata()}}
\DoxyCodeLine{12242\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_and\_read\_pcm\_frames\_s32()}}
\DoxyCodeLine{12243\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_and\_read\_pcm\_frames\_s16()}}
\DoxyCodeLine{12244\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_and\_read\_pcm\_frames\_f32()}}
\DoxyCodeLine{12245\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_file\_and\_read\_pcm\_frames\_s32()}}
\DoxyCodeLine{12246\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_file\_and\_read\_pcm\_frames\_s16()}}
\DoxyCodeLine{12247\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_file\_and\_read\_pcm\_frames\_f32()}}
\DoxyCodeLine{12248\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_memory\_and\_read\_pcm\_frames\_s32()}}
\DoxyCodeLine{12249\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_memory\_and\_read\_pcm\_frames\_s16()}}
\DoxyCodeLine{12250\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_memory\_and\_read\_pcm\_frames\_f32()}}
\DoxyCodeLine{12251\ \textcolor{comment}{\ \ \ \ Set\ this\ extra\ parameter\ to\ NULL\ to\ use\ defaults\ which\ is\ the\ same\ as\ the\ previous\ behaviour.\ Setting\ this\ NULL\ will\ use}}
\DoxyCodeLine{12252\ \textcolor{comment}{\ \ \ \ DRFLAC\_MALLOC,\ DRFLAC\_REALLOC\ and\ DRFLAC\_FREE.}}
\DoxyCodeLine{12253\ \textcolor{comment}{\ \ -\/\ Remove\ deprecated\ APIs:}}
\DoxyCodeLine{12254\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_read\_s32()}}
\DoxyCodeLine{12255\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_read\_s16()}}
\DoxyCodeLine{12256\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_read\_f32()}}
\DoxyCodeLine{12257\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_seek\_to\_sample()}}
\DoxyCodeLine{12258\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_and\_decode\_s32()}}
\DoxyCodeLine{12259\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_and\_decode\_s16()}}
\DoxyCodeLine{12260\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_and\_decode\_f32()}}
\DoxyCodeLine{12261\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_and\_decode\_file\_s32()}}
\DoxyCodeLine{12262\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_and\_decode\_file\_s16()}}
\DoxyCodeLine{12263\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_and\_decode\_file\_f32()}}
\DoxyCodeLine{12264\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_and\_decode\_memory\_s32()}}
\DoxyCodeLine{12265\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_and\_decode\_memory\_s16()}}
\DoxyCodeLine{12266\ \textcolor{comment}{\ \ \ \ -\/\ drflac\_open\_and\_decode\_memory\_f32()}}
\DoxyCodeLine{12267\ \textcolor{comment}{\ \ -\/\ Remove\ drflac.totalSampleCount\ which\ is\ now\ replaced\ with\ drflac.totalPCMFrameCount.\ You\ can\ emulate\ drflac.totalSampleCount}}
\DoxyCodeLine{12268\ \textcolor{comment}{\ \ \ \ by\ doing\ pFlac-\/>totalPCMFrameCount*pFlac-\/>channels.}}
\DoxyCodeLine{12269\ \textcolor{comment}{\ \ -\/\ Rename\ drflac.currentFrame\ to\ drflac.currentFLACFrame\ to\ remove\ ambiguity\ with\ PCM\ frames.}}
\DoxyCodeLine{12270\ \textcolor{comment}{\ \ -\/\ Fix\ errors\ when\ seeking\ to\ the\ end\ of\ a\ stream.}}
\DoxyCodeLine{12271\ \textcolor{comment}{\ \ -\/\ Optimizations\ to\ seeking.}}
\DoxyCodeLine{12272\ \textcolor{comment}{\ \ -\/\ SSE\ improvements\ and\ optimizations.}}
\DoxyCodeLine{12273\ \textcolor{comment}{\ \ -\/\ ARM\ NEON\ optimizations.}}
\DoxyCodeLine{12274\ \textcolor{comment}{\ \ -\/\ Optimizations\ to\ drflac\_read\_pcm\_frames\_s16().}}
\DoxyCodeLine{12275\ \textcolor{comment}{\ \ -\/\ Optimizations\ to\ drflac\_read\_pcm\_frames\_s32().}}
\DoxyCodeLine{12276\ \textcolor{comment}{}}
\DoxyCodeLine{12277\ \textcolor{comment}{v0.11.10\ -\/\ 2019-\/06-\/26}}
\DoxyCodeLine{12278\ \textcolor{comment}{\ \ -\/\ Fix\ a\ compiler\ error.}}
\DoxyCodeLine{12279\ \textcolor{comment}{}}
\DoxyCodeLine{12280\ \textcolor{comment}{v0.11.9\ -\/\ 2019-\/06-\/16}}
\DoxyCodeLine{12281\ \textcolor{comment}{\ \ -\/\ Silence\ some\ ThreadSanitizer\ warnings.}}
\DoxyCodeLine{12282\ \textcolor{comment}{}}
\DoxyCodeLine{12283\ \textcolor{comment}{v0.11.8\ -\/\ 2019-\/05-\/21}}
\DoxyCodeLine{12284\ \textcolor{comment}{\ \ -\/\ Fix\ warnings.}}
\DoxyCodeLine{12285\ \textcolor{comment}{}}
\DoxyCodeLine{12286\ \textcolor{comment}{v0.11.7\ -\/\ 2019-\/05-\/06}}
\DoxyCodeLine{12287\ \textcolor{comment}{\ \ -\/\ C89\ fixes.}}
\DoxyCodeLine{12288\ \textcolor{comment}{}}
\DoxyCodeLine{12289\ \textcolor{comment}{v0.11.6\ -\/\ 2019-\/05-\/05}}
\DoxyCodeLine{12290\ \textcolor{comment}{\ \ -\/\ Add\ support\ for\ C89.}}
\DoxyCodeLine{12291\ \textcolor{comment}{\ \ -\/\ Fix\ a\ compiler\ warning\ when\ CRC\ is\ disabled.}}
\DoxyCodeLine{12292\ \textcolor{comment}{\ \ -\/\ Change\ license\ to\ choice\ of\ public\ domain\ or\ MIT-\/0.}}
\DoxyCodeLine{12293\ \textcolor{comment}{}}
\DoxyCodeLine{12294\ \textcolor{comment}{v0.11.5\ -\/\ 2019-\/04-\/19}}
\DoxyCodeLine{12295\ \textcolor{comment}{\ \ -\/\ Fix\ a\ compiler\ error\ with\ GCC.}}
\DoxyCodeLine{12296\ \textcolor{comment}{}}
\DoxyCodeLine{12297\ \textcolor{comment}{v0.11.4\ -\/\ 2019-\/04-\/17}}
\DoxyCodeLine{12298\ \textcolor{comment}{\ \ -\/\ Fix\ some\ warnings\ with\ GCC\ when\ compiling\ with\ -\/std=c99.}}
\DoxyCodeLine{12299\ \textcolor{comment}{}}
\DoxyCodeLine{12300\ \textcolor{comment}{v0.11.3\ -\/\ 2019-\/04-\/07}}
\DoxyCodeLine{12301\ \textcolor{comment}{\ \ -\/\ Silence\ warnings\ with\ GCC.}}
\DoxyCodeLine{12302\ \textcolor{comment}{}}
\DoxyCodeLine{12303\ \textcolor{comment}{v0.11.2\ -\/\ 2019-\/03-\/10}}
\DoxyCodeLine{12304\ \textcolor{comment}{\ \ -\/\ Fix\ a\ warning.}}
\DoxyCodeLine{12305\ \textcolor{comment}{}}
\DoxyCodeLine{12306\ \textcolor{comment}{v0.11.1\ -\/\ 2019-\/02-\/17}}
\DoxyCodeLine{12307\ \textcolor{comment}{\ \ -\/\ Fix\ a\ potential\ bug\ with\ seeking.}}
\DoxyCodeLine{12308\ \textcolor{comment}{}}
\DoxyCodeLine{12309\ \textcolor{comment}{v0.11.0\ -\/\ 2018-\/12-\/16}}
\DoxyCodeLine{12310\ \textcolor{comment}{\ \ -\/\ API\ CHANGE:\ Deprecated\ drflac\_read\_s32(),\ drflac\_read\_s16()\ and\ drflac\_read\_f32()\ and\ replaced\ them\ with}}
\DoxyCodeLine{12311\ \textcolor{comment}{\ \ \ \ drflac\_read\_pcm\_frames\_s32(),\ drflac\_read\_pcm\_frames\_s16()\ and\ drflac\_read\_pcm\_frames\_f32().\ The\ new\ APIs\ take}}
\DoxyCodeLine{12312\ \textcolor{comment}{\ \ \ \ and\ return\ PCM\ frame\ counts\ instead\ of\ sample\ counts.\ To\ upgrade\ you\ will\ need\ to\ change\ the\ input\ count\ by}}
\DoxyCodeLine{12313\ \textcolor{comment}{\ \ \ \ dividing\ it\ by\ the\ channel\ count,\ and\ then\ do\ the\ same\ with\ the\ return\ value.}}
\DoxyCodeLine{12314\ \textcolor{comment}{\ \ -\/\ API\_CHANGE:\ Deprecated\ drflac\_seek\_to\_sample()\ and\ replaced\ with\ drflac\_seek\_to\_pcm\_frame().\ Same\ rules\ as}}
\DoxyCodeLine{12315\ \textcolor{comment}{\ \ \ \ the\ changes\ to\ drflac\_read\_*()\ apply.}}
\DoxyCodeLine{12316\ \textcolor{comment}{\ \ -\/\ API\ CHANGE:\ Deprecated\ drflac\_open\_and\_decode\_*()\ and\ replaced\ with\ drflac\_open\_*\_and\_read\_*().\ Same\ rules\ as}}
\DoxyCodeLine{12317\ \textcolor{comment}{\ \ \ \ the\ changes\ to\ drflac\_read\_*()\ apply.}}
\DoxyCodeLine{12318\ \textcolor{comment}{\ \ -\/\ Optimizations.}}
\DoxyCodeLine{12319\ \textcolor{comment}{}}
\DoxyCodeLine{12320\ \textcolor{comment}{v0.10.0\ -\/\ 2018-\/09-\/11}}
\DoxyCodeLine{12321\ \textcolor{comment}{\ \ -\/\ Remove\ the\ DR\_FLAC\_NO\_WIN32\_IO\ option\ and\ the\ Win32\ file\ IO\ functionality.\ If\ you\ need\ to\ use\ Win32\ file\ IO\ you}}
\DoxyCodeLine{12322\ \textcolor{comment}{\ \ \ \ need\ to\ do\ it\ yourself\ via\ the\ callback\ API.}}
\DoxyCodeLine{12323\ \textcolor{comment}{\ \ -\/\ Fix\ the\ clang\ build.}}
\DoxyCodeLine{12324\ \textcolor{comment}{\ \ -\/\ Fix\ undefined\ behavior.}}
\DoxyCodeLine{12325\ \textcolor{comment}{\ \ -\/\ Fix\ errors\ with\ CUESHEET\ metdata\ blocks.}}
\DoxyCodeLine{12326\ \textcolor{comment}{\ \ -\/\ Add\ an\ API\ for\ iterating\ over\ each\ cuesheet\ track\ in\ the\ CUESHEET\ metadata\ block.\ This\ works\ the\ same\ way\ as\ the}}
\DoxyCodeLine{12327\ \textcolor{comment}{\ \ \ \ Vorbis\ comment\ API.}}
\DoxyCodeLine{12328\ \textcolor{comment}{\ \ -\/\ Other\ miscellaneous\ bug\ fixes,\ mostly\ relating\ to\ invalid\ FLAC\ streams.}}
\DoxyCodeLine{12329\ \textcolor{comment}{\ \ -\/\ Minor\ optimizations.}}
\DoxyCodeLine{12330\ \textcolor{comment}{}}
\DoxyCodeLine{12331\ \textcolor{comment}{v0.9.11\ -\/\ 2018-\/08-\/29}}
\DoxyCodeLine{12332\ \textcolor{comment}{\ \ -\/\ Fix\ a\ bug\ with\ sample\ reconstruction.}}
\DoxyCodeLine{12333\ \textcolor{comment}{}}
\DoxyCodeLine{12334\ \textcolor{comment}{v0.9.10\ -\/\ 2018-\/08-\/07}}
\DoxyCodeLine{12335\ \textcolor{comment}{\ \ -\/\ Improve\ 64-\/bit\ detection.}}
\DoxyCodeLine{12336\ \textcolor{comment}{}}
\DoxyCodeLine{12337\ \textcolor{comment}{v0.9.9\ -\/\ 2018-\/08-\/05}}
\DoxyCodeLine{12338\ \textcolor{comment}{\ \ -\/\ Fix\ C++\ build\ on\ older\ versions\ of\ GCC.}}
\DoxyCodeLine{12339\ \textcolor{comment}{}}
\DoxyCodeLine{12340\ \textcolor{comment}{v0.9.8\ -\/\ 2018-\/07-\/24}}
\DoxyCodeLine{12341\ \textcolor{comment}{\ \ -\/\ Fix\ compilation\ errors.}}
\DoxyCodeLine{12342\ \textcolor{comment}{}}
\DoxyCodeLine{12343\ \textcolor{comment}{v0.9.7\ -\/\ 2018-\/07-\/05}}
\DoxyCodeLine{12344\ \textcolor{comment}{\ \ -\/\ Fix\ a\ warning.}}
\DoxyCodeLine{12345\ \textcolor{comment}{}}
\DoxyCodeLine{12346\ \textcolor{comment}{v0.9.6\ -\/\ 2018-\/06-\/29}}
\DoxyCodeLine{12347\ \textcolor{comment}{\ \ -\/\ Fix\ some\ typos.}}
\DoxyCodeLine{12348\ \textcolor{comment}{}}
\DoxyCodeLine{12349\ \textcolor{comment}{v0.9.5\ -\/\ 2018-\/06-\/23}}
\DoxyCodeLine{12350\ \textcolor{comment}{\ \ -\/\ Fix\ some\ warnings.}}
\DoxyCodeLine{12351\ \textcolor{comment}{}}
\DoxyCodeLine{12352\ \textcolor{comment}{v0.9.4\ -\/\ 2018-\/06-\/14}}
\DoxyCodeLine{12353\ \textcolor{comment}{\ \ -\/\ Optimizations\ to\ seeking.}}
\DoxyCodeLine{12354\ \textcolor{comment}{\ \ -\/\ Clean\ up.}}
\DoxyCodeLine{12355\ \textcolor{comment}{}}
\DoxyCodeLine{12356\ \textcolor{comment}{v0.9.3\ -\/\ 2018-\/05-\/22}}
\DoxyCodeLine{12357\ \textcolor{comment}{\ \ -\/\ Bug\ fix.}}
\DoxyCodeLine{12358\ \textcolor{comment}{}}
\DoxyCodeLine{12359\ \textcolor{comment}{v0.9.2\ -\/\ 2018-\/05-\/12}}
\DoxyCodeLine{12360\ \textcolor{comment}{\ \ -\/\ Fix\ a\ compilation\ error\ due\ to\ a\ missing\ break\ statement.}}
\DoxyCodeLine{12361\ \textcolor{comment}{}}
\DoxyCodeLine{12362\ \textcolor{comment}{v0.9.1\ -\/\ 2018-\/04-\/29}}
\DoxyCodeLine{12363\ \textcolor{comment}{\ \ -\/\ Fix\ compilation\ error\ with\ Clang.}}
\DoxyCodeLine{12364\ \textcolor{comment}{}}
\DoxyCodeLine{12365\ \textcolor{comment}{v0.9\ -\/\ 2018-\/04-\/24}}
\DoxyCodeLine{12366\ \textcolor{comment}{\ \ -\/\ Fix\ Clang\ build.}}
\DoxyCodeLine{12367\ \textcolor{comment}{\ \ -\/\ Start\ using\ major.minor.revision\ versioning.}}
\DoxyCodeLine{12368\ \textcolor{comment}{}}
\DoxyCodeLine{12369\ \textcolor{comment}{v0.8g\ -\/\ 2018-\/04-\/19}}
\DoxyCodeLine{12370\ \textcolor{comment}{\ \ -\/\ Fix\ build\ on\ non-\/x86/x64\ architectures.}}
\DoxyCodeLine{12371\ \textcolor{comment}{}}
\DoxyCodeLine{12372\ \textcolor{comment}{v0.8f\ -\/\ 2018-\/02-\/02}}
\DoxyCodeLine{12373\ \textcolor{comment}{\ \ -\/\ Stop\ pretending\ to\ support\ changing\ rate/channels\ mid\ stream.}}
\DoxyCodeLine{12374\ \textcolor{comment}{}}
\DoxyCodeLine{12375\ \textcolor{comment}{v0.8e\ -\/\ 2018-\/02-\/01}}
\DoxyCodeLine{12376\ \textcolor{comment}{\ \ -\/\ Fix\ a\ crash\ when\ the\ block\ size\ of\ a\ frame\ is\ larger\ than\ the\ maximum\ block\ size\ defined\ by\ the\ FLAC\ stream.}}
\DoxyCodeLine{12377\ \textcolor{comment}{\ \ -\/\ Fix\ a\ crash\ the\ the\ Rice\ partition\ order\ is\ invalid.}}
\DoxyCodeLine{12378\ \textcolor{comment}{}}
\DoxyCodeLine{12379\ \textcolor{comment}{v0.8d\ -\/\ 2017-\/09-\/22}}
\DoxyCodeLine{12380\ \textcolor{comment}{\ \ -\/\ Add\ support\ for\ decoding\ streams\ with\ ID3\ tags.\ ID3\ tags\ are\ just\ skipped.}}
\DoxyCodeLine{12381\ \textcolor{comment}{}}
\DoxyCodeLine{12382\ \textcolor{comment}{v0.8c\ -\/\ 2017-\/09-\/07}}
\DoxyCodeLine{12383\ \textcolor{comment}{\ \ -\/\ Fix\ warning\ on\ non-\/x86/x64\ architectures.}}
\DoxyCodeLine{12384\ \textcolor{comment}{}}
\DoxyCodeLine{12385\ \textcolor{comment}{v0.8b\ -\/\ 2017-\/08-\/19}}
\DoxyCodeLine{12386\ \textcolor{comment}{\ \ -\/\ Fix\ build\ on\ non-\/x86/x64\ architectures.}}
\DoxyCodeLine{12387\ \textcolor{comment}{}}
\DoxyCodeLine{12388\ \textcolor{comment}{v0.8a\ -\/\ 2017-\/08-\/13}}
\DoxyCodeLine{12389\ \textcolor{comment}{\ \ -\/\ A\ small\ optimization\ for\ the\ Clang\ build.}}
\DoxyCodeLine{12390\ \textcolor{comment}{}}
\DoxyCodeLine{12391\ \textcolor{comment}{v0.8\ -\/\ 2017-\/08-\/12}}
\DoxyCodeLine{12392\ \textcolor{comment}{\ \ -\/\ API\ CHANGE:\ Rename\ dr\_*\ types\ to\ drflac\_*.}}
\DoxyCodeLine{12393\ \textcolor{comment}{\ \ -\/\ Optimizations.\ This\ brings\ dr\_flac\ back\ to\ about\ the\ same\ class\ of\ efficiency\ as\ the\ reference\ implementation.}}
\DoxyCodeLine{12394\ \textcolor{comment}{\ \ -\/\ Add\ support\ for\ custom\ implementations\ of\ malloc(),\ realloc(),\ etc.}}
\DoxyCodeLine{12395\ \textcolor{comment}{\ \ -\/\ Add\ CRC\ checking\ to\ Ogg\ encapsulated\ streams.}}
\DoxyCodeLine{12396\ \textcolor{comment}{\ \ -\/\ Fix\ VC++\ 6\ build.\ This\ is\ only\ for\ the\ C++\ compiler.\ The\ C\ compiler\ is\ not\ currently\ supported.}}
\DoxyCodeLine{12397\ \textcolor{comment}{\ \ -\/\ Bug\ fixes.}}
\DoxyCodeLine{12398\ \textcolor{comment}{}}
\DoxyCodeLine{12399\ \textcolor{comment}{v0.7\ -\/\ 2017-\/07-\/23}}
\DoxyCodeLine{12400\ \textcolor{comment}{\ \ -\/\ Add\ support\ for\ opening\ a\ stream\ without\ a\ header\ block.\ To\ do\ this,\ use\ drflac\_open\_relaxed()\ /\ drflac\_open\_with\_metadata\_relaxed().}}
\DoxyCodeLine{12401\ \textcolor{comment}{}}
\DoxyCodeLine{12402\ \textcolor{comment}{v0.6\ -\/\ 2017-\/07-\/22}}
\DoxyCodeLine{12403\ \textcolor{comment}{\ \ -\/\ Add\ support\ for\ recovering\ from\ invalid\ frames.\ With\ this\ change,\ dr\_flac\ will\ simply\ skip\ over\ invalid\ frames\ as\ if\ they}}
\DoxyCodeLine{12404\ \textcolor{comment}{\ \ \ \ never\ existed.\ Frames\ are\ checked\ against\ their\ sync\ code,\ the\ CRC-\/8\ of\ the\ frame\ header\ and\ the\ CRC-\/16\ of\ the\ whole\ frame.}}
\DoxyCodeLine{12405\ \textcolor{comment}{}}
\DoxyCodeLine{12406\ \textcolor{comment}{v0.5\ -\/\ 2017-\/07-\/16}}
\DoxyCodeLine{12407\ \textcolor{comment}{\ \ -\/\ Fix\ typos.}}
\DoxyCodeLine{12408\ \textcolor{comment}{\ \ -\/\ Change\ drflac\_bool*\ types\ to\ unsigned.}}
\DoxyCodeLine{12409\ \textcolor{comment}{\ \ -\/\ Add\ CRC\ checking.\ This\ makes\ dr\_flac\ slower,\ but\ can\ be\ disabled\ with\ \#define\ DR\_FLAC\_NO\_CRC.}}
\DoxyCodeLine{12410\ \textcolor{comment}{}}
\DoxyCodeLine{12411\ \textcolor{comment}{v0.4f\ -\/\ 2017-\/03-\/10}}
\DoxyCodeLine{12412\ \textcolor{comment}{\ \ -\/\ Fix\ a\ couple\ of\ bugs\ with\ the\ bitstreaming\ code.}}
\DoxyCodeLine{12413\ \textcolor{comment}{}}
\DoxyCodeLine{12414\ \textcolor{comment}{v0.4e\ -\/\ 2017-\/02-\/17}}
\DoxyCodeLine{12415\ \textcolor{comment}{\ \ -\/\ Fix\ some\ warnings.}}
\DoxyCodeLine{12416\ \textcolor{comment}{}}
\DoxyCodeLine{12417\ \textcolor{comment}{v0.4d\ -\/\ 2016-\/12-\/26}}
\DoxyCodeLine{12418\ \textcolor{comment}{\ \ -\/\ Add\ support\ for\ 32-\/bit\ floating-\/point\ PCM\ decoding.}}
\DoxyCodeLine{12419\ \textcolor{comment}{\ \ -\/\ Use\ drflac\_int*\ and\ drflac\_uint*\ sized\ types\ to\ improve\ compiler\ support.}}
\DoxyCodeLine{12420\ \textcolor{comment}{\ \ -\/\ Minor\ improvements\ to\ documentation.}}
\DoxyCodeLine{12421\ \textcolor{comment}{}}
\DoxyCodeLine{12422\ \textcolor{comment}{v0.4c\ -\/\ 2016-\/12-\/26}}
\DoxyCodeLine{12423\ \textcolor{comment}{\ \ -\/\ Add\ support\ for\ signed\ 16-\/bit\ integer\ PCM\ decoding.}}
\DoxyCodeLine{12424\ \textcolor{comment}{}}
\DoxyCodeLine{12425\ \textcolor{comment}{v0.4b\ -\/\ 2016-\/10-\/23}}
\DoxyCodeLine{12426\ \textcolor{comment}{\ \ -\/\ A\ minor\ change\ to\ drflac\_bool8\ and\ drflac\_bool32\ types.}}
\DoxyCodeLine{12427\ \textcolor{comment}{}}
\DoxyCodeLine{12428\ \textcolor{comment}{v0.4a\ -\/\ 2016-\/10-\/11}}
\DoxyCodeLine{12429\ \textcolor{comment}{\ \ -\/\ Rename\ drBool32\ to\ drflac\_bool32\ for\ styling\ consistency.}}
\DoxyCodeLine{12430\ \textcolor{comment}{}}
\DoxyCodeLine{12431\ \textcolor{comment}{v0.4\ -\/\ 2016-\/09-\/29}}
\DoxyCodeLine{12432\ \textcolor{comment}{\ \ -\/\ API/ABI\ CHANGE:\ Use\ fixed\ size\ 32-\/bit\ booleans\ instead\ of\ the\ built-\/in\ bool\ type.}}
\DoxyCodeLine{12433\ \textcolor{comment}{\ \ -\/\ API\ CHANGE:\ Rename\ drflac\_open\_and\_decode*()\ to\ drflac\_open\_and\_decode*\_s32().}}
\DoxyCodeLine{12434\ \textcolor{comment}{\ \ -\/\ API\ CHANGE:\ Swap\ the\ order\ of\ "{}channels"{}\ and\ "{}sampleRate"{}\ parameters\ in\ drflac\_open\_and\_decode*().\ Rationale\ for\ this\ is\ to}}
\DoxyCodeLine{12435\ \textcolor{comment}{\ \ \ \ keep\ it\ consistent\ with\ drflac\_audio.}}
\DoxyCodeLine{12436\ \textcolor{comment}{}}
\DoxyCodeLine{12437\ \textcolor{comment}{v0.3f\ -\/\ 2016-\/09-\/21}}
\DoxyCodeLine{12438\ \textcolor{comment}{\ \ -\/\ Fix\ a\ warning\ with\ GCC.}}
\DoxyCodeLine{12439\ \textcolor{comment}{}}
\DoxyCodeLine{12440\ \textcolor{comment}{v0.3e\ -\/\ 2016-\/09-\/18}}
\DoxyCodeLine{12441\ \textcolor{comment}{\ \ -\/\ Fixed\ a\ bug\ where\ GCC\ 4.3+\ was\ not\ getting\ properly\ identified.}}
\DoxyCodeLine{12442\ \textcolor{comment}{\ \ -\/\ Fixed\ a\ few\ typos.}}
\DoxyCodeLine{12443\ \textcolor{comment}{\ \ -\/\ Changed\ date\ formats\ to\ ISO\ 8601\ (YYYY-\/MM-\/DD).}}
\DoxyCodeLine{12444\ \textcolor{comment}{}}
\DoxyCodeLine{12445\ \textcolor{comment}{v0.3d\ -\/\ 2016-\/06-\/11}}
\DoxyCodeLine{12446\ \textcolor{comment}{\ \ -\/\ Minor\ clean\ up.}}
\DoxyCodeLine{12447\ \textcolor{comment}{}}
\DoxyCodeLine{12448\ \textcolor{comment}{v0.3c\ -\/\ 2016-\/05-\/28}}
\DoxyCodeLine{12449\ \textcolor{comment}{\ \ -\/\ Fixed\ compilation\ error.}}
\DoxyCodeLine{12450\ \textcolor{comment}{}}
\DoxyCodeLine{12451\ \textcolor{comment}{v0.3b\ -\/\ 2016-\/05-\/16}}
\DoxyCodeLine{12452\ \textcolor{comment}{\ \ -\/\ Fixed\ Linux/GCC\ build.}}
\DoxyCodeLine{12453\ \textcolor{comment}{\ \ -\/\ Updated\ documentation.}}
\DoxyCodeLine{12454\ \textcolor{comment}{}}
\DoxyCodeLine{12455\ \textcolor{comment}{v0.3a\ -\/\ 2016-\/05-\/15}}
\DoxyCodeLine{12456\ \textcolor{comment}{\ \ -\/\ Minor\ fixes\ to\ documentation.}}
\DoxyCodeLine{12457\ \textcolor{comment}{}}
\DoxyCodeLine{12458\ \textcolor{comment}{v0.3\ -\/\ 2016-\/05-\/11}}
\DoxyCodeLine{12459\ \textcolor{comment}{\ \ -\/\ Optimizations.\ Now\ at\ about\ parity\ with\ the\ reference\ implementation\ on\ 32-\/bit\ builds.}}
\DoxyCodeLine{12460\ \textcolor{comment}{\ \ -\/\ Lots\ of\ clean\ up.}}
\DoxyCodeLine{12461\ \textcolor{comment}{}}
\DoxyCodeLine{12462\ \textcolor{comment}{v0.2b\ -\/\ 2016-\/05-\/10}}
\DoxyCodeLine{12463\ \textcolor{comment}{\ \ -\/\ Bug\ fixes.}}
\DoxyCodeLine{12464\ \textcolor{comment}{}}
\DoxyCodeLine{12465\ \textcolor{comment}{v0.2a\ -\/\ 2016-\/05-\/10}}
\DoxyCodeLine{12466\ \textcolor{comment}{\ \ -\/\ Made\ drflac\_open\_and\_decode()\ more\ robust.}}
\DoxyCodeLine{12467\ \textcolor{comment}{\ \ -\/\ Removed\ an\ unused\ debugging\ variable}}
\DoxyCodeLine{12468\ \textcolor{comment}{}}
\DoxyCodeLine{12469\ \textcolor{comment}{v0.2\ -\/\ 2016-\/05-\/09}}
\DoxyCodeLine{12470\ \textcolor{comment}{\ \ -\/\ Added\ support\ for\ Ogg\ encapsulation.}}
\DoxyCodeLine{12471\ \textcolor{comment}{\ \ -\/\ API\ CHANGE.\ Have\ the\ onSeek\ callback\ take\ a\ third\ argument\ which\ specifies\ whether\ or\ not\ the\ seek}}
\DoxyCodeLine{12472\ \textcolor{comment}{\ \ \ \ should\ be\ relative\ to\ the\ start\ or\ the\ current\ position.\ Also\ changes\ the\ seeking\ rules\ such\ that}}
\DoxyCodeLine{12473\ \textcolor{comment}{\ \ \ \ seeking\ offsets\ will\ never\ be\ negative.}}
\DoxyCodeLine{12474\ \textcolor{comment}{\ \ -\/\ Have\ drflac\_open\_and\_decode()\ fail\ gracefully\ if\ the\ stream\ has\ an\ unknown\ total\ sample\ count.}}
\DoxyCodeLine{12475\ \textcolor{comment}{}}
\DoxyCodeLine{12476\ \textcolor{comment}{v0.1b\ -\/\ 2016-\/05-\/07}}
\DoxyCodeLine{12477\ \textcolor{comment}{\ \ -\/\ Properly\ close\ the\ file\ handle\ in\ drflac\_open\_file()\ and\ family\ when\ the\ decoder\ fails\ to\ initialize.}}
\DoxyCodeLine{12478\ \textcolor{comment}{\ \ -\/\ Removed\ a\ stale\ comment.}}
\DoxyCodeLine{12479\ \textcolor{comment}{}}
\DoxyCodeLine{12480\ \textcolor{comment}{v0.1a\ -\/\ 2016-\/05-\/05}}
\DoxyCodeLine{12481\ \textcolor{comment}{\ \ -\/\ Minor\ formatting\ changes.}}
\DoxyCodeLine{12482\ \textcolor{comment}{\ \ -\/\ Fixed\ a\ warning\ on\ the\ GCC\ build.}}
\DoxyCodeLine{12483\ \textcolor{comment}{}}
\DoxyCodeLine{12484\ \textcolor{comment}{v0.1\ -\/\ 2016-\/05-\/03}}
\DoxyCodeLine{12485\ \textcolor{comment}{\ \ -\/\ Initial\ versioned\ release.}}
\DoxyCodeLine{12486\ \textcolor{comment}{*/}}
\DoxyCodeLine{12487\ }
\DoxyCodeLine{12488\ \textcolor{comment}{/*}}
\DoxyCodeLine{12489\ \textcolor{comment}{This\ software\ is\ available\ as\ a\ choice\ of\ the\ following\ licenses.\ Choose}}
\DoxyCodeLine{12490\ \textcolor{comment}{whichever\ you\ prefer.}}
\DoxyCodeLine{12491\ \textcolor{comment}{}}
\DoxyCodeLine{12492\ \textcolor{comment}{===============================================================================}}
\DoxyCodeLine{12493\ \textcolor{comment}{ALTERNATIVE\ 1\ -\/\ Public\ Domain\ (www.unlicense.org)}}
\DoxyCodeLine{12494\ \textcolor{comment}{===============================================================================}}
\DoxyCodeLine{12495\ \textcolor{comment}{This\ is\ free\ and\ unencumbered\ software\ released\ into\ the\ public\ domain.}}
\DoxyCodeLine{12496\ \textcolor{comment}{}}
\DoxyCodeLine{12497\ \textcolor{comment}{Anyone\ is\ free\ to\ copy,\ modify,\ publish,\ use,\ compile,\ sell,\ or\ distribute\ this}}
\DoxyCodeLine{12498\ \textcolor{comment}{software,\ either\ in\ source\ code\ form\ or\ as\ a\ compiled\ binary,\ for\ any\ purpose,}}
\DoxyCodeLine{12499\ \textcolor{comment}{commercial\ or\ non-\/commercial,\ and\ by\ any\ means.}}
\DoxyCodeLine{12500\ \textcolor{comment}{}}
\DoxyCodeLine{12501\ \textcolor{comment}{In\ jurisdictions\ that\ recognize\ copyright\ laws,\ the\ author\ or\ authors\ of\ this}}
\DoxyCodeLine{12502\ \textcolor{comment}{software\ dedicate\ any\ and\ all\ copyright\ interest\ in\ the\ software\ to\ the\ public}}
\DoxyCodeLine{12503\ \textcolor{comment}{domain.\ We\ make\ this\ dedication\ for\ the\ benefit\ of\ the\ public\ at\ large\ and\ to}}
\DoxyCodeLine{12504\ \textcolor{comment}{the\ detriment\ of\ our\ heirs\ and\ successors.\ We\ intend\ this\ dedication\ to\ be\ an}}
\DoxyCodeLine{12505\ \textcolor{comment}{overt\ act\ of\ relinquishment\ in\ perpetuity\ of\ all\ present\ and\ future\ rights\ to}}
\DoxyCodeLine{12506\ \textcolor{comment}{this\ software\ under\ copyright\ law.}}
\DoxyCodeLine{12507\ \textcolor{comment}{}}
\DoxyCodeLine{12508\ \textcolor{comment}{THE\ SOFTWARE\ IS\ PROVIDED\ "{}AS\ IS"{},\ WITHOUT\ WARRANTY\ OF\ ANY\ KIND,\ EXPRESS\ OR}}
\DoxyCodeLine{12509\ \textcolor{comment}{IMPLIED,\ INCLUDING\ BUT\ NOT\ LIMITED\ TO\ THE\ WARRANTIES\ OF\ MERCHANTABILITY,}}
\DoxyCodeLine{12510\ \textcolor{comment}{FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE\ AND\ NONINFRINGEMENT.\ IN\ NO\ EVENT\ SHALL\ THE}}
\DoxyCodeLine{12511\ \textcolor{comment}{AUTHORS\ BE\ LIABLE\ FOR\ ANY\ CLAIM,\ DAMAGES\ OR\ OTHER\ LIABILITY,\ WHETHER\ IN\ AN}}
\DoxyCodeLine{12512\ \textcolor{comment}{ACTION\ OF\ CONTRACT,\ TORT\ OR\ OTHERWISE,\ ARISING\ FROM,\ OUT\ OF\ OR\ IN\ CONNECTION}}
\DoxyCodeLine{12513\ \textcolor{comment}{WITH\ THE\ SOFTWARE\ OR\ THE\ USE\ OR\ OTHER\ DEALINGS\ IN\ THE\ SOFTWARE.}}
\DoxyCodeLine{12514\ \textcolor{comment}{}}
\DoxyCodeLine{12515\ \textcolor{comment}{For\ more\ information,\ please\ refer\ to\ <http://unlicense.org/>}}
\DoxyCodeLine{12516\ \textcolor{comment}{}}
\DoxyCodeLine{12517\ \textcolor{comment}{===============================================================================}}
\DoxyCodeLine{12518\ \textcolor{comment}{ALTERNATIVE\ 2\ -\/\ MIT\ No\ Attribution}}
\DoxyCodeLine{12519\ \textcolor{comment}{===============================================================================}}
\DoxyCodeLine{12520\ \textcolor{comment}{Copyright\ 2023\ David\ Reid}}
\DoxyCodeLine{12521\ \textcolor{comment}{}}
\DoxyCodeLine{12522\ \textcolor{comment}{Permission\ is\ hereby\ granted,\ free\ of\ charge,\ to\ any\ person\ obtaining\ a\ copy\ of}}
\DoxyCodeLine{12523\ \textcolor{comment}{this\ software\ and\ associated\ documentation\ files\ (the\ "{}Software"{}),\ to\ deal\ in}}
\DoxyCodeLine{12524\ \textcolor{comment}{the\ Software\ without\ restriction,\ including\ without\ limitation\ the\ rights\ to}}
\DoxyCodeLine{12525\ \textcolor{comment}{use,\ copy,\ modify,\ merge,\ publish,\ distribute,\ sublicense,\ and/or\ sell\ copies}}
\DoxyCodeLine{12526\ \textcolor{comment}{of\ the\ Software,\ and\ to\ permit\ persons\ to\ whom\ the\ Software\ is\ furnished\ to\ do}}
\DoxyCodeLine{12527\ \textcolor{comment}{so.}}
\DoxyCodeLine{12528\ \textcolor{comment}{}}
\DoxyCodeLine{12529\ \textcolor{comment}{THE\ SOFTWARE\ IS\ PROVIDED\ "{}AS\ IS"{},\ WITHOUT\ WARRANTY\ OF\ ANY\ KIND,\ EXPRESS\ OR}}
\DoxyCodeLine{12530\ \textcolor{comment}{IMPLIED,\ INCLUDING\ BUT\ NOT\ LIMITED\ TO\ THE\ WARRANTIES\ OF\ MERCHANTABILITY,}}
\DoxyCodeLine{12531\ \textcolor{comment}{FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE\ AND\ NONINFRINGEMENT.\ IN\ NO\ EVENT\ SHALL\ THE}}
\DoxyCodeLine{12532\ \textcolor{comment}{AUTHORS\ OR\ COPYRIGHT\ HOLDERS\ BE\ LIABLE\ FOR\ ANY\ CLAIM,\ DAMAGES\ OR\ OTHER}}
\DoxyCodeLine{12533\ \textcolor{comment}{LIABILITY,\ WHETHER\ IN\ AN\ ACTION\ OF\ CONTRACT,\ TORT\ OR\ OTHERWISE,\ ARISING\ FROM,}}
\DoxyCodeLine{12534\ \textcolor{comment}{OUT\ OF\ OR\ IN\ CONNECTION\ WITH\ THE\ SOFTWARE\ OR\ THE\ USE\ OR\ OTHER\ DEALINGS\ IN\ THE}}
\DoxyCodeLine{12535\ \textcolor{comment}{SOFTWARE.}}
\DoxyCodeLine{12536\ \textcolor{comment}{*/}}

\end{DoxyCode}
